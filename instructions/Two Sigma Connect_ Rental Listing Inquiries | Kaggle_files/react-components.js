webpackJsonp([0],[function(e,t,a){"use strict";var n=a(1),s=a(23),i=a(36),r=a(171),o=a(189),l=a(191),c=a(192),p=a(206),u=a(207),d=a(211),m=a(227),h=a(228),g=a(233),f=a(248),v=a(249),y=a(266),_=a(302),b=a(315);window.KaggleReactComponents={ScriptList:n.ScriptList,VoteButton:s.VoteButton,ScriptViewer:i.ScriptViewerApp,DatasetContainer:r.DatasetContainer,DatasetListReact:o.DatasetListReact,Discussion:l.Discussion,NotebookEditor:c.NotebookEditor,SiteForum:p.SiteForum,SiteHeaderContainer:u.SiteHeaderContainer,ProfileContainerReact:d.ProfileContainer,Leaderboards:m.Leaderboards,OrganizationProfileContainer:h.OrganizationProfileContainer,NewsfeedContainer:g.NewsfeedContainer,ViewCompetitionList:f.ViewCompetitionList,ScriptEditorContainer:v.ScriptEditorContainer,CompetitionContainer:y.CompetitionContainer,ReactComponentsContainer:_.ReactComponentsContainer,AdminHomeContainer:b.AdminHomeContainer}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(3),r=a(4),o=a(5),l=a(6),c=a(7),p=a(11),u=a(13),d=a(23),m=a(26),h=a(27),g=a(29),f=a(30),v=a(32),y=a(33),_=a(34),b=a(35),E={notebook:"fa-globe",data:"fa-table",visualization:"fa-bar-chart",other:"fa-file-text-o"},R=function(){function e(e,t){var a=this;this.parseQueryString=function(e){if(e.length){for(var t={},a=void 0,n=e.replace(/\?/g,"").split("&"),s=0,i=n;s<i.length;s++){var r=i[s];a=r.split("="),t[a[0]]=a[1]}return t}return{}},this.removeDefaultFilters=function(e){for(var t={},n=0,s=Object.keys(e);n<s.length;n++){var i=s[n];e[i]!=a.defaultFilters[i]&&(t[i]=e[i])}return t},this.pushNewFilteredUrl=function(e){var t=window.location.pathname+window.location.search,n=window.history.state||{},i=window.location.pathname;n.scriptListFilterState=a.removeDefaultFilters(e),Object.keys(n.scriptListFilterState).length&&(i+="?"+s.param(n.scriptListFilterState)),t!=i&&window.history.pushState(n,"",i)},this.onWindowPopState=function(e){e.state&&e.state.scriptListFilterState&&a.filtersChangedCallback(e.state.scriptListFilterState)},this.updateFilters=function(e,t){s.extend(e,t),a.pushNewFilteredUrl(e),a.filtersChangedCallback(e)},this.baseUrl=window.location.href.split("?")[0],this.defaultFilters=t,this.filters=window.location.search.length?this.parseQueryString(window.location.search):this.defaultFilters,this.filtersChangedCallback=e,this.pushNewFilteredUrl(this.filters)}return e.prototype.scriptListWillMount=function(){window.addEventListener("popstate",this.onWindowPopState,!1)},e.prototype.scriptListWillUnmount=function(){window.removeEventListener("popstate",this.onWindowPopState,!1)},e}(),w=function(e){function t(t){var a=e.call(this,t)||this;return a.loadMoreData=function(e){var t=a.state.scriptData,n=a.props.sourceBaseUrl+t.length.toString(),i=!1;if(e){e.userId&&e.userId.toString().length&&(i=!0);var r=s.param(a.filterManager.removeDefaultFilters(e));r&&(n+="?"+r)}a.currentDataRequest&&4!==a.currentDataRequest.readyState&&a.currentDataRequest.abort(),a.setState({onlyMyScripts:i,isLoadingMoreData:!0},function(){a.currentDataRequest=s.getJSON(n,function(e){a.setState({scriptData:t.concat(e),isLoadingMoreData:!1,hasMoreData:e.length>0,hasLoadedSomeData:!0})})})},a.getListTitle=function(){return a.state.scriptData&&!a.state.isLoadingMoreData?(a.state.scriptData[0]?a.state.scriptData[0].totalScripts:0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" kernels":" "},a.onFiltersChanged=function(e){a.setState({filters:e,scriptData:[],hasMoreData:!0,hasLoadedSomeData:!1},function(){return a.loadMoreData(e)})},a.onNewSort=function(e){a.showMobileSortMenu(!1),a.filterManager.updateFilters(a.state.filters,{sortBy:e})},a.onNewLanguage=function(e){a.showMobileSortMenu(!1),a.filterManager.updateFilters(a.state.filters,{language:e})},a.onNewOutputType=function(e){a.showMobileSortMenu(!1),a.filterManager.updateFilters(a.state.filters,{outputType:e})},a.onNewOutputTypeClickEvent=function(e,t){t.preventDefault(),a.onNewOutputType(e)},a.onNewLanguageClickEvent=function(e,t){t.preventDefault(),a.onNewLanguage(e)},a.onScroll=function(){a.state.hasMoreData&&!a.state.isLoadingMoreData&&a.loadMoreData(a.state.filters)},a.myScriptsToggle=function(e){var t="my"===e;return l.Current.userId?void a.setState({onlyMyScripts:t,selectionGroup:e},function(){var e=a.state.onlyMyScripts?l.Current.userId.toString():"";a.filterManager.updateFilters(a.state.filters,{userId:e})}):void(document.location.href=a.props.loginAndReturnUrl)},a.renderOutputTypeOption=function(e){return React.createElement("span",null,React.createElement("span",{className:r("fa",E[e.value.toLowerCase()])})," ",e.label)},a.searchOptionsList=function(e,t){for(var a=0,n=e;a<n.length;a++){var s=n[a];if(s.value==t)return s}return e[0]},a.defaultFilters={sortBy:"hotness",language:"all",outputType:"all",userId:""},a.filterManager=new R(a.onFiltersChanged,a.defaultFilters),a.props.userId?a.initForUserProfile():a.initForScriptsTab(),a.state={filters:s.extend({},a.defaultFilters,a.initialFilters),scriptData:[],isLoadingMoreData:!1,hasMoreData:!0,onlyMyScripts:!1,selectionGroup:a.props.selectionGroup,availableLanguages:[{label:"All Languages",value:"all"}],availableOutputs:[{label:"All Output Types",value:"all"}],hasLoadedSomeData:!1,shouldShowMobileSortMenu:!1},a}return n(t,e),t.prototype.initForUserProfile=function(){var e=this;this.availableSelectionGroups=[{key:"my",name:this.props.userId===l.Current.userId?"Mine":"Published",action:function(){return e.onSelectionGroupChange("my")}},{key:"draft",name:"Draft",action:function(){return e.onSelectionGroupChange("draft")}},this.props.showHiddenSelectionGroup?{key:"hidden",name:"Hidden",action:function(){return e.onSelectionGroupChange("hidden")}}:null,{separator:!0},{key:"upvoted",name:"Upvoted",action:function(){return e.onSelectionGroupChange("upvoted")}}],this.initialFilters={userId:this.props.userId,sortBy:"votes"},this.availableSortingOrders=[{value:"votes",label:"Most Votes"},{value:"hotness",label:"Hotness"},{value:"date",label:"Most Recent"}]},t.prototype.initForScriptsTab=function(){var e=this;this.availableSelectionGroups=[{key:"everyone",name:"All",action:function(){return e.myScriptsToggle("everyone")}},{key:"my",name:"Mine",action:function(){return e.myScriptsToggle("my")}}],this.initialFilters={},this.availableSortingOrders=[{value:"hotness",label:"Hotness"},{value:"votes",label:"Most Votes"},{value:"date",label:"Most Recent"}]},t.prototype.componentDidMount=function(){this.filterManager.scriptListWillMount(),this.props.showFilters&&(this.loadLanguagesMetadata(),this.loadOutputTypesMetadata()),this.loadMoreData(s.extend(this.state.filters,window.history.state))},t.prototype.componentWillUnmount=function(){this.filterManager.scriptListWillUnmount(),this.currentDataRequest&&this.currentDataRequest.abort()},t.prototype.onSelectionGroupChange=function(e){var t=this;this.setState({filters:s.extend(this.state.filters,{group:e}),scriptData:[],hasMoreData:!0,selectionGroup:e},function(){t.loadMoreData(t.state.filters)})},t.prototype.loadLanguagesMetadata=function(){var e=this;s.getJSON(this.props.languagesMetadataUrl,function(t){e.setState({availableLanguages:[{label:"All Languages",value:"all"}].concat(t.map(function(e){return{label:e,value:e}}))})})},t.prototype.loadOutputTypesMetadata=function(){var e=this;s.getJSON(this.props.outputTypesMetadataUrl,function(t){e.setState({availableOutputs:[{label:"All Output Types",value:"all"}].concat(t.map(function(e){return{label:e,value:e}}))})})},t.prototype.showMobileSortMenu=function(e){this.setState({shouldShowMobileSortMenu:e})},t.prototype.render=function(){var e=this,t=this.state.isLoadingMoreData?React.createElement("div",{className:"script-list-react__message"},"Loading ",this.state.hasLoadedSomeData?"more ":"","kernels..."):null,a=this.state.hasMoreData?null:React.createElement("div",{className:"script-list-react__message"},React.createElement("span",null,"No ",this.state.hasLoadedSomeData?"more ":"","kernels to show ¯\\_(ツ) _/¯"),React.createElement("br",null)),n=React.createElement("div",null,React.createElement(g.MediaQuery,{minWidth:g.Breakpoints.desktopMin},React.createElement("div",{className:"script-list-react__sort"},React.createElement("div",{className:"script-list-react__sort-label"},"Sort By"),React.createElement(u.SelectBox,{options:this.availableSortingOrders,onChange:this.onNewSort,searchable:!1,value:this.state.filters.sortBy||this.defaultFilters.sortBy}))),React.createElement(g.MediaQuery,{minWidth:0,maxWidth:g.Breakpoints.tabletMax},React.createElement("a",{className:"script-list-react__sort-link--mobile",onClick:function(t){return e.showMobileSortMenu(!0)}},"Filter/Sort ",React.createElement("span",{className:"fa fa-chevron-right"})))),s=React.createElement(g.MediaQuery,{minWidth:g.Breakpoints.desktopMin},React.createElement("div",{className:"script-list-react__filters"},React.createElement(u.SelectBox,{options:this.state.availableLanguages,onChange:this.onNewLanguage,searchable:!1,value:this.state.filters.language||this.defaultFilters.language,className:"KaggleBoxlessSelectSafe script-list-react__filters__language"}),React.createElement(u.SelectBox,{options:this.state.availableOutputs,onChange:this.onNewOutputType,value:this.state.filters.outputType||this.defaultFilters.outputType,searchable:!1,optionRenderer:this.renderOutputTypeOption,valueRenderer:this.renderOutputTypeOption,className:"KaggleBoxlessSelectSafe script-list-react__filters__output-type"}))),i=React.createElement("div",{className:"script-list-react__selection-groups"},React.createElement(h.SelectionGroup,{children:this.availableSelectionGroups,filters:s,selected:this.state.selectionGroup}));return this.props.isHidden?null:React.createElement("div",null,this.props.banner?React.createElement(p.Banner,{title:"Kernels",infoTitle:"Welcome to Kaggle Kernels",infoSubtitle:"The best place to explore data science results and share your own work",bannerImageClassName:"script-list-react__banner-image",infoBanner:this.props.banner,hideCallToActionOnSmallDisplays:!0,panels:[{imageSrc:"/static/images/scripts-code.svg",title:"Code",description:"Skip the download. Kernels is preloaded with the most common data science languages and libraries."},{imageSrc:"/static/images/scripts-learn.svg",title:"Learn",description:"Gain exposure to new tools and techniques. The “hottest” kernels showcase the best work on Kaggle."},{imageSrc:"/static/images/scripts-mentor.svg",title:"Mentor",description:"Give back by sharing what you know. You can answer questions and leave feedback on others’ code and results."}]}):null,React.createElement("div",{className:"script-list-react__wrapper"},React.createElement(o.ContentBox,{title:this.getListTitle(),titleBarRightSide:this.props.showFilters?n:null,subTitleBar:this.props.showFilters?i:null},React.createElement("div",{className:"script-list-react"},React.createElement(m.WindowInfiniteScroll,{onScroll:function(){return e.onScroll()}},React.createElement("div",null,this.state.scriptData.map(function(t,a){return React.createElement(v.BlockLink,{href:t.scriptUrl,key:a},React.createElement(C,{scriptData:t,handleLanguageChange:e.onNewLanguageClickEvent,handleOutputTypeChange:e.onNewOutputTypeClickEvent,showScriptProjectColumn:e.props.showScriptProjectName,showProjectThumbnails:!!e.props.userId}))})),t,a)))),React.createElement(g.MediaQuery,{minWidth:0,maxWidth:g.Breakpoints.tabletMax},React.createElement(f.OffCanvasContainer,{closeButtonCallback:function(){return e.showMobileSortMenu(!1)},shouldShowOffCanvas:this.state.shouldShowMobileSortMenu,shouldUseCloseButton:!0,shouldUseRightSide:!0},React.createElement("div",{className:"script-list-react__sort-menu--mobile"},React.createElement("p",{className:"script-list-react__sort-label--mobile"},"Sort By"),React.createElement(u.SelectBox,{className:"script-list-react__sort-box--mobile",options:this.availableSortingOrders,onChange:this.onNewSort,searchable:!1,value:this.state.filters.sortBy||this.defaultFilters.sortBy}),React.createElement("p",{className:"script-list-react__sort-label--mobile"},"Languages"),React.createElement(u.SelectBox,{className:"script-list-react__sort-box--mobile",options:this.state.availableLanguages,onChange:this.onNewLanguage,searchable:!1,value:this.state.filters.language||this.defaultFilters.language}),React.createElement("p",{className:"script-list-react__sort-label--mobile"},"Output Types"),React.createElement(u.SelectBox,{className:"script-list-react__sort-box--mobile",options:this.state.availableOutputs,onChange:this.onNewOutputType,value:this.state.filters.outputType||this.defaultFilters.outputType,searchable:!1,optionRenderer:this.renderOutputTypeOption,valueRenderer:this.renderOutputTypeOption})))))},t}(React.Component);t.ScriptList=w;var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderOutputType=function(e){var t=this,a=function(){switch(e.extension){case"Notebook":return["fa-globe","This script outputs a notebook"];case"Visualization":return["fa-bar-chart","This script outputs "+i("visualization",e.count,!0)];case"Data":return["fa-table","This script outputs "+e.count+" data "+i("file",e.count)];case"Other":return["fa-file-text-o","This script outputs "+e.count+" other types of "+i("file",e.count)];default:return["","Unknown"]}}();return React.createElement(y.ToolTip,{tipText:a[1].toString(),key:e.extension},React.createElement("a",{className:"scripts__item-info-block--link",onClick:function(a){return t.props.handleOutputTypeChange(e.extension,a)}},React.createElement("span",{className:"fa "+a[0]})))},t.prototype.abbrLanguage=function(e){switch(e){case"Python":return"Py";case"R":return"R";case"Julia":return"Ju";case"SQLite":return"SQL";default:return null}},t.prototype.renderOptionalForkSection=function(){var e=function(e){return i("line",e,!0)};return this.props.scriptData.isFork?React.createElement("span",null,"(",React.createElement("span",{title:e(this.props.scriptData.forkDiffLinesInserted)+" inserted / "+e(this.props.scriptData.forkDiffLinesDeleted)+" deleted / "+e(this.props.scriptData.forkDiffLinesChanged)+" changed from parent script"}," ",React.createElement("a",{href:this.props.scriptData.forkDiffUrl},React.createElement("span",{className:"scripts__item-diff"},React.createElement("span",{className:"scripts__item-diff-inserted"},"+",this.props.scriptData.forkDiffLinesInserted)," / ",React.createElement("span",{className:"scripts__item-diff-deleted"},"-",this.props.scriptData.forkDiffLinesDeleted)," / ",React.createElement("span",{className:"scripts__item-diff-changed"},"~",this.props.scriptData.forkDiffLinesChanged)))," )")):null},t.prototype.renderOptionalScriptProjectName=function(){return this.props.showScriptProjectColumn?React.createElement("span",null,"in ",React.createElement("a",{href:this.props.scriptData.projectScriptsUrl},this.props.scriptData.projectName)):null},t.prototype.render=function(){var e=this,t=this.props.scriptData;return this.props.isHidden?null:React.createElement("div",{className:"scripts"},React.createElement("div",{className:"scripts__item-meta"},React.createElement("div",{className:"scripts__item-votes"},React.createElement(d.VoteButton,{totalVotes:t.totalVotes,hasAlreadyVotedUp:t.currentUserHasVotedForThisScript,voteUpUrl:"/kernels/vote?id="+t.id,canDownvote:!1,canUpvote:!0,voteDownUrl:null,hasAlreadyVotedDown:null,upVoteIntercomEventName:"upvote_script"})),React.createElement(g.MediaQuery,{minWidth:g.Breakpoints.tabletMin},React.createElement("div",{className:"scripts__item-image-wrapper"},this.props.showProjectThumbnails?React.createElement(y.ToolTip,{tipText:t.projectName},React.createElement("a",{href:t.projectScriptsUrl},React.createElement("img",{src:t.projectThumbnailUrl,className:"scripts__item-image scripts__item-image--left"}))):React.createElement(_.Avatar,{thumbnailUrl:t.author.avatarThumbnailUrl,userUrl:t.author.profileUrl,displayName:t.author.displayName,tier:t.author.tier,width:40}))),React.createElement("div",{className:"scripts__item-medals"},null!=this.props.scriptData.medal?React.createElement("img",{src:"/static/images/medals/kernels/"+this.props.scriptData.medal+"L@2x.png",title:"${this.props.scriptData.medal}"}):null))," ",React.createElement("div",{className:"scripts__item-synopsis"},React.createElement("div",{className:"scripts__item-info"},React.createElement("a",{className:"scripts__item-name",href:t.scriptUrl},t.title,t.isPrivate&&React.createElement(b.Badge,{text:"Private",icon:"fa-eye-slash",option:"info"})),React.createElement("p",{className:"scripts__item-details"},React.createElement("span",null,"run "),React.createElement(c.TimeAgo,{time:t.lastRunTime})," by ",React.createElement("a",{href:t.author.profileUrl},t.author.displayName)," ",this.renderOptionalForkSection()," ",this.renderOptionalScriptProjectName())),React.createElement("div",{className:"scripts__item-info-blocks"},t.outputTypes.map(function(t){return e.renderOutputType(t)}),React.createElement(y.ToolTip,{tipText:"This script is written in "+t.languageName},React.createElement("a",{className:"scripts__item-info-block--link",onClick:function(a){return e.props.handleLanguageChange(t.languageName,a)}},this.abbrLanguage(t.languageName))),t.totalComments>0?React.createElement(y.ToolTip,{tipText:"This script has "+t.totalComments+" "+i("comment",t.totalComments)},React.createElement("a",{className:"scripts__item-info-block--comment",href:t.scriptCommentsUrl},React.createElement("span",null,t.totalComments," ",React.createElement("span",{className:"fa fa-comments"})))):React.createElement(g.MediaQuery,{minWidth:g.Breakpoints.tabletMin},React.createElement("div",{className:"scripts__item-info-block--no-comment"}))))," ")},t}(React.Component)},function(e,t){e.exports=jQuery},,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(t){var a=e.call(this,t)||this;return a.toggleCollapsed=function(){a.setState({isCollapsed:!a.state.isCollapsed})},a.state={isCollapsed:a.props.initiallyCollapsed},a.collapsedClass="fa fa-"+(a.props.collapsedIconFontAwesomeClass||"plus-square-o"),a.expandedClass="fa fa-"+(a.props.expandedIconFontAwesomeClassedIcon||"minus-square-o"),a.props.titleHref&&console.warn("titleHref not supported in CollapsibleContentBox"),a.props.title||console.warn("Untitled CollapsibleContentBox not supported"),a}return n(t,e),t.prototype.render=function(){var e="content-box__expand-toggle "+(this.state.isCollapsed?this.collapsedClass:this.expandedClass);return React.createElement("div",{className:s("content-box",this.props.containerClassName)},this.props.showLoader?React.createElement("div",{className:"content-box__loader-overlay"},React.createElement("div",{className:"content-box__loader-icon fa fa-refresh fa-spin fa-3x fa-fw margin-bottom"}),React.createElement("div",{className:"content-box__loader-message"},this.props.loaderMessage||"Please wait...")):"",React.createElement("div",{className:"content-box__title-bar--collapsible",onClick:this.toggleCollapsed},React.createElement("div",{className:e}),React.createElement("div",{className:"content-box__title"},this.props.title),this.props.titleBarRightSide?React.createElement("div",{className:"content-box__right-side"},this.props.titleBarRightSide):null),this.state.isCollapsed?null:React.createElement("div",{className:s("content-box__content-section",this.props.contentClassName)},this.props.subTitleBar?React.createElement("div",{className:"content-box__subtitle-bar"},this.props.subTitleBar):null,this.props.children))},t}(React.Component);t.CollapsibleContentBox=i,i.docs={title:"CollapsibleContentBox",description:"Collapsable containing element for content on the site.",examples:[React.createElement(i,{children:React.createElement("p",null,"Content!"),initiallyCollapsed:!0,title:"Title",titleBarRightSide:"Right side"})],staticMarkup:'<CollapsibleContentBox\n    children={<p>Content!</p>}\n    initiallyCollapsed={true}\n    title="Title"\n    titleBarRightSide="Right side" />'};var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=React.createElement("div",{className:"content-box__title-bar"},React.createElement("div",{className:"content-box__title"},this.props.title),this.props.titleBarRightSide?React.createElement("div",{className:"content-box__right-side"},this.props.titleBarRightSide):null);return this.props.title?React.createElement("div",{className:s("content-box",{"content-box--grow":this.props.growVertically},this.props.containerClassName)},this.props.showLoader?React.createElement("div",{className:"content-box__loader-overlay"},React.createElement("div",{className:"content-box__loader-icon fa fa-refresh fa-spin fa-3x fa-fw margin-bottom"}),React.createElement("div",{className:"content-box__loader-message"},this.props.loaderMessage||"Please wait...")):"",this.props.titleHref?React.createElement("a",{className:"content-box__title-bar--link",href:this.props.titleHref},e):this.props.onTitleClick?React.createElement("div",{className:"content-box__title-bar--link",onClick:this.props.onTitleClick},e):React.createElement("div",null,e),React.createElement("div",{className:s("content-box__content-section",this.props.contentClassName)},this.props.subTitleBar?React.createElement("div",{className:"content-box__subtitle-bar"},this.props.subTitleBar):null,this.props.children)):React.createElement("div",{className:s("content-box","content-box--no-title",this.props.containerClassName)},React.createElement("div",{className:s("content-box__content-section content-box__content-section--no-title",this.props.contentClassName)},React.createElement("div",{className:"content-box__simple-content-box"},React.createElement("div",{className:"content-box__simple-content"},this.props.children))))},t}(React.Component);t.ContentBox=r,r.docs={title:"ContentBox",description:"Typical containing element for much of the content on the site.",examples:[React.createElement(r,{children:React.createElement("p",null,"Content!"),title:"Title",titleHref:"#",titleBarRightSide:"Right side"})],staticMarkup:'<ContentBox\n    children={<p>Content!</p>}\n    title="Title"\n    titleHref="#"\n    titleBarRightSide="Right side" />'}},function(e,t){"use strict";t.Current=window.Kaggle.Current,t.Current.docs={title:"Current",description:"Get current information regarding the user or environment.",examples:[React.createElement("p",null,"Display Name: "+t.Current.userDisplayName),React.createElement("p",null,"isAdmin: "+t.Current.isAdmin)],staticMarkup:"<p>Display Name: {Current.userDisplayName}<p>\n<p>isAdmin: {Current.isAdmin}<p>"}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(8),i=36e5,r=864e5,o=function(e){function t(t){var a=e.call(this,t)||this;switch(a.diff=(new Date).getTime()-new Date(a.props.time.toString()).getTime(),a.props.maxGranularity){case"hour":a.setOverride(i,"in the past hour");break;case"day":a.setOverride(r,"in the past day");break;default:var n=a.props.condense?"now":"just now";a.override=Math.abs(a.diff)<=1e4?n:null}return a.isFutureDate=new Date<new Date(a.props.time),a.props.futureDateMessage&&a.isFutureDate&&(a.override=a.props.futureDateMessage),a}return n(t,e),t.prototype.setOverride=function(e,t){this.override=this.diff<e?t:null},t.prototype.render=function(){return this.props.condense?s.updateLocale("en",{relativeTime:{future:"in %s",past:"%s",s:"~10s",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"}}):s.updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds ago",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),React.createElement("span",{className:this.props.className,title:this.override||new Date(this.props.time.toString()).toString()},this.override||s(this.props.time).fromNow(!0)+" "+(this.isFutureDate?this.props.hideToGo?"":this.props.toGoOverride||"to go":this.props.hideAgo?"":this.props.agoOverride||"ago"))},t}(React.Component);t.TimeAgo=o},,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(12),i=a(4),r=a(2),o=function(e){function t(t){var a=e.call(this,t)||this;return a.state={infoBannerIsVisible:a.props.infoBanner?a.props.infoBanner.isVisible:!1},a}return n(t,e),t.prototype.onDismiss=function(){r.ajax({type:"POST",url:this.props.infoBanner.dismissBannerUrl}),this.setState({infoBannerIsVisible:!1})},t.prototype.renderCallToAction=function(){return this.props.callToActionText?React.createElement("div",{className:i("title-banner__call-to-action",this.props.hideCallToActionOnSmallDisplays?"title-banner__call-to-action--hide-on-small-displays":null)},React.createElement(s.Button,{text:this.props.callToActionText,href:this.props.callToActionUrl,onClick:this.props.onCallToActionClick}),this.props.callToActionText2?React.createElement("span",{style:{marginRight:"15px"}}):null,this.props.callToActionText2?React.createElement(s.Button,{text:this.props.callToActionText2,href:this.props.callToActionUrl2,onClick:this.props.onCallToActionClick2}):null):null},t.prototype.render=function(){var e=this;return React.createElement("div",null,React.createElement("div",{className:i("title-banner",this.props.bannerImageClassName,this.state.infoBannerIsVisible?"title-banner--show-only-on-mobile":null)},React.createElement("div",{className:"title-banner__title-container"},React.createElement("div",{className:"title-banner__title"},this.props.title)),this.renderCallToAction()),this.state.infoBannerIsVisible?React.createElement("div",{className:"info-banner info-banner--hide-on-mobile"},React.createElement("div",{className:"info-banner__container"},React.createElement("div",{className:"info-banner__main-content"},React.createElement("h1",{className:"info-banner__title"},this.props.infoTitle),React.createElement("h2",{className:"info-banner__subtitle"},this.props.infoSubtitle),React.createElement("hr",{className:"info-banner__divider"}),React.createElement("ul",{className:"info-banner__details"},this.props.panels.map(function(e,t){return React.createElement("li",{className:"info-banner__detail",key:t},React.createElement("img",{alt:e.title,className:"info-banner__detail-image",src:e.imageSrc}),React.createElement("h3",{className:"info-banner__detail-title"},e.title),React.createElement("p",{className:"info-banner__detail-text"},e.description))})),this.renderCallToAction())),this.props.infoBanner.dismissBannerUrl?React.createElement("div",{className:"info-banner__dismiss-container"},React.createElement("span",{className:"info-banner__dismiss",onClick:function(){return e.onDismiss()}},React.createElement("span",{className:"fa fa-times"})," Dismiss")):null):null)},t}(React.Component);t.Banner=o,o.docs={description:"A component for displaying introductory or important information. Usually at the top of a page.",examples:[React.createElement(o,{title:"Kaggle Rankings",bannerImageClassName:"leaderboards__banner-image"})],staticMarkup:'<Banner \n    title="Kaggle Rankings"\n    bannerImageClassName="leaderboards__banner-image" />',title:"Banner"}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement("a",{href:this.props.href,className:s("button__anchor-wrapper",this.props.containerClassNames?this.props.containerClassNames:null,this.props.isSmall?"button__anchor-wrapper--small":null),onClick:this.props.isDisabled||!this.props.onClick?null:function(t){return e.props.onClick(t)},target:this.props.target},React.createElement("div",{className:s("button",this.props.classNames?this.props.classNames:null,this.props.toggleable?"button--toggleable":null,this.props.isSmall?"button--small":null,this.props.toggleable&&!this.props.toggled?"button--inactive":null,this.props.isDisabled?"button--disabled":null)},React.createElement("span",null,this.props.text)))},t}(React.Component);t.Button=i,i.docs={description:"A beautiful button to meet your clicky needs.",examples:[React.createElement(i,{text:"Test Button"}),React.createElement(i,{text:"Disabled Button!",isDisabled:!0})],staticMarkup:'<Button text="Test Button" />\n<Button text= "Disabled Button!" isDisabled />',title:"Button"}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(4),r=a(14),o=function(e){function t(t){var a=e.call(this,t)||this;return a.state={selectedValue:a.props.value},a}return n(t,e),t.prototype.change=function(e){var t=this,a=e.value;this.setState({selectedValue:a},function(){return t.props.onChange(a)})},t.prototype.render=function(){var e=this;return React.createElement(r,s({},this.props,{className:i("KaggleSelect",this.props.className),onChange:function(t){return e.change(t)},clearable:this.props.clearable?this.props.clearable:!1}))},t}(React.Component);t.SelectBox=o},,,,,,,,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(24),r=a(4),o=a(6),l=a(25),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleKeyDown=function(e){27==e.keyCode&&t.props.handleModalClose()},t.handleStopPropagation=function(e){e.stopPropagation()},t}return n(t,e),t.prototype.componentDidMount=function(){$(document.body).on("keydown",this.handleKeyDown)},t.prototype.componentWillUnmount=function(){$(document.body).off("keydown",this.handleKeyDown)},t.prototype.render=function(){var e=500,t=$(window).width(),a=Math.floor((t-e)/2),n={marginLeft:a+"px",marginRight:a+"px"};return React.createElement("div",{className:"vote-button__voters-outer"},React.createElement("div",{className:"vote-button__voters-modal-background",onClick:this.props.handleModalClose}),React.createElement("div",{className:"vote-button__voters-modal",style:n},React.createElement("div",{className:"vote-button__voters-modal-title-bar"},React.createElement("div",{className:"vote-button__voters-modal-title"},"Voters"),React.createElement("div",{className:"vote-button__voters-modal-close"},React.createElement("span",{className:"fa fa-close",onClick:this.props.handleModalClose}))),React.createElement("div",{className:"vote-button__voters-modal-inner"},this.props.voters.map(function(e,t){return React.createElement("div",{className:"vote-button__voters-model-item"},React.createElement(l.UserCard,s({key:"voter-"+t},e)))}))))},t}(React.Component);t.VoteButtonModal=c;var p=function(e){function t(t){var a=e.call(this,t)||this;return a.onVoteUp=function(e){if(e.stopPropagation(),a.readyToVote()&&a.props.canUpvote){
a.props.upVoteIntercomEventName&&window.Intercom("trackEvent",a.props.upVoteIntercomEventName);var t,n=a.state;if(a.state.hasAlreadyVotedDown){t={hasAlreadyVotedDown:!1,hasAlreadyVotedUp:!0,totalVotes:a.state.totalVotes+2,voteRequestInFlight:!0};var s={hasAlreadyVotedDown:!1,hasAlreadyVotedUp:!1,totalVotes:a.state.totalVotes+1,voteRequestInFlight:!1};return void a.processTwoPartVote(t,n,s,a.props.voteDownUrl,"DELETE",a.props.voteUpUrl,"POST")}var r=null;a.state.voters&&(r=a.state.voters.slice(),a.state.hasAlreadyVotedUp?r.splice(i.findIndex(r,a.props.currentUserInfo),1):r=[a.props.currentUserInfo].concat(r)),t=a.state.hasAlreadyVotedUp?{hasAlreadyVotedUp:!1,totalVotes:a.state.totalVotes-1,voteRequestInFlight:!0,voters:r}:{hasAlreadyVotedUp:!0,totalVotes:a.state.totalVotes+1,voteRequestInFlight:!0,voters:r},a.processVote(t,n,a.props.voteUpUrl,a.state.hasAlreadyVotedUp?"DELETE":"POST")}},a.onVoteDown=function(e){if(e.stopPropagation(),a.readyToVote()&&a.props.canDownvote){a.props.downVoteIntercomEventName&&window.Intercom("trackEvent",a.props.downVoteIntercomEventName);var t,n=a.state;if(a.state.hasAlreadyVotedUp){t={hasAlreadyVotedUp:!1,hasAlreadyVotedDown:!0,totalVotes:a.state.totalVotes-2,voteRequestInFlight:!0};var s={hasAlreadyVotedDown:!1,hasAlreadyVotedUp:!1,totalVotes:a.state.totalVotes-1,voteRequestInFlight:!1};return void a.processTwoPartVote(t,n,s,a.props.voteUpUrl,"DELETE",a.props.voteDownUrl,"POST")}t=a.state.hasAlreadyVotedDown?{hasAlreadyVotedDown:!1,totalVotes:a.state.totalVotes+1,voteRequestInFlight:!0}:{hasAlreadyVotedDown:!0,totalVotes:a.state.totalVotes-1,voteRequestInFlight:!0},a.processVote(t,n,a.props.voteDownUrl,a.state.hasAlreadyVotedDown?"DELETE":"POST")}},a.handleVotersClick=function(e){e.preventDefault(),a.setState({showingVotersModal:!0}),$("body").css({"overflow-x":"hidden","overflow-y":"scroll"}),$("html").css("overflow","hidden")},a.handleVotersClose=function(){a.setState({showingVotersModal:!1}),$("body").css({overflow:"visible","margin-right":"0px"}),$("html").css("overflow","visible")},a.state={totalVotes:t.totalVotes,hasAlreadyVotedUp:t.hasAlreadyVotedUp,hasAlreadyVotedDown:t.hasAlreadyVotedDown,voteRequestInFlight:!1,showingVotersModal:!1,voters:a.props.voters},a}return n(t,e),t.prototype.readyToVote=function(){if(this.state.voteRequestInFlight)return!1;if(!o.Current.userId){var e="/account/login?returnUrl="+encodeURIComponent(document.location.pathname);return document.location.href=e,!1}return!0},t.prototype.processVote=function(e,t,a,n){var s=this;this.setState(e,function(){$.ajax({url:a,type:n,success:function(){s.setState({voteRequestInFlight:!1})},error:function(e,a,n){s.setState(t)}})})},t.prototype.processTwoPartVote=function(e,t,a,n,s,i,r){var o=this;this.setState(e,function(){$.ajax({url:n,type:s,success:function(){$.ajax({url:i,type:r,success:function(){o.setState({voteRequestInFlight:!1})},error:function(){o.setState(a)}})},error:function(e,a,n){o.setState(t)}})})},t.prototype.render=function(){var e=null,t=null,a=null,n=this.props.showVoters&&this.state.voters&&this.state.voters.length>0;t=this.props.voteUpUrl?React.createElement("div",{className:r("vote-button__button",this.props.canUpvote?null:"vote-button__button--disabled"),onClick:this.props.canUpvote?this.onVoteUp:null},this.props.compact?React.createElement("span",{className:"fa fa-angle-up"}):React.createElement("span",{className:"fa fa-caret-up"})):React.createElement("div",{className:"vote-button__button-placeholder"}),e=this.props.voteDownUrl?React.createElement("div",{className:r("vote-button__button",this.props.canDownvote?null:"vote-button__button--disabled"),onClick:this.props.canDownvote?this.onVoteDown:null},this.props.compact?React.createElement("span",{className:"fa fa-angle-down"}):React.createElement("span",{className:"fa fa-caret-down"})):React.createElement("div",{className:"vote-button__button-placeholder"}),n&&(a=React.createElement("div",{className:"vote-button__show-voters"},React.createElement("a",{href:"",onClick:this.handleVotersClick},"voters")));var s=null;return this.state.showingVotersModal&&(s=React.createElement(c,{voters:this.state.voters,handleModalClose:this.handleVotersClose})),React.createElement("div",{className:"vote-button__container"},React.createElement("div",{className:r("vote-button",{"vote-button--compact":this.props.compact,"vote-button--voted-up":this.state.hasAlreadyVotedUp,"vote-button--voted-down":this.state.hasAlreadyVotedDown,"vote-button--disabled":!this.props.canDownvote&&!this.props.canUpvote,"vote-button--enabled":this.props.canDownvote||this.props.canUpvote})},t,React.createElement("div",{className:"vote-button__button"},React.createElement("span",{className:"vote-button__vote-count",onClick:this.state.hasAlreadyVotedDown?this.onVoteDown:this.onVoteUp},this.state.totalVotes)),e),a,s)},t}(React.Component);t.VoteButton=p},,function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("a",{href:this.props.profileUrl,className:"user-card"},React.createElement("div",{className:"user-card__avatar-thumbnail"},React.createElement("img",{src:this.props.avatarThumbnailUrl})),React.createElement("div",{className:"user-card__display-name"},this.props.displayName))},t}(React.Component);t.UserCard=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(24),i=function(e){function t(t){var a=e.call(this,t)||this;return a.scrollListener=function(){var e=a.props.height?$(a.scrollElement)[0].scrollHeight:$(document).height();$(a.scrollElement).scrollTop()+$(a.scrollElement).height()>=.8*e&&a.props.onScroll()},a.scrollListener=s.throttle(a.scrollListener,250),a}return n(t,e),t.prototype.componentDidMount=function(){this.scrollElement=this.props.height?this.refs.container:window,this.scrollElement.addEventListener("scroll",this.scrollListener)},t.prototype.componentWillUnmount=function(){this.scrollElement.removeEventListener("scroll",this.scrollListener)},t.prototype.render=function(){var e=this.props.height&&{"overflow-y":"scroll","overflow-x":"hidden",height:this.props.height+"px"};return React.createElement("div",{ref:"container",style:e},this.props.children)},t}(React.Component);t.WindowInfiniteScroll=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(28),i=(a(4),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onClick=function(e,t){e.preventDefault(),t.action()},t.prototype.render=function(){var e=this,t=this.props.children;return React.createElement("div",{className:"selection-group__wrapper"},React.createElement(s.OverflowX,null,React.createElement("ul",{className:"selection-group__items"},t?t.map(function(a,n){return a?React.createElement("li",{onClick:function(t){return e.onClick(t,a)},key:n,className:"selection-group__child selection-group__child--"+(a.key===(e.props.selected||(t?t[0].key:null))?"selected":"unselected")},a.separator?React.createElement("span",{className:"selection-group__separator"},"|"):React.createElement("a",{href:a.href,title:a.name},a.name)):null}):null)),this.props.filters?React.createElement("div",{className:"selection-group__filters"},this.props.filters):null)},t}(React.Component));t.SelectionGroup=i},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(t){var a=e.call(this,t)||this;return a.onResize=function(){var e=ReactDOM.findDOMNode(a.refs.overflowX);if(e){var t=e.clientWidth-1,n=e.clientWidth+1;a.setState({canScrollX:t>e.scrollWidth||n<e.scrollWidth})}},a.state={hasScrolledToBeginning:!0,hasScrolledToEnd:!1},a}return a(t,e),t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize,!1)},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onResize,!1),window.setTimeout(this.onResize)},t.prototype.onScroll=function(){var e=ReactDOM.findDOMNode(this.refs.overflowX),t=e.getBoundingClientRect().width;this.setState({hasScrolledToBeginning:0==e.scrollLeft,hasScrolledToEnd:t+e.scrollLeft==e.scrollWidth})},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"overflow-x__wrapper"},React.createElement("div",{className:"overflow-x",ref:"overflowX",onScroll:function(){return e.onScroll()}},this.props.children,this.state.canScrollX&&!this.state.hasScrolledToBeginning?React.createElement("div",{className:"overflow-x__scroll-indicator--left"}):null,this.state.canScrollX&&!this.state.hasScrolledToEnd?React.createElement("div",{className:"overflow-x__scroll-indicator--right"}):null))},t}(React.Component);t.OverflowX=n},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)};t.Breakpoints={mobileMax:480,tabletMin:481,tabletMax:768,desktopMin:769,desktopMax:1024,desktopLargeMin:1025};var n=function(e){function t(t){var a=e.call(this,t)||this;return a.onResize=function(){a.setState({windowWidth:window.innerWidth})},a.state={windowWidth:window.innerWidth},a}return a(t,e),t.prototype.componentWillMount=function(){window.addEventListener("resize",this.onResize,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize,!1)},t.prototype.componentDidMount=function(){this.onResize()},t.prototype.render=function(){var e,t=this.state.windowWidth;return e=this.props.maxWidth?t>=this.props.minWidth&&t<=this.props.maxWidth:t>=this.props.minWidth,e?this.props.children:null},t}(React.Component);t.MediaQuery=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(31),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){!s(e.target).closest([".off-canvas--left",".off-canvas--right"]).length&&t.props.shouldShowOffCanvas&&t.props.closeButtonCallback()},t}return n(t,e),t.prototype.componentDidMount=function(){window.addEventListener("touchstart",this.handleClick,!1),window.addEventListener("mousedown",this.handleClick,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("touchstart",this.handleClick,!1),window.removeEventListener("mousedown",this.handleClick,!1)},t.prototype.render=function(){var e={children:this.props.children,closeButtonCallback:this.props.closeButtonCallback,shouldShowOffCanvas:this.props.shouldShowOffCanvas,shouldUseCloseButton:this.props.shouldUseCloseButton,shouldUseRightSide:this.props.shouldUseRightSide};return React.createElement(i.OffCanvas,s.extend({},this.state,e))},t}(React.Component);t.OffCanvasContainer=r},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){var e=this;return React.createElement("div",{className:"off-canvas__wrapper"},this.props.shouldShowOffCanvas?React.createElement("div",{className:this.props.shouldUseRightSide?"off-canvas--right":"off-canvas--left"},this.props.children,this.props.shouldUseCloseButton?React.createElement("div",{className:"off-canvas__close-wrapper"},React.createElement("span",{className:"off-canvas__close",onClick:function(){return e.props.closeButtonCallback()}},React.createElement("span",{className:"fa fa-times-circle-o"}),React.createElement("span",{className:"off-canvas__close-text"},"Close"))):null):null)},t}(React.Component);t.OffCanvas=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=a(2),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.componentDidMount=function(){var e=this;window.setTimeout(function(){i(e.container).find("a:not(.block-link__anchor)").each(function(e,t){var a=i(t);"auto"===a.css("z-index")&&("static"===a.css("position")&&a.css("position","relative"),a.css("z-index","2"),a.css("pointer-events","auto"))})})},t.prototype.render=function(){var e=this;return React.createElement("div",{className:s("block-link",this.props.className,this.props.borderless?null:"block-link--bordered"),ref:function(t){return e.container=t}},React.createElement("a",{className:"block-link__anchor",href:this.props.href,onClick:this.props.onClick}),this.props.children)},t}(React.Component);t.BlockLink=r,r.docs={description:"A block-like link that is handy for listings and such. Children require styling.",examples:[React.createElement(r,{href:"#"},"BlockLink content here")],staticMarkup:'<BlockLink href="#">\n    BlockLink content here\n</BlockLink>',title:"BlockLink"}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("span",{className:s("tooltip",{"tooltip--left":this.props.alignLeft},this.props.className),"data-tooltip":this.props.tipText,"data-tooltip-size":this.props.size},this.props.children)},t}(React.Component);t.ToolTip=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(33),i=37,r=function(e){function t(t){var a=e.call(this,t)||this;return a.width=t.width||i,a.borderRadius=a.width/10,a.margin=a.width/20,a}return n(t,e),t.prototype.renderAvatar=function(){return React.createElement("a",{className:"avatar",href:this.props.userUrl,style:{width:this.width}},React.createElement("img",{className:"avatar__thumbnail",src:this.props.thumbnailUrl,alt:this.props.displayName,width:this.width,height:this.width,style:{borderRadius:this.borderRadius}}),this.props.tier?React.createElement("img",{className:"avatar__tier",src:"/static/images/avatier/avatier-"+this.props.tier+"@2x.png",style:{marginTop:this.margin},width:this.width}):null)},t.prototype.render=function(){return this.props.hideTooltop?this.renderAvatar():React.createElement(s.ToolTip,{className:this.props.className,tipText:this.props.displayName},this.renderAvatar())},t}(React.Component);t.Avatar=r,r.docs={description:"A small image that combines a users profile picture and their progression tier.",examples:[React.createElement(r,{displayName:"Last-Place Larry",thumbnailUrl:"https://kaggle2.blob.core.windows.net/avatars/images/46426-gr.jpg",tier:"novice",userUrl:"https://www.kaggle.com/lastplacelarry",width:30})],staticMarkup:'<Avatar\n    displayName="Last-Place Larry"\n    thumbnailUrl="https://kaggle2.blob.core.windows.net/avatars/images/46426-gr.jpg"\n    tier="novice"\n    userUrl="https://www.kaggle.com/lastplacelarry"\n    width={30} />',title:"Avatar"}},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("span",{className:"badge badge--"+(this.props.option||"default")},this.props.icon&&React.createElement("i",{className:"badge__icon fa "+this.props.icon}),this.props.text)},t}(React.Component);t.Badge=n,n.docs={description:"A component used to quickly convey information (i.e status).",examples:[React.createElement(n,{text:"Failed",option:"danger"}),React.createElement(n,{text:"Featured",option:"info"}),React.createElement(n,{text:"Hidden",option:"info"})],staticMarkup:'<Badge text="Failed" option="danger" />\n<Badge text="Featured" option="info" />\n<Badge text="Hidden" option="info" />',title:"Badge"}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(37),r=a(39),o=a(164),l=a(165),c=a(166),p=a(167),u=a(1),d=a(5),m=a(168),h=a(40),g=a(24),f=a(2),v=function(e){function t(t){var a=e.call(this,t)||this;return a.markdownConverter=Markdown.getSanitizingConverter(),a.handleScroll=g.throttle(a.handleScrollInner,100).bind(a),a.handleUnhideScript=function(e){e.preventDefault(),a.state.isHidden&&f.ajax({url:a.props.toggleScriptIsHiddenUrl+"?isHidden=false",type:"POST",success:function(){a.setState({isHidden:!1})},error:function(e,t,a){alert("Sorry, an error occurred. Please reload the page.")}})},a.state={activeTab:"",activePane:"",scriptVersionId:a.props.initialScriptVersionId,isHidden:a.props.scriptIsHidden,isLanguageTemplate:a.props.scriptIsLanguageTemplate,isSubmittingReply:!1,codeShouldBeExpanded:!1,replyDraft:"",topicId:t.topic.id},a.tabNamesFromUrls={},a.urlNamesFromTabs={},a.props.menuLinks.concat(a.props.rightMenuLinks).forEach(function(e){a.tabNamesFromUrls[e.href||e.tab]=e.text,a.urlNamesFromTabs[e.text]=e.href||e.tab}),a.enclosingElements=[],a.scriptStatus="new",window.location.pathname.slice(0,a.props.baseUrl.length)!==a.props.baseUrl&&history.replaceState&&history.replaceState({},"",a.props.baseUrl+(a.props.initialTab?"/"+a.props.initialTab:"")),a}return n(t,e),t.prototype.updateEnclosingElement=function(e,t){this.enclosingElements[t]=e},t.prototype.shouldComponentUpdate=function(e,t){return this.state.activeTab!==t.activeTab||this.state.activePane!==t.activePane||this.state.isHidden!==t.isHidden||this.state.isLanguageTemplate!==t.isLanguageTemplate||this.state.replyDraft!==t.replyDraft||this.state.topicId!==t.topicId},t.prototype.hasReportPane=function(){return 1===this.props.menuLinks.filter(function(e){return"Report"===e.text}).length},t.prototype.hasNotebookPane=function(){return 1===this.props.menuLinks.filter(function(e){return"Notebook"===e.text}).length},t.prototype.hasImages=function(){return this.getVisualizationFiles()&&this.getVisualizationFiles().length>0},t.prototype.hasNonImages=function(){return this.getNonVisualizationFiles()&&this.getNonVisualizationFiles().length>0},t.prototype.getVisualizationFiles=function(){return this.props.outputFiles?this.props.outputFiles.filter(function(e){return[".png",".jpg",".gif",".svg"].indexOf(e.fileType)>-1}):null},t.prototype.getNonVisualizationFiles=function(){return this.props.outputFiles?this.props.outputFiles.filter(function(e){return-1==[".png",".jpg",".gif",".svg"].indexOf(e.fileType)}):null},t.prototype.activateDefaultTab=function(){var e;e=this.hasReportPane()?"Report":this.hasNotebookPane()?"Notebook":this.hasImages()||"SQLite"===this.props.languageName&&!this.props.scriptVersionHasError?"Output":"Code",this.setState({activeTab:e,activePane:e})},t.prototype.componentWillMount=function(){var e=this;if(this.props.initialTab in this.tabNamesFromUrls){var t=this.tabNamesFromUrls[this.props.initialTab],a=location.hash;this.updateUrlForTab(this.props.initialTab),a&&(location.hash=a),this.setState({activeTab:t,activePane:t,codeShouldBeExpanded:"Code"===t},function(){"Output"===t&&e.shouldUseCodeOutputCommentsView()&&e.scrollToActiveTab()})}else this.activateDefaultTab();this.props.currentScriptVersionIsBusy&&this.pollScriptStatusAndRefreshWhenReady()},t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.handleScroll),window.Intercom("trackEvent","view_script"),-1!==window.location.hash.indexOf("#latest-")&&history.replaceState({},document.title,window.location.pathname+window.location.search)},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.handleScroll)},t.prototype.pollScriptStatusAndRefreshWhenReady=function(){var e=this;this.scriptStatus&&"cancelacknowledged"!==this.scriptStatus&&f.ajax({url:this.props.statusCallbackUrl+"&existingStatus="+this.scriptStatus,success:function(t){e.scriptStatus=t.status,"complete"===t.status||"error"===t.status?location.reload(!0):e.pollScriptStatusAndRefreshWhenReady()}})},t.prototype.handleScrollInner=function(e){var t=this;if(-1!==["Code","Output","Comments","Notebook","Report"].indexOf(this.state.activeTab)){var a=f(document).scrollTop()+.15*f(window).height(),n=function(e){t.state.activeTab!==e&&(t.updateUrlForTab(e.toLowerCase()),t.setState({activeTab:e}))};a>this.getTabScrollTop("Comments")?n("Comments"):a>this.getTabScrollTop("Output")?n("Output"):a>this.getTabScrollTop("Code")?n("Code"):a>this.getTabScrollTop("Notebook")?n("Notebook"):a>this.getTabScrollTop("Code")&&n("Report")}},t.prototype.updateUrlForTab=function(e){history.replaceState&&history.replaceState({},"",this.props.baseUrl+"/"+e)},t.prototype.onActiveTabChange=function(e){var t=this;if(e!==this.state.activeTab||e!==this.state.activePane){var a=this.urlNamesFromTabs[e];this.updateUrlForTab(a);var n=this.scrollToActiveTab;"Comments"===e&&(n=function(){t.scrollToActiveTab(0)}),this.setState({activeTab:e,activePane:e,codeShouldBeExpanded:"Code"===e},n)}},t.prototype.getTabScrollTop=function(e){if(!(e in this.enclosingElements)||null==this.enclosingElements[e])return 1/0;var t=this.enclosingElements[e],a=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||a.scrollTop,i=n.clientTop||a.clientTop||0;return Math.round(t.getBoundingClientRect().top+s-i)},t.prototype.scrollToActiveTab=function(e){void 0===e&&(e=300);var t=0,a=f(".pageheader__top--safe"),n=a.offset().top+a.height(),s=42,i=20,r=32*((this.state.isHidden?1:0)+this.props.pageMessages.length);if(this.shouldUseCodeOutputCommentsView()&&-1!==["Code","Output"].indexOf(this.state.activeTab)){var o=this.getTabScrollTop(this.state.activeTab);t=o-s-i-r}else{var l=f(document).scrollTop();l>n&&(t=n+1)}t>0&&(e>0?f("html, body").animate({scrollTop:t},e):f("html, body").scrollTop(t))},t.prototype.renderCodeTab=function(){var e=this,t=!this.state.codeShouldBeExpanded;return this.shouldUseCodeOutputCommentsView()&&!this.hasOutputTab()&&(t=!1),React.createElement("div",null,React.createElement(r.ScriptCodePaneContainer,{codeContents:this.props.code,languageName:this.props.languageName,isNotebook:this.props.isNotebook,isPrivate:this.props.isPrivate,setEnclosingElement:function(t){return e.updateEnclosingElement(t,"Code")},allowToggle:this.shouldUseCodeOutputCommentsView(),scriptVersionId:this.state.scriptVersionId,startMinimized:t,onPaneExpanded:function(){e.setState({activeTab:"Code"})},submission:this.props.submission,runInfo:this.props.runInfo}),this.shouldUseCodeOutputCommentsView()?null:this.renderCommentsTab())},t.prototype.hasOutputTab=function(){return this.props.outputFiles.length>0},t.prototype.renderOutputTab=function(){var e=this;return this.hasOutputTab()?React.createElement("div",null,this.hasImages()?React.createElement(d.ContentBox,{title:"Visualizations",contentClassName:"script-viewer__visualizations"},this.getVisualizationFiles().map(function(e){return React.createElement("img",{src:e.fileUrl})})):null,!this.hasImages()||this.hasNonImages()?React.createElement(l.ScriptFilesPaneContainer,{fileListItems:this.getNonVisualizationFiles(),downloadAllFilesUrl:this.props.downloadAllFilesUrl,showSubmitToCompButtons:this.props.showSubmitToCompButtons,submitToCompUrl:this.props.submitToCompUrl,scriptVersionId:this.props.scriptVersionId,competitionName:this.props.competitionName,setEnclosingElement:function(t){return e.updateEnclosingElement(t,"Output")}}):null,this.shouldUseCodeOutputCommentsView()?null:this.renderCommentsTab()):null},t.prototype.changeReplyDraft=function(e){this.setState({replyDraft:e})},t.prototype.submitReply=function(e){var t=this;h.PageMessages.clear(),this.setState({isSubmittingReply:!0},function(){return f.ajax({contentType:"application/json",data:JSON.stringify({content:t.markdownConverter.makeHtml(t.state.replyDraft),rawMarkdown:t.state.replyDraft,scriptId:t.props.scriptId}),type:"POST",url:"/kernels/comments/ajax"}).done(function(a){t.setState({isSubmittingReply:!1,replyDraft:"",topicId:a.topicId},function(){h.PageMessages.clear(),window.Intercom("trackEvent","forum_post"),e(a.id)})}).fail(function(){t.setState({isSubmittingReply:!1}),h.PageMessages.clear(),h.PageMessages.error({htmlMessage:'We had trouble submitting your reply. Please try again or <a href="mailto: support@kaggle.com">contact support</a> if you continue experiencing issues.',type:"error"})})})},t.prototype.renderCommentsTab=function(){var e=this;return React.createElement(h.CommentListContainer,{allowAttachments:this.props.topic.allowAttachments,allowReplies:!this.props.topic.isLocked,canDownvote:this.props.topic.canDownvote,isSubmittingReply:this.state.isSubmittingReply,replyAttachments:[],replyDraft:this.state.replyDraft,replyDraftChanged:function(t){return e.changeReplyDraft(t)},replySubmitted:function(t){return e.submitReply(t)},topicId:this.state.topicId})},t.prototype.renderCodeOutputCommentsView=function(){return React.createElement("div",null,this.renderCodeTab(),this.renderOutputTab(),this.renderCommentsTab())},t.prototype.shouldUseCodeOutputCommentsView=function(){return!this.props.isNotebook},t.prototype.renderActivePane=function(){var e=this;switch(this.state.activePane){case"Log":return React.createElement(i.ScriptLogPaneContainer,{logContents:this.props.log,runInfo:this.props.runInfo});case"Code":return this.shouldUseCodeOutputCommentsView()?this.renderCodeOutputCommentsView():this.renderCodeTab();case"Report":return null;case"Notebook":return null;case"Output":return this.shouldUseCodeOutputCommentsView()?this.renderCodeOutputCommentsView():this.renderOutputTab();case"Forks":return this.props.hasForks?React.createElement(u.ScriptList,{listTitle:"Forked Kernels",languagesMetadataUrl:null,loginAndReturnUrl:null,newScriptUrl:null,outputTypesMetadataUrl:null,newNotebookUrl:null,showFilters:!1,showScriptProjectName:!1,sourceBaseUrl:this.props.forksBaseUrl.slice(0,this.props.forksBaseUrl.length-1)}):null;case"Versions":return React.createElement(c.ScriptVersionsPane,{versionHistory:this.props.versionHistory});case"Comments":return this.renderCommentsTab();case"Options":return React.createElement(p.ScriptOptionsPaneContainer,{scriptIsInitiallyHidden:this.state.isHidden,toggleScriptIsHiddenUrl:this.props.toggleScriptIsHiddenUrl,showAdmin:this.props.isAdmin,toggleScriptLanguageTemplateUrl:this.props.toggleScriptLanguageTemplateUrl,scriptIsInitiallyLanguageTemplate:this.state.isLanguageTemplate,rerunScriptUrl:this.props.rerunScriptUrl,onScriptHiddenStateChange:function(t){return e.setState({isHidden:t})},onScriptLanguageTemplateChange:function(t){return e.setState({isLanguageTemplate:t})}});default:return React.createElement("div",null,"Sorry, an error has occurred.")}},t.prototype.renderNotebookPane=function(){if(!this.hasReportPane()&&!this.hasNotebookPane())return null;var e=this.state.activePane===(this.hasReportPane()?"Report":"Notebook");return React.createElement("div",null,React.createElement(o.ScriptNotebookPaneContainer,{iframeUrl:this.props.htmlOutputFileUrl,displayIframe:e,isNotebook:this.hasNotebookPane()}),e?this.renderCommentsTab():null)},t.prototype.render=function(){var e=this.props.pageMessages,t=this.props.callToAction;return this.state.isHidden&&(e=e.concat([{type:"info",message:this.props.userCanEditScript?"You have hidden this script from lists and searches, but is still accessible via URL. Unhide it by deselecting Hide Script on the Options tab.":"The user has hidden this script, meaning they prefer not to have it shared more broadly."}]),this.props.userCanEditScript&&(t={href:this.props.baseUrl,text:"Unhide Script",title:"Unhide Script",actionCallback:this.handleUnhideScript})),this.props.datasetHidden&&(e=e.concat([{type:"info",message:"The dataset used for this script is no longer available."}])),React.createElement("div",{className:"script-viewer"},React.createElement("div",{className:"script-viewer__header-background"}),React.createElement("div",{className:"script-viewer__container"},React.createElement(m.KernelHeader,s({},f.extend(this.props,this.state),{activeTab:this.state.activeTab,callToAction:t,isHidden:this.state.isHidden,onActiveTabChange:this.onActiveTabChange.bind(this),pageMessages:e})),React.createElement("div",{className:"script-viewer__pane-container"},this.renderActivePane(),this.renderNotebookPane())))},t}(React.Component);t.ScriptViewerApp=v},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(5),r=a(38),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this.props.time?Math.round(10*+this.props.time)/10:null;if(""===this.props.time&&""===this.props.data)return React.createElement("div",{className:"script-log-pane__line"},React.createElement("span",{className:"script-log-pane__empty-message"},"No output was generated."));var t="script-log-pane__data-column";return"stderr"===this.props.stream_name||"failure"===this.props.status?t+="--stderr":"success"===this.props.status&&(t+="--success"),React.createElement("div",{className:"script-log-pane__line"},React.createElement("span",{className:"script-log-pane__time-column"},"number"==typeof e&&e.toFixed(1)+"s"),React.createElement("span",{className:"script-log-pane__line-no-column"},this.props.lineNo),React.createElement("span",{className:t},this.props.data))},t}(React.Component);t.ScriptLogPaneLine=o;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.downloadUrl=function(){var e=this.props.logLineData.map(function(e){return e.data}).join("\n");return"data:text/plain;charset=utf-8,"+encodeURIComponent(e)},t.prototype.renderStatus=function(){var e=React.createElement(o,{key:"scriptlogpane-emtpy",lineNo:this.props.logLineData.length+1,stream_name:"stdout",time:this.props.logLineData.slice(-1)[0].time,data:""}),t=0===this.props.exitCode?"Complete. Exited with code 0.":"Failed. Exited with code "+this.props.exitCode+".";return"number"==typeof this.props.exitCode?React.createElement("div",null,e,React.createElement(o,{key:"scriptlogpane-status",status:0===this.props.exitCode?"success":"failure",lineNo:this.props.logLineData.length+2,stream_name:"stdout",time:this.props.logLineData.slice(-1)[0].time,data:t})):null},t.prototype.renderHeader=function(){return React.createElement("div",{className:"script-log-pane__line"
},React.createElement("span",{className:"script-log-pane__time-column script-log-pane__time-column--header"},"Time"),React.createElement("span",{className:"script-log-pane__line-no-column script-log-pane__line-no-column--header"},"Line #"),React.createElement("span",{className:"script-log-pane__data-column script-log-pane__data-column--header"},"Log Message"))},t.prototype.renderLines=function(){var e=this.props.logLineData.length>0&&this.props.logLineData[0].data;return React.createElement("div",null,e&&this.renderHeader(),this.props.logLineData.map(function(e,t){return React.createElement(o,s({key:"scriptlogpane-"+t,lineNo:t},e))}),e&&this.renderStatus())},t.prototype.render=function(){var e=React.createElement("div",{className:"script-code-pane__right-section"},React.createElement("a",{href:this.downloadUrl(),className:"script-code-pane__download",download:"log.txt"},"Download Log"));return this.props.withContentBox===!1?this.renderLines():React.createElement(i.ContentBox,{title:"Log",titleBarRightSide:e},React.createElement("div",{className:"script-log-pane__log"},this.renderLines()))},t}(React.Component);t.ScriptLogSection=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderScriptInfo=function(){return React.createElement("div",{className:"script-log-pane__run-info"},React.createElement("div",{className:"script-log-pane__run-info-top"},React.createElement("div",{className:"script-log-pane__run-info-column"},React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Succeeded"),React.createElement("div",{className:"script-log-pane__run-info-right"},this.props.succeeded?"True":"False")),React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Exit Code"),React.createElement("div",{className:"script-log-pane__run-info-right"},this.props.exitCode)),React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Docker Image Name"),React.createElement("div",{className:"script-log-pane__run-info-right"},React.createElement("a",{href:this.props.dockerHubUrl},this.props.dockerImageName)," (",React.createElement("a",{href:this.props.dockerfileUrl},"Dockerfile"),")")),React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Timeout Exceeded"),React.createElement("div",{className:"script-log-pane__run-info-right"},this.props.timeoutExceeded?"True":"False"))),React.createElement("div",{className:"script-log-pane__run-info-column"},React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Run Time"),React.createElement("div",{className:"script-log-pane__run-info-right"},Math.round(10*this.props.runTimeSeconds)/10," seconds")),React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Queue Time"),React.createElement("div",{className:"script-log-pane__run-info-right"},Math.round(10*this.props.queuedSeconds)/10," seconds")),React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Output Size"),React.createElement("div",{className:"script-log-pane__run-info-right"},this.props.outputSizeBytes&&r(this.props.outputSizeBytes))),React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Used All Space"),React.createElement("div",{className:"script-log-pane__run-info-right"},this.props.usedAllSpace?"True":"False")))),React.createElement("div",{className:"script-log-pane__run-info-row"},React.createElement("div",{className:"script-log-pane__run-info-left"},"Failure Message"),React.createElement("div",{className:"script-log-pane__run-info-right"},this.props.failureMessage)))},t.prototype.render=function(){return this.props.withContentBox===!1?this.renderScriptInfo():React.createElement(i.ContentBox,{title:"Run Info"},this.renderScriptInfo())},t}(React.Component);t.ScriptRunInfoSection=c;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getLoglineData=function(){var e=[{time:"",stream_name:"stdout",lineNo:0,data:""}];try{e=JSON.parse(this.props.logContents)}catch(t){try{e=JSON.parse("["+this.props.logContents)}catch(t){if(console.warn("Error in log parsing"),""!==this.props.logContents){var a=this.props.logContents.split("\n");e=a.map(function(e,t){return{time:null,stream_name:"stdout",lineNo:t+1,data:e}})}}}return e.forEach(function(e,t){return e.lineNo=t+1}),e},t.prototype.render=function(){var e=this.getLoglineData();return React.createElement("div",{className:"script-log-pane"},React.createElement(c,s({},this.props.runInfo)),React.createElement(l,{logLineData:e,exitCode:this.props.runInfo.exitCode}))},t}(React.Component);t.ScriptLogPaneContainer=p},,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(40),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this,t=null;return this.props.allowToggle&&(t=React.createElement("div",{className:"script-code-pane__show-more-toggle-container"},React.createElement("div",{className:"script-code-pane__show-more-toggle"},React.createElement("a",{href:"",onClick:function(t){return e.props.handleToggleMinimizedClick(t)}},"show",this.props.isMinimized?" more":" less")))),React.createElement("div",{className:"script-code-pane"},React.createElement("div",{className:"script-code-pane__contents"+(this.props.isMinimized?" script-code-pane__contents--minimized":"")},React.createElement("pre",{className:"line-numbers"},React.createElement("code",{className:this.props.prismLanguageClassName},this.props.codeContents))),t)},t}(React.Component);t.ScriptCodePane=r;var o=function(e){function t(t){var a=e.call(this,t)||this;a.showMoreOrLess=function(e){e.preventDefault(),a.state.isMinimized&&a.props.onPaneExpanded(),a.setState({isMinimized:!a.state.isMinimized})};var n=a.parseUrlHash(),s=a.props.codeContents.split("\n").length;return a.shouldShowToggle=a.props.allowToggle&&s>10,a.state={downloadUrl:"",highlightStart:n[0],highlightEnd:n[1],isMinimized:a.shouldShowToggle&&null===n[0]&&a.props.startMinimized},a}return n(t,e),t.prototype.shouldComponentUpdate=function(e,t){return t.downloadUrl!==this.state.downloadUrl||t.isMinimized!==this.state.isMinimized},t.prototype.componentDidMount=function(){var e=this;window.setTimeout(this.renderPrism()),$.ajax({url:"/kernels/sourceurl/"+this.props.scriptVersionId,success:function(t){e.setState({downloadUrl:t})}})},t.prototype.scrollToLineNumber=function(e){var t=Math.max(0,e-4),a=$('*[data-linenumber="'+t+'"]');a.length&&$("html, body").animate({scrollTop:a.offset().top},250)},t.prototype.renderPrism=function(){var e=this;Prism.highlightAll(!0,function(){$(".line-number-inner-span").click(function(t){if(t.target){var a=t.target.getAttribute("data-linenumber");e.handleLineNumberClick(a,t.shiftKey)}t.preventDefault()}),e.updateLineHighlights();var t=e.parseUrlHash()[0];t&&e.scrollToLineNumber(+t)})},t.prototype.handleLineNumberClick=function(e,t){if(t&&this.state.highlightStart){var a=+e,n=+this.state.highlightStart,s=this.state.highlightEnd||this.state.highlightStart;n>a?this.setState({highlightStart:e,highlightEnd:s}):this.setState({highlightEnd:e})}else this.setState({highlightStart:e,highlightEnd:null});Prism.clearLineHighlights(),this.updateLineHighlights(),this.updateUrlHash()},t.prototype.parseUrlHash=function(){var e=location.hash.slice(1);if(!e)return[null,null];var t=e.match(/^L([0-9]+)$|^L([0-9]+)\-L([0-9]+)$/);return t?t[1]?[t[1],null]:[t[2],t[3]]:[null,null]},t.prototype.updateUrlHash=function(){if(this.state.highlightStart){var e="L"+this.state.highlightStart;this.state.highlightEnd&&(e+="-L"+this.state.highlightEnd),location.hash=e}},t.prototype.updateLineHighlights=function(){this.state.highlightStart?Prism.highlightLines($("pre")[0],this.state.highlightStart,this.state.highlightEnd):Prism.clearLineHighlights()},t.prototype.prismName=function(){if(this.props.isNotebook)return"language-json";switch(this.props.languageName){case"Python":return"language-python";case"Julia":return"language-julia";case"R":return"language-r";case"RMarkdown":return"language-r";case"SQLite":return"language-sql"}return""},t.prototype.renderSubmissionInfo=function(){var e=this.props.submission,t=e.date,a=e.teamName,n=e.privateScore,r=e.publicScore;return React.createElement("div",{className:"script-code-pane__submission"},React.createElement("div",{className:"script-code-pane__submission-info-wrapper"},React.createElement(s.ContentBox,null,React.createElement("div",{className:"script-code-pane__submission-info-content"},React.createElement("div",null,React.createElement("div",{className:"script-code-pane__submission-header"},"Submission"),React.createElement("div",null,this.props.runInfo.succeeded?React.createElement("div",{className:"script-code-pane__submission-status--success"},React.createElement("i",{className:"fa fa-check"})," Ran successfully"):React.createElement("div",{className:"script-code-pane__submission-status--failure"},React.createElement("i",{className:"fa fa-times"})," Script run unsuccessful")),React.createElement("div",null,"Submitted by ",a," ",React.createElement(i.TimeAgo,{time:t})))))),React.createElement("div",{className:"script-code-pane__submission-score-wrapper"},React.createElement(s.ContentBox,null,React.createElement("div",{className:"script-code-pane__submission-score-content"},n&&React.createElement("div",{className:"script-code-pane__submission-score-private"},React.createElement("div",{className:"script-code-pane__submission-score-label"},"Private Score"),React.createElement("div",{className:"script-code-pane__submission-score-value"},n)),React.createElement("div",{className:"script-code-pane__submission-score-public"},React.createElement("div",{className:"script-code-pane__submission-score-label"},"Public Score"),React.createElement("div",{className:"script-code-pane__submission-score-value"},r||"No score"))))))},t.prototype.render=function(){var e=this,t=React.createElement("div",{className:"script-code-pane__right-section"},this.props.isPrivate?null:React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopMin},React.createElement("div",{className:"script-code-pane__subtitle"},"This script has been released under the ",React.createElement("a",{href:"http://www.apache.org/licenses/LICENSE-2.0"},"Apache 2.0")," open source license.")),this.props.isPrivate?null:React.createElement(i.MediaQuery,{minWidth:0,maxWidth:i.Breakpoints.tabletMax},React.createElement("div",{className:"script-code-pane__subtitle"},"Licensed under ",React.createElement("a",{href:"http://www.apache.org/licenses/LICENSE-2.0"},"Apache 2.0"))),React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.tabletMin},React.createElement("a",{href:this.state.downloadUrl,className:"script-code-pane__download"},"Download Code")));return React.createElement("div",{ref:function(t){return e.props.setEnclosingElement(t)}},this.props.submission&&this.renderSubmissionInfo(),React.createElement(s.ContentBox,{title:"Code",titleBarRightSide:t},React.createElement(r,{codeContents:this.props.codeContents,prismLanguageClassName:this.prismName(),downloadUrl:this.state.downloadUrl,isMinimized:this.state.isMinimized,isPrivate:this.props.isPrivate,allowToggle:this.shouldShowToggle,handleToggleMinimizedClick:this.props.allowToggle?this.showMoreOrLess:null})))},t}(React.Component);t.ScriptCodePaneContainer=o},function(e,t,a){"use strict";var n=a(41);t.isValidUrl=n["default"];var s=a(42);t.ActivityCalendar=s.ActivityCalendar;var i=a(45);t.AddDataSourceModal=i.AddDataSourceModal;var r=a(34);t.Avatar=r.Avatar;var o=a(35);t.Badge=o.Badge;var l=a(11);t.Banner=l.Banner;var c=a(29);t.Breakpoints=c.Breakpoints,t.MediaQuery=c.MediaQuery;var p=a(32);t.BlockLink=p.BlockLink;var u=a(12);t.Button=u.Button;var d=a(46);t.ButtonAutoWidth=d.ButtonAutoWidth;var m=a(47);t.ButtonRoundEdged=m.ButtonRoundEdged;var h=a(48);t.Checkbox=h.Checkbox;var g=a(49);t.CityLookup=g.CityLookup;var f=a(50);t.CodeMirrorEditor=f.CodeMirrorEditor;var v=a(5);t.CollapsibleContentBox=v.CollapsibleContentBox;var y=a(57);t.CommentListContainer=y.CommentListContainer;var _=a(71);t.CompetitionCard=_.CompetitionCard;var b=a(74);t.Confirm=b.Confirm;var E=a(5);t.ContentBox=E.ContentBox;var R=a(6);t.Current=R.Current;var w=a(75);t.addDataSource=w.addDataSource,t.removeDataSource=w.removeDataSource;var C=a(76);t.EditStateToggleButton=C.EditStateToggleButton;var S=a(77);t.FileUploader=S.FileUploader,t.FileUploaderMode=S.FileUploaderMode;var N=a(122);t.FileList=N.FileList;var k=a(124);t.FilePreviewList=k.FilePreviewList;var T=a(148);t.Forum=T.Forum;var M=a(69);t.ForumMessageContent=M.ForumMessageContent;var x=a(153);t.InlineTextEditor=x.InlineTextEditor;var P=a(154);t.LoadingText=P.LoadingText;var I=a(126);t.MarkdownConverter=I.MarkdownConverter;var U=a(130);t.MarkdownEditor=U.MarkdownEditor;var D=a(155);t.Modal=D.Modal;var L=a(73);t.numberWithCommas=L.numberWithCommas;var O=a(30);t.OffCanvasContainer=O.OffCanvasContainer;var A=a(156);t.Ordinal=A.Ordinal;var F=a(157);t.OrganizationCard=F.OrganizationCard;var B=a(28);t.OverflowX=B.OverflowX;var V=a(158);t.PageHeader=V.PageHeader,t.PageHeaderCallToAction=V.PageHeaderCallToAction,t.PageHeaderNav=V.PageHeaderNav,t.PageHeaderBottomRow=V.PageHeaderBottomRow,t.PageHeaderTopRow=V.PageHeaderTopRow;var j=a(160);t.PageMessages=j.PageMessages;var H=a(72);t.Pluralize=H.Pluralize;var z=a(13);t.SelectBox=z.SelectBox;var W=a(161);t.SmartListContainer=W.SmartListContainer;var K=a(7);t.TimeAgo=K.TimeAgo;var q=a(163);t.Timer=q.Timer;var G=a(33);t.ToolTip=G.ToolTip;var $=a(125);t.ToolTipMultiLine=$.ToolTipMultiLine;var J=a(23);t.VoteButton=J.VoteButton},function(e,t){"use strict";function a(e){var t=/^(https?):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;return t.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(43),i=a(3),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(e){function t(t){var a=e.call(this,t)||this,n=new Date;return n.setFullYear((new Date).getFullYear()-1),n.setDate(n.getDate()+1),a.start=n,a.labels=r.map(function(e,t){return r[(t+n.getMonth()+1)%12]}),a}return n(t,e),t.prototype.componentDidMount=function(){var e=this;window.setTimeout(function(){var t=new s;t.init({itemSelector:e.container,domain:"week",subDomain:"day",weekStartOnMonday:!1,tooltip:!0,animationDuration:0,range:53,domainGutter:0,domainMargin:1,itemName:["",""],cellSize:13,legendCellSize:13,legendCellPadding:4,start:e.start,data:e.props.dataUrl,afterLoadData:e.parseData.bind(e),subDomainDateFormat:e.formatTooltip.bind(e),domainLabelFormat:"",legend:[5,10,15,20]})})},t.prototype.formatTooltip=function(e){var t=this.formatDate(e);if(!this.activityLookup)return t;var a=this.activityLookup[this.formatDate(e)];return a&&(a.totalSubmissions&&(t+="<br />"+a.totalSubmissions+" "+i("submission",a.totalSubmissions)),a.totalScripts&&(t+="<br />"+a.totalScripts+" script "+i("run",a.totalScripts)),a.totalDatasets&&(t+="<br />"+a.totalDatasets+" dataset "+i("version",a.totalDatasets)),a.totalDiscussions&&(t+="<br />"+a.totalDiscussions+"  "+i("comment",a.totalDiscussions))),t},t.prototype.parseData=function(e){var t={};this.activityLookup={};for(var a=0,n=e;a<n.length;a++){var s=n[a],i=s.totalDatasets+s.totalDiscussions+s.totalScripts+s.totalSubmissions,r=new Date(s.date.toString()),o=r.getTime()/1e3;this.activityLookup[this.formatDate(r)]=s,t[o.toString().split(".")[0]]=i}return t},t.prototype.formatDate=function(e){return r[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()},t.prototype.renderLabels=function(){return this.labels.map(function(e,t){return React.createElement("li",{key:t},e)})},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"activity-calendar activity-calendar--"+this.props.tier},React.createElement("ul",{className:"activity-calendar__labels"},this.renderLabels()),React.createElement("div",{className:"activity-calendar__container",ref:function(t){return e.container=t}}))},t}(React.Component);t.ActivityCalendar=o,o.docs={description:"Display activity given a data endpoint.",examples:[React.createElement("div",{className:"react-components__style-guide-example--overflow"},React.createElement(o,{dataUrl:"/benhamner/activity.json",tier:"staff"}))],staticMarkup:'<ActivityCalendar \n    dataUrl="/benhamner/activity.json"\n    tier="staff" />',title:"ActivityCalendar"}},,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=[{label:"Datasets",value:"dataset"},{label:"Competitions",value:"competition"}],r=function(e){function t(t){var a=e.call(this,t)||this;return a.renderListItem=function(e){return React.createElement("div",{className:"add-data-source-modal__list-item"},React.createElement("div",{className:"add-data-source-modal__list-item-thumbnail"},React.createElement("img",{src:e.thumbnailUrl})),React.createElement("div",{className:"add-data-source-modal__list-item-info"},React.createElement("div",{className:"add-data-source-modal__list-item-title"},e.title),React.createElement("div",{className:"add-data-source-modal__list-item-description",title:e.description},e.description)),React.createElement("div",{className:"add-data-source-modal__list-item-add-button"},React.createElement(s.ButtonAutoWidth,{text:"Add",onClick:function(){return a.props.onDataSourceAdded(e)}})))},a.state={selectedGroup:i[0].value},a}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement(s.Modal,{modalIsShown:this.props.isShown,onClose:this.props.onClose},React.createElement(s.SmartListContainer,{title:"Add Data Sources",dataUrl:"/kernels/"+this.props.scriptVersionId+"/sources.json",pluralItemDescription:"Data Sources",itemRenderer:this.renderListItem,groups:i,onSelectionsChanged:function(t,a){return e.setState({selectedGroup:a})},searchIndex:this.state.selectedGroup,containerClassName:"add-data-source-modal__container",contentClassName:"add-data-source-modal__content",mobileSortUpperBound:600,contentHeight:400}))},t}(React.Component);t.AddDataSourceModal=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement("a",{className:s("button-auto-width",this.props.classNames),disabled:this.props.isDisabled,href:this.props.href,onClick:this.props.isDisabled||!this.props.onClick?null:function(t){return e.props.onClick(t)},target:this.props.target},this.props.text)},t}(React.Component);t.ButtonAutoWidth=i,i.docs={description:"A button that does not have a fixed width, but rather fits the text it is given.",examples:[React.createElement(i,{text:"Automagical width you say?"})],staticMarkup:'<ButtonAutoWidth text="Automagical width you say?" />',title:"ButtonAutoWidth"}},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("a",{onClick:this.props.onClick,href:this.props.href,className:this.props.className||"button-round-edged"},this.props.text)},t}(React.Component);t.ButtonRoundEdged=n,n.docs={description:"A button that has rounded edges... Bet you weren't expecting that.",examples:[React.createElement(n,{text:"Round Edges FTW"})],staticMarkup:'<ButtonRoundEdged text="Round Edges FTW" />',title:"ButtonRoundEdged"}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(t){var a=e.call(this,t)||this;return a.handleClick=function(){var e=!a.state.isChecked;a.setState({isChecked:e}),a.props.onChange(e)},a.state={isChecked:!!a.props.isChecked},a}return n(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState($.extend({},{isChecked:e.isChecked}))},t.prototype.render=function(){var e=this;return React.createElement("div",{className:s("checkbox",this.props.isEditable&&this.props.textIsClickable?"checkbox--clickable":"")},React.createElement("span",{className:s("checkbox__box",this.props.isEditable&&!this.props.textIsClickable?"checkbox__box--clickable":"",this.props.isEditable?"":"checkbox__box--static",this.state.isChecked?"checkbox__box--checked":"checkbox__box--unchecked"),onClick:this.props.isEditable?this.handleClick:null}),React.createElement("span",{className:"checkbox__label",onClick:this.props.isEditable&&this.props.textIsClickable?this.handleClick:null},this.props.text),this.props.formInputName?React.createElement("input",{ref:function(t){return e.formInput=t},type:"hidden",name:this.props.formInputName,value:this.state.isChecked.toString()}):null)},t}(React.Component);t.Checkbox=i,i.docs={description:"A standard checkbox used for admin and content owners/editors",examples:[React.createElement(i,{isChecked:!0,text:"Is published?",isEditable:!0,textIsClickable:!0,onChange:function(){}}),React.createElement(i,{isChecked:!1,text:"Is featured?",isEditable:!1,textIsClickable:!1,onChange:function(){}})],staticMarkup:'<Checkbox\n    isChecked={true}\n    text="Is published?"\n    isEditable={true}\n    textIsClickable={true}\n    onChange={() => {}} />\n<Checkbox\n    isChecked={false}\n    text="Is featured?"\n    isEditable={false}\n    textIsClickable={false}\n    onChange={() => {}} />',title:"Checkbox"}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(24),i=a(14),r=function(e){function t(t){var a=e.call(this,t)||this;return a.getOptions=function(e,t){var n=["locality","neighborhood","administrative_area_level_2","administrative_area_level_1","country"],i=encodeURIComponent(e.trim());$.get("https://maps.googleapis.com/maps/api/geocode/json?address="+i+"&sensor=false").then(function(e){var i=s.chain(e.results).map(function(e){var t=function(t){return a.getAddressLongName(e.address_components,t)},s=n.map(t),i=s[0],r=s[1],o=s[2],l=s[3],c=s[4];return[r||i||o,l,c]}).filter(function(e){var t=e[0],a=(e[1],e[2]);return t&&null!==a}).map(function(e){var t=e.filter(Boolean).join(", ");return{value:t,label:t}}).value();t(null,{options:i,complete:!1})})},a.onChange=function(e){if(a.setState({value:e}),e&&e.value){var t=e.value.split(", "),n=2===t.length;n?a.props.onChange(t[0],null,t[1]):a.props.onChange(t[0],t[1],t[2])}else a.props.onChange(null,null,null)},a.state={value:[a.props.city,a.props.region,a.props.country].filter(Boolean).join(", ")},a}return n(t,e),t.prototype.getAddressLongName=function(e,t){var a=e.filter(function(e){return e.types.some(function(e){return e===t})});return a.length>0?a[0].long_name:null},t.prototype.render=function(){return React.createElement(i.Async,{placeholder:this.props.city?this.state.value:"City",name:"city",value:this.state.value,minimumInput:3,loadOptions:s.debounce(this.getOptions,250),onChange:this.onChange,filterOption:function(e,t){return e}})},t}(React.Component);t.CityLookup=r,r.docs={description:"You guessed it! Look up a city.",examples:[React.createElement(r,{city:"Grand Forks",region:"North Dakota",country:"United States",onChange:function(){return console.log("Changed!")}})],staticMarkup:'<CityLookup\n    city="Grand Forks"\n    region="North Dakota"\n    country="United States"\n    onChange={() => console.log("Changed!")} />',title:"CityLookup"}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(6),i=a(4),r=a(51);a(52),a(53),a(54),a(55),a(56);var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getAutocompleteHints=function(e,a){s.Current.log("Beginning autocomplete.");var n=t.codeMirror.getDoc(),i=n.getCursor();r.Pos(i.line,i.ch);t.props.getAutocomplete(n.getValue(),n.indexFromPos(i),function(e,t,s){var i=n.posFromIndex(t),r=n.posFromIndex(s);a({list:e,from:i,to:r})})},t.shouldFireAutocomplete=function(){var e=t.codeMirror.getDoc(),a=e.getCursor();if(!a.ch)return!1;var n=e.getValue(),s=e.indexFromPos(a),i=e.indexFromPos({line:a.line,ch:0}),r=n.slice(i,s);return/\S/.test(r)?!0:!1},t.handleAutocomplete=function(){var e=t.codeMirror.getDoc();if(!t.props.getAutocomplete||!t.shouldFireAutocomplete()){if(e.somethingSelected())t.codeMirror.execCommand("indentMore");else{var a=Array(t.codeMirror.getOption("indentUnit")+1).join(" ");e.replaceRange(a,e.getCursor(),null)}return void(t.props.onChange&&t.props.onChange(e.getValue()))}var n=t.getAutocompleteHints;n.async=!0,t.codeMirror.showHint({hint:n})},t.focusChanged=function(e){t.setState({isFocused:e}),t.props.onFocusChange&&t.props.onFocusChange(e)},t.codeMirrorValueChanged=function(e,a){var n=e.getValue();t.currentCodeMirrorValue=n,a.origin&&"setValue"!==a.origin&&t.props.onChange&&t.props.onChange(n)},t}return n(t,e),t.prototype.componentDidMount=function(){var e=this;this.codeMirror=r.fromTextArea(this.textarea,this.props.options),this.codeMirror.on("change",this.codeMirrorValueChanged),this.props.onFocusChange&&(this.codeMirror.on("focus",function(){e.props.onFocusChange(!0)}),this.codeMirror.on("blur",function(){e.props.onFocusChange(!1)})),this.codeMirror.on("blur",function(){window.setTimeout(function(){e.codeMirror.getDoc().setSelection({line:0,ch:0},{line:0,ch:0})})}),this.props.onMouseUp&&this.codeMirror.on("mosueup",this.props.onMouseUp),this.currentCodeMirrorValue=this.props.defaultValue||this.props.value||"",this.codeMirror.setValue(this.currentCodeMirrorValue),this.codeMirror.setOption("extraKeys",{Tab:this.handleAutocomplete,"Ctrl-Space":this.handleAutocomplete,"Shift-Tab":"indentLess",Up:function(){return 0===e.codeMirror.getDoc().getCursor().line&&e.props.canMoveUp()?void e.props.onMoveUp():r.Pass},Down:function(){var t=e.codeMirror.getDoc();return t.getCursor().line===t.lineCount()-1&&e.props.canMoveDown()?void e.props.onMoveDown():r.Pass},"Shift-Enter":this.props.onShiftEnter,"Alt-Enter":this.props.onShiftEnter,"Ctrl-Enter":this.props.onCtrlEnter,"Cmd-Enter":this.props.onCtrlEnter}),this.props.hasFocus&&window.setTimeout(function(){return e.codeMirror.focus()})},t.prototype.componentWillUnmount=function(){this.codeMirror&&this.codeMirror.toTextArea()},t.prototype.componentWillReceiveProps=function(e){var t=this;if(this.codeMirror&&e.hasFocus&&!this.codeMirror.hasFocus()&&window.setTimeout(function(){t.codeMirror.refresh(),t.codeMirror.focus()},0),this.codeMirror&&e.value&&this.currentCodeMirrorValue!==e.value&&this.codeMirror.setValue(e.value),"object"==typeof e.options)for(var a in e.options)e.options.hasOwnProperty(a)&&this.codeMirror.setOption(a,e.options[a])},t.prototype.focus=function(){this.codeMirror&&this.codeMirror.focus()},t.prototype.render=function(){var e=this,t=i("code-mirror-editor",this.props.className);return React.createElement("div",{className:t},React.createElement("textarea",{ref:function(t){e.textarea=t},defaultValue:this.props.value,autoComplete:"off"}))},t}(React.Component);t.CodeMirrorEditor=o,o.docs={title:"CodeMirrorEditor",description:"Our code editor, used in Notebooks",examples:[React.createElement("div",{className:"react-components__style-guide-example--overflow"},React.createElement(o,{value:"# Python code\nimport this",defaultValue:"",onChange:function(e){},hasFocus:!1,onMouseUp:function(){},options:{mode:"python",scrollbarStyle:"native",indentUnit:4,indentWithTabs:!1,autoCloseBrackets:!0,readOnly:!1,theme:"kaggle"},getAutocomplete:function(){},canMoveUp:function(){return!0},canMoveDown:function(){return!0},onMoveUp:function(){},onMoveDown:function(){},onCtrlEnter:function(){},onShiftEnter:function(){}}))],staticMarkup:'<CodeMirrorEditor\n    value={"# Code"}\n    defaultValue={""}\n    onChange={screen => {}}\n    hasFocus={false}\n    onMouseUp={() => {}}\n    options={{\n        mode: "python",\n        scrollbarStyle: "native",\n        indentUnit: 4,\n        indentWithTabs: false,\n        autoCloseBrackets: true,\n        readOnly: false,\n        theme: "kaggle"\n    }}\n    getAutocomplete={() => {}}\n    canMoveUp={() => {return true}}\n    canMoveDown={() => {return true}}\n    onMoveUp={() => {}}\n    onMoveDown={() => {}}\n    onCtrlEnter={() => {}}\n    onShiftEnter={() => {}} />'}},,,,,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(58),i=a(40),r=function(e){function t(t){var a=e.call(this,t)||this;return a.state={commentReplySubmitted:function(e){return a.loadData(a.props.topicId,e)},dataLoaded:!1,kernelFilterChanged:function(e){return a.changeKernelFilter(e)},replySubmitted:function(){return a.props.replySubmitted(function(e){return a.loadData(a.props.topicId,function(){var t="#"+e,a=100,n=$(t).position();$(document).scrollTop();$("html, body").animate({scrollTop:n.top-a},300)})})},showSortPane:!1,sortChanged:function(e){return a.changeSort(e)},toggleSortPane:function(){return a.setState({showSortPane:!a.state.showSortPane})}},a}return n(t,e),t.prototype.componentWillMount=function(){var e=this;this.state.dataLoaded||this.loadData(this.props.topicId,function(){
return e.setState({dataLoaded:!0},function(){window.setTimeout(function(){var e=100,t=$(window.location.hash).position();if(t){$(document).scrollTop();$("html, body").animate({scrollTop:t.top-e},300)}})})})},t.prototype.render=function(){return this.state.dataLoaded?React.createElement(s.CommentList,$.extend(!0,{},this.props,this.state)):React.createElement(i.LoadingText,{isLoading:!this.state.dataLoaded,text:"Loading Comments"})},t.prototype.changeKernelFilter=function(e){var t=this;this.setState({kernelFilter:e},function(){return t.loadData(t.props.topicId)})},t.prototype.changeSort=function(e){var t=this;history.replaceState(history.state,document.title,window.location.pathname+window.location.search),this.setState({sort:e},function(){return t.loadData(t.props.topicId)})},t.prototype.loadData=function(e,t){var a=this;return void 0===t&&(t=null),null==e?void this.setState({dataLoaded:!0}):void $.ajax("/topics/"+e+"/comments.json",{data:{filter:this.state.kernelFilter,sort:this.state.sort}}).done(function(e){a.setState($.extend(a.state,e),t)})},t}(React.Component);t.CommentListContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=(a(4),a(40)),r=a(59),o=a(70),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this,a=this.props.comments?this.props.comments.reduce(function(e,t){return e+t.replies.length+1},0):0;return React.createElement("div",{className:"comment-list"},React.createElement(i.MediaQuery,{minWidth:0,maxWidth:i.Breakpoints.tabletMax},React.createElement(i.OffCanvasContainer,{closeButtonCallback:function(){return e.props.toggleSortPane()},shouldShowOffCanvas:this.props.showSortPane,shouldUseCloseButton:!0,shouldUseRightSide:!0},React.createElement("div",{className:"comment-list__sort-pane"},this.props.showKernelFilter?React.createElement(i.SelectBox,{className:"comment-list__kernel-filter",onChange:this.props.kernelFilterChanged,options:t.kernelCommentFilters,searchable:!1,value:this.props.kernelFilter}):null,React.createElement("span",{className:"comment-list__sortby-label"},"Sort By"),React.createElement(i.SelectBox,{onChange:this.props.sortChanged,options:t.commentSorts,searchable:!1,value:this.props.sort})))),React.createElement("div",{className:"comment-list__header"},React.createElement("span",{className:"comment-list__title"},"Comments (",a,")"),React.createElement("span",{className:"comment-list__spacer"}),React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopMin},React.createElement("div",{className:"comment-list__sort-pane-button"},this.props.showKernelFilter?React.createElement(i.SelectBox,{onChange:this.props.kernelFilterChanged,options:t.kernelCommentFilters,searchable:!1,value:this.props.kernelFilter}):null,React.createElement("span",{className:"comment-list__sortby-label"},"Sort By"),React.createElement(i.SelectBox,{onChange:this.props.sortChanged,options:t.commentSorts,searchable:!1,value:this.props.sort}))),React.createElement(i.MediaQuery,{minWidth:0,maxWidth:i.Breakpoints.tabletMax},React.createElement("span",{className:"comment-list__sort-pane-button",onClick:function(){return e.props.toggleSortPane()}},"filter / sort >"))),this.props.allowReplies?i.Current.isAnonymous?[React.createElement("div",{className:"comment-list__login-warning"},"Please ",React.createElement("a",{className:"comment-list__link",href:"/account/login?ReturnUrl=${this.props.returnUrl}"},"log in")," to leave a comment"),React.createElement("div",{className:"comment-list__comment-linking-spacer"})]:[React.createElement("div",{id:"topic-reply"},React.createElement(o.NewCommentContainer,{allowAttachments:this.props.allowAttachments,currentUserTier:this.props.currentUserTier,editAttachments:this.props.replyAttachments,editAttachmentAdded:this.props.replyAttachmentAdded,editAttachmentDeleted:this.props.replyAttachmentDeleted,editDraft:this.props.replyDraft,editDraftChanged:this.props.replyDraftChanged,editSubmitted:this.props.replySubmitted,isSubmitting:this.props.isSubmittingReply})),React.createElement("div",{className:"comment-list__comment-linking-spacer"})]:null,this.props.comments?this.props.comments.map(function(t){return[React.createElement(r.CommentContainer,s({},t,{allowAttachments:e.props.allowAttachments,allowReplies:e.props.allowReplies&&!i.Current.isAnonymous,canDownvote:e.props.canDownvote,currentUserTier:e.props.currentUserTier,key:t.id,replySubmitted:e.props.commentReplySubmitted})),React.createElement("div",{className:"comment-list__comment-linking-spacer"})]}):null)},t}(React.Component);l.commentSorts=[{label:"Hotness",value:"hot"},{label:"Most Votes",value:"top"},{label:"Newest",value:"new"},{label:"Oldest",value:"old"},{label:"Chronological",value:"chronological"}],l.kernelCommentFilters=[{label:"All Comments",value:"all"},{label:"Latest Version Comments",value:"version"}],t.CommentList=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(60),i=a(40),r=a(68),o=function(e){function t(t){var a=e.call(this,t)||this;a.markdownConverter=new Markdown.getSanitizingConverter;var n=function(e,t){for(var n=a.state.replyDraft||"",s="\n> **"+e+" wrote**\n> \n> ",i=t.split("\n"),r=/\s*\[.*?\]:/,o=0;o<i.length;o++){var l=i[o];r.test(l)||(i[o]="> "+l)}a.setState({replyDraft:n+s+i.join("\n"),showReplyForm:!0},function(){var e="#comment-reply-"+a.props.id,t=100;$("html, body").animate({scrollTop:$(e).position().top-t},200)})};return a.state={attachmentAdded:function(e,t,n){return a.addAttachment(e,t,n)},attachmentDeleted:function(e){return a.deleteAttachment(e)},attachments:a.props.attachments,content:a.props.content,editDraft:a.props.rawMarkdown||s(a.props.content),editDraftChanged:function(e){return a.changeEditDraft(e)},editSubmitted:function(){return a.submitEdit()},flagFormClosed:function(){return a.setState({showFlagForm:!1})},flagged:function(){return $.post("/forums/messages/flag?forumMessageId="+a.props.id).done(function(){return a.setState({hasFlags:!0,isFlagged:!0,showFlagForm:!1})})},hasFlags:a.props.hasFlags,isFlagged:a.props.isFlagged,isSpammed:a.props.isSpammed,isSubmittingReply:!1,isDeleted:a.props.isDeleted,newAttachments:[],quoted:function(e,t){return a.props.quoted?a.props.quoted(e,t):n(e,t)},rawMarkdown:a.props.rawMarkdown||s(a.props.content),replyAttachments:[],replyAttachmentAdded:function(e,t,n){return a.addReplyAttachment(e,t,n)},replyAttachmentDeleted:function(e){return a.deleteReplyAttachment(e)},replyDraft:"",replyDraftChanged:function(e){return a.changeReplyDraft(e)},replySubmitted:function(){return a.submitReply()},showEditForm:!1,showFlagForm:!1,showOptions:!1,showReplyForm:!1,showUpvoters:!1},a}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement(r.Comment,$.extend(!0,{},this.props,this.state,{allowAttachments:this.props.allowAttachments,isNew:!1,leftOptions:this.leftOptions(),onReply:function(t){return e.onReply(t)},rightOptions:this.rightOptions(),titleOptions:this.titleOptions()}))},t.prototype.addAttachment=function(e,t,a){var n=this.state.newAttachments;n.push({name:e,totalBytes:a,blobToken:t}),this.setState({newAttachments:n})},t.prototype.addReplyAttachment=function(e,t,a){var n=this.state.replyAttachments;n.push({name:e,totalBytes:a,blobToken:t}),this.setState({replyAttachments:n})},t.prototype.changeEditDraft=function(e){this.setState({editDraft:e})},t.prototype.changeReplyDraft=function(e){this.setState({replyDraft:e})},t.prototype.deleteAttachment=function(e){var t=this.state.newAttachments.filter(function(t){return t.name==e})[0],a=this.state.newAttachments.indexOf(t);return-1!==a?(this.state.newAttachments.splice(a,1),void this.setState({newAttachments:this.state.newAttachments})):(t=this.state.attachments.filter(function(t){return t.name==e})[0],a=this.state.attachments.indexOf(t),this.state.attachments.splice(a,1),this.setState({attachments:this.state.attachments}),void $.ajax("/forums/attachments/delete/"+t.id,{contentType:"application/json",type:"POST"}))},t.prototype.deleteReplyAttachment=function(e){var t=this.state.replyAttachments.filter(function(t){return t.name==e})[0],a=this.state.replyAttachments.indexOf(t);return-1!==a?(this.state.replyAttachments.splice(a,1),void this.setState({replyAttachments:this.state.replyAttachments})):void 0},t.prototype.leftOptions=function(){var e=this,t=[{onClick:function(t){e.state.quoted(e.props.author.displayName,e.state.rawMarkdown||s(e.state.content))},text:"Quote"},{href:"#"+this.props.id,onClick:function(t){if(!(t.shiftKey||t.ctrlKey||t.metaKey)){t.preventDefault();var a="#"+e.props.id,n=100;$("html, body").animate({scrollTop:$(a).position().top-n},200,"swing",function(){return window.location.hash=e.props.id+""})}},text:"Permalink"}];i.Current.isAnonymous||(this.state.isFlagged?t.push({className:"discussion-comment__option--disabled",text:"Flagged"}):t.push({onClick:function(){return e.setState({showFlagForm:!0})},text:"Flag"}));var a=this.props.upvoters.length;return a>0&&t.push({className:this.state.showUpvoters?"discussion-comment__option--selected":null,onClick:function(){return e.setState({showUpvoters:!e.state.showUpvoters})},text:React.createElement(i.Pluralize,{count:a,word:"Upvoter"})}),t},t.prototype.onReply=function(e){this.setState({showReplyForm:!this.state.showReplyForm},e)},t.prototype.rightOptions=function(){var e=this,t=[];return i.Current.isAdmin&&(this.state.hasFlags&&t.push({onClick:function(){return $.ajax("/forums/messages/unflag?forumMessageId="+e.props.id,{contentType:"application/json",type:"POST"}).done(function(){return e.setState({hasFlags:!1,isFlagged:!1})})},text:"Unflag"}),t.push({onClick:function(){return $.ajax("/forums/messages/spam?forumMessageId="+e.props.id,{contentType:"application/json",type:"POST"}).done(function(){return e.setState({isDeleted:e.state.isSpammed?e.state.isDeleted:!1,isSpammed:!e.state.isSpammed})})},text:this.state.isSpammed?"Unspam":"Spam"},{onClick:function(){return $.ajax("/forums/messages/delete?forumMessageId="+e.props.id,{contentType:"application/json",type:"POST"}).done(function(){return e.setState({isDeleted:!e.state.isDeleted,isSpammed:e.state.isDeleted?e.state.isSpammed:!1})})},text:this.state.isDeleted?"Restore":"Delete"})),t},t.prototype.submitEdit=function(){var e=this;$.ajax({contentType:"application/json",data:JSON.stringify({blobFileTokens:this.state.newAttachments.map(function(e){return e.blobToken}),message:this.markdownConverter.makeHtml(this.state.editDraft),rawMarkdown:this.state.editDraft}),type:"PUT",url:"/messages/"+this.props.id}).done(function(){e.setState({content:e.markdownConverter.makeHtml(e.state.editDraft),rawMarkdown:e.state.editDraft,showEditForm:!1})}).fail(function(){i.PageMessages.clear(),i.PageMessages.error({htmlMessage:'We had trouble saving your edit. Please try again or <a href="mailto: support@kaggle.com">contact support</a> if you continue experiencing issues.',type:"error"})})},t.prototype.submitReply=function(){var e=this;this.setState({isSubmittingReply:!0},function(){return $.ajax({contentType:"application/json",data:JSON.stringify({blobFileTokens:e.state.replyAttachments.map(function(e){return e.blobToken}),message:e.markdownConverter.makeHtml(e.state.replyDraft),rawMarkdown:e.state.replyDraft}),type:"POST",url:"/messages/"+e.props.id+"/replies"}).done(function(t){e.setState({isSubmittingReply:!1,replyDraft:"",showReplyForm:!1},function(){window.Intercom("trackEvent","forum_post"),e.props.replySubmitted(function(){var e="#"+t,a=100;$("html, body").animate({scrollTop:$(e).position().top-a},200)})})}).fail(function(){e.setState({isSubmittingReply:!1}),i.PageMessages.clear(),i.PageMessages.error({htmlMessage:'We had trouble submitting your reply. Please try again or <a href="mailto: support@kaggle.com">contact support</a> if you continue experiencing issues.',type:"error"})})})},t.prototype.titleOptions=function(){var e=this,t=[{className:this.state.showOptions?"discussion-comment__title-element--selected":null,onClick:function(){return e.setState({showOptions:!e.state.showOptions})},text:"Options"}];return(i.Current.isAdmin||this.props.isUserAuthor)&&t.push({className:this.state.showEditForm?"discussion-comment__title-element--selected":null,onClick:function(){return e.setState({editDraft:e.props.rawMarkdown||s(e.props.content),showEditForm:!e.state.showEditForm})},text:"Edit"}),this.props.allowReplies&&t.push({className:this.props.parentReplyShown||this.state.showReplyForm?"discussion-comment__title-element--selected":null,onClick:function(){(e.props.onReply||e.onReply.bind(e))(function(){var t="#comment-reply-"+(e.props.parentId||e.props.id),a=100;$("html, body").animate({scrollTop:$(t).position().top-a},200)})},text:"Reply"}),t},t}(React.Component);t.CommentContainer=o},,,,,,,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(4),r=a(40),o=a(69),l=a(59),c=a(70),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this,t=this.props.author;return React.createElement("div",{id:this.props.id.toString()},React.createElement(r.Modal,{buttonClassName:"discussion-comment__hidden",modalClassName:"flag-form__wrapper",modalIsShown:this.props.showFlagForm,onClose:this.props.flagFormClosed},React.createElement("div",{className:"flag-form"},React.createElement("div",{className:"flag-form__title"},"Flag this post?"),React.createElement("div",{className:"flag-form__body"},"Flagging notifies Kaggle that this message is spam, inappropriate, abusive, or violates rules. Do not use flagging to indicate you disagree with an opinion or to hide a post."),React.createElement("div",{className:"flag-form__actions"},React.createElement(r.Button,{classNames:"flag-form__action flag-form__action--secondary",onClick:this.props.flagFormClosed,text:"Cancel"}),React.createElement("span",{className:"flag-form__action-spacer"}),React.createElement(r.Button,{classNames:"flag-form__action",onClick:this.props.flagged,text:"Flag as Inappropriate"})))),this.props.parentUrl?React.createElement("div",{className:"discussion-comment__parent"},React.createElement("span",{className:"fa fa-share"})," in response to ",React.createElement("a",{className:"discussion-comment__parent-link",href:this.props.parentUrl},this.props.parentName)):null,React.createElement(r.MediaQuery,{minWidth:r.Breakpoints.desktopMin},React.createElement("div",{className:"comment-wrapper"},React.createElement("div",{className:"discussion-comment__author"},React.createElement(r.Avatar,s({},this.props.author,{hideTooltop:!0,width:40})),this.props.medal?React.createElement("img",{className:"discussion-comment__medal",src:"/static/images/medals/discussion/"+this.props.medal+"L@1x.png",title:this.props.medal}):null),React.createElement("div",{className:i("discussion-comment",this.props.showReplyForm||this.props.replies&&this.props.replies.length>0?"discussion-comment--parent":null)},React.createElement("span",{className:"discussion-comment__title"},React.createElement("a",{className:"discussion-comment__title-author-link"+("parent"==this.props.authorType?" discussion-comment__title-author-link--parent-author":"topic"==this.props.authorType?" discussion-comment__title-author-link--topic-author":""),href:t.userUrl,title:t.displayName},t.displayName),this.props.competitionRanking?[React.createElement("span",{className:"discussion-comment__title-element"},"•"),React.createElement("span",{className:"discussion-comment__title-element"},"(",React.createElement(r.Ordinal,null,this.props.competitionRanking)," in this Competition)")]:null,this.props.kernelVersion?[React.createElement("span",{className:"discussion-comment__title-element"},"•"),React.createElement("span",{className:"discussion-comment__title-element"},this.props.kernelVersion==this.props.currentKernelVersion?"Posted on Latest Version":"Posted on Version "+this.props.kernelVersion)]:null,this.props.postDate?[React.createElement("span",{className:"discussion-comment__title-element"},"•"),React.createElement("span",{className:"discussion-comment__title-element"},React.createElement(r.TimeAgo,{time:this.props.postDate}))]:null,this.props.titleOptions.map(function(e){return[React.createElement("span",{className:"discussion-comment__title-element"},"•"),React.createElement("a",{className:i("discussion-comment__title-element","discussion-comment__title-element--link",e.className),href:e.href,onClick:e.onClick},e.text)]}),React.createElement("span",{className:"discussion-comment__title-element--spacer"}),this.props.isNew?null:React.createElement(r.VoteButton,{canDownvote:this.props.canDownvote&&r.Current.userId!=this.props.author.id,canUpvote:r.Current.userId!=this.props.author.id,compact:!0,hasAlreadyVotedDown:-1===this.props.currentUserVote,hasAlreadyVotedUp:1===this.props.currentUserVote,totalVotes:this.props.votes,voteDownUrl:"/forums/messages/downvote?forumMessageId="+this.props.id,voteUpUrl:"/forums/messages/upvote?forumMessageId="+this.props.id,upVoteIntercomEventName:"forum_vote",downVoteIntercomEventName:"forum_vote"})),React.createElement("div",{className:i("discussion-comment__body",this.props.showEditForm?"discussion-comment__body--editing":null)},this.props.showEditForm?[React.createElement(r.MarkdownEditor,{alwaysShowToolbar:!0,compact:window.innerWidth<r.Breakpoints.desktopMin,defaultValue:this.props.rawMarkdown,onChangeCallback:function(t){return e.props.editDraftChanged(t)},placeholder:"Enter your comments",rows:3,shouldSanitizeHtml:!0,suffix:"-comment-"+this.props.id+"-edit",useTogglePreview:!0}),React.createElement("span",{className:i((this.props.attachments||[]).length>0||this.props.newAttachments.length>0?"discussion-comment__attachment-spacer":null)}),React.createElement(r.FileList,{compact:!0,fileListItems:this.props.attachments||[],fileListKeyBaseName:"attachment-",isEditing:!0,canDelete:!0,deleteCallback:this.props.attachmentDeleted}),React.createElement(r.FileList,{compact:!0,fileListItems:this.props.newAttachments,fileListKeyBaseName:"new-attachment-",isEditing:!0,canDelete:!0,deleteCallback:this.props.attachmentDeleted}),React.createElement("div",{className:"discussion-comment__action-buttons"},this.props.allowAttachments?React.createElement("div",{className:"discussion-comment__action-button"},React.createElement(r.FileUploader,{compact:!0,createBlobUrl:"/blobs/inbox/forum-message-attachment-files",mode:r.FileUploaderMode.Multiple,onFileUploadFinished:this.props.attachmentAdded,autoRemoveOnComplete:!0,maxUncompressedBytesAllowed:5e8,maxCompressedBytesAllowed:5e8,suffix:"-comment-"+this.props.id,multipleFileButtonLabel:" "})):null,React.createElement("span",{className:"discussion-comment__flex-spacer"}),React.createElement("span",{className:"discussion-comment__editor-submit-wrapper"},React.createElement(r.Button,{isDisabled:this.props.isSubmittingReply,isSmall:!0,onClick:this.props.editSubmitted,text:this.props.isNew?"Post Comment":"Save Changes"})))]:[React.createElement(o.ForumMessageContent,{rawHtml:this.props.content,rawMarkdown:this.props.rawMarkdown||""}),React.createElement("span",{className:i((this.props.attachments||[]).length>0||this.props.newAttachments.length>0?"discussion-comment__attachment-spacer":null)}),React.createElement(r.FileList,{compact:!0,fileListItems:this.props.attachments||[],fileListKeyBaseName:"attachment-",isEditing:!1,deleteCallback:this.props.attachmentDeleted}),React.createElement(r.FileList,{compact:!0,fileListItems:this.props.newAttachments,fileListKeyBaseName:"new-attachment-",isEditing:!1,deleteCallback:this.props.attachmentDeleted})]),this.props.showOptions?React.createElement("span",{className:"discussion-comment__options"},React.createElement("span",{className:"discussion-comment__options-group"},this.props.leftOptions.map(function(e){return[React.createElement("a",{className:i("discussion-comment__option",e.className),href:e.href,onClick:e.onClick},e.text),React.createElement("span",{className:"discussion-comment__option-spacer"},"|")]})),React.createElement("span",{className:"discussion-comment__spacer"}),React.createElement("span",{className:"discussion-comment__options-group"},this.props.rightOptions.map(function(e){return[React.createElement("a",{className:i("discussion-comment__option",e.className),href:e.href,onClick:e.onClick},e.text),React.createElement("span",{className:"discussion-comment__option-spacer"},"|")]}))):null,this.props.showReplyForm||this.props.replies&&this.props.replies.length>0?React.createElement("div",{className:"discussion-comment__replies"},this.props.replies.map(function(t){return[React.createElement(l.CommentContainer,s({},t,{allowReplies:e.props.allowReplies,canDownvote:e.props.canDownvote,key:t.id,onReply:e.props.onReply,parentId:e.props.id,parentReplyShown:e.props.showReplyForm,quoted:e.props.quoted})),React.createElement("div",{className:"discussion-comment__linking-line"})]}),this.props.showReplyForm?React.createElement("div",{id:"comment-reply-"+this.props.id},React.createElement(c.NewCommentContainer,{currentUserTier:this.props.currentUserTier,editAttachments:this.props.replyAttachments,editAttachmentAdded:this.props.replyAttachmentAdded,editAttachmentDeleted:this.props.replyAttachmentDeleted,editDraft:this.props.replyDraft,editDraftChanged:this.props.replyDraftChanged,editSubmitted:this.props.replySubmitted,isSubmitting:this.props.isSubmittingReply})):null):null,this.props.showUpvoters?React.createElement("div",{className:"discussion-comment__upvoters"},this.props.upvoters.map(function(e){return React.createElement(r.Avatar,s({},e,{className:"discussion-comment__upvoter"}))})):null))),React.createElement(r.MediaQuery,{minWidth:0,maxWidth:r.Breakpoints.tabletMax},React.createElement("div",{className:i("discussion-comment",this.props.showReplyForm||this.props.replies&&this.props.replies.length>0?"discussion-comment--parent":null)},React.createElement("span",{className:"discussion-comment__title"},React.createElement("a",{className:"discussion-comment__title-author-link"+("parent"==this.props.authorType?" discussion-comment__title-author-link--parent-author":"topic"==this.props.authorType?" discussion-comment__title-author-link--topic-author":""),href:t.userUrl,title:t.displayName},t.displayName),this.props.postDate?[React.createElement("span",{className:"discussion-comment__title-element"},"•"),React.createElement("span",{className:"discussion-comment__title-element"},React.createElement(r.TimeAgo,{time:this.props.postDate}))]:null,React.createElement("span",{className:"discussion-comment__title-element--spacer"}),this.props.isNew?null:React.createElement(r.VoteButton,{canDownvote:this.props.canDownvote&&r.Current.userId!=this.props.author.id,canUpvote:r.Current.userId!=this.props.author.id,compact:!0,hasAlreadyVotedDown:-1===this.props.currentUserVote,hasAlreadyVotedUp:1===this.props.currentUserVote,totalVotes:this.props.votes,voteDownUrl:"/forums/messages/downvote?forumMessageId="+this.props.id,voteUpUrl:"/forums/messages/upvote?forumMessageId="+this.props.id})),React.createElement("div",{className:i("discussion-comment__body",this.props.showEditForm?"discussion-comment__body--editing":null)},React.createElement("div",{className:"discussion-comment__content"},this.props.showEditForm?[React.createElement(r.MarkdownEditor,{alwaysShowToolbar:!0,compact:window.innerWidth<r.Breakpoints.desktopMin,defaultValue:this.props.rawMarkdown,onChangeCallback:function(t){return e.props.editDraftChanged(t)},placeholder:"Enter your comments",rows:3,shouldSanitizeHtml:!0,suffix:"-comment-"+this.props.id+"-edit",useTogglePreview:!0}),React.createElement("span",{className:i((this.props.attachments||[]).length>0||this.props.newAttachments.length>0?"discussion-comment__attachment-spacer":null)}),React.createElement(r.FileList,{compact:!0,fileListItems:this.props.attachments||[],fileListKeyBaseName:"attachment-",isEditing:!0,canDelete:!0,deleteCallback:this.props.attachmentDeleted}),React.createElement(r.FileList,{compact:!0,fileListItems:this.props.newAttachments,fileListKeyBaseName:"new-attachment-",isEditing:!0,canDelete:!0,deleteCallback:this.props.attachmentDeleted}),React.createElement("div",{className:"discussion-comment__action-buttons"},this.props.allowAttachments?React.createElement("div",{className:"discussion-comment__action-button"},React.createElement(r.FileUploader,{compact:!0,createBlobUrl:"/blobs/inbox/forum-message-attachment-files",mode:r.FileUploaderMode.Multiple,onFileUploadFinished:this.props.attachmentAdded,autoRemoveOnComplete:!0,maxUncompressedBytesAllowed:5e8,maxCompressedBytesAllowed:5e8,suffix:"-comment-"+this.props.id,multipleFileButtonLabel:" "})):null,React.createElement("span",{className:"discussion-comment__flex-spacer"}),React.createElement("span",{className:"discussion-comment__editor-submit-wrapper"},React.createElement(r.Button,{isDisabled:this.props.isSubmittingReply,isSmall:!0,onClick:this.props.editSubmitted,text:this.props.isNew?"Post Comment":"Save Changes"})))]:[React.createElement(o.ForumMessageContent,{rawHtml:this.props.content,rawMarkdown:this.props.rawMarkdown||""}),React.createElement("span",{className:i((this.props.attachments||[]).length>0||this.props.newAttachments.length>0?"discussion-comment__attachment-spacer":null)}),React.createElement(r.FileList,{compact:!0,fileListItems:this.props.attachments||[],fileListKeyBaseName:"attachment-",isEditing:!1,deleteCallback:this.props.attachmentDeleted}),React.createElement(r.FileList,{compact:!0,fileListItems:this.props.newAttachments,fileListKeyBaseName:"new-attachment-",isEditing:!1,deleteCallback:this.props.attachmentDeleted})]),React.createElement("div",{className:"discussion-comment__title-elements"},this.props.titleOptions.map(function(e){return React.createElement("a",{className:i("discussion-comment__title-element","discussion-comment__title-element--link",e.className),href:e.href,onClick:e.onClick},e.text)})),this.props.showOptions?React.createElement("span",{className:"discussion-comment__options"},this.props.leftOptions.map(function(e){return React.createElement("a",{className:i("discussion-comment__option",e.className),href:e.href,onClick:e.onClick},e.text)}),this.props.rightOptions.map(function(e){return React.createElement("a",{className:i("discussion-comment__option",e.className),href:e.href,onClick:e.onClick},e.text)})):null,this.props.showUpvoters?React.createElement("div",{className:"discussion-comment__upvoters"},this.props.upvoters.map(function(e){return React.createElement(r.Avatar,s({},e,{className:"discussion-comment__upvoter"}))})):null,this.props.showReplyForm||this.props.replies&&this.props.replies.length>0?React.createElement("div",{className:"discussion-comment__replies"},React.createElement("div",{className:"discussion-comment__linking-line"},this.props.replies.map(function(t){return[React.createElement(l.CommentContainer,s({},t,{allowReplies:e.props.allowReplies,canDownvote:e.props.canDownvote,key:t.id,onReply:e.props.onReply,parentId:e.props.id,parentReplyShown:e.props.showReplyForm,quoted:e.props.quoted}))]}),this.props.showReplyForm?React.createElement("div",{id:"comment-reply-"+this.props.id},React.createElement(c.NewCommentContainer,{currentUserTier:this.props.currentUserTier,editAttachments:this.props.replyAttachments,editAttachmentAdded:this.props.replyAttachmentAdded,editAttachmentDeleted:this.props.replyAttachmentDeleted,editDraft:this.props.replyDraft,editDraftChanged:this.props.replyDraftChanged,editSubmitted:this.props.replySubmitted,isSubmitting:this.props.isSubmittingReply})):null)):null))))},t}(React.Component);t.Comment=p},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.componentDidUpdate=function(){var e=this,t=["$$","\\[","\\("],a=t.some(function(t){return(e.props.rawHtml||"").indexOf(t)>-1||e.props.rawMarkdown.indexOf(t)>-1});a&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.renderedDiv])},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"forum-message-content",dangerouslySetInnerHTML:{__html:this.props.rawHtml||""},ref:function(t){e.renderedDiv=t}})},t}(React.Component);t.ForumMessageContent=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=(a(60),a(40)),i=a(68),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.markdownConverter=new Markdown.getSanitizingConverter,t}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement(i.Comment,{allowAttachments:this.props.allowAttachments,attachmentAdded:this.props.editAttachmentAdded,attachmentDeleted:this.props.editAttachmentDeleted,author:{displayName:$("<textarea/>").html(s.Current.userDisplayName).text(),id:s.Current.userId,thumbnailUrl:s.Current.userThumbnailUrl,tier:this.props.currentUserTier,userUrl:s.Current.userProfileUrl},editDraft:this.props.editDraft,editDraftChanged:function(t){return e.props.editDraftChanged(t)},editSubmitted:function(){return e.props.editSubmitted()},id:9e7*Math.random()+1e7,isNew:!0,isSubmittingReply:this.props.isSubmitting,leftOptions:[],newAttachments:this.props.editAttachments,rawMarkdown:this.props.editDraft,rightOptions:[],showEditForm:!0,titleOptions:[]})},t}(React.Component);t.NewCommentContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(72),i=a(7),r=a(32),o=function(e){function t(t){var a=e.call(this,t)||this;return a.hostSegmentModifier=a.props.competition.isInClass?"inclass":a.props.competition.hostSegment.replace(" ",""),a}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement(r.BlockLink,{key:this.props.index,href:this.props.competition.competitionUrl,onClick:function(){return e.props.onClick("competition-"+e.props.competition.competitionId,e.props.competition.competitionUrl,e.props.index)}},React.createElement("div",{className:"competition-card competition-card--"+this.hostSegmentModifier+" "+(this.props.competition.userHasEntered?"competition-card--user-entered":"")},React.createElement("div",null,React.createElement("img",{src:this.props.competition.thumbnailImageUrl,alt:this.props.competition.competitionTitle,className:"competition-card__thumbnail"})),React.createElement("div",{className:"competition-card__title"},React.createElement("div",null,React.createElement("a",{href:this.props.competition.competitionUrl,className:"competition-card__competition-link"},this.props.competition.competitionTitle),this.props.competition.isPrivate?React.createElement("span",{className:"competition-card__tag"},"Private"):null,this.props.competition.isLimited?React.createElement("span",{className:"competition-card__tag"
},"Limited"):null),React.createElement("div",{className:"competition-card__description"},this.props.competition.competitionDescription),React.createElement("div",{className:"competition-card__meta"},React.createElement("span",{className:"competition-card__host-segment competition-card__host-segment--"+this.hostSegmentModifier},this.props.competition.isInClass?"In-Class":this.props.competition.hostSegment),React.createElement("span",{className:"competition-card__deadline"},"   ·   ",React.createElement(i.TimeAgo,{time:this.props.competition.deadline})),this.props.competition.userHasEntered?React.createElement("span",null,"   ·   Entered"):null,this.props.competition.totalKernels?React.createElement("span",null,"   ·   ",React.createElement("a",{className:"competition-card__kernel-link",href:this.props.competition.competitionUrl+"/kernels"},React.createElement(s.Pluralize,{count:this.props.competition.totalKernels,formatNumber:!0,word:"kernel"}))):null)),React.createElement("div",{className:"competition-card__stats"},"Knowledge"!=this.props.competition.rewardDisplay?React.createElement("div",null,this.props.competition.rewardDisplay):null,React.createElement("div",{className:"competition-card__teams"},React.createElement(s.Pluralize,{count:this.props.competition.totalTeams,formatNumber:!0,word:"team"})))))},t}(React.Component);t.CompetitionCard=o,o.docs={title:"CompetitionCard",description:"A quick glance at a given competition",examples:[React.createElement(o,{competition:{competitionDescription:"Just a nonexistent competition",competitionId:123456789,competitionTitle:"Sample competition",competitionUrl:"#",deadline:new Date,hostSegment:"playground",isInClass:!1,isLimited:!1,isPrivate:!0,organizationName:"Some Org",organizationUrl:"#",rewardDisplay:"100000 Kudos",rewardQuantity:1e5,rewardTypeName:"Kudos",thumbnailImageUrl:"https://kaggle2.blob.core.windows.net/avatars/thumbnails/default-thumb.png",totalKernels:999,totalTeams:999,userHasEntered:!1}})],staticMarkup:'<CompetitionCard\n    competition={{\n        competitionDescription: "Just a nonexistent competition",\n        competitionId: 123456789,\n        competitionTitle: "Sample competition",\n        competitionUrl: "#",\n        deadline: new Date(),\n        hostSegment: "playground",\n        isInClass: false,\n        isLimited: false,\n        isPrivate: true,\n        organizationName: "Some Org",\n        organizationUrl: "#",\n        rewardDisplay: "Playground",\n        rewardQuantity: 100000,\n        rewardTypeName: "Kudos",\n        thumbnailImageUrl: "https://kaggle2.blob.core.windows.net/avatars/thumbnails/default-thumb.png",\n        totalKernels: 999,\n        totalTeams: 999,\n        userHasEntered: false\n    }} />'}},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(3),i=a(73),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.formattedNumber=function(e){return i.numberWithCommas(e)},t.prototype.render=function(){return this.props.formatNumber?React.createElement("span",null,i.numberWithCommas(this.props.count)+" "+s(this.props.word,this.props.count)):React.createElement("span",null,s(this.props.word,this.props.count,!0))},t}(React.Component);t.Pluralize=r},function(e,t){"use strict";function a(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)};t.numberWithCommas=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("span",null,a(this.props.number))},t}(React.Component);t.FormatNumber=s},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=a(40),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",null,React.createElement(i.Modal,{onClose:this.props.onCancel,onShow:function(){},modalIsShown:this.props.isShown},React.createElement("div",{className:"confirm__modal"},React.createElement("div",{className:"confirm__title"},this.props.title),React.createElement("div",{className:"confirm__content"},this.props.children),React.createElement("div",{className:"confirm__buttons"},React.createElement("div",{className:"confirm__cancel-button",onClick:this.props.onCancel},this.props.cancelText),React.createElement("div",{className:"confirm__confirm-button",onClick:this.props.onConfirm},this.props.confirmText)))))},t}(React.Component);t.Confirm=r;var o=function(e){function t(t){var a=e.call(this,t)||this;return a.state={isShown:!1},a}return n(t,e),t.prototype.handleClick=function(){this.setState({isShown:!this.state.isShown})},t.prototype.render=function(){var e=this;return React.createElement("div",null,React.createElement(r,{isShown:this.state.isShown,title:"Are you for real??",children:"This is super duper serious, did you really want to click that?",confirmText:"Fo sho!",cancelText:"I'm outta here.",onConfirm:function(){return e.handleClick()},onCancel:function(){return e.handleClick()}}),React.createElement(s.ButtonAutoWidth,{onClick:function(){return e.handleClick()},text:"Click me! I Triple Dog Dare You!"}))},t}(React.Component);r.docs={title:"Confirm",description:"Displays a confirmation modal. Stateless (State and callbacks are controlled by its parent).",examples:[React.createElement(o,null)],staticMarkup:'<Confirm\n    isShown={this.state.isShown}\n    title="Are you for real??"\n    children="This is super duper serious, did you really want to click that?"\n    confirmText="Fo sho!"\n    cancelText="I\'m outta here."\n    onConfirm={() => this.handleClick()}\n    onCancel={() => this.handleClick()} />\n\n<ButtonAutoWidth\n    onClick={() => this.handleClick()}\n    text="Click me! I Triple Dog Dare You!" />\n        )\n    }\n}'}},function(e,t){"use strict";function a(e,t){return $.ajax({type:"POST",url:s(e.addUrl,t),contentType:"application/json",dataType:"json",data:JSON.stringify({sourceId:e.Id})})}function n(e,t){return $.ajax({type:"DELETE",url:s(e.removeUrl,t),contentType:"application/json",dataType:"json"})}function s(e,t){return e.replace(/\/kernels\/\d+\//,"/kernels/"+t+"/")}t.addDataSource=a,t.removeDataSource=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(47),i=function(e){function t(t){var a=e.call(this,t)||this;return a.onCancel=function(){a.props.cancelCallback(a.props.sectionName,a.props.cancelPropName)},a.onToggle=function(){a.props.toggleCallback(a.props.sectionName)},a.state={isEditing:t.isEditing},a}return n(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({isEditing:e.isEditing})},t.prototype.render=function(){var e=React.createElement(s.ButtonRoundEdged,{onClick:this.onToggle,className:this.props.className||"edit-state-toggle-button",text:this.state.isEditing?this.props.saveButtonText||"Save":this.props.editButtonText||"Edit"});return this.state.isEditing&&this.props.cancelCallback&&this.props.cancelPropName?React.createElement("div",{className:"edit-state-toggle-button__multiple-button-container"},React.createElement("a",{onClick:this.onCancel,className:"edit-state-toggle-button--cancel"},"cancel"),e):e},t}(React.Component);t.EditStateToggleButton=i;var r=function(e){function t(t){var a=e.call(this,t)||this;return a.state={isEditing:t.isEditing||!1},a}return n(t,e),t.prototype.onButtonClick=function(){this.setState({isEditing:!this.state.isEditing})},t.prototype.render=function(){var e=this.onButtonClick.bind(this);return React.createElement(i,{isEditing:!1,sectionName:"isEditing",toggleCallback:function(){return e()}})},t}(React.Component);t.EditStateToggleButtonExample=r,i.docs={title:"EditStateToggleButton",description:"Toggleable button that is good at handling binary state changes.",examples:[React.createElement(i,{sectionName:"Example",toggleCallback:function(e){return console.log("State changed: "+e)}})],staticMarkup:'<EditStateToggleButton\n    sectionName="Example"\n    toggleCallback={(name) => console.log("State changed:" + name)} />'}},function(e,t,a){"use strict";var n,s=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)};!function(e){e[e.Compressing=0]="Compressing",e[e.Waiting=1]="Waiting",e[e.Uploading=2]="Uploading",e[e.Paused=3]="Paused",e[e.Canceled=4]="Canceled",e[e.Failed=5]="Failed",e[e.Complete=6]="Complete"}(n||(n={}));var i;!function(e){e[e.Single=0]="Single",e[e.Multiple=1]="Multiple",e[e.SingleAndMultiple=2]="SingleAndMultiple"}(i=t.FileUploaderMode||(t.FileUploaderMode={}));var r=a(2),o=a(38),l=a(4),c=(a(78),function(e){function t(t){var a=e.call(this,t)||this;return a.onFileChange=function(e){var t=e.target.files;a.props.mode==i.Single&&a.state.files.length?a.removeFile(a.state.files[0],function(){a.uploadFiles(t)}):a.uploadFiles(t)},a.uploadFiles=function(e){for(var t=[],s=0,i=e;s<i.length;s++){var o=i[s];t=t.concat(o)}r("#files"+(a.props.suffix||"")).val(null),t=t.filter(function(e){return 0==a.state.files.filter(function(t){return t.name==e.name&&t.status!=n.Canceled&&t.status!=n.Failed}).length}),a.addFilesToState(t)},a.addFilesToState=function(e){var t=a.state.files.filter(function(t){return 0==e.filter(function(e){return e.name==t.name}).length});a.setState(r.extend({},a.state,{files:t.concat(e.map(function(e,s){var i=a.fileIsCompressed(e),r=null;return a.props.maxCompressedBytesAllowed&&i&&e.size>a.props.maxCompressedBytesAllowed&&(r="File exceeds the maximum allowed bytes for compressed files ("+o(a.props.maxCompressedBytesAllowed)+")"),a.props.maxUncompressedBytesAllowed&&!i&&e.size>a.props.maxUncompressedBytesAllowed&&(r="File exceeds the maximum allowed bytes ("+o(a.props.maxUncompressedBytesAllowed)+")"),{index:s+t.length,name:e.name,totalBytes:e.size,html5File:e,status:r?n.Failed:n.Waiting,lastModifiedDateUtc:e.lastModifiedDate?new Date(e.lastModifiedDate.toUTCString()).getTime():null,isCompressed:i,failureMessage:r}}))}),function(){e.forEach(function(e){return a.compressThenStartUploadingFile(e.name)})})},a.compressThenStartUploadingFile=function(e){a.getFileState(e);a.startUploadingFile(e)},a.startUploadingFile=function(e){var t=a.getFileState(e);r.ajax({url:a.props.createBlobUrl,type:"POST",dataType:"json",data:{fileName:t.compressedName||t.name,contentLength:t.totalBytes,lastModifiedDateUtc:t.lastModifiedDateUtc},success:function(e){a.setFileState(t.name,{uploadUrl:e.resumeUrl||e.createUrl,totalBytesUploadedInPreviousChunks:e.uploadedBytes,totalBytesUplaodedInCurrentChunk:0,maxChunkSize:e.maxChunkSize,status:t.status},function(){e.isComplete?a.markFileAsComplete(t.name,e.token):a.uploadNextChunk(t.name)})}})},a.uploadNextChunk=function(e){var t=a.getFileState(e);switch(t.status){case n.Canceled:case n.Complete:case n.Failed:return}var s=t.totalBytesUploadedInPreviousChunks,i=Math.min(t.totalBytesUploadedInPreviousChunks+t.maxChunkSize-1,t.totalBytes),o=t.html5File.slice(s,i,t.html5File.type),l=new FormData;l.append("file",o,t.compressedName||t.name);r.ajax({url:a.getFileState(t.name).uploadUrl,type:"POST",dataType:"json",headers:{"Content-Range":"bytes "+s+"-"+i+"/"+t.totalBytes},contentType:!1,processData:!1,data:l,xhr:function(){var e=r.ajaxSettings.xhr();return a.setFileState(t.name,{abortCallback:function(){e.abort()}}),e.upload.onprogress=function(e){return a.setFileState(t.name,{status:n.Uploading,totalBytesUplaodedInCurrentChunk:e.loaded})},e.upload.onload=function(e){return a.setFileState(t.name,{status:n.Uploading,totalBytesUplaodedInCurrentChunk:e.loaded})},e},success:function(e){e.isComplete?a.markFileAsComplete(t.name,e.token):a.setFileState(t.name,{totalBytesUploadedInPreviousChunks:e.uploadedBytes,totalBytesUplaodedInCurrentChunk:0},function(){return a.uploadNextChunk(t.name)})}})},a.cancelFile=function(e){a.multipleFileInput&&(a.multipleFileInput.value=""),a.singleFileInput&&(a.singleFileInput.value=""),e.abortCallback&&e.abortCallback(),a.removeFile(e)},a.removeFile=function(e,t){var n=a.state.files.filter(function(t){return t.name!=e.name});a.setState({files:n},function(){t&&t()})},a.pauseFile=function(e){e.abortCallback(),a.setFileState(e.name,{status:n.Paused})},a.markFileAsComplete=function(e,t){var s=a.getFileState(e),i=function(){return a.props.onFileUploadFinished(s.compressedName||s.name,t,s.totalBytes)};a.setFileState(e,{status:n.Complete,totalBytesUploadedInPreviousChunks:s.totalBytes,token:t},i)},a.getFileState=function(e){var t=a.state.files.filter(function(t){return t.name==e});return 0==t.length?null:t[0]},a.setFileState=function(e,t,n){var s=a.state.files.filter(function(t){return t.name!=e}),i=a.getFileState(e);a.setState(r.extend({},a.state,{files:s.concat(r.extend({},i,t))}),n)},a.state={files:[]},a}return s(t,e),t.prototype.componentDidUpdate=function(e,t){if(this.props.onFilesPendingUpdated){var a=function(e){return e.filter(function(e){return e.status==n.Paused||e.status==n.Uploading||e.status==n.Waiting}).length},s=function(e){return e.filter(function(e){return e.status==n.Complete}).length},i=a(t.files),r=s(t.files),o=a(this.state.files),l=s(this.state.files);(i!=o||r!=l)&&this.props.onFilesPendingUpdated(o,l)}},t.prototype.fileIsCompressed=function(e){var t=["application/zip","application/x-zip","application/x-zip-compressed","application/x-compressed","application/x-compress","application/gzip","application/gzipped","application/gzip-compressed","application/gunzip","application/x-gzip","gzip/document","application/x-7z-compressed","application/x-rar-compressed"],a=t.filter(function(t){return t===e.type}).length>0;return a},t.prototype.render=function(){var e=this,t=React.createElement("span",null,React.createElement("input",{name:"files"+(this.props.suffix||""),id:"files"+(this.props.suffix||""),type:"file",className:"file-uploader__file-button",onChange:this.onFileChange,multiple:!0,ref:function(t){return e.multipleFileInput=t}}),React.createElement("label",{title:"Upload Files",htmlFor:"files"+(this.props.suffix||""),className:l("file-uploader__file-label",this.props.compact?"file-uploader__file-label--compact":null)},React.createElement("div",{className:l("fa fa-upload file-uploader__upload-icon",this.props.compact?"file-uploader__upload-icon--compact":null)}),React.createElement("div",null,this.props.multipleFileButtonLabel||"Upload Files"))),a=React.createElement("span",null,React.createElement("input",{name:"file",id:"file",type:"file",className:"file-uploader__file-button",onChange:this.onFileChange,ref:function(t){return e.singleFileInput=t}}),React.createElement("label",{title:"Upload Files",htmlFor:"file",className:l("file-uploader__file-label",this.props.compact?"file-uploader__file-label--compact":null)},React.createElement("div",{className:l("fa fa-upload file-uploader__upload-icon",this.props.compact?"file-uploader__upload-icon--compact":null)}),React.createElement("div",null,this.props.singleFileButtonLabel||"Upload File"))),s=this.props.singleFileButtonIsFirst||!1;return React.createElement("div",{className:"file-uploader"},React.createElement("form",{name:"filesUploadForm",id:"filesUploadForm"},s?this.props.mode==i.Multiple?null:a:this.props.mode==i.Single?null:t,this.props.mode==i.SingleAndMultiple?React.createElement("span",{style:{padding:"0 10px"}}):null,s?this.props.mode==i.Single?null:t:this.props.mode==i.Multiple?null:a),React.createElement("div",{className:"file-uploader__files-container",style:this.state.files.length>0?{}:{display:"none"}},null==this.state?"":this.state.files.sort(function(e,t){return e.index>t.index?1:-1}).map(function(t){if(e.props.autoRemoveOnComplete&&t.status==n.Complete)return null;var a=Math.min((t.totalBytesUploadedInPreviousChunks||0)+(t.totalBytesUplaodedInCurrentChunk||0),t.totalBytes),s=a/t.totalBytes*100,i=t.status==n.Waiting||t.status==n.Uploading||t.status==n.Paused,r=t.status==n.Waiting||t.status==n.Uploading,c=t.status==n.Paused,p=c?{display:"none"}:null,u=c?null:{display:"none"},d={width:s+"%"},m=o(t.totalBytes-a,{output:"object"}),h=o(t.totalBytes);return React.createElement("div",{className:"file-uploader__file-row",key:t.name},React.createElement("div",{className:"file-uploader__file-name"},t.compressedName||t.name," (",h,") "),React.createElement("div",{className:"file-uploader__progress-container"},React.createElement("div",{className:l("file-uploader__progress-bar","file-uploader__progress-bar--"+n[t.status].toLowerCase()),style:d}),t.status==n.Failed?React.createElement("div",{className:"file-uploader__status-container file-uploader__status-container--failed"},"Failed: "+t.failureMessage):React.createElement("div",{className:l("file-uploader__status-container","file-uploader__status-container--"+n[t.status].toLowerCase())},React.createElement("div",{title:"Cancel upload",className:l("file-uploader__status-button","file-uploader__status-button--cancel",i?null:"file-uploader__status-button--disabled"),onClick:i?function(){return e.cancelFile(t)}:null}),React.createElement("div",{title:"Pause upload",className:l("file-uploader__status-button","file-uploader__status-button--pause",r?null:"file-uploader__status-button--disabled"),onClick:r?function(){return e.pauseFile(t)}:null,style:p}),React.createElement("div",{title:"Resume upload",className:l("file-uploader__status-button","file-uploader__status-button--resume",c?null:"file-uploader__status-button--disabled"),onClick:c?function(){return e.startUploadingFile(t.name)}:null,style:u}),React.createElement("div",{className:"file-uploader__status"},n[t.status]),React.createElement("div",{className:"file-uploader__percent"},Math.floor(s),"%"),t.status==n.Complete?React.createElement("div",{className:"file-uploader__bytes"},h):React.createElement("div",{className:"file-uploader__bytes"},m.value.toFixed(2)+" "+m.suffix," left"))))})))},t}(React.Component));t.FileUploader=c,c.docs={title:"FileUploader",description:"Upload files for the win! Works with single files or multiple files.",examples:[React.createElement("div",{className:"file-uploader__example"},React.createElement(c,{createBlobUrl:"#",mode:i.Single})),React.createElement("div",{className:"file-uploader__example"},React.createElement(c,{compact:!0,createBlobUrl:"#",mode:i.Multiple}))],staticMarkup:'<FileUploader\n    createBlobUrl="#"\n    mode={FileUploaderMode.Single} />\n<FileUploader\n    compact={true}\n    createBlobUrl="#"\n    mode={FileUploaderMode.Multiple} />'}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=(a(38),a(4)),r=a(123),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement("div",{className:i("file-list",this.props.compact?"file-list--compact":null)},0==this.props.fileListItems.length&&this.props.placeholderText?React.createElement("div",{className:"file-list__placeholder-text"},this.props.placeholderText):this.props.fileListItems.map(function(t,a){return React.createElement(r.FileListItem,s({},t,e.props,{index:a,key:t.name}))}))},t}(React.Component);t.FileList=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(38),i=a(4),r=a(124),o=function(e){function t(t){var a=e.call(this,t)||this;return a.state={previewIsShown:!1},a}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement("div",null,React.createElement("div",{className:i("file-list-item",this.props.compact?"file-list-item--compact":this.props.isEditing?"file-list-item--editing":"file-list-item--read-only")},React.createElement("div",{className:i("file-list-item__name-container",this.props.isEditing?"file-list-item__name--editing":"",this.props.compact?"file-list-item__name-container--compact":null)},React.createElement("div",{className:"file-list-item__name"},null==this.props.url?React.createElement("span",null,this.props.compact?React.createElement("span",{className:"fa fa-paperclip"}):null," ",this.props.name," (",s(this.props.totalBytes),") "):React.createElement("a",{className:"file-list-item__link",href:this.props.url,onClick:this.props.downloadCallback||null},this.props.compact?React.createElement("span",{className:"fa fa-paperclip"}):null," ",this.props.name," (",s(this.props.totalBytes),")")),React.createElement("div",null,this.props.canDelete?React.createElement("span",{className:i("file-list-item__delete-link",this.props.compact?"file-list-item__delete-link--compact":null),title:"Delete file from list",onClick:function(){return e.props.deleteCallback(e.props.name)}},"delete"):"",this.props.previewUrl?React.createElement("span",{className:"file-list-item__preview-link",onClick:function(){return e.setState({previewIsShown:!e.state.previewIsShown})}},this.state.previewIsShown?React.createElement("span",null,React.createElement("span",{className:"fa fa-minus-square-o"})," hide preview"):React.createElement("span",null,React.createElement("span",{className:"fa fa-plus-square-o"})," preview")):"")),this.props.fileDescriptionRenderer?React.createElement("div",{className:"file-list-item__description"},this.props.fileDescriptionRenderer(this.props.description,this.props.index,this.props.isEditing,this.props.textareaPlaceholder,this.props.fileListIndex)):null),this.state.previewIsShown&&this.props.previewUrl?React.createElement("div",{className:"file-list-item__preview-container"},React.createElement(r.FilePreviewContainer,{showSubmitToCompButton:!1,csvHeaderValidationErrors:"",filePreviewUrl:this.props.previewUrl,fileName:this.props.name,fileType:".csv",fileUrl:this.props.url,size:this.props.totalBytes,submitToCompUrl:"",hideFileName:!0,maxLinesToShow:10,downloadCallback:this.props.downloadCallback})):null)},t}(React.Component);t.FileListItem=o},function(e,t,a){"use strict";function n(e){var t="."==e.substring(0,1)?e.substring(1):e;switch(t){case"csv":return"fa fa-table";case"sqlite":return"fa fa-database";case"sqlitetable":return"fa fa-table";case"png":case"jpg":case"gif":return"fa fa-picture-o";case"txt":case"json":return"fa fa-file-text-o";case"zip":case"7z":case"gz":case"tar":return"fa fa-file-zip-o";default:return"fa fa-file-o"}}function s(e){var t="."==e.substring(0,1)?e.substring(1):e;switch(t){case"csv":return 0;case"json":return 1;case"sqlite":return 2;case"sqlitetable":return 3;case"txt":return 4;case"png":case"jpg":case"gif":return 5;case"zip":case"7z":case"gz":case"tar":return 10;default:return 6}}var i,r=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},l=a(33),c=a(125),p=a(47),u=a(126),d=a(130),m=a(6),h=a(13),g=a(46),f=a(72),v=a(45),y=a(75),_=a(7),b=a(24),E=a(38),R=a(131),w=a(133);!function(e){e[e.Image=0]="Image",e[e.Csv=1]="Csv",e[e.File=2]="File",e[e.Text=3]="Text",e[e.Archive=4]="Archive",e[e.Json=5]="Json",e[e.Sqlite=6]="Sqlite"}(i=t.FilePreviewDisplayType||(t.FilePreviewDisplayType={}));var C=function(e){function t(t){var a=e.call(this,t)||this;return a.setActiveFile=function(e){var t=a.state.dataSources&&b.find(a.state.dataSources,function(t){return b.includes(t.files,e)});a.setState({activeFile:e,activeDataSource:t})},a.handleFileContentUpdated=function(e){var t=null==a.state.fileContentCache?[]:a.state.fileContentCache.filter(function(t){return t.fileName!=e.fileName});t.push(e),a.setState({fileContentCache:t})},a.toggleVisibility=function(e){var t=a.state.expandedDataSources;t[e]=!t[e],a.setState({expandedDataSources:t})},a.onAddDataSourceClicked=function(){a.setState({showAddDataSource:!0})},a.onAddDataSourceClosed=function(){a.setState({showAddDataSource:!1})},a.onDataSourceRemoved=function(e,t){y.removeDataSource(t,a.props.scriptVersionId).then(function(e){return a.props.onDataSourceRemoved&&a.props.onDataSourceRemoved(),a.setState({dataSources:e})}),e.stopPropagation()},a.onDataSourceAdded=function(e){return y.addDataSource(e,a.props.scriptVersionId).then(function(e){return a.props.onDataSourceAdded&&a.props.onDataSourceAdded(),a.setState({dataSources:e,showAddDataSource:!1})})},a.renderDataSource=function(e,t){var n=e.files.map(function(e){return e.contentLengthInBytes}).reduce(function(e,t){return e+t},0),s=a.state.expandedDataSources[t];return React.createElement("div",{key:t},React.createElement("div",{className:"file-preview-list__list-data-source-header",onClick:function(){return a.toggleVisibility(t)}},React.createElement("i",{className:"file-preview-list__list-data-source-caret fa fa-caret-"+(s?"down":"right")}),React.createElement("div",{className:"file-preview-list__list-data-source-data"},React.createElement("div",{className:"file-preview-list__list-data-source-name",title:e.name},a.truncateText(e.name)),React.createElement("div",{className:"file-preview-list__list-data-source-metadata"},React.createElement(f.Pluralize,{word:"file",count:e.files.length}),", ",E(n))),React.createElement("i",{className:"file-preview-list__list-data-source-delete fa fa-times",onClick:function(t){return a.onDataSourceRemoved(t,e)}})),s&&React.createElement("div",{className:"file-preview-list__list-data-source-files"},e.files.map(a.renderDataSourceFile)))},a.renderDataSourceFile=function(e,t){return React.createElement("div",{className:"file-preview-list__list-item"+(e.fileName===(a.state.activeFile&&a.state.activeFile.fileName)?" file-preview-list__list-item--active":"")+(".sqlitetable"==e.fileType?" file-preview-list__list-item--indented":""),onClick:function(){return a.setActiveFile(e)},key:"file-header-"+e.fileName},React.createElement("div",{className:"file-preview-list__icon"},React.createElement("span",{className:n(e.fileType)})),React.createElement("div",{className:"file-preview-list__filename",title:e.fileName},a.truncateText(e.fileName),e.validationError?React.createElement("span",{className:"file-preview-list__validation-error"},React.createElement("span",{title:e.validationError,className:"fa fa-warning"})):null))},a.getFiles=function(){return a.state.hasMultipleDataSources?b.flatten(b.pluck(a.state.dataSources,"files")):a.props.files},a.handleMetadataChange=function(e,t,n){var s=(a.state.fileContentCache||[]).filter(function(t){return t.fileName===e})[0];if(!s)return void m.Current.warn("Ignoring metadata update; cache invalid");s.columns[t]=n;var i=(a.state.fileContentCache||[]).filter(function(t){return t.fileName!==e});i.push(s),a.setState({fileContentCache:i}),a.props.onMetadataChange(e,t,n)},a.state={activeFile:a.props.files&&a.props.files.length>0&&a.props.files[0],hasMultipleDataSources:a.props.hasMultipleDataSourcesEnabled,expandedDataSources:a.defaultExpandedDataSources(),showAddDataSource:!1,dataSources:a.props.dataSources},a}return r(t,e),t.prototype.componentWillReceiveProps=function(e){!this.state.activeFile&&this.props.files&&this.props.files.length>0&&this.setState({activeFile:this.props.files[0]})},t.prototype.defaultExpandedDataSources=function(){var e=this.props.dataSources&&1===this.props.dataSources.length;return e?[!0]:[]},t.prototype.truncateText=function(e){return e.length>20?e.substring(0,20)+"…":e},t.prototype.render=function(){var e=this;if(!this.props.files)return null;var t=this.props.files.slice();t.sort(function(e,t){var a=e.fileName.split("."),n=t.fileName.split("."),i=a[a.length-1],r=n[n.length-1],o=s(e.fileType||i),l=s(t.fileType||r);return l>o?-1:o>l?1:e.fileName.toLowerCase()<t.fileName.toLowerCase()?-1:e.fileName.toLowerCase()>t.fileName.toLowerCase()?1:0});var a=this.state.hasMultipleDataSources?React.createElement("div",{className:"file-preview-list__list file-preview-list__list--data-sources"},React.createElement("div",{className:"file-preview-list__list-header--data-sources"},this.state.dataSources.length," Data Sources"),this.state.dataSources.map(this.renderDataSource),React.createElement(g.ButtonAutoWidth,{text:"Add a Data Source",classNames:"file-preview-list__list-add-button",onClick:this.onAddDataSourceClicked})):React.createElement("div",{className:"file-preview-list__list"},React.createElement("div",{className:"file-preview-list__list-file-count"},this.props.files.length+" files"),t.map(function(t){return React.createElement("div",{className:"file-preview-list__list-item"+(t.fileName===(e.state.activeFile&&e.state.activeFile.fileName)?" file-preview-list__list-item--active":"")+(".sqlitetable"==t.fileType?" file-preview-list__list-item--indented":""),onClick:function(){e.setActiveFile(t)},key:"file-list-"+t.fileName+(".sqlitetable"==t.fileType?"-table":"")},React.createElement("div",{className:"file-preview-list__icon"},React.createElement("span",{className:n(t.fileType)})),React.createElement("div",{className:"file-preview-list__filename",title:t.fileName},t.fileName.length>20?t.fileName.substring(0,20)+"…":t.fileName,t.validationError?React.createElement("span",{className:"file-preview-list__validation-error"},React.createElement("span",{title:t.validationError,className:"fa fa-warning"})):null))})),i=null==this.state.fileContentCache?null:this.state.fileContentCache.filter(function(t){return t.fileName==e.state.activeFile.fileName})[0];return React.createElement("div",{className:"file-preview-list__section"},a,React.createElement(S,o({key:"file-"+this.state.activeFile.fileName,submitToCompUrl:this.props.submitToCompUrl,showSubmitToCompButton:this.props.showSubmitToCompButtons,scriptVersionId:this.props.scriptVersionId,competitionName:this.props.competitionName,onFileContentUpdated:this.handleFileContentUpdated,csvPreviewContents:null==i?null:i.csvPreviewContents,textPreviewContents:null==i?null:i.textPreviewContents,exceededMaxSize:null==i?null:i.exceededMaxSize,userCanEditMetadata:this.props.userCanEditMetadata,onMetadataChange:function(t,a){return e.handleMetadataChange(e.state.activeFile.fileName,t,a)},columnMetadata:null==i?null:i.columns,onStartEditingDescription:this.props.onStartEditingDescription,onStopEditingDescription:this.props.onStopEditingDescription,onStartEditingMetadata:this.props.onStartEditingMetadata,dataSource:this.state.activeDataSource},this.state.activeFile)),React.createElement(v.AddDataSourceModal,{isShown:this.state.showAddDataSource,onClose:this.onAddDataSourceClosed,onDataSourceAdded:this.onDataSourceAdded,scriptVersionId:this.props.scriptVersionId}))},t}(React.Component);t.FilePreviewList=C;var S=function(e){function t(t){var a=e.call(this,t)||this;return a.shouldFetchPreview=function(){return a.displayType!==i.Archive&&a.displayType!==i.Image},a.fetchLastVersionMetadata=function(){$.ajax({url:a.props.lastVersionMetadataUrl,dataType:"json",success:function(e){a.populateNewFileColumnDataFromLastVersion(e.columns);
},error:function(e,t,a){m.Current.warn("Could not populate new file column descriptions"),m.Current.log(t+": "+a)}})},a.populateNewFileColumnDataFromLastVersion=function(e){for(var t=0;t<Math.min(a.state.csvPreviewContents[0].length,(e||[]).length)&&a.state.csvPreviewContents[0][t]===e[t].name;t++)a.props.onMetadataChange(t,e[t])},a.handleShowMore=function(e){e.preventDefault(),a.setState({isShowingLess:!1,isShowingMore:!0})},a.handleToggleShowColumnDescriptions=function(e){e.preventDefault(),a.setState({isShowingColumnDescriptionList:!a.state.isShowingColumnDescriptionList})},[".png",".jpg",".jpeg",".gif"].indexOf(a.props.fileType)>-1?a.displayType=i.Image:".csv"===a.props.fileType?a.displayType=i.Csv:".json"===a.props.fileType?a.displayType=i.Json:[".zip",".gz",".7z",".tar"].indexOf(a.props.fileType)>-1?a.displayType=i.Archive:".sqlite"===a.props.fileType?a.displayType=i.Sqlite:a.displayType=i.File,a.state={previewRequestInFlight:a.shouldFetchPreview(),csvPreviewContents:a.props.csvPreviewContents||[[]],textPreviewContents:a.props.textPreviewContents||"",previewFetchErrorText:"",dataIsTruncated:null,isShowingLess:!1,isShowingMore:!1,noPreviewAvailable:!1,columnMetadata:a.props.columnMetadata||[]},a}return r(t,e),t.prototype.parsePreviewData=function(e){return e.error?void this.setState({previewRequestInFlight:!1,previewFetchErrorText:e.error||"Invalid CSV data"}):e.noPreviewAvailable?void this.setState({previewRequestInFlight:!1,noPreviewAvailable:!0}):(this.props.onFileContentUpdated&&this.props.onFileContentUpdated({fileName:this.props.fileName,csvPreviewContents:e.csvData,textPreviewContents:e.textData,exceededMaxSize:e.exceededMaxSize,columns:e.columns}),void this.setState({previewRequestInFlight:!1,csvPreviewContents:e.csvData,textPreviewContents:e.textData,previewFetchErrorText:null,dataIsTruncated:!!e.exceededMaxSize,isShowingLess:!this.props.alwaysShowMore&&(e.csvData||e.textData)&&(e.csvData||e.textData.split("\n")).length>11,isShowingMore:this.props.alwaysShowMore,columnMetadata:e.columns,isShowingColumnDescriptionList:!1,editingColumnIndex:null}))},t.prototype.componentDidMount=function(){var e=this;if(this.shouldFetchPreview())return this.props.csvPreviewContents||this.props.textPreviewContents?void this.parsePreviewData({csvData:this.props.csvPreviewContents,textData:this.props.textPreviewContents,exceededMaxSize:this.props.exceededMaxSize,columns:this.props.columnMetadata}):void $.ajax({url:this.props.filePreviewUrl,success:function(t){e.parsePreviewData(t),e.props.lastVersionMetadataUrl&&e.fetchLastVersionMetadata()},error:function(t,a,n){e.setState({previewRequestInFlight:!1,previewFetchErrorText:a+" "+n})}})},t.prototype.render=function(){return React.createElement(N,o({imagePreviewUrl:this.displayType===i.Image?this.props.fileUrl:null,onShowMore:this.handleShowMore,onToggleShowColumnDescriptionList:this.handleToggleShowColumnDescriptions,displayType:this.displayType},this.props,this.state))},t}(React.Component);t.FilePreviewContainer=S;var N=function(e){function t(t){var a=e.call(this,t)||this;return a.canShowColumnDescriptionList=function(){var e=a.props.columnMetadata&&a.props.columnMetadata.some(function(e){return!!e.description});return e||a.props.userCanEditMetadata?!0:!1},a.guessCsvDataType=function(e){var t=Math.min(10,a.props.csvPreviewContents.length),n=a.props.csvPreviewContents.slice(1,t).map(function(t){return t[e]});return n.some(function(e){return"true"===e||"false"===e})?"Boolean":n.some(function(e){return!isNaN(new Date(e).getTime())})?"DateTime":n.some(function(e){return!isNaN(+e)})?"Numeric":"String"},a.renderCsvHeaderCell=function(e,t,n){var s=!1,i=null;if(n&&n.length>t){var r=n[t],o=null,l=null;r.description?(o=React.createElement("div",{className:"file-preview__csv-preview-info-tooltip"},React.createElement("div",{className:"file-preview__csv-preview-info-tooltip-header"},r.harmonizedDataType),React.createElement(u.MarkdownConverter,{contentClassName:"file-preview__csv-preview-info-tooltip-description",content:r.description,mimeType:"text/markdown",insertNofollow:!0})),l=React.createElement("span",{className:"file-preview__csv-preview-info-icon fa fa-info-circle"}),s=!0):(o=React.createElement("div",{className:"file-preview__csv-preview-info-tooltip"},React.createElement("div",{className:"file-preview__csv-preview-info-tooltip-header"},r.harmonizedDataType)),l=React.createElement("span",{className:"file-preview__csv-preview-info-icon file-preview__csv-preview-info-icon--notooltip"+(a.props.userCanEditMetadata?" fa fa-pencil":"")})),i=React.createElement(c.ToolTipMultiLine,{tipContent:o,alignLeft:!0},r.name||e,l)}else i=React.createElement("span",null,e);return React.createElement("div",{key:a.props.reactKey+"-header-"+t,className:"file-preview__csv-preview-header-cell"+(s?" file-preview__csv-preview-header-cell--info":"")},React.createElement("div",{className:"file-preview__csv-preview-header-cell-inner"+(s?" file-preview__csv-preview-header-cell-inner--info":""),onClick:a.canShowColumnDescriptionList()&&!a.props.isShowingColumnDescriptionList?a.props.onToggleShowColumnDescriptionList:null},i))},a.props.maxLinesToShow?(a.numLinesWhenShowingLess=Math.min(10,a.props.maxLinesToShow),a.numLinesWhenShowingMore=Math.min(100,a.props.maxLinesToShow)):(a.numLinesWhenShowingLess=10,a.numLinesWhenShowingMore=100),a}return r(t,e),t.prototype.renderFetchMessage=function(){return this.props.previewRequestInFlight?React.createElement("div",{className:"file-preview__contents-loading-message"},"Loading..."):this.props.previewFetchErrorText?React.createElement("div",{className:"file-preview__error-message"},this.props.previewFetchErrorText):this.props.noPreviewAvailable?React.createElement("div",{className:"file-preview__no-preview-message"},"No preview available for this format"):null},t.prototype.renderOptionalImagePreview=function(){return this.props.imagePreviewUrl?React.createElement("img",{src:this.props.imagePreviewUrl}):null},t.prototype.renderOptionalTextPreview=function(){return this.props.textPreviewContents&&this.props.displayType!=i.Json?React.createElement("div",{className:"file-preview__text-preview-container"},this.props.textPreviewContents):null},t.prototype.isCsvFile=function(){return!(!this.props.csvPreviewContents||0===this.props.csvPreviewContents.length||0===this.props.csvPreviewContents[0].length)},t.prototype.renderOptionalColumnDescriptionList=function(){var e=this;if(!this.isCsvFile())return null;var t=this.props.columnMetadata&&this.props.columnMetadata.some(function(e){return!!e.description});if(!this.canShowColumnDescriptionList())return null;var a,n;this.props.isShowingColumnDescriptionList||t||!this.props.userCanEditMetadata?this.props.isShowingColumnDescriptionList?(a="Hide",n="up"):(a="Show",n="down"):(a="Edit",n="down");var s=this.getColumnMetadata();return React.createElement("div",null,React.createElement("div",{className:"file-preview__csv-column-description-toggle",onClick:this.props.onToggleShowColumnDescriptionList},React.createElement("span",{style:{marginRight:"5px"},className:"fa fa-info-circle"}),a," column descriptions",React.createElement("span",{style:{marginLeft:"5px"},className:"fa fa-angle-"+n})),this.props.isShowingColumnDescriptionList?s.map(function(t,a){return React.createElement(k,{key:e.props.reactKey+"col-metadata-"+a,initialMetadata:t,canEdit:e.props.userCanEditMetadata,onStartEditing:e.props.onStartEditingMetadata,onMetadataChange:function(t){return e.props.onMetadataChange(a,t)}})}):null)},t.prototype.getColumnMetadata=function(){var e=this,t=this.props.columnMetadata||[],a=this.props.csvPreviewContents[0].map(function(t,a){return{name:t,description:"",harmonizedDataType:e.guessCsvDataType(a)}});return a.map(function(e,a){return t[a]?t[a]:e})},t.prototype.renderOptionalCsvPreviewTable=function(){var e=this;if(!this.isCsvFile())return null;var t=this.props.csvPreviewContents[0],a=this.props.isShowingLess?this.props.csvPreviewContents.slice(1,this.numLinesWhenShowingLess+1):this.props.csvPreviewContents.slice(1,this.numLinesWhenShowingMore+1),n=this.getColumnMetadata();return React.createElement("div",{className:"file-preview__csv-preview-container"},React.createElement("div",{className:"file-preview__csv-preview-inner"},React.createElement("div",{className:"file-preview__csv-preview-inner-inner"},React.createElement("div",{className:"file-preview__csv-preview"},React.createElement("div",{className:"file-preview__csv-preview-header-row"},t.map(function(t,a){return e.renderCsvHeaderCell(t,a,n)})),a.map(function(t,a){return React.createElement("div",{key:e.props.reactKey+"-row-"+a,className:"file-preview__csv-preview-row"},t.map(function(t,n){return React.createElement("div",{key:e.props.reactKey+"-row-"+a+"-col-"+n,className:"file-preview__csv-preview-cell"},t)}))})))))},t.prototype.renderOptionalJsonPreview=function(){return this.props.textPreviewContents&&this.props.displayType==i.Json?React.createElement(w,{data:JSON.parse(this.props.textPreviewContents)}):null},t.prototype.render=function(){var e=this.renderFetchMessage(),t=null;if(this.props.showSubmitToCompButton&&!this.props.csvHeaderValidationErrors){var a="Submit to Competition";t=React.createElement("div",{className:"rounded-open-button"},React.createElement("form",{action:this.props.submitToCompUrl,method:"POST"},React.createElement("input",{type:"hidden",name:"scriptVersionId",value:this.props.scriptVersionId.toString()}),React.createElement("input",{type:"hidden",name:"fileName",value:this.props.fileName}),React.createElement("input",{type:"submit",className:"file-preview__submit-csv-button",value:a})))}else this.props.showSubmitToCompButton&&this.props.csvHeaderValidationErrors&&(t=React.createElement(l.ToolTip,{tipText:this.props.csvHeaderValidationErrors,size:"medium"},React.createElement("span",{className:"fa fa-exclamation-triangle file-preview-list__validation-error"})));var n=null;this.props.fileUrl&&(n=React.createElement(p.ButtonRoundEdged,{href:this.props.fileUrl,onClick:this.props.downloadCallback||null,text:"Download File"}));var s=null;this.props.canDelete&&(s=React.createElement(p.ButtonRoundEdged,{onClick:this.props.onDelete,text:"Delete"}));var i=null;this.props.fullPath&&(i=React.createElement("div",{className:"file-preview__full-path-row"},React.createElement("span",{className:"file-preview__row-title"},"Full path: "),React.createElement("span",{className:"file-preview__full-path"},this.props.fullPath)));var r=null;this.props.isEditingDescription?r=React.createElement("div",null,React.createElement("div",{className:"file-preview__sub-header"},"Description: "),this.props.onStopEditingDescription?React.createElement("div",{className:"file-preview__description-edit-icon file-preview__description-edit-icon--editing",onClick:this.props.onStopEditingDescription},React.createElement("span",{className:"fa fa-save"})):null,React.createElement(d.MarkdownEditor,{shouldSanitizeHtml:!0,alwaysShowToolbar:!0,hidePreview:!0,defaultValue:this.props.description,placeholder:this.props.descriptionPlaceholder,suffix:"-file-preview-description",maxRows:10,onChangeCallback:this.props.onDescriptionChange})):this.props.description?r=React.createElement("div",null,React.createElement("div",{className:"file-preview__sub-header"},"Description "),this.props.userCanEditMetadata&&this.props.onStartEditingDescription?React.createElement("div",{className:"file-preview__description-edit-icon",onClick:this.props.onStartEditingDescription},React.createElement("span",{className:"fa fa-pencil"})):null,React.createElement(u.MarkdownConverter,{contentClassName:"file-preview__description",mimeType:"text/markdown",content:this.props.description})):this.props.userCanEditMetadata&&this.props.onStartEditingDescription&&(r=React.createElement("div",null,React.createElement("div",{className:"file-preview__sub-header"},"Description: "),React.createElement("div",{className:"file-preview__description-edit-icon",onClick:this.props.onStartEditingDescription},React.createElement("span",{className:"fa fa-pencil"})),React.createElement("div",{className:"file-preview__missing-description-notice"},"Help us describe this table")));var o=null;if(this.isCsvFile()&&this.props.isShowingLess){var c=this.numLinesWhenShowingMore-this.numLinesWhenShowingLess;o=React.createElement("div",{className:"file-preview__preview-show-more-less"},React.createElement("a",{onClick:this.props.onShowMore},React.createElement("span",{className:"fa fa-plus"}),"Load ",c," more rows"))}return React.createElement("div",{className:"file-preview__item"},m.Current.hasMultipleDataSources&&this.props.dataSource&&React.createElement("div",null,React.createElement("div",{className:"file-preview__data-source-info"},this.props.dataSource.imageUrl&&React.createElement("div",null,React.createElement("img",{src:this.props.dataSource.imageUrl})),React.createElement("div",null,React.createElement("div",{className:"file-preview__data-source-name"},this.props.dataSource.name),React.createElement("div",{className:"file-preview__data-source-overview"},this.props.dataSource.overview),React.createElement("div",{className:"file-preview__data-source-last-updated"},"Last updated ",React.createElement(_.TimeAgo,{time:this.props.dataSource.lastUpdated})))),React.createElement("hr",{className:"file-preview__horizontal-rule"})),React.createElement("div",{className:"file-preview__name-row"},React.createElement("span",{className:"file-preview__item-filename"},this.props.fileName),React.createElement("div",{className:"file-preview__buttons"},t,n,s)),this.props.fullPath?React.createElement("div",{className:"file-preview__meta-container"},React.createElement("div",{className:"file-preview__meta-label"},"Full path"),React.createElement("div",{className:"file-preview__meta-value"},this.props.fullPath)):null,this.props.size?React.createElement("div",{className:"file-preview__meta-container"},React.createElement("div",{className:"file-preview__meta-label"},"File size"),React.createElement("div",{className:"file-preview__meta-value"},E(this.props.size))):null,r,this.props.hideFilePreview?null:React.createElement("div",null,React.createElement("hr",{className:"file-preview__horizontal-rule"}),React.createElement("div",{className:"file-preview__sub-header"},"Preview "),React.createElement("div",{className:"file-preview__preview-row"},e,this.props.previewRequestInFlight?null:React.createElement("div",null,this.renderOptionalImagePreview(),this.renderOptionalColumnDescriptionList(),this.renderOptionalCsvPreviewTable(),this.renderOptionalJsonPreview(),this.renderOptionalTextPreview()))),o)},t}(React.Component),k=function(e){function t(t){var a=e.call(this,t)||this;return a.descriptionBeingEdited="",a.previousDataType="",a.textarea=null,a.handleStartEditing=function(e){return e.preventDefault(),a.props.onStartEditing?void a.props.onStartEditing():(a.descriptionBeingEdited=a.state.metadata.description,a.previousDataType=a.state.metadata.harmonizedDataType,void a.setState({isEditing:!0}))},a.handleDoneEditing=function(e){e.preventDefault();var t=$.extend({},a.state.metadata);t.description=a.descriptionBeingEdited,a.sendMetadataChangeIfNeeded(t),a.setState({metadata:t,isEditing:!1})},a.handleMouseEnter=function(){a.setState({showEditIcon:!0})},a.handleMouseLeave=function(){a.setState({showEditIcon:!1})},a.handleDataTypeChange=function(e){var t=$.extend({},a.state.metadata);t.harmonizedDataType=e,a.setState({metadata:t})},a.state={metadata:a.props.initialMetadata,isEditing:!1,showEditIcon:!1},a}return r(t,e),t.prototype.render=function(){return this.state.isEditing?this.renderEditing():this.renderNonEditing()},t.prototype.componentDidUpdate=function(e,t){!t.isEditing&&this.state.isEditing&&this.textarea&&this.textarea.focus()},t.prototype.sendMetadataChangeIfNeeded=function(e){(e.description!==this.state.metadata.description||this.previousDataType!==this.state.metadata.harmonizedDataType)&&this.props.onMetadataChange(e)},t.prototype.renderEditing=function(){var e=this,t=[{value:"String",label:"String"},{value:"Numeric",label:"Numeric"},{value:"DateTime",label:"DateTime"},{value:"Boolean",label:"Boolean"}];return React.createElement("div",{className:"file-preview__description-row"},React.createElement("div",{className:"file-preview__description-row-field-name"},this.state.metadata.name),React.createElement("div",{className:"file-preview__description-row-description"},React.createElement(R["default"],{defaultValue:this.state.metadata.description,onChange:function(t){e.descriptionBeingEdited=t.currentTarget.value},className:"file-preview__description-row-description-editor",minRows:1,maxRows:10,placeholder:"Column description",ref:function(t){e.textarea=t}})),React.createElement("div",{className:"file-preview__description-row-field-type file-preview__description-row-field-type--edit"},React.createElement(h.SelectBox,{className:"file-preview__description-row-field-typeselect-box",options:t,value:this.state.metadata.harmonizedDataType,onChange:this.handleDataTypeChange})),React.createElement("div",{className:"file-preview__description-row-save-icon",onClick:this.handleDoneEditing},React.createElement("span",{className:"fa fa-save"})))},t.prototype.renderNonEditing=function(){var e=this.props.canEdit&&(this.props.onMetadataChange||this.props.onStartEditing),t=e?React.createElement("span",{onClick:this.handleStartEditing,className:"file-preview__description-row-cta"},"Help us describe this column"):React.createElement("span",null,"No description provided");return React.createElement("div",{className:"file-preview__description-row",onMouseEnter:e?this.handleMouseEnter:null,onMouseLeave:e?this.handleMouseLeave:null},React.createElement("div",{className:"file-preview__description-row-field-name"},this.state.metadata.name),this.state.showEditIcon?React.createElement("div",{className:"file-preview__description-row-edit-icon",onClick:this.handleStartEditing},React.createElement("span",{className:"fa fa-pencil"})):React.createElement("div",{className:"file-preview__description-row-edit-icon"}),this.state.metadata.description?React.createElement("div",{className:"file-preview__description-row-description",onClick:e?this.handleStartEditing:null,style:e?{cursor:"pointer"}:null},React.createElement(u.MarkdownConverter,{content:this.state.metadata.description,mimeType:"text/markdown"})):React.createElement("div",{className:"file-preview__description-row-description file-preview__description-row-description--empty",onClick:e?this.handleStartEditing:null,style:e?{cursor:"pointer"}:null},t),React.createElement("div",{className:"file-preview__description-row-field-type",onClick:e?this.handleStartEditing:null,style:e?{cursor:"pointer"}:null},this.state.metadata.harmonizedDataType))},t}(React.Component)},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(35),i=a(4),r=function(e){function t(t){var a=e.call(this,t)||this;return a.showToolTip=function(){a.setState({isShown:!0})},a.hideToolTip=function(){a.setState({isShown:!1})},a.state={isShown:!1},a}return n(t,e),t.prototype.makeClassName=function(e){var t="tooltip-multiline"+(e||"")+"--left";return i("tooltip-multiline"+(e||""),(a={},a[t]=this.props.alignLeft,a),this.props.className);var a},t.prototype.render=function(){return React.createElement("span",{className:this.makeClassName(),onMouseEnter:this.showToolTip,onMouseLeave:this.hideToolTip},React.createElement("span",{className:this.makeClassName("__before"),style:{opacity:this.state.isShown?1:0}}),this.props.children,React.createElement("span",{className:this.makeClassName("__after"),style:{opacity:this.state.isShown?1:0}},this.props.tipContent))},t}(React.Component);t.ToolTipMultiLine=r,r.docs={description:"Inherits styles from standard ToolTip, but accepts JSX Elements as contents via the `after` prop.",examples:[React.createElement(r,{tipContent:React.createElement("div",{className:"tooltip-multiline__example-1"},React.createElement("p",null,"Hi"),React.createElement("p",null,"How are you?"))},React.createElement(s.Badge,{text:"Hover me!",option:"info"})),React.createElement(r,{alignLeft:!0,tipContent:React.createElement("div",{className:"tooltip-multiline__example-2"},React.createElement("h4",{className:"tooltip-multiline__example-2-title"},"Note"),React.createElement("p",null,"This is left-aligned."))},React.createElement(s.Badge,{text:"Me too!",option:"info"}))],staticMarkup:'<ToolTipMultiLine \n    tipContent={(\n        <div>\n            <p>Hi</p>\n            <p>How are you?</p>\n        </div>\n    )}>\n\n    <Badge text="Hover me!" option="info" />\n</ToolTipMultiLine>\n\n<ToolTipMultiLine\n    alignLeft={true}\n    tipContent={(\n        <div>\n            <h4>Note</h4>\n            <p>This is left-aligned.</p>\n        </div>\n    )}>\n\n    <Badge text="Me too!" option="info"/>\n</ToolTipMultiLine>',title:"ToolTipMultiLine"}},function(e,t,a){"use strict";function n(e){switch(e){case r.Html:return"text/html";case r.Markdown:return"text/markdown";default:return"text/markdown"}}function s(e){switch(e){case"":return r.Html;case"text/html":return r.Html;case"text/plain":return r.Markdown;case"text/markdown":return r.Markdown;case"text/x-markdown":return r.Markdown;default:return r.Html}}function i(e){return n(s(e))}var r,o=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},l=a(4);a(127);!function(e){e[e.Html=0]="Html",e[e.Markdown=1]="Markdown"}(r=t.MarkdownConverterMimeTypes||(t.MarkdownConverterMimeTypes={})),t.assignMimeType=n,t.lookupMimeType=s,t.translateMimeType=i;var c=function(e){function t(t){var a=e.call(this,t)||this;return a.converter=new Markdown.getSanitizingConverter,a}return o(t,e),t.prototype.createSanitizedMarkup=function(){var e=s(this.props.mimeType)==r.Html,t=this.props.content&&e?this.props.content:this.props.content?this.converter.makeHtml(this.props.content):"";return this.props.insertNofollow&&(t=t.replace(/(<a .*?href=".*?".*?)(>)/g,'$1 rel="nofollow"$2')),{__html:t}},t.prototype.componentDidMount=function(){this.renderMathJax()},t.prototype.componentDidUpdate=function(){this.renderMathJax()},t.prototype.renderMathJax=function(){var e=this.props.content&&(this.props.content.indexOf("$$")>-1||this.props.content.indexOf("\\[")>-1||this.props.content.indexOf("\\(")>-1);e&&"undefined"!=typeof MathJax&&MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.renderedDiv])},t.prototype.render=function(){var e=this;return React.createElement("div",{className:l("markdown-converter__text--rendered",this.props.contentClassName),ref:function(t){e.renderedDiv=t},dangerouslySetInnerHTML:this.createSanitizedMarkup()})},t}(React.Component);t.MarkdownConverter=c},,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=a(4),r=a(131),o=function(e){function t(t){var a=e.call(this,t)||this;return a.handleButtonClick=function(){var e=a;setTimeout(function(){var t=$(".wmd-prompt-dialog input:button[value='OK']");t.length?t.on("click",function(){return e.handleChange(e.textArea.value)}):e.handleChange(e.textArea.value)},10)},a.handleKeyDown=function(e){var t=38,n=40;e.keyCode===t&&a.props.onMoveUp?a.handleUpArrow(e):e.keyCode===n&&a.props.onMoveDown?a.handleDownArrow(e):a.props.onKeyPress&&a.props.onKeyPress(e)},a.state={content:a.props.defaultValue?a.props.defaultValue:"",hasFocus:a.props.hasFocus,showPreview:!1},a.textAreaId="wmd-input"+(a.props.suffix||""),a}return n(t,e),t.prototype.componentDidMount=function(){this.props.shouldSanitizeHtml?this.converter=new Markdown.Converter:this.converter=Markdown.getSanitizingConverter(),this.editor=new Markdown.Editor(this.converter,this.props.suffix?this.props.suffix:void 0,{strings:{imagedialog:'<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg "optional title"'}}),this.editor.run(),this.props.hasFocus&&$(this.textArea).focus()},t.prototype.componentWillUnmount=function(){},t.prototype.componentWillReceiveProps=function(e){var t=this;"undefined"!=typeof e.defaultValue&&e.defaultValue!=this.props.defaultValue&&(this.textArea.value=e.defaultValue,this.editor.refreshPreview()),e.hasFocus&&!this.props.hasFocus&&window.setTimeout(function(){$(t.textArea).focus()})},t.prototype.createHtml=function(){return{__html:this.converter.makeHtml(this.state.content)}},t.prototype.updateTextState=function(e){this.state.content!==e&&this.props.onChangeCallback(e)},t.prototype.handleChange=function(e){var t=this;this.props.onChangeImmediate&&this.props.onChangeImmediate(e),this.setState($.extend({},this.state,{content:e}),function(){t.props.onChangeCallback(t.state.content)})},t.prototype.setFocus=function(e){this.setState($.extend({},this.state,{hasFocus:e}))},t.prototype.renderPreview=function(){return this.props.hidePreview?null:this.props.useTogglePreview?React.createElement(s.ForumMessageContent,{rawHtml:this.converter.makeHtml(this.state.content),rawMarkdown:this.state.content}):React.createElement("div",{id:"wmd-preview"+(this.props.suffix||""),className:"wmd-panel wmd-preview post-text-styling"})},t.prototype.clearContents=function(){this.textArea&&(this.textArea.value="")},t.prototype.handleUpArrow=function(e){var t=this.textArea.value.substr(0,this.textArea.selectionStart).split("\n").length;1===t&&(e.preventDefault(),this.props.onMoveUp())},t.prototype.handleDownArrow=function(e){var t=this.textArea.value.substr(0,this.textArea.selectionStart).split("\n").length,a=this.textArea.value.split("\n").length;t===a&&(e.preventDefault(),this.props.onMoveDown())},t.prototype.render=function(){var e=this;return React.createElement("div",{className:i("markdown-editor",this.props.compact?"markdown-editor__compact":null)},React.createElement("div",{tabIndex:0,className:"wmd-panel",onFocus:function(){e.setFocus(!0)},onBlur:function(){e.setFocus(!1)}},React.createElement("div",{id:"wmd-button-bar"+(this.props.suffix||""),className:!this.state.hasFocus&&!this.props.alwaysShowToolbar||this.props.hideToolbar||this.props.useTogglePreview&&this.state.showPreview?"wmd-button-bar--disabled":null,onClick:this.handleButtonClick}),React.createElement("a",{href:"http://commonmark.org/help/",target:"__blank",className:i("markdown-editor__help",!this.state.hasFocus&&!this.props.alwaysShowToolbar||this.props.useTogglePreview&&this.state.showPreview?"markdown-editor__help--disabled":null,{"markdown-editor__help--left":this.props.hideToolbar})},this.props.compact?null:[React.createElement("img",{src:"/static/images/markdown.png"})," Styling with Markdown supported"]),this.props.useTogglePreview?[React.createElement("a",{className:"markdown-editor__preview-toggle",onClick:function(){return e.setState({showPreview:!e.state.showPreview})}},React.createElement(s.MediaQuery,{minWidth:s.Breakpoints.tabletMin},React.createElement("span",null,"Show ")),this.state.showPreview?"Editor":"Preview"),this.state.showPreview?this.renderPreview():null]:null,React.createElement(r["default"],{ref:function(t){e.textArea=t},defaultValue:this.state.content,onChange:function(t){return e.handleChange(t.currentTarget.value)},name:"rawMarkdown",className:i("wmd-input",this.props.editorClassName,this.props.useTogglePreview&&this.state.showPreview?"wmd-input--disabled":null),id:this.textAreaId,minRows:this.props.minRows,maxRows:this.props.maxRows,rows:this.props.rows,placeholder:this.props.placeholder,onKeyDown:this.props.onMoveDown||this.props.onMoveUp?this.handleKeyDown:null})),this.props.useTogglePreview?null:this.renderPreview())},t}(React.Component);t.MarkdownEditor=o},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(149),r=a(151),o=a(152),l=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.render=function(){return this.props.topicId?React.createElement(r.TopicContainer,{topicId:this.props.topicId}):this.props.isNew?React.createElement(i.NewTopicContainer,s({},this.props)):React.createElement(o.TopicList,s({},this.props))},t}(React.Component);t.Forum=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=a(150),r=function(e){function t(t){var a=e.call(this,t)||this;return a.markdownConverter=Markdown.getSanitizingConverter(),s.Current.isAnonymous&&(window.location.href="/account/login"),a.state={editDraft:"",editTitleDraft:"",isSubmittingEdit:!1,newAttachments:[]},a}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement(i.Topic,{allowAttachments:this.props.allowAttachments,attachmentAdded:function(t,a,n){return e.addAttachment(t,a,n)},attachmentDeleted:function(t){return e.deleteAttachment(t)},comment:{allowReplies:!1,attachments:[],authorType:this.props.authorType,author:{displayName:s.Current.userDisplayName,thumbnailUrl:s.Current.userThumbnailUrl,userUrl:s.Current.userProfileUrl,tier:this.props.authorTier},competitionRanking:this.props.authorRanking},editDraft:this.state.editDraft,editDraftChanged:function(t){return e.changeEditDraft(t)},editSubmitted:function(){return e.submitTopic()},editTitleDraft:this.state.editTitleDraft,editTitleDraftChanged:function(t){return e.changeEditTitleDraft(t)},isSubmittingEdit:this.state.isSubmittingEdit,isNew:!0,newAttachments:this.state.newAttachments,parentName:this.props.parentName,parentUrl:this.props.parentUrl,showEditForm:!0})},t.prototype.addAttachment=function(e,t,a){var n=this.state.newAttachments;n.push({name:e,totalBytes:a,blobToken:t}),this.setState({newAttachments:n})},t.prototype.changeEditDraft=function(e){this.setState({editDraft:e})},t.prototype.changeEditTitleDraft=function(e){this.setState({editTitleDraft:e})},t.prototype.deleteAttachment=function(e){var t=this.state.newAttachments.filter(function(t){return t.name==e})[0],a=this.state.newAttachments.indexOf(t);this.state.newAttachments.splice(a,1),this.setState({newAttachments:this.state.newAttachments})},t.prototype.submitTopic=function(){var e=this;return this.state.editTitleDraft.length<3||this.state.editTitleDraft.length>255?void s.PageMessages.error("Title must be between 3 and 255 characters (inclusive)"):(s.PageMessages.clear(),void this.setState({isSubmittingEdit:!0},function(){return $.ajax({contentType:"application/json",data:JSON.stringify({blobFileTokens:e.state.newAttachments.map(function(e){return e.blobToken}),subject:e.state.editTitleDraft,content:e.markdownConverter.makeHtml(e.state.editDraft),rawMarkdown:e.state.editDraft}),type:"POST",url:"/forums/"+e.props.forumId+"/topics"}).done(function(t){e.setState({isSubmittingEdit:!1}),e.props.topicSubmitted(t)})}))},t}(React.Component);t.NewTopicContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(4),r=a(40),o=a(57),l=a(69),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){
var e=this,t=this.props,a=t.comment;return React.createElement("div",null,React.createElement(r.Modal,{buttonClassName:"discussion-comment__hidden",modalClassName:"flag-form__wrapper",modalIsShown:this.props.showFlagForm,onClose:this.props.flagFormClosed},React.createElement("div",{className:"flag-form"},React.createElement("div",{className:"flag-form__title"},"Flag this post?"),React.createElement("div",{className:"flag-form__body"},"Flagging notifies Kaggle that this message is spam, inappropriate, abusive, or violates rules. Do not use flagging to indicate you disagree with an opinion or to hide a post."),React.createElement("div",{className:"flag-form__actions"},React.createElement(r.Button,{classNames:"flag-form__action flag-form__action--secondary",onClick:this.props.flagFormClosed,text:"Cancel"}),React.createElement("span",{className:"flag-form__action-spacer"}),React.createElement(r.Button,{classNames:"flag-form__action",onClick:this.props.flagged,text:"Flag as Inappropriate"})))),React.createElement(r.MediaQuery,{minWidth:r.Breakpoints.desktopMin},React.createElement("div",{className:"topic"},React.createElement("div",{className:"topic__author"},React.createElement(r.Avatar,s({},a.author,{hideTooltop:!0,width:75})),React.createElement("a",{className:i("topic__author-link","parent"==a.authorType?"topic__author-link--parent-author":null),href:a.author.userUrl,title:a.author.displayName},a.author.displayName),React.createElement("span",{className:"topic__author-ranking"},a.competitionRanking?React.createElement("span",null,React.createElement(r.Ordinal,null,a.competitionRanking)," place"):null),React.createElement("span",{className:"topic__author-options"},a.titleOptions?a.titleOptions.map(function(e){return[React.createElement("a",{className:i("topic__author-option",e.className),href:e.href,onClick:e.onClick},e.text),React.createElement("span",{className:"topic__author-option-spacer"},"|")]}):null)),React.createElement("div",{className:"topic__body-wrapper"},React.createElement("div",{className:"topic__body"},React.createElement("div",{className:"topic__body-header"},React.createElement("div",{className:"topic__title"},this.props.showEditForm?React.createElement(r.InlineTextEditor,{className:"topic__title-editor",onChangeCallback:this.props.editTitleDraftChanged,placeholder:"Topic Title...",value:this.props.editTitleDraft}):t.title,React.createElement("div",{className:"topic__subtitle"},"posted in ",React.createElement("a",{className:"topic__parent-link",href:t.parentUrl,title:t.parentName},t.parentName)," ",a.postDate&&React.createElement(r.TimeAgo,{time:a.postDate}))),a.medal?React.createElement("img",{className:"topic__medal",src:"/static/images/medals/discussion/"+a.medal+"L@1x.png",title:a.medal}):React.createElement("div",{className:"topic__medal"}),t.isNew?null:React.createElement(r.VoteButton,{canDownvote:t.canDownvote&&r.Current.userId!=a.author.id,canUpvote:r.Current.userId!=a.author.id,hasAlreadyVotedDown:-1===a.currentUserVote,hasAlreadyVotedUp:1===a.currentUserVote,totalVotes:a.votes,voteDownUrl:"/forums/messages/downvote?forumMessageId="+a.id,voteUpUrl:"/forums/messages/upvote?forumMessageId="+a.id,upVoteIntercomEventName:"forum_vote",downVoteIntercomEventName:"forum_vote"})),React.createElement("div",{className:"topic__content"},this.props.showEditForm?[React.createElement(r.MarkdownEditor,{alwaysShowToolbar:!0,compact:window.innerWidth<r.Breakpoints.desktopMin,defaultValue:a.rawMarkdown,onChangeCallback:function(t){return e.props.editDraftChanged(t)},placeholder:"Topic Content...",rows:3,shouldSanitizeHtml:!0,suffix:"-topic",useTogglePreview:!0}),React.createElement("span",{className:i((a.attachments||[]).length>0||t.newAttachments.length>0?"topic__attachment-spacer":null)}),React.createElement(r.FileList,{compact:!0,fileListItems:a.attachments||[],fileListKeyBaseName:"attachment-",isEditing:!0,canDelete:!0,deleteCallback:t.attachmentDeleted}),React.createElement(r.FileList,{compact:!0,fileListItems:t.newAttachments,fileListKeyBaseName:"new-attachment-",isEditing:!0,canDelete:!0,deleteCallback:t.attachmentDeleted}),React.createElement("div",{className:"topic__action-buttons"},this.props.allowAttachments?React.createElement(r.FileUploader,{autoRemoveOnComplete:!0,compact:!0,createBlobUrl:"/blobs/inbox/forum-message-attachment-files",maxCompressedBytesAllowed:5e8,maxUncompressedBytesAllowed:5e8,mode:r.FileUploaderMode.Multiple,onFileUploadFinished:t.attachmentAdded,multipleFileButtonLabel:" ",suffix:"-topic"}):null,React.createElement("span",{className:"topic__flex-spacer"}),React.createElement("span",{className:"topic__edit-submit-wrapper"},React.createElement(r.Button,{classNames:i("topic__editor-submit",t.isNew?"topic__editor-submit--new":null),isDisabled:this.props.isSubmittingEdit,onClick:t.editSubmitted,text:t.isNew?"Publish Topic":"Save Changes"})))]:[React.createElement(l.ForumMessageContent,{rawHtml:a.content,rawMarkdown:a.rawMarkdown||""}),React.createElement("span",{className:i((a.attachments||[]).length>0||t.newAttachments.length>0?"topic__attachment-spacer":null)}),React.createElement(r.FileList,{compact:!0,fileListItems:a.attachments||[],fileListKeyBaseName:"attachment-",isEditing:!1,deleteCallback:t.attachmentDeleted}),React.createElement(r.FileList,{compact:!0,fileListItems:t.newAttachments,fileListKeyBaseName:"new-attachment-",isEditing:!1,deleteCallback:t.attachmentDeleted})]),this.props.showOptions?React.createElement("span",{className:"topic__options"},React.createElement("div",{className:"topic__left-options"},a.leftOptions.map(function(e){return[React.createElement("a",{className:i("topic__option",e.className),href:e.href,onClick:e.onClick},e.text),React.createElement("span",{className:"topic__option-spacer"},"|")]})),a.rightOptions.map(function(e){return[React.createElement("a",{className:i("topic__option",e.className),href:e.href,onClick:e.onClick},e.text),React.createElement("span",{className:"topic__option-spacer"},"|")]})):null),this.props.showUpvoters?React.createElement("div",{className:"topic__upvoters"},this.props.comment.upvoters.map(function(e){return React.createElement(r.Avatar,s({className:"topic__upvoter"},e))})):null))),React.createElement(r.MediaQuery,{minWidth:0,maxWidth:r.Breakpoints.tabletMax},React.createElement("div",{className:"topic"},React.createElement("div",{className:"topic__body"},React.createElement("div",{className:"topic__body-header"},React.createElement("div",{className:"topic__title"},t.isNew?null:React.createElement("span",{className:"topic__vote-button"},React.createElement(r.VoteButton,{canDownvote:t.canDownvote&&r.Current.userId!=a.author.id,canUpvote:r.Current.userId!=a.author.id,hasAlreadyVotedDown:-1===a.currentUserVote,hasAlreadyVotedUp:1===a.currentUserVote,totalVotes:a.votes,voteDownUrl:"/forums/messages/downvote?forumMessageId="+a.id,voteUpUrl:"/forums/messages/upvote?forumMessageId="+a.id})),this.props.showEditForm?React.createElement(r.InlineTextEditor,{className:"topic__title-editor",onChangeCallback:this.props.editTitleDraftChanged,placeholder:"Topic Title...",value:this.props.editTitleDraft}):React.createElement("span",{className:"topic__title-text"},t.title)),React.createElement("div",{className:"topic__subtitle"},"by ",React.createElement("a",{className:"topic__author-link",href:a.author.userUrl,title:a.author.displayName},this.props.comment.author.displayName),"  in ",React.createElement("a",{className:"topic__parent-link",href:t.parentUrl,title:t.parentName},t.parentName)," ",a.postDate?React.createElement(r.TimeAgo,{time:a.postDate}):null)),React.createElement("div",{className:"topic__content"},this.props.showEditForm?[React.createElement(r.MarkdownEditor,{alwaysShowToolbar:!0,compact:window.innerWidth<r.Breakpoints.desktopMin,defaultValue:a.rawMarkdown,onChangeCallback:function(t){return e.props.editDraftChanged(t)},placeholder:"Topic Content...",rows:3,shouldSanitizeHtml:!0,suffix:"-topic",useTogglePreview:!0}),React.createElement("span",{className:i((a.attachments||[]).length>0||t.newAttachments.length>0?"topic__attachment-spacer":null)}),React.createElement(r.FileList,{compact:!0,fileListItems:a.attachments||[],fileListKeyBaseName:"attachment-",isEditing:!0,canDelete:!0,deleteCallback:t.attachmentDeleted}),React.createElement(r.FileList,{compact:!0,fileListItems:t.newAttachments,fileListKeyBaseName:"new-attachment-",isEditing:!0,canDelete:!0,deleteCallback:t.attachmentDeleted}),React.createElement("div",{className:"topic__action-buttons"},this.props.allowAttachments?React.createElement(r.FileUploader,{autoRemoveOnComplete:!0,compact:!0,createBlobUrl:"/blobs/inbox/forum-message-attachment-files",mode:r.FileUploaderMode.Multiple,maxCompressedBytesAllowed:5e8,maxUncompressedBytesAllowed:5e8,onFileUploadFinished:t.attachmentAdded,multipleFileButtonLabel:" ",suffix:"-topic"}):null,React.createElement("span",{className:"topic__flex-spacer"}),React.createElement("span",{className:"topic__edit-submit-wrapper"},React.createElement(r.Button,{classNames:i("topic__editor-submit",t.isNew?"topic__editor-submit--new":null),isDisabled:this.props.isSubmittingEdit,onClick:t.editSubmitted,text:t.isNew?"Publish Topic":"Save Changes"})))]:[React.createElement(l.ForumMessageContent,{rawHtml:a.content,rawMarkdown:a.rawMarkdown||""}),React.createElement("span",{className:i((a.attachments||[]).length>0||t.newAttachments.length>0?"topic__attachment-spacer":null)}),React.createElement(r.FileList,{compact:!0,fileListItems:a.attachments||[],fileListKeyBaseName:"attachment-",isEditing:!1,deleteCallback:t.attachmentDeleted}),React.createElement(r.FileList,{compact:!0,fileListItems:t.newAttachments,fileListKeyBaseName:"new-attachment-",isEditing:!1,deleteCallback:t.attachmentDeleted})])),React.createElement("div",{className:"topic__author-options"},a.titleOptions?a.titleOptions.map(function(e){return React.createElement("a",{className:i("topic__author-option",e.className),href:e.href,onClick:e.onClick},e.text)}):null),this.props.showOptions?React.createElement("span",{className:"topic__options"},a.leftOptions.map(function(e){return React.createElement("a",{className:i("topic__option",e.className),href:e.href,onClick:e.onClick},e.text)}),a.rightOptions.map(function(e){return React.createElement("a",{className:i("topic__option",e.className),href:e.href,onClick:e.onClick},e.text)})):null,this.props.showUpvoters?React.createElement("div",{className:"topic__upvoters"},this.props.comment.upvoters.map(function(e){return React.createElement(r.Avatar,s({className:"topic__upvoter"},e))})):null)),this.props.isNew?null:React.createElement(o.CommentListContainer,{allowAttachments:this.props.allowAttachments,canDownvote:this.props.canDownvote,isSubmittingReply:this.props.isSubmittingReply,replyAttachmentAdded:this.props.replyAttachmentAdded,replyAttachmentDeleted:this.props.replyAttachmentDeleted,replyAttachments:this.props.replyAttachments,replyDraft:this.props.replyDraft,replyDraftChanged:this.props.replyDraftChanged,replySubmitted:this.props.replySubmitted,allowReplies:!this.props.isLocked,topicId:this.props.id}))},t}(React.Component);t.Topic=c},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(60),i=a(40),r=a(150),o=function(e){function t(t){var a=e.call(this,t)||this;return a.markdownConverter=Markdown.getSanitizingConverter(),i.PageMessages.clear(),a.state={attachmentAdded:function(e,t,n){return a.addAttachment(e,t,n)},attachmentDeleted:function(e){return a.deleteAttachment(e)},dataLoaded:!1,editDraftChanged:function(e){return a.changeEditDraft(e)},editSubmitted:function(){return a.submitEdit()},editTitleDraftChanged:function(e){return a.changeEditTitleDraft(e)},flagFormClosed:function(){return a.setState({showFlagForm:!1})},flagged:function(){return $.post("/forums/messages/flag?forumMessageId="+a.state.comment.id).done(function(){return a.setState($.extend(!0,{},a.state,{comment:{hasFlags:!0,isFlagged:!0},showFlagForm:!1}))})},isNew:!1,isSubmittingReply:!1,newAttachments:[],quoted:function(){return a.quoted()},replyAttachmentAdded:function(e,t,n){return a.addReplyAttachment(e,t,n)},replyAttachmentDeleted:function(e){return a.deleteReplyAttachment(e)},replyAttachments:[],replyDraft:"",replyDraftChanged:function(e){return a.changeReplyDraft(e)},replySubmitted:function(e){return a.submitReply(e)},showEditForm:!1,showFlagForm:!1,showOptions:!1,showUpvoters:!1},a}return n(t,e),t.prototype.componentWillMount=function(){this.loadData(this.props.topicId)},t.prototype.componentWillReceiveProps=function(e){e.topicId&&e.topicId!=this.props.topicId&&this.loadData(e.topicId)},t.prototype.render=function(){return this.state.dataLoaded?React.createElement(r.Topic,$.extend(!0,{},this.props,this.state,{comment:{leftOptions:this.leftOptions(),rightOptions:this.rightOptions(),titleOptions:this.titleOptions()}})):React.createElement(i.LoadingText,{isLoading:!this.state.dataLoaded,text:"Loading Topic"})},t.prototype.addAttachment=function(e,t,a){var n=this.state.newAttachments;n.push({name:e,totalBytes:a,blobToken:t}),this.setState({newAttachments:n})},t.prototype.addReplyAttachment=function(e,t,a){var n=this.state.replyAttachments;n.push({name:e,totalBytes:a,blobToken:t}),this.setState({replyAttachments:n})},t.prototype.changeEditDraft=function(e){this.setState({editDraft:e})},t.prototype.changeEditTitleDraft=function(e){this.setState({editTitleDraft:e})},t.prototype.changeReplyDraft=function(e){this.setState({replyDraft:e})},t.prototype.deleteAttachment=function(e){var t=this,a=this.state.newAttachments.filter(function(t){return t.name==e})[0],n=this.state.newAttachments.indexOf(a);return-1!==n?(this.state.newAttachments.splice(n,1),void this.setState({newAttachments:this.state.newAttachments})):(a=this.state.comment.attachments.filter(function(t){return t.name==e})[0],n=this.state.comment.attachments.indexOf(a),this.state.comment.attachments.splice(n,1),void $.ajax("/forums/attachments/delete/"+a.id,{contentType:"application/json",type:"POST"}).done(function(){return t.setState({comment:$.extend(!0,{},t.state.comment,{attachments:t.state.comment.attachments})})}))},t.prototype.deleteReplyAttachment=function(e){var t=this.state.replyAttachments.filter(function(t){return t.name==e})[0],a=this.state.replyAttachments.indexOf(t);this.state.replyAttachments.splice(a,1),this.setState({replyAttachments:this.state.replyAttachments})},t.prototype.leftOptions=function(){var e=this,t=[{onClick:function(){return e.quoted()},text:"Quote"},{text:"Permalink"}];i.Current.isAnonymous||(t.push({onClick:function(){return $.post("/forums/topics/watches/"+(e.state.isSubscribed?"stop":"start")+"?forumTopicId="+e.props.topicId).done(function(){return e.setState({isSubscribed:!e.state.isSubscribed})})},text:this.state.isSubscribed?"Unsubscribe":"Subscribe"}),this.state.comment.isFlagged?t.push({className:"topic__option--disabled",text:"Flagged"}):t.push({onClick:function(){return e.setState({showFlagForm:!0})},text:"Flag"}));var a=this.state.comment.upvoters.length;return a>0&&t.push({className:this.state.showUpvoters?"topic__option--selected":null,onClick:function(){return e.setState({showUpvoters:!e.state.showUpvoters})},text:React.createElement(i.Pluralize,{count:a,word:"Upvoter"})}),t},t.prototype.loadData=function(e){var t=this;$.ajax("/topics/"+e+".json").done(function(e){t.setState($.extend(!0,{},t.state,e,{dataLoaded:!0}))})},t.prototype.quoted=function(){for(var e=this.state.replyDraft||"",t="\n> **"+this.state.comment.author.displayName+" wrote**\n> \n> ",a=this.state.comment.rawMarkdown||s(this.state.comment.content),n=a.split("\n"),i=/\s*\[.*?\]:/,r=0;r<n.length;r++){var o=n[r];i.test(o)||(n[r]="> "+o)}this.setState({replyDraft:e+t+n.join("\n")});var l="#topic-reply",c=100;$("html, body").animate({scrollTop:$(l).position().top-c},200)},t.prototype.rightOptions=function(){var e=this,t=[];return i.Current.isAdmin&&(this.state.comment.hasFlags&&t.push({onClick:function(){return $.ajax("/forums/messages/unflag?forumMessageId="+e.state.comment.id,{contentType:"application/json",data:JSON.stringify({forumMessageId:e.state.comment.id}),type:"POST"}).done(function(){return e.setState($.extend(!0,{},e.state,{comment:{hasFlags:!1,isFlagged:!1}}))})},text:"Unflag"}),t.push({onClick:function(){return $.post("/forums/topics/"+e.props.topicId+"/spam").done(function(){return e.setState({isDeleted:e.state.isSpammed?e.state.isDeleted:!1,isSpammed:!e.state.isSpammed})})},text:this.state.isSpammed?"Unspam":"Spam"},{onClick:function(){return $.post("/forums/topics/"+e.props.topicId+"/delete").done(function(){return e.setState({isDeleted:!e.state.isDeleted,isSpammed:e.state.isDeleted?e.state.isSpammed:!1})})},text:this.state.isDeleted?"Restore":"Delete"},{onClick:function(){return $.ajax("/forums/topics/sticky/toggle?forumTopicId="+e.props.topicId,{contentType:"application/json",type:"POST"}).done(function(){return e.setState({isPinned:!e.state.isPinned})})},text:this.state.isPinned?"Unpin":"Pin"},{onClick:function(){return $.post("/forums/topics/"+e.props.topicId+"/readonly/toggle").done(function(){return e.setState({isLocked:!e.state.isLocked})})},text:this.state.isLocked?"Unlock":"Lock"},{onClick:function(){return $.post("/forums/topics/"+e.props.topicId+"/file-uploads/toggle").done(function(){return e.setState({allowAttachments:!e.state.allowAttachments})})},text:this.state.allowAttachments?"Disable Attachments":"Enable Attachments"})),t},t.prototype.submitEdit=function(){var e=this;return this.state.editTitleDraft.length<3||this.state.editTitleDraft.length>255?void i.PageMessages.error("Title must be between 3 and 255 characters (inclusive)"):(i.PageMessages.clear(),void $.ajax({contentType:"application/json",data:JSON.stringify({blobFileTokens:this.state.newAttachments.map(function(e){return e.blobToken}),message:this.markdownConverter.makeHtml(this.state.editDraft),rawMarkdown:this.state.editDraft,title:this.state.editTitleDraft}),type:"PUT",url:"/messages/"+this.state.comment.id}).done(function(){e.setState($.extend(!0,{},e.state,{comment:{content:e.markdownConverter.makeHtml(e.state.editDraft),rawMarkdown:e.state.editDraft},showEditForm:!1,title:e.state.editTitleDraft}))}).fail(function(){i.PageMessages.clear(),i.PageMessages.error({htmlMessage:'We had trouble saving your edit. Please try again or <a href="mailto: support@kaggle.com">contact support</a> if you continue experiencing issues.',type:"error"})}))},t.prototype.submitReply=function(e){var t=this;i.PageMessages.clear(),this.setState({isSubmittingReply:!0},function(){return $.ajax({contentType:"application/json",data:JSON.stringify({blobFileTokens:t.state.replyAttachments.map(function(e){return e.blobToken}),message:t.markdownConverter.makeHtml(t.state.replyDraft),rawMarkdown:t.state.replyDraft}),type:"POST",url:"/topics/"+t.state.id+"/replies"}).done(function(a){t.setState({isSubmittingReply:!1,replyAttachments:[],replyDraft:""},function(){i.PageMessages.clear(),window.Intercom("trackEvent","forum_post"),e(a)})}).fail(function(){t.setState({isSubmittingReply:!1}),i.PageMessages.clear(),i.PageMessages.error({htmlMessage:'We had trouble submitting your reply. Please try again or <a href="mailto: support@kaggle.com">contact support</a> if you continue experiencing issues.',type:"error"})})})},t.prototype.titleOptions=function(){var e=this,t=[];return(i.Current.isAdmin||this.state.comment.isUserAuthor)&&t.push({className:this.state.showEditForm?"topic__author-option--selected":null,onClick:function(){return e.setState({editDraft:e.state.comment.rawMarkdown||s(e.state.comment.content),editTitleDraft:e.state.title,showEditForm:!e.state.showEditForm})},text:"Edit"}),t.push({className:this.state.showOptions?"topic__author-option--selected":null,onClick:function(){return e.setState({showOptions:!e.state.showOptions})},text:"Options"}),t},t}(React.Component);t.TopicContainer=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(40),r=a(4),o=function(e){function t(t){var a=e.call(this,t)||this;return i.PageMessages.clear(),a.state={isSubscribed:t.isSubscribed,totalRows:0},a}return n(t,e),t.prototype.render=function(){return React.createElement(i.SmartListContainer,{dataPathToList:"topics",dataUrl:this.props.dataUrl,filtersOptions:this.getFiltersOptions(),groups:t.groups,itemRenderer:this.renderItem.bind(this),mobileSortUpperBound:i.Breakpoints.tabletMax,pluralItemDescription:"topics",sortOptions:t.sortOptions,titleResolver:this.renderTitle.bind(this),data:this.props.initialTopics,values:this.props.paramValues,searchIndex:"topics",searchableGroups:["all","owned"]})},t.prototype.getFiltersOptions=function(){var e=[{"default":this.props.isSitewide?"topics":"all",parameter:"kind",options:[{label:"Topics & Kernels",value:"all"},{label:"Topics",value:"topics"}]}];return this.props.isRootLevel&&e.unshift({"default":"all",parameter:"category",options:[{label:"All Categories",value:"all"},{label:"Forums",value:"forums"},{label:"Competitions",value:"competitions"},{label:"Datasets",value:"datasets"}]}),e},t.prototype.renderItem=function(e){var t=this;return React.createElement(i.BlockLink,{borderless:e.isSticky,className:r("topic-list-item",e.isSticky?"topic-list-item--sticky":null),href:e.topicUrl,key:e.topicUrl,onClick:function(a){e.isKernel||a.shiftKey||a.ctrlKey||a.metaKey||(a.preventDefault(),t.props.onTopicClicked(e))}},React.createElement(i.VoteButton,{canDownvote:e.userAvatar.id!=i.Current.userId&&this.props.canDownvote,canUpvote:e.userAvatar.id!=i.Current.userId,hasAlreadyVotedDown:-1===e.currentUserVote,hasAlreadyVotedUp:1===e.currentUserVote,totalVotes:e.votes,voteDownUrl:e.downvoteUrl,voteUpUrl:e.upvoteUrl,upVoteIntercomEventName:"forum_vote",downVoteIntercomEventName:"forum_vote"}),React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopMin},React.createElement("div",{className:"topic-list-item__avatar"},React.createElement(i.Avatar,s({},e.userAvatar,{hideTooltop:!0})))),React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopMin},e.isKernel?React.createElement("a",{className:"fa fa-bar-chart topic-list-item__kernel-link",href:e.kernelUrl,title:e.title}):e.medal?React.createElement("img",{className:"topic-list-item__medal",src:"/static/images/medals/discussion/"+e.medal+"L@1x.png",title:e.medal}):React.createElement("span",{className:"topic-list-item__medal"})),React.createElement("div",{className:"topic-list-item__title",onClick:function(a){e.isKernel||a.shiftKey||a.ctrlKey||a.metaKey||(a.preventDefault(),t.props.onTopicClicked(e))}},e.title,React.createElement("div",{className:"topic-list-item__subtitle"},e.isKernel?"last run":"posted"," ",e.postDate?React.createElement(i.TimeAgo,{time:e.postDate}):null,React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopMin},React.createElement("span",null," by ",React.createElement("a",{className:"topic-list-item__link"+("parent"==e.authorType?" topic-list-item__link--parent-author":""),href:e.userAvatar.userUrl,title:e.userAvatar.displayName},e.userAvatar.displayName),e.parentName&&e.parentUrl?React.createElement("span",null," in ",React.createElement("a",{className:"topic-list-item__link",href:e.parentUrl,title:e.parentName},e.parentName)):null)))),React.createElement("div",{className:"topic-list-item__last-comment"},React.createElement("div",null,"last comment",React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopMin},React.createElement("span",null," by"))),React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopMin},React.createElement("a",{className:"topic-list-item__link topic-list-item__last-commenter",href:e.lastCommenterUrl,title:e.lastCommenterName},e.lastCommenterName," ")),React.createElement("div",{className:"topic-list-item__last-comment-time"},e.lastCommentPostDate?React.createElement(i.TimeAgo,{time:e.lastCommentPostDate}):null)),React.createElement("a",{className:"topic-list-item__comment-count",href:e.topicUrl},e.commentCount,React.createElement("span",{className:"fa fa-comments topic-list-item__comment-count-icon"})))},t.prototype.renderTitle=function(e,t){var a=this;return React.createElement("span",null,(t&&t.data&&void 0!==t.data.totalRows?i.numberWithCommas(t.data.totalRows):"Loading")+("all"===t.values.kind?" topics and kernels":" topics"),this.props.id?this.state.isSubscribed?React.createElement("a",{className:"topic-list__subscribe-link",onClick:function(){return $.ajax("/forums/watches/stop?forumId="+a.props.id).done(function(){return a.setState({isSubscribed:!1})})},title:"(Unsubscribe)"},"(Unsubscribe)"):React.createElement("a",{className:"topic-list__subscribe-link",onClick:function(){return $.ajax("/forums/watches/start?forumId="+a.props.id).done(function(){return a.setState({isSubscribed:!0})})},title:"(Subscribe)"},"(Subscribe)"):null)},t}(React.Component);o.groups=[{label:"All",value:"all"},{label:"Mine",value:"owned"},{separator:!0},{label:"Upvoted",value:"upvoted"}],o.sortOptions=[{label:"Hotness",value:"hot"},{label:"Recent Comments",value:"recent"},{label:"Recently Posted",value:"new"},{label:"Most Votes",value:"top"},{label:"Most Comments",value:"active"},{label:"Relevance",value:"relevance"}],t.TopicList=o},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(t){var a=e.call(this,t)||this;return a.handleKeyPress=function(e){if(a.props.rejectedCharacterRegExp){var t=String.fromCharCode(e.which);t.match(a.props.rejectedCharacterRegExp)&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())}},a.handleKeyDown=function(e){return"Enter"==e.key&&a.props.isToggleable?void a.handleSave():"Escape"==e.key&&a.props.isToggleable?void a.handleCancel():void 0},a.handleSave=function(){a.setState({isEditing:!1}),a.props.onSaveCallback&&a.props.onSaveCallback(a.state.content)},a.handleCancel=function(){a.setState({isEditing:!1})},a.handleEdit=function(){a.setState({isEditing:!0},function(){a.inputBox.focus()})},a.state={content:a.props.value||"",isEditing:!a.props.isToggleable},a}return a(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState($.extend({},{content:e.value||""}))},t.prototype.handleChange=function(e){var t=this;this.setState({content:e.target.value},function(){t.props.onChangeCallback&&t.props.onChangeCallback(t.state.content)})},t.prototype.renderInput=function(){var e=this;return React.createElement("input",{ref:function(t){e.inputBox=t},className:"inline-text-editor__input "+this.props.className,value:this.state.content,placeholder:this.props.placeholder,onChange:function(t){return e.handleChange(t)},onFocus:this.props.onGainFocusCallback,onBlur:this.props.onLoseFocusCallback,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown})},t.prototype.renderReadOnly=function(){return React.createElement("div",{className:(this.state.content?"":"inline-text-editor__placeholder")+" "+(this.props.readOnlyClassName||"")+" inline-text-editor__readonly",onClick:this.handleEdit},this.state.content||this.props.placeholder)},t.prototype.render=function(){return this.props.isToggleable?React.createElement("div",{className:"inline-text-editor__toggle-container"},this.state.isEditing?this.renderInput():this.renderReadOnly(),this.state.isEditing?React.createElement("span",{className:"fa fa-floppy-o inline-text-editor__button",onClick:this.handleSave}):React.createElement("span",{className:"fa fa-pencil inline-text-editor__button",onClick:this.handleEdit})):this.renderInput()},t}(React.Component);t.InlineTextEditor=n},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return this.props.isLoading?React.createElement("div",{className:"loading-text"},React.createElement("span",{className:"fa fa-refresh fa-spin fa-fw"}),this.props.text,"..."):null},t}(React.Component);t.LoadingText=n},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(t){var a=e.call(this,t)||this;return a.handleOpenClick=function(){a.props.onShow(),$("body").css({"overflow-x":"hidden","overflow-y":"scroll"}),$("html").css("overflow","hidden")},a.handleCloseClick=function(){a.props.onClose(),$("body").css({overflow:"visible"}),$("html").css("overflow","visible")},a.handleKeyDown=function(e){27==e.keyCode&&a.handleCloseClick()},a.handleStopPropagation=function(e){e.stopPropagation()},a}return a(t,e),t.prototype.componentDidMount=function(){$(document.body).on("keydown",this.handleKeyDown)},t.prototype.componentWillUnmount=function(){$(document.body).off("keydown",this.handleKeyDown)},t.prototype.componentWillReceiveProps=function(e){e.modalIsShown!=this.props.modalIsShown&&(e.modalIsShown?($("body").css({"overflow-x":"hidden","overflow-y":"scroll"}),$("html").css("overflow","hidden")):($("body").css({overflow:"visible"}),$("html").css("overflow","visible")))},t.prototype.render=function(){var e=this.props.modalIsShown?{}:{display:"none"};return React.createElement("div",{className:"modal"},React.createElement("div",{className:this.props.buttonClassName,onClick:this.handleOpenClick}),React.createElement("div",{className:"modal__background "+this.props.modalClassName,style:e,onMouseDown:this.handleCloseClick},React.createElement("div",{className:"modal__content",style:{display:"inline-block",margin:"auto"},onMouseDown:this.handleStopPropagation},this.props.modalContent||this.props.children)))},t}(React.Component);t.Modal=n},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getSuffix=function(){var e=this.props.children%10,t=Math.floor(this.props.children%100/10),a="th";return 1===e?a="st":2===e?a="nd":3==e&&(a="rd"),1===t&&(a="th"),a},t.prototype.render=function(){return React.createElement("span",null,this.props.children.toString()+this.getSuffix())},t}(React.Component);t.Ordinal=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(32),i=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.render=function(){return React.createElement(s.BlockLink,{className:"organization-card",href:this.props.url},React.createElement("img",{src:this.props.imageUrl,alt:this.props.name,className:"organization-card__image"}),React.createElement("span",{className:"organization-card__name"},this.props.name))},t}(React.Component);t.OrganizationCard=i},function(e,t,a){"use strict";function n(e,t){return t?e+" "+e+"--"+t:e}function s(e,t){return t?e+"--"+t:e}function i(e,t,a,n){void 0===t&&(t=null),void 0===a&&(a=""),void 0===n&&(n=null);var s={count:null==n?null:d.numberWithCommas(n),title:e.toLowerCase(),href:a,text:t||e,tab:e.toLowerCase()};return s}var r=this&&this.__extends||function(e,t){
function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},l=a(7),c=a(159),p=a(160),u=a(29),d=a(73),m=a(4);t.buildLink=i;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.renderIcon=function(){return this.props.faIcon&&React.createElement("i",{key:this.props.faIcon,className:"pageheader__page-message-icon fa "+this.props.faIcon})},t.prototype.render=function(){var e=null;if(this.props.message&&""!==this.props.message)e=React.createElement("span",{key:this.props.type,className:m("pageheader__pagemessagecontent","pageheader__pagemessagecontent--"+this.props.type,{"pageheader__pagemessagecontent--custom-icon":!!this.props.faIcon})},this.renderIcon(),React.createElement("span",null,this.props.message));else{if(!this.props.htmlMessage||""===this.props.htmlMessage)return null;e=React.createElement("span",{key:this.props.type,className:m("pageheader__pagemessagecontent","pageheader__pagemessagecontent--"+this.props.type,{"pageheader__pagemessagecontent--custom-icon":!!this.props.faIcon})},this.renderIcon(),React.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.htmlMessage}}))}return React.createElement("div",{className:m("pageheader__pagemessage","pageheader__pagemessage--"+this.props.type)},e)},t}(React.Component);t.PageMessageComponent=h;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return React.createElement("div",{className:"pageheader"},React.createElement("div",{className:m("pageheader__container",this.props.backgroundClass)},this.props.children))},t}(React.Component);t.PageHeader=g;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return React.createElement("div",{className:"pageheader__fork-section"},React.createElement("div",{className:"pageheader__forked-symbol"},"L"),React.createElement("span",null,"forked from",React.createElement("span",{className:"pageheader__subtitle-link"}," ",React.createElement("a",{href:this.props.forkParentUrl},this.props.forkParentTitle))," by ",React.createElement("span",{className:"pageheader__subtitle-link"},React.createElement("a",{href:this.props.forkParentAuthorUrl},this.props.forkParentAuthorDisplayName)," "),React.createElement("a",{href:this.props.forkDiffUrl,className:"pageheader__diff"},"(",React.createElement("span",{className:"pageheader__diff-inserted"},"+",this.props.forkDiffLinesInserted),"/",React.createElement("span",{className:"pageheader__diff-deleted"},"-",this.props.forkDiffLinesDeleted),"/",React.createElement("span",{className:"pageheader__diff-changed"},"~",this.props.forkDiffLinesChanged),") ")))},t}(React.Component);t.PageHeaderForkInfo=f;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=React.createElement("a",{href:this.props.userUrl,className:"pageheader__author-name"},this.props.userName),t=null,a=null;this.props.versionLink&&(t=React.createElement("span",null," · ",this.props.versionLink),a=React.createElement("span",null,this.props.versionLink," · "));var n=null;return this.props.dateUpdated&&(n=React.createElement("time",{dateTime:this.props.dateUpdated.toString(),title:this.props.dateUpdated.toString()},"last ",this.props.runTimeVerb," ",React.createElement(l.TimeAgo,{time:this.props.dateUpdated}))),this.props.showUserName&&this.props.showDateUpdated&&this.props.dateUpdated?React.createElement("span",null,"by ",e,t," · ",n):this.props.showUserName?React.createElement("span",null,"by ",e,t):this.props.showDateUpdated&&this.props.dateUpdated?React.createElement("span",null,a,n):null},t}(React.Component);t.PageHeaderUserNameAndRunTime=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props.nodeId||null;return React.createElement("div",{className:"pageheader__top--safe",id:e},this.props.children)},t}(React.Component);t.PageHeaderTopRowSafe=y;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e,t;this.props.isEditingHeaderInfo?(e=this.props.title,t=this.props.subtitle):(e=this.props.titleUrl?React.createElement("a",{href:this.props.titleUrl,className:n("pageheader__title",this.props.modifier)},this.props.title):React.createElement("div",{className:n("pageheader__title",this.props.modifier),onClick:this.props.onTitleClick||null},this.props.title),t=React.createElement("a",{href:this.props.titleUrl,className:n("pageheader__subtitle",this.props.modifier)},React.createElement("p",null,this.props.subtitle),this.props.forkInfo?this.props.forkInfo:null));var a=this.props.nodeId||null;return React.createElement("div",{className:n("pageheader__top",this.props.modifier),id:a},React.createElement("a",{href:this.props.titleUrl,className:n("pageheader__top-overlay",this.props.modifier)}),this.props.coverImageUrl&&React.createElement("div",{className:n("pageheader__top-image",this.props.modifier)},React.createElement("img",{src:this.props.coverImageUrl})),e,this.props.editHeaderButton&&this.props.canEdit?this.props.editHeaderButton:null,t,this.props.children)},t}(React.Component);t.PageHeaderTopRow=_;var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return React.createElement("div",{className:s("pageheader__"+this.props.classNameElement,this.props.classNameModifier)},React.createElement("a",{href:this.props.targetUrl},React.createElement("img",{src:this.props.imageUrl})),this.props.thumbnailOverlay?this.props.thumbnailOverlay:null)},t}(React.Component);t.PageHeaderThumbnail=b;var E=function(e){function t(t){var a=e.call(this,t)||this;return a.state={lockOverflowDropdown:!1,showOverflowDropdown:!1},a}return r(t,e),t.prototype.handleNavClick=function(e,t){e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1==e.button||this.props.changeActiveTab&&(e.preventDefault(),this.props.changeActiveTab(t))},t.prototype.getLinkText=function(e){return e.text+(e.count?" ("+e.count+")":e.showZeroCountExplicitly?" (0)":"")},t.prototype.render=function(){var e=this;return React.createElement("nav",{className:n("pageheader__nav",this.props.classNameModifier)},React.createElement(u.MediaQuery,{minWidth:0,maxWidth:u.Breakpoints.tabletMax},React.createElement("div",{className:"pageheader__nav-wrapper"},this.props.menuLinks||this.props.overflowMenuLinks?(this.props.menuLinks?this.props.menuLinks:[]).concat(this.props.overflowMenuLinks).filter(function(e){return null!=e}).map(function(t,a){return React.createElement("a",{key:"pageheader__left-link--"+a,href:t.href||t.tab,title:t.title,className:m("pageheader__left-links","pageheader__left-links--with-onclick",(t.text||"").toUpperCase()===(e.props.activeTab||"").toUpperCase()?"pageheader__left-links--selected":""),onClick:function(a){return t.actionCallback?t.actionCallback(a):t.tab?e.handleNavClick(a,t.text):""},"data-link-text":e.getLinkText(t)},e.getLinkText(t))}):null,React.createElement("div",{className:"pageheader__right-links-wrapper"},this.props.rightMenuLinks?this.props.rightMenuLinks.map(function(t,a){return React.createElement("a",{key:"pageheader__right-link--"+a,href:t.href,title:t.title,className:m("pageheader__right-links","pageheader__right-links--with-onclick",t.text.toUpperCase()==e.props.activeTab.toUpperCase()?"pageheader__right-links--selected":"",t.tab&&t.tab.toUpperCase()==e.props.activeTab.toUpperCase()?"pageheader__right-links--selected":""),onClick:t.actionCallback?function(e){return t.actionCallback(e)}:t.tab?function(a){return e.handleNavClick(a,t.tab)}:!t.href&&t.text?function(a){return e.handleNavClick(a,t.text)}:null,"data-link-text":e.getLinkText(t)},t.text)}):null))),React.createElement(u.MediaQuery,{minWidth:u.Breakpoints.desktopMin},React.createElement("div",{className:"pageheader__nav-wrapper"},this.props.menuLinks?this.props.menuLinks.filter(function(e){return null!=e}).map(function(t,a){return React.createElement("a",{key:"pageheader__left-link--"+a,href:t.href||t.tab,title:t.title,className:m("pageheader__left-links","pageheader__left-links--with-onclick",(t.text||"").toUpperCase()===(e.props.activeTab||"").toUpperCase()?"pageheader__left-links--selected":""),onClick:function(a){return t.actionCallback?t.actionCallback(a):t.tab?e.handleNavClick(a,t.text):""},"data-link-text":e.getLinkText(t)},e.getLinkText(t))}):null,this.props.overflowMenuLinks&&this.props.overflowMenuLinks.length?React.createElement("div",{onMouseEnter:function(){e.state.lockOverflowDropdown||e.setState({showOverflowDropdown:!0})},onMouseLeave:function(){e.state.lockOverflowDropdown||e.setState({showOverflowDropdown:!1})}},React.createElement("a",{key:"pageheader__left-link--"+(this.props.menuLinks?this.props.menuLinks.length:0),title:"More",className:m("pageheader__left-links","pageheader__left-links--with-onclick","pageheader__more-link",this.state.lockOverflowDropdown?"pageheader__left-links--selected":""),"data-link-text":"More"},React.createElement("p",{className:"pageheader__more-link-wrapper"},"More"),this.state.showOverflowDropdown?React.createElement("div",{className:"pageheader__nav-overflow"},this.props.overflowMenuLinks.map(function(t,a){return React.createElement("span",{key:"pageheader__overflow-link--"+a,className:"pageheader__overflow-link-wrapper"},React.createElement("a",{href:t.href||t.tab,title:t.title,className:m("pageheader__left-links","pageheader__overflow-links",(t.text||"").toUpperCase()===(e.props.activeTab||"").toUpperCase()?"pageheader__left-links--selected":""),onClick:function(a){return t.actionCallback?t.actionCallback(a):t.tab?e.handleNavClick(a,t.text):""},"data-link-text":e.getLinkText(t)},e.getLinkText(t)))})):null)):null,React.createElement("div",{className:"pageheader__right-links-wrapper"},this.props.rightMenuLinks?this.props.rightMenuLinks.map(function(t,a){return React.createElement("a",{key:"pageheader__right-link--"+a,href:t.href,title:t.title,className:m("pageheader__right-links","pageheader__right-links--with-onclick",t.text.toUpperCase()==e.props.activeTab.toUpperCase()?"pageheader__right-links--selected":"",t.tab&&t.tab.toUpperCase()==e.props.activeTab.toUpperCase()?"pageheader__right-links--selected":""),onClick:t.actionCallback?function(e){return t.actionCallback(e)}:t.tab?function(a){return e.handleNavClick(a,t.tab)}:!t.href&&t.text?function(a){return e.handleNavClick(a,t.text)}:null,"data-link-text":e.getLinkText(t)},t.text)}):null))))},t}(React.Component);t.PageHeaderNav=E;var R=function(e){function t(t){var a=e.call(this,t)||this;return a.onPageMessagesUpdated=function(e){a.setState({pageMessages:e})},a.state={pageMessages:[]},a}return r(t,e),t.prototype.componentWillReceiveProps=function(e){var t=JSON.stringify(this.props.pageMessages)!==JSON.stringify(e.pageMessages);t&&(p.PageMessages.clear(),p.PageMessages.add(e.pageMessages))},t.prototype.componentDidMount=function(){p.PageMessages.addListener(this.onPageMessagesUpdated),p.PageMessages.add(this.props.pageMessages)},t.prototype.componentWillUnmount=function(){p.PageMessages.removeListener(this.onPageMessagesUpdated)},t.prototype.render=function(){return React.createElement(c.StickyScroll,{stickyClassName:"pageheader__sticky--stuck",scrollingClassName:"pageheader__sticky--scrolling",className:"pageheader__sticky"},React.createElement("div",{className:"pageheader__bottom"},this.props.children),React.createElement("div",null,null!=this.state.pageMessages?this.state.pageMessages.map(function(e,t){return React.createElement(h,o({key:"pageheader__pagemessage--"+t},e))}):""),React.createElement("div",{className:"pageheader__transition"}))},t}(React.Component);t.PageHeaderBottomRow=R;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this;return React.createElement("a",{className:this.props.isActive?"pageheader__calltoaction--active":this.props.isMuted?"pageheader__calltoaction--muted":"pageheader__calltoaction",href:this.props.href?this.props.href:null,onClick:function(t){return e.props.onClick(t)},title:this.props.title},this.props.text)},t}(React.Component);t.PageHeaderCallToAction=w},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(t){var a=e.call(this,t)||this;return a.scrollListener=function(){a.setState({isStuck:$(window).scrollTop()>=a.offsetTop})},a.state={isStuck:!1},a}return n(t,e),t.prototype.componentDidMount=function(){var e=this;window.setTimeout(function(){var t=function(){return ReactDOM.findDOMNode(e).getBoundingClientRect().top+window.scrollY};e.offsetTop=t(),$().ready(function(){return e.offsetTop=t()}),window.addEventListener("scroll",e.scrollListener),e.scrollListener()})},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollListener)},t.prototype.render=function(){var e={visibility:"hidden"};return React.createElement("div",null,React.createElement("div",{className:s(this.props.className,this.state.isStuck?this.props.stickyClassName:this.props.scrollingClassName)},this.props.children),this.state.isStuck?React.createElement("div",{className:s(this.props.className,this.props.scrollingClassName),style:e},this.props.children):"")},t}(React.Component);t.StickyScroll=i},function(e,t,a){"use strict";var n=a(24),s=function(){function e(){}return e.error=function(e,t){this.pushAndNotifyListeners("error",e,t)},e.info=function(e,t){this.pushAndNotifyListeners("info",e,t)},e.warning=function(e,t){this.pushAndNotifyListeners("warning",e,t)},e.success=function(e,t){this.pushAndNotifyListeners("success",e,t)},e.site=function(e,t){this.pushAndNotifyListeners("site",e,t)},e.clear=function(){this.messages=this.messages.filter(function(e){return e.isPersistent}),this.notifyListeners()},e.set=function(e){this.clear(),this.add(e),this.notifyListeners()},e.add=function(e){e&&(this.messages=this.messages.concat(e),this.notifyListeners())},e.remove=function(e){this.messages=this.messages.filter(function(t){return t.id!==e}),this.notifyListeners()},e.addListener=function(e){this.listeners.push(e),this.notifyListeners()},e.removeListener=function(e){this.listeners.splice(this.listeners.indexOf(e),1)},e.pushAndNotifyListeners=function(e,t,a){a&&a.clear&&this.clear(),t&&(this.messages.push("string"==typeof t?{type:e,message:t,faIcon:a&&a.faIcon}:n.extend(t,{type:e})),this.notifyListeners())},e.notifyListeners=function(){for(var e=0,t=this.listeners;e<t.length;e++){var a=t[e];a(this.messages)}},e}();s.messages=window.Kaggle.PageMessages||[],s.listeners=[],t.PageMessages=s},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(162),i=a(24);t.DEFAULT_PAGE_SIZE=20;var r=function(e){function a(t){var a=e.call(this,t)||this;return a.onSearchChange=function(e){null==a.qTextBox||""==a.qTextBox;a.qTextBox=e.target.value,a.timer&&clearInterval(a.timer);var t=a.props.groupDefaultSortBys?a.props.groupDefaultSortBys.filter(function(e){return e.group===a.state.values.group}):null,n=t&&t.length>0?t[0].sortBy:a.props.sortOptions[0].value,s=null!=a.qTextBox&&""!=a.qTextBox||"relevance"!=a.state.values.sortBy?a.qTextBox?"relevance":a.state.values.sortBy:a.state.userLastSelectedSortBy||n,i=a.props.groupSearchRedirects&&a.props.groupSearchRedirects.filter(function(e){return e.searchedGroup==a.state.values.group}),r=i&&i.length>0?i[0].redirectToGroup:a.state.values.group;a.setState({values:a.mergeValues({search:a.qTextBox,sortBy:s,group:r})}),a.timer=window.setInterval(function(){return a.updateSearch(a.qTextBox)},300)},a.handleBeforeUnload=function(e){var t=$(".smart-list");t.is(document.activeElement)||0!==t.has(document.activeElement).length||a.logSearchAction()},a.updateSearch=function(e){a.timer&&clearInterval(a.timer),a.onSelectionsChanged(!0)},a.logSearchAction=function(e,t,n){a.state.values.search&&$.ajax({url:"/search/log",type:"POST",data:{index:a.props.searchIndex,isQuick:!1,q:a.state.values.search,isSuccess:null!=e&&null!=t,rank:n,id:e,url:t}})},a.onFilterChanged=function(e,t){var n={};n[e]=t,a.setValueState(n,!0)},a.onWindowPopState=function(e){if(e.state)a.setValueState(e.state,!1);else{var t=a.getDefaultState();a.setValueState(t.values,!1)}},a.updateOpenMobileSort=function(e){a.setState({openMobileSort:e})},a.state=a.getDefaultState(),a}return n(a,e),a.prototype.componentDidUpdate=function(){this.props.onDidUpdate&&this.props.onDidUpdate()},a.prototype.componentDidMount=function(){window.addEventListener("popstate",this.onWindowPopState,!1),window.addEventListener("beforeunload",this.handleBeforeUnload,!1),this.props.data?this.setData(this.props.data):this.getData()},a.prototype.componentWillUnmount=function(){window.removeEventListener("popstate",this.onWindowPopState,!1),window.removeEventListener("beforeunload",this.handleBeforeUnload,!1)},a.prototype.componentWillReceiveProps=function(e){e.data&&!i.isEqual(e.data,this.state.data)&&this.setData(e.data)},a.prototype.getDefaultState=function(){var e=$.extend(!0,{sortBy:this.props.sortOptions?this.props.sortOptions[0].value:null,group:this.props.groups?this.props.groups[0].value:null,search:"",page:1},this.props.values);return{isLoadingMoreData:!0,hasMoreData:!0,list:[],onScroll:this.onScroll.bind(this),onSortByChanged:this.onSortByChanged.bind(this),boundSelectionGroups:this.getBoundSelectionGroups.bind(this),pageSize:this.props.pageSize||t.DEFAULT_PAGE_SIZE,values:e,userLastSelectedSortBy:null}},a.prototype.getBoundSelectionGroups=function(){var e=this;return this.props.groups?this.props.groups.map(function(t){return t.separator?{separator:!0}:{key:t.value,name:t.label,href:"?sortBy="+e.state.values.sortBy+"&group="+t.value,action:function(){return e.onSelectionGroupChanged(t.value)}}}):null},a.prototype.getQueryStringParameters=function(){var e=this,t={};for(var a in this.state.values){var n=this.state.values[a];("search"!=a||!this.props.searchableGroups||this.props.searchableGroups.filter(function(t){return t==e.state.values.group}).length>0)&&n&&(t[a]=n)}return $.param(t)},a.prototype.getData=function(){return this.setState({isLoadingMoreData:!0}),this.currentDataRequest&&4!==this.currentDataRequest.readyState&&this.currentDataRequest.abort(),this.currentDataRequest=$.ajax({url:this.props.dataUrl+"?"+this.getQueryStringParameters(),method:"GET",success:this.setData.bind(this)}),this.currentDataRequest},a.prototype.setData=function(e){var t=this,a=e;if(this.props.dataPathToList)for(var n=0,s=this.props.dataPathToList.split(".");n<s.length;n++){var i=s[n];a=a[i]}var r=a,o=this.state.list.concat(a);r&&this.setState({isLoadingMoreData:!1,hasMoreData:r.length>0,hasLoadedSomeData:o.length>0,list:o,data:e,children:o.map(function(e,a){return t.props.itemRenderer(e,a,t.logSearchAction)})},function(){return t.props.onDataLoaded?t.props.onDataLoaded(e):null})},a.prototype.setValueState=function(e,t){var a=this;this.setState({values:this.mergeValues(e)},function(){return a.onSelectionsChanged(t)})},a.prototype.mergeValues=function(e){return $.extend(!0,this.state.values,e)},a.prototype.onSelectionGroupChanged=function(e){var t=this.props.groupDefaultSortBys?this.props.groupDefaultSortBys.filter(function(t){return t.group===e}):null,a=this.state.userLastSelectedSortBy||(t&&t.length>0?t[0].sortBy:this.state.values.sortBy),n=this.props.groupSearchRedirects&&this.props.groupSearchRedirects.filter(function(t){return t.searchedGroup==e}).length>0||!this.props.searchableGroups||0==this.props.searchableGroups.filter(function(t){return t==e}).length;this.setValueState({group:e,sortBy:a,search:n?"":this.state.values.search},!0)},a.prototype.onSortByChanged=function(e){var t=this;this.setState({values:this.mergeValues({sortBy:e}),userLastSelectedSortBy:"relevance"==e?this.state.userLastSelectedSortBy:e},function(){return t.onSelectionsChanged(!0)})},a.prototype.onSelectionsChanged=function(e){var t=this;this.props.onSelectionsChanged&&this.props.onSelectionsChanged(this.state.values.sortBy,this.state.values.group);var a=this.refs.container;a&&(a.style.minHeight=$(a).height()+"px"),this.setState({openMobileSort:!1,isLoadingMoreData:!0,hasMoreData:!0,hasLoadedSomeData:!1,list:[],children:[],values:this.mergeValues({page:1})},function(){var n=window.location.pathname+"?"+t.getQueryStringParameters();t.getData().then(function(){e&&window.history.pushState(t.state.values,null,n),a&&(a.style.minHeight="initial")})})},a.prototype.onScroll=function(){var e=this;this.state.isLoadingMoreData||!this.state.hasMoreData||0!=this.state.list.length&&this.state.list.length<this.state.pageSize||this.setState({isLoadingMoreData:!0,values:this.mergeValues({page:this.state.values.page+1})},function(){e.getData()})},a.prototype.render=function(){var e={updateOpenMobileSort:this.updateOpenMobileSort,onFilterChanged:this.onFilterChanged,onSearchChange:this.onSearchChange};return this.props.isHidden?null:React.createElement("div",{ref:"container"},React.createElement(s.SmartList,$.extend({},this.props,this.state,e)))},a}(React.Component);t.SmartListContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(13),r=a(26),o=a(27),l=a(29),c=a(30),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderTitle=function(){return this.props.selectionGroupInTitle?this.renderSelectionGroups():this.props.title||(this.props.titleResolver?this.props.titleResolver(this.props.list,this.props):null)},t.prototype.renderSelectionGroups=function(){return this.props.groups?React.createElement(o.SelectionGroup,{children:this.props.boundSelectionGroups(),selected:this.props.values.group,filters:this.renderFiltersAndSearch()}):null},t.prototype.renderFilter=function(e,t,a){var n=this;return React.createElement(i.SelectBox,{key:t,options:e.options,onChange:function(t){return n.props.onFilterChanged(e.parameter,t)},searchable:!1,value:this.props.values[e.parameter]||e["default"]||"",placeholder:e.placeholder,className:(a?"KaggleBoxlessSelectSafe":null)+" smart-list__filter smart-list__filter--"+(a?"boxless":"boxed")})},t.prototype.renderSearch=function(e){var t=this,a=!this.props.searchableGroups||0==this.props.searchableGroups.filter(function(e){return t.props.values.group==e}).length;return this.props.searchIndex?React.createElement("label",{className:"smart-list__search-wrapper smart-list__search-wrapper--"+e},React.createElement("input",{type:"text",className:"smart-list__search smart-list__search--"+e,ref:"search",value:this.props.values.search,onChange:this.props.onSearchChange,disabled:a}),React.createElement("div",{className:"fa fa-search smart-list__search-button",disabled:a})):null},t.prototype.renderFiltersAndSearch=function(){var e=this,t=this.props.filtersOptions?this.props.filtersOptions.map(function(t,a){return e.renderFilter(t,a,!0)}):null;return React.createElement(l.MediaQuery,{minWidth:this.props.mobileSortUpperBound+1},React.createElement("div",{className:"smart-list__sub-title-right"},t,this.renderSearch("sub-title-bar")))},t.prototype.renderSortBy=function(){var e=this;return this.props.sortOptions?React.createElement("div",null,React.createElement(l.MediaQuery,{minWidth:this.props.mobileSortUpperBound+1},React.createElement("div",{className:"smart-list__sort"},React.createElement("p",{className:"smart-list__sort-label"},"Sort By"),React.createElement(i.SelectBox,{options:this.props.sortOptions.filter(function(t){return"relevance"!=t.value==!e.props.values.search}),onChange:this.props.onSortByChanged,searchable:!1,value:this.props.values.sortBy}))),React.createElement(l.MediaQuery,{minWidth:0,maxWidth:this.props.mobileSortUpperBound},React.createElement("a",{className:"script-list-react__sort-link--mobile",onClick:function(t){return e.props.updateOpenMobileSort(!0)}},"Filter/Sort ",React.createElement("span",{className:"fa fa-chevron-right"})))):null},t.prototype.renderOptionalLoadingMessage=function(){return this.props.isLoadingMoreData?React.createElement("div",{className:"smart-list__message"},"Loading ",this.props.hasLoadedSomeData?"more ":"",this.props.pluralItemDescription,"..."):null},t.prototype.renderOptionalNoMoreDataMessage=function(){return!this.props.isLoadingMoreData&&this.props.children&&(0===this.props.children.length||this.props.children.length>this.props.pageSize||this.props.listFooterRenderer)?this.props.listFooterRenderer?this.props.listFooterRenderer(this.props.list,this.props):React.createElement("div",{className:"smart-list__message"},React.createElement("span",null,"No ",this.props.hasLoadedSomeData?"more ":"",this.props.pluralItemDescription," to show ¯\\_(ツ) _/¯"),React.createElement("br",null)):null},t.prototype.renderSubTitleBar=function(){return this.props.selectionGroupInTitle?null:this.renderSelectionGroups()},t.prototype.renderContent=function(){var e=this;return React.createElement("div",{className:"smart-list__content"},React.createElement(l.MediaQuery,{minWidth:0,maxWidth:this.props.mobileSortUpperBound},React.createElement(c.OffCanvasContainer,{closeButtonCallback:function(){return e.props.updateOpenMobileSort(!1)},shouldShowOffCanvas:this.props.openMobileSort,shouldUseCloseButton:!0,shouldUseRightSide:!0},React.createElement("div",{className:"smart-list__sort-menu--mobile"},React.createElement("p",{className:"smart-list__sort-label--mobile"},"Sort By"),this.props.sortOptions?React.createElement(i.SelectBox,{className:"smart-list__sort--mobile",options:this.props.sortOptions.filter(function(t){return"relevance"!=t.value||e.props.values.search}),onChange:this.props.onSortByChanged,searchable:!1,value:this.props.values.sortBy}):null),this.props.filtersOptions?this.props.filtersOptions.map(function(t,a){return React.createElement("div",{className:"smart-list__sort-menu--mobile",key:a},React.createElement("p",{className:"smart-list__sort-label--mobile"},t.placeholder),e.renderFilter(t,a,!1))}):null,React.createElement("div",null,this.renderSearch("off-canvas")))),React.createElement(r.WindowInfiniteScroll,{onScroll:this.props.onScroll,height:this.props.contentHeight},this.props.listHeaderRenderer?this.props.listHeaderRenderer(this.props.list,this.props):null,this.props.children,this.renderOptionalLoadingMessage(),this.renderOptionalNoMoreDataMessage()))},t.prototype.render=function(){return this.props.isUnstyled?this.renderContent():React.createElement("div",{className:"smart-list smart-list--"+(this.props.selectionGroupInTitle?"groups-in-title":"standard")},React.createElement(s.ContentBox,{title:this.renderTitle(),titleBarRightSide:this.props.titleBarRightSide||this.renderSortBy(),subTitleBar:this.renderSubTitleBar(),containerClassName:this.props.containerClassName,contentClassName:this.props.contentClassName},this.renderContent()))},t}(React.Component);t.SmartList=p},function(e,t){"use strict";var a=function(){function e(){this.clear()}return e.prototype.clear=function(){this.stopTimer(),this.timerStart=null,this.timerEnd=null,this.displayCallback&&this.displayCallback("")},e.prototype.setStartTime=function(e){void 0===e&&(e=null),e?this.timerStart=e:this.timerStart=new Date},e.prototype.getElapsedTimeString=function(){if(!this.timerStart)return"";var e=this.getElapsedMilliseconds(),t=e/1e3,a=Math.floor(t/3600),n=Math.floor(t/60)%60,s=Math.floor(t)%60,i=(10>s?"0":"")+s;if(3600>t)return n+":"+i;var r=(10>n?"0":"")+n;return a+":"+r+":"+i},e.prototype.getElapsedMilliseconds=function(){var e=this.timerEnd;return this.paused||(e=new Date),e.getTime()-this.timerStart.getTime()},e.prototype.startTimer=function(){this.startTimerFrom(new Date)},e.prototype.startTimerFrom=function(e){this.displayCallback||console.warn("scriptTimer: starting timer without callback"),this.setStartTime(e);var t=this;this.timerIntervalId=window.setInterval(function(){return t.updateTimer()},1e3),this.paused=!1,this.updateTimer()},e.prototype.setToZero=function(){this.stopTimer(),this.timerStart=this.timerEnd,this.updateTimer()},e.prototype.updateTimer=function(){this.displayCallback&&this.displayCallback(this.getElapsedTimeString())},e.prototype.stopTimer=function(){this.timerIntervalId>=0&&window.clearInterval(this.timerIntervalId),this.timerIntervalId=-1,this.paused=!0,this.timerEnd=new Date},e.prototype.setDisplayCallback=function(e){this.displayCallback=e},e.prototype.isRunning=function(){return!this.paused},e}();t.Timer=a},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e={};this.props.height>0&&(e.height=this.props.height+48+"px");var t={};this.props.displayIframe||(t.display="none");var a={display:this.props.displayLoadingPanel?"inherit":"none"};return React.createElement("div",{className:"script-notebook-pane",style:t},React.createElement(s.ContentBox,{title:this.props.contentBoxTitle},React.createElement("div",{className:"script-notebook-pane__container"},React.createElement("iframe",{src:this.props.iframeUrl,style:e}),React.createElement("div",{className:"script-notebook-pane__loading",style:a},React.createElement("div",{className:"script-notebook-pane__loading-content"},React.createElement("span",{className:"fa fa-circle-o-notch fa-spin"}))))))},t}(React.Component);t.ScriptNotebookPane=i;var r=function(e){function t(t){var a=e.call(this,t)||this;return a.handleResizeMessage=function(e){if(!isNaN(e.data)){var t=parseInt(e.data);a.setState({height:t,iframeReady:!0,hasBeenRendered:!0})}},a.state={height:552,iframeReady:!1,hasBeenRendered:a.props.displayIframe},a}return n(t,e),t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.handleResizeMessage)},t.prototype.componentDidMount=function(){window.addEventListener("message",this.handleResizeMessage,!1)},t.prototype.render=function(){if(!this.props.displayIframe&&!this.state.hasBeenRendered)return null;var e=this.props.displayIframe,t=this.props.displayIframe&&(!this.state.iframeReady||0===this.state.height);return React.createElement(i,{iframeUrl:this.props.iframeUrl,height:this.state.height,displayIframe:e,displayLoadingPanel:t,contentBoxTitle:this.props.isNotebook?"Notebook":"Report"})},t}(React.Component);t.ScriptNotebookPaneContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(124),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this,t=React.createElement("div",{className:"script-code-pane__right-section"},React.createElement("a",{href:this.props.downloadAllFilesUrl,className:"script-code-pane__download"},"Download All"));return React.createElement("div",{ref:function(t){return e.props.setEnclosingElement(t)}},React.createElement(s.ContentBox,{title:"Output",titleBarRightSide:t},React.createElement(i.FilePreviewList,{files:this.props.fileListItems,showSubmitToCompButtons:this.props.showSubmitToCompButtons,
scriptVersionId:this.props.scriptVersionId,competitionName:this.props.competitionName,submitToCompUrl:this.props.submitToCompUrl})))},t}(React.Component);t.ScriptFilesPaneContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(7),r=a(38),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e,t=this.props.item,a=this.props.previousItem,n=Math.round(10*t.runInfo.runTimeSeconds)/10+"s",s=r(t.outputFilesTotalSizeBytes),o=0===t.versionNumber?React.createElement("span",{className:"script-versions-pane__fork-parent"},"Forked from"):React.createElement("span",{className:"script-versions-pane__version-number"},"Version ",t.versionNumber),l=new Date(t.lastRunTime),c=!isNaN(l.getTime()),p=c?React.createElement(i.TimeAgo,{time:l}):t.lastRunTime,u=React.createElement("span",null,React.createElement("span",{className:"script-versions-pane__diff-inserted"},"+",t.linesInsertedFromPrevious),"/",React.createElement("span",{className:"script-versions-pane__diff-deleted"},"–",t.linesDeletedFromPrevious),"/",React.createElement("span",{className:"script-versions-pane__diff-changed"},"~",t.linesChangedFromPrevious));return e=a?React.createElement("a",{href:"/kernels/diff/"+a.id+"/"+t.id},u):React.createElement("span",null),React.createElement("div",{key:t.id,className:"script-versions-pane__item"+(t.runInfo.succeeded?" script-versions-pane__item--successful":" script-versions-pane__item--error")},React.createElement("a",{href:t.url,className:"script-versions-pane__version-count"},o),React.createElement("a",{href:t.url,className:"script-versions-pane__version-icon"},React.createElement("span",null,React.createElement("span",{className:t.runInfo.succeeded?"fa fa-check":"fa fa-times"}))),React.createElement("a",{href:t.url,className:"script-versions-pane__version-title"},React.createElement("span",null,t.title)),React.createElement("a",{href:t.url,className:"script-versions-pane__version-last-run-time"},React.createElement("span",null,p)),React.createElement("a",{href:t.url,className:"script-versions-pane__version-run-time"},React.createElement("span",null,n)),React.createElement("a",{href:t.url,className:"script-versions-pane__version-output-size"},React.createElement("span",null,s)),React.createElement("a",{href:t.url,className:"script-versions-pane__version-language-name"},React.createElement("span",null,t.languageName)),React.createElement("a",{href:t.url,className:"script-versions-pane__is-notebook"},React.createElement("span",null,t.isNotebook?"Notebook":"Script")),React.createElement("span",{className:"script-versions-pane__version-diff"},e),React.createElement("div",{className:"script-versions-pane__diff-buttons"},React.createElement("input",{type:"radio",checked:this.props.leftDiffButtonInitiallySelected,onChange:this.props.updateLeftDiffId}),React.createElement("input",{type:"radio",checked:this.props.rightDiffButtonInitiallySelected,onChange:this.props.updateRightDiffId})))},t}(React.Component);t.ScriptVersionsPaneRow=o;var l=function(e){function t(t){var a=e.call(this,t)||this;return a.state={leftDiffScriptVersionId:a.props.versionHistory[0].id,rightDiffScriptVersionId:a.props.versionHistory[a.props.versionHistory.length-1].id},a}return n(t,e),t.prototype.updateLeftDiffId=function(e){this.setState({leftDiffScriptVersionId:e})},t.prototype.updateRightDiffId=function(e){this.setState({rightDiffScriptVersionId:e})},t.prototype.render=function(){var e=this,t=React.createElement("div",{className:"script-code-pane__right-section"},React.createElement("a",{href:"/kernels/diff/"+this.state.leftDiffScriptVersionId+"/"+this.state.rightDiffScriptVersionId,className:"script-versions-pane__diff-button"},"View Diff"));return React.createElement("div",{className:"script-versions-pane"},React.createElement(s.ContentBox,{title:"Versions",titleBarRightSide:t},this.props.versionHistory.map(function(t,a,n){return React.createElement(o,{key:t.id,item:t,previousItem:a<n.length-1?n[a+1]:null,updateLeftDiffId:function(){return e.updateLeftDiffId(t.id)},updateRightDiffId:function(){return e.updateRightDiffId(t.id)},leftDiffButtonInitiallySelected:t.id==e.state.leftDiffScriptVersionId,rightDiffButtonInitiallySelected:t.id==e.state.rightDiffScriptVersionId})})))},t}(React.Component);t.ScriptVersionsPane=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e,t=this;return e=this.props.operationBeingProcessed?React.createElement("div",{className:"script-options-pane__processing"},"Processing..."):React.createElement("div",{className:"script-options-pane__hide-script-section"},React.createElement("input",{type:"checkbox",onClick:function(){return t.props.toggleHideScript()},defaultChecked:this.props.scriptIsHidden}),"Hide Script"),React.createElement(s.ContentBox,{title:"Options"},React.createElement("div",{className:"script-options-pane__section"},e))},t}(React.Component);t.ScriptRegularOptionsPane=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement(s.ContentBox,{title:"Admin"},React.createElement("div",{className:"script-options-pane__section"},React.createElement("input",{type:"checkbox",onClick:function(){return e.props.toggleScriptIsLanguageTemplate()},defaultChecked:this.props.scriptIsLanguageTemplate}),"Language Template ",React.createElement("br",null),React.createElement("br",null),React.createElement("div",{onClick:function(){return e.props.rerunScript()},className:"script-options-pane__link"},"Rerun Script")))},t}(React.Component);t.ScriptAdminOptionsPane=r;var o=function(e){function t(t){var a=e.call(this,t)||this;return a.state={scriptIsHidden:a.props.scriptIsInitiallyHidden,operationBeingProcessed:!1,scriptIsLanguageTemplate:a.props.scriptIsInitiallyLanguageTemplate},a}return n(t,e),t.prototype.handleToggleScriptIsHidden=function(){var e=this;this.setState({operationBeingProcessed:!0});var t=!this.state.scriptIsHidden;$.ajax({url:this.props.toggleScriptIsHiddenUrl+"?isHidden="+t,type:"POST",success:function(){e.setState({scriptIsHidden:t,operationBeingProcessed:!1}),e.props.onScriptHiddenStateChange(t)},error:function(e,t,a){alert("Sorry, an error occurred. Please reload the page.")}})},t.prototype.handleToggleScriptIsLanguageTemplate=function(){var e=this,t=!this.state.scriptIsLanguageTemplate;$.ajax({type:"POST",url:this.props.toggleScriptLanguageTemplateUrl,data:{isTemplate:t},success:function(){e.setState({scriptIsLanguageTemplate:t}),e.props.onScriptLanguageTemplateChange(t)}})},t.prototype.handleRerunScript=function(){$.ajax({url:this.props.rerunScriptUrl,type:"POST",success:function(e){console.log("Script re-queued.")}})},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"script-options-pane"},React.createElement(i,{toggleHideScript:function(){return e.handleToggleScriptIsHidden()},scriptIsHidden:this.state.scriptIsHidden,operationBeingProcessed:this.state.operationBeingProcessed}),this.props.showAdmin?React.createElement(r,{rerunScript:function(){return e.handleRerunScript()},scriptIsLanguageTemplate:this.props.scriptIsInitiallyLanguageTemplate,toggleScriptIsLanguageTemplate:function(){return e.handleToggleScriptIsLanguageTemplate()}}):null)},t}(React.Component);t.ScriptOptionsPaneContainer=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(29),r=a(28),o=a(158),l=a(23),c=a(169),p=a(4),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this,t=React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopLargeMin},React.createElement("div",{className:"pageheader__thumbnail-script-overlay"},React.createElement("div",{className:"pageheader__overlay-text"},this.props.parentName))),a=React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.desktopLargeMin},React.createElement("div",{className:"pageheader__author-script-overlay"},React.createElement("div",{className:"pageheader__overlay-text"},this.props.userName))),n=null,u=!1;return this.props.forkParentUrl&&""!==this.props.forkParentUrl&&(n=React.createElement(o.PageHeaderForkInfo,s({},this.props)),u=!0),React.createElement("div",{className:"kernel-header"},React.createElement(o.PageHeader,{backgroundClass:"kernel-header__container"},React.createElement(o.PageHeaderTopRowSafe,null,React.createElement("div",{className:"kernel-header__top"},React.createElement("a",{className:"kernel-header__title",href:this.props.titleUrl},this.props.title),React.createElement("div",{className:"kernel-header__fork-info"},n),React.createElement("div",{className:"kernel-header__thumbnails"},React.createElement(o.PageHeaderThumbnail,{classNameElement:"author",classNameModifier:"script",thumbnailOverlay:a,targetUrl:this.props.userUrl,imageUrl:this.props.userAvatarImageUrl}),React.createElement(o.PageHeaderThumbnail,{classNameElement:"thumbnail",classNameModifier:"script",thumbnailOverlay:t,targetUrl:this.props.parentUrl,imageUrl:this.props.thumbnailImageUrl})),React.createElement("div",{className:"kernel-header__upvote"},React.createElement(l.VoteButton,s({},this.props.voteButton))),React.createElement("div",{className:p("kernel-header__info",{"kernel-header__info--forked":u})},React.createElement(o.PageHeaderUserNameAndRunTime,{runTimeVerb:"run",userName:this.props.userName,userUrl:this.props.userUrl,dateUpdated:this.props.dateUpdated,showDateUpdated:!0,showUserName:!0}),React.createElement("span",null," · ",this.props.scriptLanguage,this.props.isPrivate?null:React.createElement("span",null," · ",this.props.totalViews," views")),this.props.datasetHidden||!this.props.parentUrl?React.createElement("span",null,React.createElement("br",null)," using data from ",this.props.parentName):React.createElement("span",null,React.createElement("br",null)," using data from ",React.createElement("a",{href:this.props.parentUrl},this.props.parentName))," · ",React.createElement("span",null,React.createElement(c.PrivacyToggle,{kernelType:"Script",displayMode:"Link",scriptId:this.props.scriptId,isPrivate:this.props.isPrivate,disabled:!this.props.userCanEditScript}))))),React.createElement(o.PageHeaderBottomRow,{pageMessages:this.props.pageMessages},React.createElement(r.OverflowX,null,React.createElement(o.PageHeaderNav,{classNameModifier:"script",menuLinks:this.props.menuLinks,rightMenuLinks:this.props.rightMenuLinks,activeTab:this.props.activeTab,changeActiveTab:function(t){return e.props.onActiveTabChange(t)}}),this.props.callToAction?React.createElement(i.MediaQuery,{minWidth:i.Breakpoints.tabletMin},React.createElement("a",{href:this.props.callToAction.href,title:this.props.callToAction.title,className:"pageheader__calltoaction",onClick:function(t){return e.props.callToAction.actionCallback?e.props.callToAction.actionCallback(t):""}},this.props.callToAction.text)):""))))},t}(React.Component);t.KernelHeader=u},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=a(170),r=[{label:"Private",value:"private"},{label:"Public",value:"public"}],o=function(e){function t(t){var a=e.call(this,t)||this;return a.onPrivacyChange=function(e){"public"===e&&a.showModal()},a.onLinkClick=function(){a.showModal()},a.onConfirm=function(){a.setState({isConfirmShown:!1,isPrivate:!1}),a.props.onChangeToPublic()},a.onCancel=function(){a.setState({isConfirmShown:!1})},a.renderOption=function(e){return"private"===e.value?React.createElement("span",null,React.createElement("i",{className:"fa fa-eye-slash"})," Private"):React.createElement("span",null,React.createElement("i",{className:"fa fa-eye"})," Public")},a.state={isConfirmShown:!1,isPrivate:a.props.isPrivate},a}return n(t,e),t.prototype.showModal=function(){this.setState({isConfirmShown:!0})},t.prototype.renderToggle=function(){return"SelectBox"===this.props.displayMode?React.createElement(s.SelectBox,{className:"privacy-toggle__privacy-select--select-box",options:r,onChange:this.onPrivacyChange,optionRenderer:this.renderOption,valueRenderer:this.renderOption,searchable:!1,value:"private",disabled:this.props.disabled}):React.createElement("span",{className:"privacy-toggle__privacy-select--link"},React.createElement("i",{className:"fa fa-eye-slash"})," Private",!this.props.disabled&&React.createElement("span",{className:"privacy-toggle__make-public-link",onClick:this.onLinkClick},"Make Public"))},t.prototype.render=function(){return React.createElement("div",{className:"privacy-toggle"},React.createElement("div",null,this.state.isPrivate?this.renderToggle():React.createElement("span",{className:"privacy-toggle__public-indicator"},this.renderOption(r[1]))),React.createElement(i.PrivacyModal,{onConfirm:this.onConfirm,onCancel:this.onCancel,isShown:this.state.isConfirmShown,kernelType:this.props.kernelType,scriptId:this.props.scriptId}))},t}(React.Component);t.PrivacyToggle=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onConfirm=function(){$.post("/kernels/"+t.props.scriptId+"/make-public").then(function(){s.PageMessages.success("Your "+t.props.kernelType+" is now public.",{clear:!0}),t.setState({isShown:!1})}).then(t.props.onConfirm)},t}return n(t,e),t.prototype.render=function(){return React.createElement(s.Confirm,{title:"Make "+this.props.kernelType+" Public",cancelText:"No thanks",confirmText:"Ok, make public",onCancel:this.props.onCancel,onConfirm:this.onConfirm,isShown:this.props.isShown},"Enabling this will allow other users to view and fork your ",this.props.kernelType,". Your code will be released under the ",React.createElement("a",{href:"http://www.apache.org/licenses/LICENSE-2.0",target:"_blank",rel:"nofollow"},"Apache 2.0")," open source license. Please note that this is not reversible.")},t}(React.Component);t.PrivacyModal=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(3),r=a(172),o=a(6),l=a(176),c=function(e){function t(t){var a=e.call(this,t)||this;a.oldFileDescriptions=[],a.endsWidth=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},a.validationRules=[{isValid:function(){return 0==(a.state.isEditingNewVersion?a.state.newVersionFiles:a.state.files).filter(function(e){return a.endsWidth(e.name,".xlsx")||a.endsWidth(e.name,".xls")||a.endsWidth(e.name,".xlsx.zip")||a.endsWidth(e.name,".xls.zip")}).length},id:"dataset-excel-files",htmlMessage:function(){return"You have uploaded one or more Excel files. It's highly recommended that you <a href='https://support.office.com/en-us/article/Import-or-export-text-txt-or-csv-files-5250ac4c-663c-47ce-937b-339e391393ba#bmexport' target='_blank'>save these as .csv files</a>, as these are much easier to work with."},isWarning:!0,alwaysValidate:!0},{isValid:function(){return!a.validationRules.filter(function(e){return"dataset-excel-files"==e.id})[0].isValid()||0==(a.state.isEditingNewVersion?a.state.newVersionFiles:a.state.files).length||0!=(a.state.isEditingNewVersion?a.state.newVersionFiles:a.state.files).filter(function(e){return a.endsWidth(e.name.toLowerCase(),".csv")||a.endsWidth(e.name.toLowerCase(),".csv.zip")||"database.sqlite"==e.name.toLowerCase()}).length},id:"dataset-no-csv-or-sqlite-files",htmlMessage:function(){return"It looks like you're missing a .csv or database.sqlite file. If this is not an image dataset, we recommend that you include either a database.sqlite file, or one or more .csv files, as these are easiest to work with."},isWarning:!0,alwaysValidate:!0},{isValid:function(){return!a.state.originalImageUrl||0==a.state.originalImageUrl.length||!a.state.coverImageUrl||0==a.state.coverImageUrl.length||-1==a.state.originalImageUrl.indexOf("default-backgrounds")},id:"dataset-default-image",htmlMessage:function(){return"Choosing a topical image other than one of the generated random images may help your dataset stand out more."},isWarning:!0,alwaysValidate:!0},{isValid:function(){return!a.state.isEditingNewVersion||a.state.newVersionFiles.length-a.props.maxTopLevelFilesAllowed<=0},id:"dataset-too-many-files",message:function(){return"You cannot upload more than "+a.props.maxTopLevelFilesAllowed+" files. You will need to delete at least "+(a.state.newVersionFiles.length-a.props.maxTopLevelFilesAllowed)+" "+i("file",a.state.newVersionFiles.length-a.props.maxTopLevelFilesAllowed)+" before you can save your new version."},alwaysValidate:!0},{isValid:function(){return!a.state.isEditingNewVersion||0==a.state.newVersionFiles.filter(function(e){return 0==e.totalBytes}).length},id:"dataset-zero-byte-files",message:function(){return"You cannot upload empty files. Please remove them from your list before saving."},alwaysValidate:!0},{isValid:function(){return a.state.title&&a.state.title.trim().length>0},id:"dataset-no-title",message:function(){return"Please enter a title for your dataset."}},{isValid:function(){return!a.state.title||0==a.state.title.trim().length||a.state.title.trim().length>6&&a.state.title.trim().length<50},id:"dataset-title-length",message:function(){return"The title must be between 6 and 50 characters in length."},alwaysValidate:!0},{isValid:function(){return!(!a.state.overview||!a.state.overview.trim())},id:"dataset-no-overview",message:function(){return"Please enter a subtitle for your dataset."}},{isValid:function(){return!(a.state.overview&&(a.state.overview.trim().length<20||a.state.overview.trim().length>80))},id:"dataset-overview-length",message:function(){return"The subtitle must be between 20 and 80 characters in length."},alwaysValidate:!0},{isValid:function(){return!(a.state.slug&&(a.state.slug.trim().length<3||a.state.slug.trim().length>50))},id:"dataset-slug-length",message:function(){return"The URL must be between 3 and 50 characters."}},{isValid:function(){return a.state.coverImageUrl&&a.state.coverImageUrl&&a.state.coverImageUrl.trim().length>0},id:"dataset-no-image",htmlMessage:function(){return"Please click the <span class='fa fa-camera'></span> to the right to set up an image for your dataset. If you need inspiration, <a href='http://www.unsplash.com' target='_blank'>unsplash.com</a> has a great library of public domain images."}},{isValid:function(){return!(!a.state.description||!a.state.description.trim())},id:"dataset-no-description",message:function(){return"Please enter a description for your dataset."}},{isValid:function(){return!(a.state.description&&a.state.description.trim().length>2e4)},id:"dataset-description-length",message:function(){return"Your description must be fewer than 20,000 characters."}},{isValid:function(){return!(!a.state.licenseId&&!a.state.privateGroupId)},id:"dataset-no-license",message:function(){return"Please select a license for your dataset."}},{isValid:function(){return!a.state.isEditingNewVersion||!(a.state.newVersionDescription&&a.state.newVersionDescription.trim().length>2e4)},id:"dataset-version-description-length",message:function(){return"Your version notes must be fewer than 20,000 characters."}},{isValid:function(){return!a.state.isEditingNewVersion||!(!a.state.newVersionDescription||!a.state.newVersionDescription.trim())},id:"dataset-no-version-description",message:function(){return"Please enter a description for this version."}},{isValid:function(){return!a.state.isEditingNewVersion||a.state.newVersionFiles.length>0},id:"dataset-no-version-files",message:function(){return"You must upload at least one file for this version."}},{isValid:function(){return!a.state.isEditingNewVersion||0==a.state.newVersionFiles.filter(function(e){return!e.description}).length},id:"dataset-new-version-files-with-no-description",message:function(){return"Please make sure all of your files have descriptions."}},{isValid:function(){return 0==a.state.files.filter(function(e){return e.description&&e.description.trim().length>2e4}).length},id:"dataset-files-description-lengths",message:function(){return"Your file descriptions must be fewer than 20,000 characters."}},{isValid:function(){return 0==a.state.files.filter(function(e){return!e.description&&!e.isSqliteTable}).length},id:"dataset-files-with-no-description",message:function(){return"Please make sure all of your files have descriptions."}},{isValid:function(){return 0==a.state.datasetVersions.filter(function(e){return!e.versionNotes}).length},id:"dataset-versions-with-no-description",message:function(){return"Please make sure all of your versions have descriptions."}}],a.processingNewDatasetPageMessage=function(){return{type:"info",htmlMessage:"We're processing "+(a.props.creatorUserId==o.Current.userId?"your":"the")+" dataset files. Once we're done, "+(a.props.creatorUserId==o.Current.userId?"your":"the")+" dataset will be available publicly."}},a.processingNewVersionPageMessage=function(){return{type:"info",htmlMessage:a.props.canEdit?"We're processing "+(a.props.creatorUserId==o.Current.userId?"your":"the")+" dataset files. Until they're complete, users will continue to run kernels against the current version's files.":"A new version of this dataset is in progress. Until it completes, new kernels will be run against the current version."}},a.onChangeTab=function(e){if("contributors"==e){var t={};t[e+"IsLoading"]=!0,a.setState(t),s.ajax({url:a.props.datasetUrl+"/"+e+".json",type:"GET",success:function(n){t[e]=n,t[e+"IsLoading"]=!1,a.setState(t)}})}a.setState({currentTab:e,isNewTopic:!1,topicId:null},function(){return a.updateUrl()})},a.isDescriptionValid=function(e){return e.length>0&&e.length<100},a.onDatasetPropChanged=function(e,t){var n={};"title"!=e||!a.state.isNewDataset||a.state.slug!=a.convertToSlug(a.state.title)&&(a.state.slug||a.state.title)||(n.slug=a.convertToSlug(t)),n[e]=t,a.setState(n,function(){return a.clearFixedValidations()})},a.onPrivateGroupChanged=function(e){a.setState({privateGroupId:e})},a.onLicenseChanged=function(e,t){a.setState({license:t,licenseId:e,isEditingLicense:!a.state.isNewDataset},function(){a.clearFixedValidations()})},a.onDatasetFilePropChanged=function(e,t,n,i){var r=s.extend(!0,[],i==l.FileListIndex.NewFiles?a.state.newVersionFiles:a.state.files);r[e][t]=n,a.setState(i==l.FileListIndex.NewFiles?{newVersionFiles:r}:{files:r},function(){return a.clearFixedValidations()})},a.onDatasetVersionPropChanged=function(e,t,n){var i=s.extend(!0,[],a.state.datasetVersions);i[e][t]=n,a.setState({datasetVersions:i},function(){return a.clearFixedValidations()})},a.onPublishedChange=function(e){a.setState({isPublished:e,isFeatured:e&&a.state.isFeatured})},a.onFeaturedChange=function(e){a.setState({isPublished:e||a.state.isPublished,isFeatured:e})},a.onRemovedChange=function(e){a.setState({isRemoved:e})},a.onDatasetEditingStateCancelled=function(e,t){var n={},i={};n["isEditing"+e]=!1,i[t]=a.state.lastSavedState[t],"Slug"==e&&(i.isFeatured=a.state.lastSavedState.isFeatured,i.isPublished=a.state.lastSavedState.isPublished,i.isRemoved=a.state.lastSavedState.isRemoved,i.privateGroupId=a.state.lastSavedState.privateGroupId),"License"==e&&(i.licenseId=a.state.lastSavedState.licenseId),a.setState(s.extend({},n,i),function(){return a.clearFixedValidations()})},a.onDatasetEditingStateChanged=function(e){if("NewVersion"==e){if(a.state.isEditingNewVersion)return void a.onSaveNewVersion();a.setState({showNewVersionProgress:!1,newVersionFiles:[],newVersionDescription:""})}var t=a.state["isEditing"+e],n={};if(n["isEditing"+e]=!t,"Slug"==e&&t&&(n.slug=a.cleanseSlug(a.state.slug)),!t||a.state.isNewDataset)return a.setState(n),t&&a.state.isNewDataset&&a.setState({lastSavedState:a.state}),void("Files"===e&&(a.oldFileDescriptions=a.state.files.map(function(e){return{name:e.name,description:e.description}})));if(t&&"Files"===e)return a.setState({isEditingFiles:!1}),void a.state.files.forEach(function(e){var t=a.oldFileDescriptions.filter(function(t){return t.name===e.name})[0];if(t&&t.description!==e.description){var n={fileName:e.name,description:e.description},i=a.props.datasetUrl+(a.props.isOldDatasetVersion?"/version/"+a.props.datasetVersionNumber:"")+"/datadictionary.json";s.ajax({url:i,type:"PATCH",processData:!1,contentType:"application/json",dataType:"text",data:JSON.stringify(n),success:function(e){if(e){var t=s.extend(!0,[],a.state.pageMessages);t.push({type:"error",message:"Your description could not be saved: "+e}),a.setState(s.extend({},a.state,{pageMessages:t}))}},error:function(){var e=s.extend(!0,[],a.state.pageMessages);e.push({type:"error",message:"Sorry, there was a problem saving your update."}),a.setState(s.extend({},a.state,{pageMessages:e}))}})}});if(t&&"Description"===e){a.setState({isEditingDescription:!1});var i={description:a.state.description};return void s.ajax({url:a.props.datasetUrl+"/description.json",type:"POST",processData:!1,contentType:"application/json",dataType:"json",data:JSON.stringify(i)})}a.setState(s.extend(a.state,{pageMessages:new Array}),function(){var i=a.getValidationPageMessages(),r=i.filter(function(e){return"error"==e.type}).length>0;a.setState({pageMessages:i},function(){r||a.setState(n,function(){s.ajax({url:a.state.datasetUrl+"/save",type:"POST",contentType:"application/json",data:JSON.stringify(a.state,function(e,t){return"lastSavedState"!=e?t:void 0}),success:function(n){a.setState({lastSavedState:a.state}),n.datasetUrl&&"Slug"==e&&history.replaceState({},null,n.datasetUrl),n.datasetUrl&&"HeaderInfo"==e&&(document.title=a.state.title+" | Kaggle"),a.setState({pageMessages:n.pageMessages},function(){if(!n.success){var s={};s["isEditing"+e]=t,a.setState(s)}})},error:function(e){a.setState({pageMessages:[{type:"error",htmlMessage:'There was a problem saving your dataset changes. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'}],isSavingNewVersion:!1})}})})})})},a.onCancelImageUploader=function(){s("body").css({overflow:"visible"}),s("html").css("overflow","visible"),a.setState(s.extend({},a.state,{isEditingImages:!1}))},a.onShowImageUploader=function(){a.setState(s.extend({},a.state,{isEditingImages:!0}))},a.onUpdateImages=function(e,t,n){e.append("datasetId",a.props.datasetId);var i=t[0];e.append("coverImageLeft",i.left),e.append("coverImageTop",i.top),e.append("coverImageWidth",i.width),e.append("coverImageHeight",i.height);var r=t[1];return e.append("cardImageLeft",r.left),e.append("cardImageTop",r.top),e.append("cardImageWidth",r.width),e.append("cardImageHeight",r.height),e.append("originalImageUrl",a.state.originalImageUrl),s.ajax({url:"/datasets/save/image",type:"POST",dataType:"json",contentType:!1,processData:!1,data:e,success:function(e){if(e.success){var t=e.datasetImageUploadDto,o={coverImageUrl:t.coverImageUrl,cardImageUrl:t.cardImageUrl,thumbnailImageUrl:t.thumbnailImageUrl,originalImageUrl:t.originalImageUrl,coverImageWidth:i.width,coverImageHeight:i.height,coverImageLeft:i.left,coverImageTop:i.top,cardImageWidth:r.width,cardImageHeight:r.height,cardImageLeft:r.left,cardImageTop:r.top};s("body").css({overflow:"visible"}),s("html").css("overflow","visible"),a.setState(s.extend({},a.state,o,{isEditingImages:!1}),function(){a.clearFixedValidations(function(){var e=s.extend(!0,[],a.state.pageMessages);e.push({type:"success",message:"Your images have been updated."}),a.setState(s.extend({},a.state,{pageMessages:e}))})})}else n()}})},a.onFileUploadFinished=function(e,t,n){var s=a.state.files.filter(function(t){return t.name==e});0==s.length&&(s=a.state.files.filter(function(t){return t.name==e.replace(".zip","")})),0==s.length&&(s=a.state.files.filter(function(t){return t.name.replace(/\.[^\/.]+$/,"")==e.replace(".zip","")}));var i="";1==s.length&&(i=s[0].description),a.setState({newVersionFiles:a.state.newVersionFiles.concat({id:0,name:e,totalBytes:n,description:i,blobToken:t}).sort(function(e,t){return e.name.localeCompare(t.name)})},function(){return a.clearFixedValidations()})},a.onToggleCurrentVersionFiles=function(){a.setState(s.extend({},a.state,{showCurrentVersionFiles:!a.state.showCurrentVersionFiles}))},a.onDeleteNewVersionFile=function(e){a.setState({newVersionFiles:a.state.newVersionFiles.filter(function(t){return t.name!=e}).sort(function(e,t){return e.name.localeCompare(t.name)})},function(){return a.clearFixedValidations()})},a.getNewFileDataDictionaries=function(){var e=[];return a.state.newFileColumnDescriptions&&a.state.newFileColumnDescriptions.length>0&&a.state.newFileColumnDescriptions.forEach(function(t){var a={fileName:t.fileName,columns:t.columns.map(function(e,t){return{columnIndex:t,dataType:e.harmonizedDataType,description:e.description}})};e.push(a)}),e},a.onSaveNewVersion=function(){a.setState({pageMessages:[]},function(){var e=a.getValidationPageMessages(),t=e.filter(function(e){return"error"==e.type}).length>0;a.setState({pageMessages:e},function(){t||a.setState({pageMessages:[a.processingNewVersionPageMessage()]},function(){a.setState({isSavingNewVersion:!0,currentStatusPercentComplete:0,newDatasetVersionStatus:"notYetPersisted",downloadSize:0,needsNewVersionMetadata:!0,isEditingNewVersion:!1,canEdit:!1}),s.ajax({url:a.state.datasetUrl+"/save/version",type:"POST",contentType:"application/json",data:JSON.stringify({newVersionFiles:a.state.newVersionFiles,dataDictionaries:a.getNewFileDataDictionaries(),blobFileTokens:a.state.newVersionFiles.map(function(e){return e.blobToken}),newVersionDescription:a.state.newVersionDescription,isPublished:a.state.isPublished}),success:function(e){!e.success&&e.pageMessages&&(clearInterval(a.timer),a.setState({pageMessages:e.pageMessages},function(){a.setState({canEdit:a.props.canEdit,isEditingNewVersion:!0,isSavingNewVersion:!1})}))}}),a.timer=window.setInterval(a.pollCurrentDatasetVersionStatus,1e3)})})})},a.onSaveNewDataset=function(){a.setState({pageMessages:[]},function(){var e=a.getValidationPageMessages(),t=e.filter(function(e){return"error"==e.type}).length>0;e.length&&s.ajax({url:"/datasets/log-validation",type:"POST",contentType:"application/json",data:JSON.stringify({datasetName:a.state.title,validations:e.map(function(e){return e.id.substring(8)})})}),a.setState({pageMessages:e},function(){t||(goog_report_conversion(),a.setState({pageMessages:[a.processingNewDatasetPageMessage()]},function(){a.setState({isSavingNewVersion:!0,currentStatusPercentComplete:0,newDatasetVersionStatus:"notYetPersisted",needsNewVersionMetadata:!0,isEditingNewVersion:!1}),s.ajax({url:"/datasets/save",type:"POST",contentType:"application/json",data:JSON.stringify(s.extend({},a.state,{newVersionFiles:a.state.newVersionFiles,blobFileTokens:a.state.newVersionFiles.map(function(e){return e.blobToken}),newVersionDescription:a.state.newVersionDescription}),function(e,t){return"lastSavedState"!=e?t:void 0}),success:function(e){e.success?a.setState({datasetId:e.datasetId,
datasetVersionId:e.datasetVersionId,isEditingSlug:!1,isEditingHeader:!1,isEditingDescription:!1,isEditingFiles:!1,isEditingLicense:!1,isEditingImages:!1,isEditingHeaderInfo:!1,isEditingVersions:!1,canEdit:!0,isNewDataset:!1,datasetVersions:e.datasetVersions,newScriptUrl:e.newScriptUrl,datasetUrl:e.url},function(){history.replaceState({},null,e.url),document.title=a.state.title+" | Kaggle",s.ajax({url:a.state.datasetUrl+"/save/version",type:"POST",contentType:"application/json",data:JSON.stringify({newVersionFiles:a.state.newVersionFiles,dataDictionaries:a.getNewFileDataDictionaries(),blobFileTokens:a.state.newVersionFiles.map(function(e){return e.blobToken}),newVersionDescription:a.state.newVersionDescription,isPublished:a.state.isPublished}),success:function(e){!e.success&&e.pageMessages&&(clearInterval(a.timer),a.setState({pageMessages:e.pageMessages},function(){a.setState({canEdit:a.props.canEdit,isEditingNewVersion:!0,isSavingNewVersion:!1})}))},error:function(){a.setState({pageMessages:[{type:"error",htmlMessage:'There was a problem saving your dataset changes. If you keep having problems, please <a href="mailto:support@kaggle.com">contact support</a> and we\'ll get you squared away.'}]},function(){clearInterval(a.timer),a.setState({canEdit:a.props.canEdit,isEditingNewVersion:!0,isSavingNewVersion:!1})})}}),a.timer=window.setInterval(a.pollCurrentDatasetVersionStatus,1e3)}):a.setState({pageMessages:e.pageMessages},function(){a.setState({canEdit:a.props.canEdit,isEditingNewVersion:!0,isSavingNewVersion:!1})})},error:function(){a.setState({pageMessages:[{type:"error",htmlMessage:'There was a problem saving your dataset changes. If you keep having problems, please <a href="mailto:support@kaggle.com">contact support</a> and we\'ll get you squared away.'}]},function(){a.setState({canEdit:a.props.canEdit,isEditingNewVersion:!0,isSavingNewVersion:!1})})}})}))})})},a.pollCurrentDatasetVersionStatus=function(){s.ajax({url:a.state.datasetUrl+"/poll",type:"POST",data:{datasetId:a.state.datasetId,needsMetadata:a.state.needsNewVersionMetadata},success:function(e){return"ready"==e.status||"failed"==e.status?(clearInterval(a.timer),void a.setState({pageMessages:e.pageMessages},function(){a.setState({newDatasetVersionStatus:e.status,currentStatusPercentComplete:e.currentStatusPercentComplete,isSavingNewVersion:!1,canEdit:a.props.canEdit,showNewVersionProgress:"ready"==e.status,files:e.dataset?e.dataset.files:a.state.files,datasetVersions:e.dataset?e.dataset.datasetVersions:a.state.datasetVersions.map(function(e,t){return 0==t&&(e.status="failed"),e}),downloadSize:e.dataset?e.dataset.downloadSize:a.state.downloadSize}),a.setState({lastSavedState:a.state})})):void a.setState(s.extend({newDatasetVersionStatus:e.status,currentStatusPercentComplete:e.currentStatusPercentComplete},a.state.needsNewVersionMetadata&&e.datasetVersions&&e.files?{needsNewVersionMetadata:!1,files:e.files,datasetVersions:e.datasetVersions,datasetVersionId:e.datasetVersions.id,newVersionFiles:[],showCurrentVersionFiles:!1}:{}))}})},a.updateExistingFileMetadata=function(e,t,n){var i={fileName:e,columns:[{fileName:e,columnIndex:t,description:n.description,dataType:n.harmonizedDataType}]},r=a.props.datasetUrl+(a.props.isOldDatasetVersion?"/version/"+a.props.datasetVersionNumber:"")+"/datadictionary.json";s.ajax({url:r,type:"PATCH",processData:!1,contentType:"application/json",dataType:"text",data:JSON.stringify(i),success:function(e){if(e){var t=s.extend(!0,[],a.state.pageMessages);t.push({type:"error",message:"Your description could not be saved: "+e}),a.setState(s.extend({},a.state,{pageMessages:t}))}},error:function(){var e=s.extend(!0,[],a.state.pageMessages);e.push({type:"error",message:"Sorry, there was a problem saving your update."}),a.setState(s.extend({},a.state,{pageMessages:e}))}})},a.updateNewFileColumnDescriptions=function(e,t,n){var s=a.state.newFileColumnDescriptions.filter(function(t){return t.fileName!==e}),i=a.state.newFileColumnDescriptions.filter(function(t){return t.fileName===e})[0];if(i)i.columns[t]=n;else{var r=[];r[t]=n,i={fileName:e,columns:r}}s.push(i),a.setState({newFileColumnDescriptions:s})};var n=s.extend({},a.props,{isEditingHeader:a.props.isNewDataset,isEditingDescription:a.props.isNewDataset,isEditingFiles:a.props.isNewDataset,isEditingLicense:a.props.isNewDataset,isEditingImages:!1,isEditingHeaderInfo:a.props.isNewDataset,isEditingVersions:!1,isEditingNewVersion:a.props.isNewDataset,isEditingSlug:a.props.isNewDataset,newVersionFiles:[],needsNewVersionMetadata:!1,newVersionDescription:a.props.isNewDataset?"Initial release":null,hasLoadedFeed:"feed"==a.props.currentTab,newFileColumnDescriptions:[]});return n.lastSavedState=n,a.state=n,a.props.isSavingNewVersion&&(a.timer=window.setInterval(a.pollCurrentDatasetVersionStatus,1e3)),window.onbeforeunload=function(){return!a.state.isNewDataset&&(a.state.isEditingDescription||a.state.isEditingFiles||a.state.isEditingNewVersion||a.state.isEditingHeader||a.state.isEditingHeaderInfo||a.state.isEditingImages||a.state.isEditingLicense||a.state.isEditingSlug||a.state.isEditingVersions)?"It looks like you may be in the middle of working on some changes.":a.state.isNewDataset&&(a.state.title||a.state.overview||a.state.originalImageUrl||a.state.slug||a.state.description||a.state.licenseId||a.state.newVersionFiles.length)?"It looks like you may have started working on your new dataset.":void 0},a}return n(t,e),t.prototype.componentWillMount=function(){var e=s.extend(!0,[],this.state.pageMessages);if(this.props.isOldDatasetVersion){var t={type:"info",htmlMessage:"You are currently viewing Version "+this.props.datasetVersionNumber+" of "+this.props.lastVersionNumber+" of this dataset. "+('<a href="'+this.props.datasetUrl+'">View the latest version</a> to create kernels.')};e.push(t)}if(this.props.isNewDataset||"failed"!=this.props.datasetVersions[0].status){if((!this.props.isPublished||this.props.isRemoved)&&!this.props.isNewDataset&&!this.props.isSavingNewVersion){var t={type:"info",htmlMessage:"This dataset is currently not published and currently unavailable. You're able to see it as "+(this.props.creatorUserId==o.Current.userId?"the creator":"a site admin")+"."};e.push(t)}}else if(this.props.datasetVersions.filter(function(e){return"ready"==e.status}).length){var t={type:"info",htmlMessage:"The most recent version failed during processing, so any new kernels will be run against the last successful version."};e.push(t)}else{var t={type:"error",htmlMessage:'There was a problem saving your dataset files. If you keep having problems, please <a href="mailto:support@kaggle.com">contact support</a> and we\'ll get you squared away.'};e.push(t)}this.props.canEdit&&!this.props.isNewDataset&&this.getValidationPageMessages().forEach(function(t){return e.push(t)}),this.props.isSavingNewVersion&&e.push(1==this.props.datasetVersions.length?this.processingNewDatasetPageMessage():this.processingNewVersionPageMessage()),this.setState({pageMessages:e})},t.prototype.updateUrl=function(){history.replaceState({},null,this.props.datasetUrl+("home"!=this.state.currentTab?"/"+this.state.currentTab:"")+(null!=this.state.topicId&&"discussion"==this.state.currentTab?"/"+this.state.topicId:this.state.isNewTopic&&"discussion"==this.state.currentTab?"/new":""))},t.prototype.onCreateTopic=function(){var e=this;o.Current.isAdmin?this.setState({currentTab:"discussion",isNewTopic:!0,topicId:null},function(){return e.updateUrl()}):window.location.href=this.props.newTopicUrl},t.prototype.onTopicSubmitted=function(e){var t=this;this.setState({currentTab:"discussion",isNewTopic:!1,topicId:e},function(){return t.updateUrl()})},t.prototype.convertToSlug=function(e){return e?e.toLowerCase().trim().replace(/[^\w ]+/g,"").replace(/[_ ]+/g,"-"):null},t.prototype.cleanseSlug=function(e){return e.replace(/^-*([^.]*?)-*$/,"$1").replace(/-{2,}/g,"-")},t.prototype.onTopicClicked=function(e){var t=this;this.setState({currentTab:"discussion",isNewTopic:!1,topicId:e.id},function(){return t.updateUrl()})},t.prototype.componentDidMount=function(){-1!==window.location.hash.indexOf("#latest-")&&history.replaceState({},document.title,window.location.pathname+window.location.search)},t.prototype.componentWillUpdate=function(e,t,a){if(t.pageMessages.length!=this.state.pageMessages.length){var n=s("html").offset().top,i=s(document).height();this.scrollPositionFromBottom=i+n}},t.prototype.componentDidUpdate=function(e,t,a){if(t.pageMessages.length!=this.state.pageMessages.length){var n=s("html").offset().top;if(0==n)return;var i=s(document).height(),r=i-this.scrollPositionFromBottom;s("html, body").scrollTop(r)}},t.prototype.clearFixedValidations=function(e){this.setState({pageMessages:this.getValidationPageMessages(!0)},e)},t.prototype.getValidationPageMessages=function(e){var t=this,a=this.validationRules.filter(function(a){return!a.isValid()&&(!e||a.alwaysValidate||t.state.pageMessages.filter(function(e){return e.id==a.id}).length>0)});return a.map(function(e){return{type:e.isWarning?"warning":"error",id:e.id,message:e.message?e.message():null,htmlMessage:e.htmlMessage?e.htmlMessage():null}})},t.prototype.render=function(){var e={onDatasetPropChanged:this.onDatasetPropChanged,onDatasetFilePropChanged:this.onDatasetFilePropChanged,onDatasetVersionPropChanged:this.onDatasetVersionPropChanged,onDatasetEditingStateCancelled:this.onDatasetEditingStateCancelled,onDatasetEditingStateChanged:this.onDatasetEditingStateChanged,onLicenseChanged:this.onLicenseChanged,onCancelImageUploader:this.onCancelImageUploader,onCreateTopic:this.onCreateTopic.bind(this),onUpdateImages:this.onUpdateImages,onFileUploadFinished:this.onFileUploadFinished,onToggleCurrentVersionFiles:this.onToggleCurrentVersionFiles,onSaveNewVersion:this.onSaveNewVersion,onDeleteNewVersionFile:this.onDeleteNewVersionFile,onSaveNewDataset:this.onSaveNewDataset,onPublishedChange:this.onPublishedChange,onFeaturedChange:this.onFeaturedChange,onRemovedChange:this.onRemovedChange,onShowImageUploader:this.onShowImageUploader,onChangeTab:this.onChangeTab,onPrivateGroupChanged:this.onPrivateGroupChanged,onTopicClicked:this.onTopicClicked.bind(this),onTopicSubmitted:this.onTopicSubmitted.bind(this),onExistingFileMetadataChange:this.updateExistingFileMetadata,onNewFileMetadataChange:this.updateNewFileColumnDescriptions};return React.createElement(r.Dataset,s.extend({},this.state,e))},t}(React.Component);t.DatasetContainer=c},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(173),r=a(176),o=a(185),l=a(186),c=a(187),p=a(188),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"dataset"},React.createElement("div",{className:"dataset__container"},React.createElement(i.DatasetHeader,s({},this.props)),"home"==this.props.currentTab?React.createElement(r.DatasetHome,s({},this.props)):"contributors"==this.props.currentTab?React.createElement(c.DatasetContributors,s({},this.props)):"",React.createElement(o.DatasetKernels,s({},this.props)),React.createElement(l.DatasetDiscussion,s({},this.props)),React.createElement(p.DatasetActivityFeed,s({},this.props))))},t}(React.Component);t.Dataset=u},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(158),i=a(13),r=a(76),o=a(153),l=a(23),c=a(174),p=a(155),u=a(175),d=a(28),m=a(7),h=a(38),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.trackDownload=function(){window.Intercom("trackEvent","download_dataset",{dataset_id:t.props.datasetId}),goog_report_conversion()},t}return n(t,e),t.prototype.changeActiveTab=function(){},t.prototype.renderTitle=function(){var e=this;return this.props.isEditingHeaderInfo&&this.props.canEdit?React.createElement(o.InlineTextEditor,{className:"dataset-header__title--input",value:this.props.title,placeholder:"Enter a Descriptive Title",onChangeCallback:function(t){return e.props.onDatasetPropChanged("title",t)}}):React.createElement("span",{className:"dataset-header__title"},this.props.title,React.createElement(u.GroupIcon,{groupSize:this.props.privateGroupMemberCount,rightSide:!0}))},t.prototype.renderSubtitle=function(){var e=this;return this.props.isEditingHeaderInfo&&this.props.canEdit?React.createElement(o.InlineTextEditor,{className:"dataset-header__subtitle--input",value:this.props.overview,placeholder:"Include a brief data overview for the subtitle",onChangeCallback:function(t){return e.props.onDatasetPropChanged("overview",t)}}):React.createElement("div",{className:"dataset-header__subtitle"},this.props.overview)},t.prototype.renderOptionalVoteButton=function(){return this.props.isNewDataset?null:React.createElement("div",{className:"dataset-header__upvote"},React.createElement(l.VoteButton,{totalVotes:this.props.voteCount,hasAlreadyVotedUp:this.props.hasAlreadyVotedUp,canUpvote:!0,canDownvote:!1,voteUpUrl:this.props.upVoteUrl,voteDownUrl:null}))},t.prototype.renderOptionalImageUploader=function(){if(this.props.canEdit){var e=React.createElement(c.ImageUploader,{title:"Upload a Dataset Image",imageSettings:[new c.ImageSetting("cover image","Select an area of the image to use as the cover image for this dataset’s homepage",new c.Size(950,200),new c.Rectangle(new c.Point(this.props.coverImageLeft,this.props.coverImageTop),new c.Size(this.props.coverImageWidth,this.props.coverImageHeight))),new c.ImageSetting("thumbnail","Select an area of the image to use as a thumbnail on the overall Dataset listing page",new c.Size(200,200),new c.Rectangle(new c.Point(this.props.cardImageLeft,this.props.cardImageTop),new c.Size(this.props.cardImageWidth,this.props.cardImageHeight)))],originalImageUrl:this.props.originalImageUrl,containerSize:new c.Size(500,300),selectorBorderWidth:1,onCancel:this.props.onCancelImageUploader,onUpdateImages:this.props.onUpdateImages,hiResScale:2,step1Html:"Upload an image by clicking the button below. If you need inspiration, <a href='http://www.unsplash.com' target='_blank'>unsplash.com</a> has a great library of public domain images. Or you can use the random image below."});return React.createElement(p.Modal,{buttonClassName:"dataset-header__upload-image-button",modalContent:e,modalIsShown:this.props.isEditingImages,onShow:this.props.onShowImageUploader,onClose:this.props.onCancelImageUploader})}return null},t.prototype.renderOptionalCallToAction=function(){var e=this;return this.props.isNewDataset||this.props.isOldDatasetVersion?null:"discussion"==this.props.currentTab?React.createElement("a",{href:this.props.newTopicUrl,onClick:function(t){t.preventDefault(),e.props.onCreateTopic()},title:"New Topic",className:"pageheader__calltoaction"},"New Topic"):React.createElement("a",{href:this.props.newScriptUrl,title:"New Script",className:"pageheader__calltoaction"},"New Script")},t.prototype.componentDidMount=function(){window.Intercom("trackEvent","view_dataset")},t.prototype.render=function(){var e=this,t=React.createElement(r.EditStateToggleButton,{className:"dataset-header__edit-info",editButtonText:React.createElement("span",{className:"fa fa-pencil"}),saveButtonText:React.createElement("span",{className:"fa fa-save"}),sectionName:"HeaderInfo",isEditing:this.props.isEditingHeaderInfo,toggleCallback:this.props.onDatasetEditingStateChanged});Math.max(this.props.scripts.length,this.props.discussions.length,this.props.contributors.length,1);return React.createElement("div",{className:"dataset-header"},React.createElement(s.PageHeader,{backgroundClass:"dataset-header__container"},React.createElement(s.PageHeaderTopRowSafe,null,React.createElement("div",{className:"dataset-header__top"},this.props.canEdit&&!this.props.isNewDataset?t:null,this.renderTitle(),this.renderSubtitle(),React.createElement("div",{className:"dataset-header__image"},React.createElement("img",{src:this.props.coverImageUrl})),this.renderOptionalVoteButton(),this.renderOptionalImageUploader(),React.createElement("div",{className:"dataset-header__info"},"by",this.props.isNewDataset&&this.props.owners.length>1?React.createElement(i.SelectBox,{className:"dataset-header__owner-selector KaggleBoxlessSelect",onChange:function(t){var a=e.props.owners.filter(function(e){return e.slug===t})[0];e.props.onDatasetPropChanged("ownerDisplayName",a.name),e.props.onDatasetPropChanged("ownerSlug",a.slug),e.props.onDatasetPropChanged("ownerProfileUrl",a.profileUrl),e.props.onDatasetPropChanged("ownerAvatarUrl",a.imageUrl),e.props.onDatasetPropChanged("organizationId",a.isOrganization?a.id.toString():null)},options:this.props.owners.map(function(e){return{label:e.name,value:e.slug}}),searchable:!1,value:this.props.ownerSlug}):React.createElement("a",{href:this.props.ownerProfileUrl,className:"dataset-header__owner-name"}," "+this.props.ownerDisplayName),this.props.isNewDataset?null:React.createElement("time",{dateTime:this.props.lastUpdated.toString(),title:this.props.lastUpdated.toString()}," · last updated ",React.createElement(m.TimeAgo,{time:this.props.lastUpdated}))))),React.createElement(s.PageHeaderBottomRow,{pageMessages:this.props.pageMessages},React.createElement(s.PageHeaderThumbnail,{classNameElement:"author",targetUrl:this.props.ownerProfileUrl,imageUrl:this.props.ownerAvatarUrl}),React.createElement(s.PageHeaderThumbnail,{classNameElement:"thumbnail",targetUrl:"",imageUrl:this.props.thumbnailImageUrl}),React.createElement(d.OverflowX,null,React.createElement(s.PageHeaderNav,{menuLinks:this.props.isNewDataset?null:[{title:"Overview",text:"Overview",actionCallback:function(){return e.props.onChangeTab("home")}},{title:"Kernels",text:"Kernels",actionCallback:function(){return e.props.onChangeTab("kernels")}},{title:"Discussion",text:"Discussion",actionCallback:function(){return e.props.onChangeTab("discussion")}},{title:"Activity",text:"Activity",actionCallback:function(){return e.props.onChangeTab("feed")}},this.props.downloadSize?{href:this.props.downloadUrl,title:"Download",actionCallback:this.trackDownload,text:"Download ("+h(this.props.downloadSize,{round:0})+")"}:null],rightMenuLinks:this.props.isNewDataset||this.props.isOldDatasetVersion||"discussion"==this.props.currentTab?null:[{href:this.props.newNotebookUrl,title:"New Notebook",text:"New Notebook"}],activeTab:"home"==this.props.currentTab?"Overview":"kernels"==this.props.currentTab?"Kernels":"discussion"==this.props.currentTab?"Discussion":"feed"==this.props.currentTab?"Activity":""}),this.renderOptionalCallToAction()))))},t}(React.Component);t.DatasetHeader=g},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(12),i=a(4),r=function(){function e(e,t){this.size=t,this.point=e,this.left=e.left,this.top=e.top,this.width=t.width,this.height=t.height}return e}();t.Rectangle=r;var o=function(){function e(e,t){this.left=e,this.top=t}return e}();t.Point=o;var l=function(){function e(e,t,a,n){this.title=e,this.information=t,this.size=a,this.rect=n}return e}();t.ImageSetting=l;var c=function(){function e(e,t){var a=this;this.getAspect=function(){return a.width/a.height},this.width=e,this.height=t}return e}();t.Size=c;var p=2,u=function(e){function t(t){var a=e.call(this,t)||this;return a.getHiResScale=function(){return 2},a.onMouseDown=function(e,t){if(0===e.button){ReactDOM.findDOMNode(a).getBoundingClientRect();a.setState($.extend({},a.state,{isDragging:!0,dragMode:t,dragStartMousePosition:new o(e.pageX,e.pageY),dragStartSelectorRect:a.state.selectorRect})),e.stopPropagation(),e.preventDefault()}},a.onMouseUp=function(e){a.setState($.extend({},a.state,{isDragging:!1})),e.stopPropagation(),e.preventDefault()},a.onMouseMove=function(e){if(a.state.isDragging){var t=e.pageX-a.state.dragStartMousePosition.left,n=e.pageY-a.state.dragStartMousePosition.top,s="move"==a.state.dragMode,i="ul"==a.state.dragMode||"ll"==a.state.dragMode,l="ul"==a.state.dragMode||"ur"==a.state.dragMode,p="ur"==a.state.dragMode||"lr"==a.state.dragMode,u="lr"==a.state.dragMode||"ll"==a.state.dragMode;i&&(t=Math.max(-a.state.dragStartSelectorRect.left,t)),l&&(n=Math.max(-a.state.dragStartSelectorRect.top,n));var d=a.state.dragStartSelectorRect.width+(s?0:t)*(i?-1:1),m=a.state.dragStartSelectorRect.height+(s?0:n)*(l?-1:1);p&&(d=Math.min(d,a.state.imageRect.width-a.state.selectorRect.left)),u&&(m=Math.min(m,a.state.imageRect.height-a.state.selectorRect.top));var h=a.state.imageRect.width/a.state.originalSize.width;d=Math.max(Math.round(a.state.selectedImageSize.width*h*a.getHiResScale()),d),m=Math.max(Math.round(a.state.selectedImageSize.height*h*a.getHiResScale()),m);var g=d/m,f=a.state.selectedImageSetting.size,v=f.width/f.height,y=a.state.dragStartSelectorRect.left+(s||i?t:0),_=0,b=a.state.imageRect.width-d,E=a.state.dragStartSelectorRect.top+(s||l?n:0),R=0,w=a.state.imageRect.height-m,C=Math.max(Math.min(y,b),_),S=Math.max(Math.min(E,w),R);i&&C+d>a.state.selectorRect.left+a.state.selectorRect.width&&(C=a.state.selectorRect.left+a.state.selectorRect.width-d),l&&S+m>a.state.selectorRect.top+a.state.selectorRect.height&&(S=a.state.selectorRect.top+a.state.selectorRect.height-m),g>v&&(d=Math.round(m*v),i&&(C=a.state.dragStartSelectorRect.left+a.state.dragStartSelectorRect.width-d)),v>g&&(m=Math.round(d/v),l&&(S=a.state.dragStartSelectorRect.top+a.state.dragStartSelectorRect.height-m));var N=new r(new o(C,S),new c(d,m));a.getScaledRect(a.state.originalSize.width/a.state.imageRect.width,N);a.setState($.extend({},a.state,{selectorRect:N,selectedImageSetting:$.extend(a.state.selectedImageSetting,{rect:N})})),e.stopPropagation(),e.preventDefault()}},a.onFileChange=function(e){if(e.target.files&&e.target.files[0]){a.setState($.extend({},a.state,{imageLoaded:!1,isLoadingImage:!0,tooSmallImageSize:null}));var t=new FileReader;t.onload=function(e){var t=new Image,n=e.target.result;t.src=n,t.onload=function(){return t.width<a.state.minimumImageSize.width||t.height<a.state.minimumImageSize.height?void a.setState($.extend({},{tooSmallImageSize:new c(t.width,t.height),imageLoaded:!0,isLoadingImage:!1})):void a.setState($.extend({},a.state,{imageUrl:n}))}},t.readAsDataURL(e.target.files[0])}},a.onImageLoad=function(e){a.updateImage(e.target.src,e.target.naturalWidth,e.target.naturalHeight)},a.onUpdateImages=function(){a.setState($.extend({},a.state,{uploadInProgress:!0}));var e=$("#uploadForm")[0],t=new FormData(a.state.tooSmallImageSize?null:e),n=Math.min(a.state.originalSize.width/a.state.imageRect.width,a.state.originalSize.height/a.state.imageRect.height),s=a.state.imageSettings.map(function(e){return new r(new o(e.rect.left*n,e.rect.top*n),new c(e.rect.width*n,e.rect.height*n))});a.props.onUpdateImages(t,s,a.handleImageUploadFailed).then(function(){a.setState($.extend({},a.state,{uploadInProgress:!1}))})},a.handleImageUploadFailed=function(){a.setState($.extend({},a.state,{showImageUploadFailed:!0}))},a.setStep=function(e){var t=a.state.imageSettings[e-p]||a.state.imageSettings[0];a.setState($.extend({},{currentStep:e,selectedImageSetting:t,selectorRect:t.rect,selectedImageSize:t.size}))},a.state={imageUrl:a.props.originalImageUrl,imageLoaded:!1,imageRect:new r(new o(0,0),new c(0,0)),selectorRect:new r(new o(0,0),new c(0,0)),imageSettings:a.props.imageSettings,minimumImageSize:a.getMinimumImageSize(),selectedImageSetting:a.props.imageSettings[0],isDragging:!1,selectedImageSize:a.props.imageSettings[0].size,uploadInProgress:!1,isLoadingImage:!1,currentStep:1},a}return n(t,e),t.prototype.getMinimumImageSize=function(){return new c(Math.max.apply(Math,this.props.imageSettings.map(function(e){return e.size.width}))*this.getHiResScale(),Math.max.apply(Math,this.props.imageSettings.map(function(e){return e.size.height}))*this.getHiResScale())},t.prototype.isLastStep=function(){return this.state.currentStep===this.props.imageSettings.length+p},t.prototype.getScaledSize=function(e,t){var a=t.width/t.height;return new c(a>e?Math.round(t.height*e):t.width,e>a?Math.round(t.width/e):t.height)},t.prototype.getScaledRect=function(e,t){return new r(new o(Math.round(t.point.left*e),Math.round(t.point.top*e)),new c(Math.round(t.size.width*e),Math.round(t.size.height*e)))},t.prototype.componentDidUpdate=function(e,t){this.state.isDragging&&!t.isDragging?(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)):!this.state.isDragging&&t.dragging&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp))},t.prototype.updateImage=function(e,t,a){if(!this.state.imageLoaded){for(var n=t/a,s=this.getScaledSize(n,this.props.containerSize),i=new r(new o(Math.round((this.props.containerSize.width-s.width)/2),Math.round((this.props.containerSize.height-s.height)/2)),new c(Math.round(s.width),Math.round(s.height))),l=(i.width/t,0),p=this.state.imageSettings;l<p.length;l++){var u=p[l],d=u.size.width/u.size.height,m=this.getScaledSize(d,i.size);u.rect=new r(new o(Math.round((i.width-m.width)/2),Math.round((i.height-m.height)/2)),this.getScaledSize(d,i.size))}this.setState($.extend({},this.state,{imageUrl:e,originalSize:{width:t,height:a},imageRect:i,isLoadingImage:!1,imageLoaded:!0,selectorRect:this.state.imageSettings[0].rect,currentStep:e.indexOf("default-backgrounds")>0?1:2}))}},t.prototype.render=function(){var e=this,t={width:this.props.containerSize.width,height:this.props.containerSize.height,display:this.state.isLoadingImage||1!=this.state.currentStep?"none":""},a={width:this.props.containerSize.width,height:this.props.containerSize.height},n=({visibility:this.state.imageLoaded?"":"hidden"},{left:this.state.imageRect.left,top:this.state.imageRect.top,width:this.state.imageRect.width,height:this.state.imageRect.height,display:this.state.imageLoaded&&!this.isLastStep()?"":"none"}),r={left:this.state.imageRect.left+this.state.selectorRect.left,top:this.state.imageRect.top+this.state.selectorRect.top,width:this.state.selectorRect.width-2*this.props.selectorBorderWidth,height:this.state.selectorRect.height-2*this.props.selectorBorderWidth,borderWidth:this.props.selectorBorderWidth,cursor:this.state.isDragging?"":"move"},o=8,l={width:o,height:o},u=o/2+1,d=$.extend({},l,{left:r.left,top:r.top,marginLeft:-u,marginTop:-u,cursor:this.state.isDragging?"":"nwse-resize"}),m=$.extend({},l,{left:r.left+r.width-o,top:r.top,marginLeft:u,marginTop:-u,cursor:this.state.isDragging?"":"nesw-resize"}),h=$.extend({},l,{left:r.left,top:r.top+r.height-o,marginLeft:-u,marginTop:u,cursor:this.state.isDragging?"":"nesw-resize"}),g=$.extend({},l,{left:r.left+r.width-o,top:r.top+r.height-o,marginLeft:u,marginTop:u,cursor:this.state.isDragging?"":"nwse-resize"}),f=new c(.8*this.props.containerSize.width,.4*this.props.containerSize.height),v=this.state.imageSettings.map(function(t){var a=e.getScaledSize(t.size.getAspect(),f),n=0==t.rect.width?0:a.width/t.rect.width,s=$.extend({},a,{overflow:"hidden"}),i={width:Math.round(e.state.imageRect.width*n),height:Math.round(e.state.imageRect.height*n),left:Math.round(t.rect.left*-n),top:Math.round(t.rect.top*-n)};return{imageStyle:i,imageContainerStyle:s}}),y={left:this.state.imageRect.left,top:this.state.imageRect.top,width:this.state.selectorRect.left,height:this.state.imageRect.height},_={left:this.state.imageRect.left+this.state.selectorRect.width+this.state.selectorRect.left,top:this.state.imageRect.top,width:this.state.imageRect.width-this.state.selectorRect.width-this.state.selectorRect.left,height:this.state.imageRect.height},b={left:this.state.imageRect.left+this.state.selectorRect.left,top:this.state.imageRect.top,width:this.state.selectorRect.width,height:this.state.selectorRect.top},E={left:this.state.imageRect.left+this.state.selectorRect.left,top:this.state.imageRect.top+this.state.selectorRect.top+this.state.selectorRect.height,width:this.state.selectorRect.width,height:this.state.imageRect.height-this.state.selectorRect.height-this.state.selectorRect.top},R=function(t){return i("image-uploader__step",e.state.currentStep==t?"image-uploader__step--current":e.state.currentStep>t?"image-uploader__step--complete":"image-uploader__step--pending",1==t||e.state.imageLoaded?"image-uploader__step--clickable":"")};return React.createElement("div",{className:i("image-uploader",this.state.uploadInProgress?"image-uploader--inprogress":null),style:{cursor:this.state.isDragging?"move"==this.state.dragMode?"move":"ul"==this.state.dragMode?"nwse-resize":"ur"==this.state.dragMode?"nesw-resize":"ll"==this.state.dragMode?"nesw-resize":"lr"==this.state.dragMode?"nwse-resize":"":""}},React.createElement("div",{className:"image-uploader__inprogressoverlay",style:this.state.uploadInProgress?null:{display:"none"}},React.createElement("div",{className:"image-uploader__inprogressmessage"},"Sending your images up. Hold tight...")),React.createElement("div",{className:"image-uploader__title-container"},React.createElement("div",{className:"image-uploader__title"},this.props.title),React.createElement("div",{className:"image-uploader__cancel",onClick:this.props.onCancel},"cancel")),React.createElement("ul",{className:"image-uploader__steps"},React.createElement("li",{className:R(1),onClick:function(){return e.setStep(1)}},"Upload image"),this.props.imageSettings.map(function(t,a){return React.createElement("li",{key:a,className:R(a+p),onClick:e.state.imageLoaded?function(){return e.setStep(a+p)}:null},"Crop ",t.title)}),React.createElement("li",{className:R(this.props.imageSettings.length+p),onClick:this.state.imageLoaded?function(){return e.setStep(e.props.imageSettings.length+p)}:null},"Preview images")),this.state.showImageUploadFailed?React.createElement("div",{className:"image-uploader__message-container image-uploader__message-container--error"},"We ran into a problem. Try again or try a different image. ",React.createElement("a",{href:"/contact"},"Contact us")," if you need any help."):1==this.state.currentStep?this.state.tooSmallImageSize?React.createElement("div",{className:"image-uploader__message-container image-uploader__message-container--error"},"The resolution of your image (",this.state.tooSmallImageSize.width,"x",this.state.tooSmallImageSize.height,") is lower than the minimum resolution (",this.state.minimumImageSize.width,"x",this.state.minimumImageSize.height,")."):React.createElement("div",{className:"image-uploader__message-container"},React.createElement("span",{className:"image-uploader__message-container-label"},"Step 1"),": ",React.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.step1Html||"Upload an image by clicking the button below"}})):this.state.currentStep<this.props.imageSettings.length+p?React.createElement("div",{className:"image-uploader__message-container"},React.createElement("span",{className:"image-uploader__message-container-label"},"Step ",this.state.currentStep),": ",this.props.imageSettings[this.state.currentStep-p].information):this.state.currentStep==this.props.imageSettings.length+p?React.createElement("div",{className:"image-uploader__message-container"},React.createElement("span",{className:"image-uploader__message-container-label"},"Step ",this.state.currentStep),": Make sure everything looks good, then click the button below"):"",React.createElement("div",{className:"image-uploader__outer-container"},React.createElement("div",{className:i("fa","fa-chevron-circle-left","image-uploader__navigator",1==this.state.currentStep?"image-uploader__navigator--hidden":"image-uploader__navigator--enabled"),
onClick:this.state.currentStep>1?function(){return e.setStep(e.state.currentStep-1)}:null}),React.createElement("div",{className:"image-uploader__container",style:a},this.state.isLoadingImage?React.createElement("div",{className:"image-uploader__loadercontainer"},React.createElement("div",{className:"image-uploader__loadermessage"},"Loading image...")):"",React.createElement("div",{className:"image-uploader__upload",style:t},React.createElement("form",{id:"uploadForm",name:"uploadForm"},React.createElement("input",{id:"imageUpload",name:"imageUpload",type:"file",onChange:this.onFileChange}),React.createElement("label",{className:"image-uploader__upload-button",htmlFor:"imageUpload"},React.createElement("div",{className:"fa fa-upload image-uploader__upload-icon"}),React.createElement("div",null,"upload image"),React.createElement("div",{className:"image-uploader__upload-resolution"},"(min. ",this.state.minimumImageSize.width,"x",this.state.minimumImageSize.height,")")))),this.state.currentStep>1&&this.state.currentStep<this.props.imageSettings.length+p?React.createElement("div",null,React.createElement("div",{className:"image-uploader__selector",style:r,onMouseDown:function(t){return e.onMouseDown(t,"move")}}),React.createElement("div",{className:"image-uploader__selector-corner-resizer",style:d,onMouseDown:function(t){return e.onMouseDown(t,"ul")}}),React.createElement("div",{className:"image-uploader__selector-corner-resizer",style:m,onMouseDown:function(t){return e.onMouseDown(t,"ur")}}),React.createElement("div",{className:"image-uploader__selector-corner-resizer",style:h,onMouseDown:function(t){return e.onMouseDown(t,"ll")}}),React.createElement("div",{className:"image-uploader__selector-corner-resizer",style:g,onMouseDown:function(t){return e.onMouseDown(t,"lr")}}),React.createElement("div",{className:"image-uploader__overlay",style:y}),React.createElement("div",{className:"image-uploader__overlay",style:b}),React.createElement("div",{className:"image-uploader__overlay",style:_}),React.createElement("div",{className:"image-uploader__overlay",style:E})):"",v.map(function(t,a){return React.createElement("div",{key:a,style:e.state.currentStep<p+e.props.imageSettings.length?{display:"none"}:{},className:"image-uploader__preview"},React.createElement("div",{className:"image-uploader__previewimagecontainer",style:t.imageContainerStyle},React.createElement("img",{className:"image-uploader__previewimage",style:t.imageStyle,src:e.state.imageUrl})))}),React.createElement("img",{className:"image-uploader__image",src:this.state.imageUrl,style:n,onLoad:function(t){return e.onImageLoad(t)}}),this.state.currentStep==this.props.imageSettings.length+p?React.createElement("div",{className:"image-uploader__submitcontainer"},React.createElement(s.Button,{onClick:this.onUpdateImages,text:"Update Images"})):""),React.createElement("div",{className:i("fa","fa-chevron-circle-right","image-uploader__navigator",this.isLastStep()?"image-uploader__navigator--hidden":this.state.imageLoaded?"image-uploader__navigator--enabled":"image-uploader__navigator--disabled"),onClick:!this.isLastStep()&&this.state.imageLoaded?function(){return e.setStep(e.state.currentStep+1)}:null})))},t}(React.Component);t.ImageUploader=u},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return 0==this.props.groupSize?null:React.createElement("span",{className:s("group-icon",this.props.rightSide?"group-icon--right":"group-icon--left"),title:1==this.props.groupSize?"Only visible to the author":"Visible to "+this.props.groupSize+" members including the author"},React.createElement("span",{className:"group-icon__lock"}),React.createElement("span",{className:1==this.props.groupSize?"group-icon__single":"group-icon__multiple"}))},t}(React.Component);t.GroupIcon=i},function(e,t,a){"use strict";var n,s=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},i=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},r=a(12),o=a(47),l=a(5),c=a(177),p=a(179),u=a(178),d=a(180),m=a(76),h=a(153),g=a(48),f=a(181),v=a(182),y=a(33),_=a(130),b=a(77),E=a(124),R=a(183),w=a(72),C=a(126),S=a(184),N=a(13),k=a(29),T=a(6),M=a(4);!function(e){e[e.CurrentFiles=0]="CurrentFiles",e[e.NewFiles=1]="NewFiles"}(n=t.FileListIndex||(t.FileListIndex={}));var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.recordDatasetDownload=function(){t.props.isNewDataset||goog_report_conversion(),window.Intercom("trackEvent","download_dataset",{dataset_id:t.props.datasetId})},t.redirectToLogin=function(){window.location.href="/account/login"},t}return s(t,e),t.prototype.renderProgressStep=function(e,t){var a=this.statusSequences(this.props.newDatasetVersionStatus)<e-1?"--pending":this.statusSequences(this.props.newDatasetVersionStatus)==e-1?"--current":"--complete",n=this.statusSequences(this.props.newDatasetVersionStatus)<e-1?0:this.statusSequences(this.props.newDatasetVersionStatus)==e-1?100*this.props.currentStatusPercentComplete:100;return React.createElement("div",{className:M("dataset-home__new-version-status-step","dataset-home__new-version-status-step"+a)},React.createElement("div",{className:M("dataset-home__new-version-progress-bar","dataset-home__new-version-progress-bar"+a),style:{width:n+"%"}}),React.createElement("div",{className:M("dataset-home__new-version-status-step-label","dataset-home__new-version-status-step-label"+a)},t))},t.prototype.statusSequences=function(e){switch(e){case"notYetPersisted":return 0;case"blobsReceived":return 1;case"blobsDecompressed":return 2;case"blobsCopiedToSds":return 3;case"individualBlobsCompressed":return 4;case"ready":return 5;default:return 6}},t.prototype.renderVersionNotes=function(e,t,a){var n=this;return this.props.isEditingVersions?React.createElement("div",{className:"dataset-home__markdown-editor-container"},React.createElement(k.MediaQuery,{minWidth:k.Breakpoints.desktopMin},React.createElement(_.MarkdownEditor,{key:"version-"+t,shouldSanitizeHtml:!0,hidePreview:!0,defaultValue:e,suffix:"-version"+t,onChangeCallback:function(e){return n.props.onDatasetVersionPropChanged(t,"versionNotes",e)},placeholder:a,maxRows:4})),React.createElement(k.MediaQuery,{minWidth:0,maxWidth:k.Breakpoints.tabletMax},React.createElement(_.MarkdownEditor,{key:"version-"+t,shouldSanitizeHtml:!0,hidePreview:!0,hideToolbar:!0,defaultValue:e,suffix:"-version"+t,onChangeCallback:function(e){return n.props.onDatasetVersionPropChanged(t,"versionNotes",e)},placeholder:a,maxRows:4}))):React.createElement(C.MarkdownConverter,{key:"version-"+t,contentClassName:"dataset-home__version-notes",content:e,mimeType:"text/markdown",insertNofollow:!0})},t.prototype.mapFilePreviews=function(e,t,a){var s=this;return void 0===t&&(t=!1),void 0===a&&(a=!1),e.map(function(e,i){var r=a?n.NewFiles:n.CurrentFiles;return{showSubmitToCompButton:!1,submitToCompUrl:null,description:e.description,fileName:e.name,filePreviewUrl:a?"/datasets/inbox-preview?blobFileToken="+e.blobToken:e.previewUrl,blobToken:e.blobToken,fileType:e.fileType||e.name.split(".")[e.name.split(".").length-1],fileUrl:e.downloadUrl,size:e.totalBytes,isEditingDescription:t||a,onDescriptionChange:t||a?function(e){return s.props.onDatasetFilePropChanged(i,"description",e,r)}:null,descriptionPlaceholder:t||a?"Enter a description for this file.":"",validationError:(t||a)&&""===e.description?"Enter a description":"",canDelete:a,onDelete:a?function(){s.props.onDeleteNewVersionFile(e.name)}:null,lastVersionMetadataUrl:a?s.props.datasetUrl+"/preview/"+e.name+"/"+s.props.lastVersionNumber:null}})},t.prototype.render=function(){var e=this,t=Math.min(Math.max(this.props.scripts.length,this.props.discussions.length,this.props.contributors.length,1),3),a=this.props.privateGroups.map(function(e){return{value:e.id.toString(),label:e.name}}),n=1==this.props.owners.filter(function(t){return t.id==e.props.organizationId}).length?this.props.owners.filter(function(t){return t.id==e.props.organizationId})[0].maxFileSizeBytes:null;return React.createElement("div",null,this.props.isNewDataset?null:React.createElement("div",{className:"dataset-home__teasers"},React.createElement("div",{className:"dataset-home__teaser-column"},React.createElement(l.ContentBox,{containerClassName:"dataset-home__teaser",title:"Kernels",onTitleClick:function(){return e.props.onChangeTab("kernels")},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement(c.ScriptListTeaser,{minItemHeight:t,items:this.props.scripts,emptyListUrl:this.props.newScriptUrl}))),React.createElement("div",{className:"dataset-home__teaser-column"},React.createElement(l.ContentBox,{containerClassName:"dataset-home__teaser",title:"Discussion",onTitleClick:function(){return e.props.onChangeTab("discussion")},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement(p.ForumTopicListTeaser,{minItemHeight:t,items:this.props.discussions,emptyListUrl:this.props.datasetUrl+"/discussion"}))),React.createElement("div",{className:"dataset-home__teaser-column"},React.createElement(l.ContentBox,{containerClassName:"dataset-home__teaser",title:"Top Contributors",onTitleClick:function(){return e.props.onChangeTab("contributors")},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement(u.TeaserList,{minItemHeight:t,listItems:this.props.contributors.slice(0,3),listItemRenderer:function(e,t){return React.createElement(S.DatasetContributorsTeaserItem,i({},e,{key:t}))},emptyListCreateNewUrl:this.props.newScriptUrl,emptyListMessage:"There are no contributors yet.",emptyListCreateNewText:"Be the first"})))),this.props.isNewDataset?null:React.createElement(l.ContentBox,{title:"Recent Activity",onTitleClick:function(){return e.props.onChangeTab("feed")},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},this.props.feed.slice(0,5).map(function(e,t){return React.createElement(d.DatasetActivityFeedItem,i({},e,{key:t}))})),this.props.isNewDataset||this.props.canEditSlug||this.props.canEditPublishStatus||this.props.canEditFeatureStatus||this.props.canEditPublishStatus?React.createElement(l.ContentBox,{title:this.props.isNewDataset?"Choose a Permanent URL":"Power settings",titleBarRightSide:this.props.isNewDataset?"":React.createElement(m.EditStateToggleButton,{sectionName:"Slug",cancelPropName:"slug",cancelCallback:this.props.onDatasetEditingStateCancelled,isEditing:this.props.isEditingSlug,toggleCallback:this.props.onDatasetEditingStateChanged})},this.props.canEditSlug?React.createElement("section",{className:"dataset-home__section"},"https://www.kaggle.com/",this.props.ownerSlug,"/",this.props.isEditingSlug?React.createElement(h.InlineTextEditor,{className:"dataset-home__inline-slug-editor",value:this.props.slug,rejectedCharacterRegExp:/[^A-Za-z0-9-]+/g,onChangeCallback:function(t){return e.props.onDatasetPropChanged("slug",t)}}):this.props.slug):"",this.props.canEditPublishStatus?React.createElement("section",{className:"dataset-home__section"},React.createElement(g.Checkbox,{isChecked:this.props.isPublished,text:"Is published?",isEditable:this.props.isEditingSlug,textIsClickable:!0,onChange:this.props.onPublishedChange})):"",this.props.canEditFeatureStatus?React.createElement("section",{className:"dataset-home__section"},React.createElement(g.Checkbox,{isChecked:this.props.isFeatured,text:"Is featured?",isEditable:this.props.isEditingSlug,textIsClickable:!0,onChange:this.props.onFeaturedChange})):"",this.props.canEditPublishStatus&&!this.props.isNewDataset?React.createElement("section",{className:"dataset-home__section"},React.createElement(g.Checkbox,{isChecked:this.props.isRemoved,text:"Is removed?",isEditable:this.props.isEditingSlug,textIsClickable:!0,onChange:this.props.onRemovedChange})):"",this.props.canEditPrivateGroup?React.createElement("section",{className:"dataset-home__section"},React.createElement(N.SelectBox,{disabled:!this.props.isEditingSlug,className:"dataset-home__private-group-selection",value:(this.props.privateGroupId||0).toString(),placeholder:this.props.isEditingSlug?"Select a private group":"Publicly Accessible",options:a,onChange:function(t){return e.props.onPrivateGroupChanged(parseInt(t))}})):""):null,this.props.isNewDataset&&this.props.originalImageUrl.indexOf("default-backgrounds")>-1?React.createElement(l.ContentBox,{title:"Upload an Image",contentClassName:"dataset-home__image-reminder-box"},React.createElement("div",{className:"dataset-home__image-reminder-text"},React.createElement("p",null,"We have chosen a generic random image for your dataset, but we suggest you use a relevant image, which will make your dataset stand out more."),React.createElement("p",null,"If you need inspiration, ",React.createElement("a",{href:"http://www.unsplash.com",target:"_blank"},"unsplash.com")," has a great library of public domain images.")),React.createElement("div",{className:"dataset-home__image-reminder-button"},React.createElement(o.ButtonRoundEdged,{onClick:this.props.onShowImageUploader,text:"Upload Image"}))):null,React.createElement(l.ContentBox,{title:"Description",titleBarRightSide:this.props.canEdit&&!this.props.isNewDataset||this.props.canEditDescription?React.createElement("span",null,!this.props.canEditDescription||this.props.canEdit||this.props.isEditingDescription?null:React.createElement("span",{style:{marginRight:"10px",fontSize:"10pt",fontStyle:"italic"}},"Help us describe this dataset"),React.createElement(m.EditStateToggleButton,{sectionName:"Description",cancelPropName:"description",cancelCallback:this.props.onDatasetEditingStateCancelled,isEditing:this.props.isEditingDescription,toggleCallback:this.props.onDatasetEditingStateChanged})):""},React.createElement("section",{className:"dataset-home__section"},this.props.isEditingDescription?React.createElement("div",null,React.createElement(v.InfoToggle,{bannerName:"dataset-description-info",expandedContent:React.createElement("div",{className:"dataset-home__description-helper"},React.createElement("p",null,"This is your chance to capture the interest of the data science community. Your description should answer these questions. Include links and citations where applicable:"),React.createElement("ul",null,React.createElement("li",null,React.createElement("strong",null,"Context"),": What is the subject matter of the dataset?"),React.createElement("li",null,React.createElement("strong",null,"Content"),": What fields does it include?"),React.createElement("li",null,React.createElement("strong",null,"Acknowledgements"),": Who owns the dataset and how was it compiled?"),React.createElement("li",null,React.createElement("strong",null,"Past Research"),": In brief, what other analysis has been done on this data?"),React.createElement("li",null,React.createElement("strong",null,"Inspiration"),": Why is this dataset worthy of further analysis? What questions would you like answered by the community? What feedback would be helpful on the data itself?"))),collapsedContent:React.createElement("div",{className:"dataset-home__description-helper"},"Click here to see tips on describing your dataset.")}),React.createElement(_.MarkdownEditor,{editorClassName:"dataset-home__description-editor",shouldSanitizeHtml:!0,alwaysShowToolbar:!0,hidePreview:!0,defaultValue:this.props.description,placeholder:"Give a detailed description about your dataset.",suffix:"-description",minRows:5,maxRows:15,onChangeCallback:function(t){return e.props.onDatasetPropChanged("description",t)}})):React.createElement(C.MarkdownConverter,{content:this.props.description,mimeType:"text/markdown",insertNofollow:!0})),this.props.privateGroupId?"":React.createElement("div",{className:"dataset-home__bottom-attached-container"},React.createElement("div",{className:"dataset-home__bottom-attached-header"},!this.props.isEditingLicense&&this.props.license?React.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.license}}):React.createElement("div",{className:"dataset-home__bottom-attached-default"},"Select a license"),this.props.canEdit?React.createElement("div",{className:"dataset-home__multiple-button-container"},React.createElement(m.EditStateToggleButton,{sectionName:"License",cancelPropName:"license",saveButtonText:this.props.isNewDataset?"Done":"Save",editButtonText:this.props.isNewDataset?"Select":"Edit",cancelCallback:this.props.onDatasetEditingStateCancelled,isEditing:this.props.isEditingLicense,toggleCallback:this.props.onDatasetEditingStateChanged})):""),this.props.isEditingLicense?React.createElement("div",{className:"dataset-home__bottom-attached-container-contents"},React.createElement("div",{className:"dataset-home__license-list-container"},React.createElement(f.RadioButtonList,{options:this.props.licenses.map(function(e){return{value:e.id,text:e.description}}),onChange:function(t){return e.props.onLicenseChanged(t.value,t.text)},selectedValue:this.props.licenseId,textIsHtml:!0}))):"")),this.props.canEdit||this.props.files.length>0||this.props.isSavingNewVersion?React.createElement(l.ContentBox,{title:"Files",loaderMessage:"Hold tight while we package up your files...",titleBarRightSide:this.props.canEdit?React.createElement("div",{className:"dataset-home__multiple-button-container"},this.props.isEditingFiles||this.props.isSavingNewVersion?"":React.createElement(k.MediaQuery,{minWidth:k.Breakpoints.desktopMin},React.createElement(m.EditStateToggleButton,{sectionName:"NewVersion",cancelPropName:"newVersion",cancelCallback:this.props.onDatasetEditingStateCancelled,toggleCallback:this.props.onDatasetEditingStateChanged,isEditing:this.props.isEditingNewVersion,editButtonText:"Create New Dataset Version",saveButtonText:"Save New Version"})),this.props.files.length>0&&!this.props.isEditingNewVersion?React.createElement(m.EditStateToggleButton,{sectionName:"Files",cancelPropName:"files",editButtonText:"Edit File Descriptions",isEditing:this.props.isEditingFiles,cancelCallback:this.props.onDatasetEditingStateCancelled,toggleCallback:this.props.onDatasetEditingStateChanged}):""):""},this.props.isSavingNewVersion||this.props.showNewVersionProgress?React.createElement("div",{className:"dataset-home__new-version-status-progress"},this.renderProgressStep(1,"Persisting Metadata"),this.renderProgressStep(2,"Decompressing Files"),this.renderProgressStep(3,"Copying Kernel Files"),this.renderProgressStep(4,"Compressing Files"),this.renderProgressStep(5,"Building Archive")):"",this.props.isEditingNewVersion?React.createElement("div",null,React.createElement("section",{className:"dataset-home__section"},this.props.isNewDataset?React.createElement(v.InfoToggle,{bannerName:"dataset-files-helper-new-dataset",expandedContent:React.createElement("div",null,React.createElement("p",null,"Here are some guidelines for creating your dataset files:"),React.createElement("ul",null,React.createElement("li",null,"If you have a SQLite database for this dataset, name it database.sqlite in order for users to be able to query it."),React.createElement("li",null,"Keep file names short and clear. Do not include the dataset’s name. ",React.createElement(y.ToolTip,{tipText:"When users download the dataset, it will automatically\nunzip to a folder with the name of the dataset."},React.createElement("span",{className:"fa fa-question-circle"}))),React.createElement("li",null,"Csv files are preferred, when appropriate."),React.createElement("li",null,"Files, including published papers or visualizations, from past analysis should ",React.createElement("strong",null,"not")," be included here. They can be shared under the Dataset Description."))),collapsedContent:React.createElement("div",null,"Click here to see some tips on creating, naming, and uploading files for your dataset.")}):React.createElement(v.InfoToggle,{bannerName:"dataset-files-helper-existing-dataset",expandedContent:React.createElement("div",null,React.createElement("p",null,"Here are some guidelines for updating your dataset files: "),React.createElement("ul",null,React.createElement("li",null,React.createElement("strong",null,"All files will be replaced.")," Be sure to include any existing files that will not change."),React.createElement("li",null,React.createElement("strong",null,"To update existing tables"),": Upload a new version of the file and use the same file name as the previous version."),React.createElement("li",null,React.createElement("strong",null,"To add new tables"),": Upload any new files. You must also upload any existing files again."),React.createElement("li",null,React.createElement("strong",null,"To remove tables"),": Simply do not include any files you would like to be removed."))),collapsedContent:React.createElement("div",null,"Click here to see some tips on creating, naming, and updating the files for your dataset.")})),this.props.isNewDataset?null:React.createElement("div",null,React.createElement("div",{className:"dataset-home__new-version-description-editor"},React.createElement(_.MarkdownEditor,{editorClassName:"dataset-home__description-editor",shouldSanitizeHtml:!0,hidePreview:!0,alwaysShowToolbar:!0,suffix:"-newVersionDescription",placeholder:"Enter a description for this version.",onChangeCallback:function(t){return e.props.onDatasetPropChanged("newVersionDescription",t)}}))),React.createElement("div",{className:"dataset-home__file-uploader-container"},React.createElement(b.FileUploader,{createBlobUrl:"/blobs/inbox/dataset-version-files",mode:b.FileUploaderMode.Multiple,onFileUploadFinished:this.props.onFileUploadFinished,autoRemoveOnComplete:!0,maxUncompressedBytesAllowed:n||this.props.maxUncompressedFileBytesAllowed,maxCompressedBytesAllowed:n||this.props.maxCompressedFileBytesAllowed})),this.props.newVersionFiles&&this.props.newVersionFiles.length>0?React.createElement(E.FilePreviewList,{files:this.mapFilePreviews(this.props.newVersionFiles,!0,!0),userCanEditMetadata:!T.Current.isAnonymous,onMetadataChange:this.props.onNewFileMetadataChange}):null,this.props.isNewDataset||this.props.isSavingNewVersion?null:React.createElement("div",{className:"dataset-home__call-to-action-container"},React.createElement(r.Button,{onClick:function(){return e.props.onDatasetEditingStateChanged("NewVersion")},text:"Save New Version"}))):"",!this.props.isNewDataset||this.props.isSavingNewVersion?React.createElement("div",{className:this.props.isEditingNewVersion?"dataset-home__bottom-attached-container":""},!this.props.isEditingNewVersion||this.props.showCurrentVersionFiles?this.props.isEditingFiles?React.createElement("div",{className:this.props.isEditingNewVersion?"dataset-home__bottom-attached-container-contents":""},React.createElement(E.FilePreviewList,{files:this.mapFilePreviews(this.props.files,!0),userCanEditMetadata:!T.Current.isAnonymous,onMetadataChange:this.props.onExistingFileMetadataChange,onStartEditingDescription:function(){return e.props.onDatasetEditingStateChanged("Files")},onStopEditingDescription:function(){return e.props.onDatasetEditingStateChanged("Files")}})):React.createElement("div",null,React.createElement(E.FilePreviewList,{files:this.mapFilePreviews(this.props.files),userCanEditMetadata:!0,onStartEditingMetadata:T.Current.isAnonymous?this.redirectToLogin:null,onMetadataChange:T.Current.isAnonymous?this.redirectToLogin:this.props.onExistingFileMetadataChange,onStartEditingDescription:T.Current.isAnonymous?this.redirectToLogin:function(){return e.props.onDatasetEditingStateChanged("Files")},onStopEditingDescription:T.Current.isAnonymous?this.redirectToLogin:function(){return e.props.onDatasetEditingStateChanged("Files")}})):"",this.props.isEditingNewVersion&&this.props.files.length>0?React.createElement("div",{onClick:this.props.onToggleCurrentVersionFiles,className:M("dataset-home__bottom-attached-container-toggle","dataset-home__bottom-attached-container-toggle"+(this.props.showCurrentVersionFiles?"--collapse":"--expand"))},this.props.showCurrentVersionFiles?"hide":"see"," version ",this.props.datasetVersions.filter(function(t){return t.id==e.props.datasetVersionId})[0].versionNumber," file descriptions"):""):""):"",this.props.datasetVersions.length?React.createElement(l.ContentBox,{title:"Versions",titleBarRightSide:this.props.canEdit?React.createElement(m.EditStateToggleButton,{sectionName:"Versions",cancelPropName:"datasetVersions",isEditing:this.props.isEditingVersions,cancelCallback:this.props.onDatasetEditingStateCancelled,toggleCallback:this.props.onDatasetEditingStateChanged}):""},React.createElement(R.DatasetVersionList,{activeVersionId:this.props.datasetVersionId,datasetVersionListItems:this.props.datasetVersions,datasetVersionListKeyBaseName:"dataset-version-key-",datasetVersionNotesRenderer:this.renderVersionNotes.bind(this),isEditing:this.props.isEditingVersions,textareaPlaceholder:"Enter a description of the updates made on this version.",hideVersionStatuses:this.props.hideVersionStatuses})):"",this.props.isNewDataset?null:React.createElement(l.ContentBox,null,React.createElement("span",null,React.createElement(w.Pluralize,{word:"view",count:this.props.numberOfViews,formatNumber:!0})," · ",React.createElement(w.Pluralize,{word:"download",count:this.props.numberOfDownloads,formatNumber:!0})," · ",React.createElement(w.Pluralize,{word:"kernel",count:this.props.numberOfScripts,formatNumber:!0})," · ",React.createElement(w.Pluralize,{word:"topic",count:this.props.numberOfTopics,formatNumber:!0}))),this.props.isNewDataset?React.createElement("div",{className:"dataset-home__call-to-action-container"},React.createElement(r.Button,{onClick:this.props.onSaveNewDataset,isDisabled:!this.props.isNewDataset,text:"Publish Dataset"})):null,this.props.canEdit||this.props.isSavingNewVersion?null:React.createElement("div",{className:"dataset-home__call-to-action-container"},React.createElement(r.Button,{href:"/datasets",text:"Explore More Datasets"})))},t}(React.Component);t.DatasetHome=x},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(3),i=a(178),r=a(7),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderListItem=function(e,t){return React.createElement("a",{key:t,className:"script-list-item",href:e.url},React.createElement("div",{className:"script-list-item__info"},React.createElement("span",{className:"script-list-item__title"},e.name),React.createElement("div",{className:"script-list-item__posted"},React.createElement("span",null,"run ",React.createElement(r.TimeAgo,{time:e.lastRunDate})))),React.createElement("div",{className:"script-list-item__votes"},React.createElement("span",{className:"script-list-item__votes-number"},e.totalVotes),React.createElement("span",{className:"script-list-item__votes-sub-text"},s("vote",e.totalVotes))))},t.prototype.render=function(){return React.createElement(i.TeaserList,{minItemHeight:this.props.minItemHeight,listItems:this.props.items,listItemRenderer:this.renderListItem,emptyListCreateNewUrl:this.props.emptyListUrl,emptyListMessage:"There are no kernels yet.",emptyListCreateNewText:"Create one"})},t}(React.Component);t.ScriptListTeaser=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.callToAction=function(){var e=this;return this.props.emptyListCreateNewUrl?React.createElement("a",{href:this.props.emptyListCreateNewUrl,onClick:function(){return e.props.emptyListCreateNewAction()}},this.props.emptyListCreateNewText):null},t.prototype.render=function(){var e=this;return this.props.listItems&&this.props.listItems.length?React.createElement("div",{className:s("teaser-list","teaser-list--"+(this.props.minItemHeight||3)+"-item-height")},this.props.listItems.map(function(t,a){return e.props.listItemRenderer(t,a)})):React.createElement("div",{className:s("teaser-list","teaser-list--"+(this.props.minItemHeight||1)+"-item-height")},React.createElement("div",{className:"teaser-list__empty-list"},React.createElement("span",{className:"teaser-list__empty-list-message"},this.props.emptyListMessage),this.callToAction()))},t}(React.Component);t.TeaserList=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(3),i=a(178),r=a(7),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderListItem=function(e,t){return React.createElement("a",{key:t,className:"forum-topic-list-item",href:e.url},React.createElement("div",{className:"forum-topic-list-item__info"},React.createElement("span",{className:"forum-topic-list-item__title"},e.title),React.createElement("div",{className:"forum-topic-list-item__posted"},React.createElement(r.TimeAgo,{time:e.lastPost}))),React.createElement("div",{className:"forum-topic-list-item__replies"},React.createElement("span",{className:"forum-topic-list-item__replies-number"},e.totalReplies),React.createElement("span",{className:"forum-topic-list-item__replies-sub-text"},s("reply",e.totalReplies))))},t.prototype.render=function(){return React.createElement(i.TeaserList,{minItemHeight:this.props.minItemHeight,listItems:this.props.items,listItemRenderer:this.renderListItem,emptyListCreateNewUrl:this.props.emptyListUrl,emptyListMessage:"There are no conversations yet.",emptyListCreateNewText:"Start one"})},t}(React.Component);t.ForumTopicListTeaser=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=a(7),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e="script"==this.props.activityType?"fa-file-code-o":"scriptFork"==this.props.activityType?"fa-code-fork":"scriptRun"==this.props.activityType?"fa-file-code-o":"dataset"==this.props.activityType?"fa-database":"datasetVersion"==this.props.activityType?"fa-database":"topic"==this.props.activityType?"fa-comments-o":"scriptComment"==this.props.activityType?"fa-comment-o":"comment"==this.props.activityType?"fa-comment-o":"",t="script"==this.props.activityType?React.createElement("span",{className:"dataset-activity-feed-item__action"},"Created kernel ",React.createElement("a",{className:"dataset-activity-feed-item__item-link",href:this.props.url},this.props.title)):"scriptFork"==this.props.activityType?React.createElement("span",{className:"dataset-activity-feed-item__action"},"Forked kernel ",React.createElement("a",{className:"dataset-activity-feed-item__item-link",href:this.props.url},this.props.title)):"scriptRun"==this.props.activityType?React.createElement("span",{className:"dataset-activity-feed-item__action"},"Ran version ",this.props.versionNumber," of kernel ",React.createElement("a",{className:"dataset-activity-feed-item__item-link",href:this.props.url},this.props.title)):"dataset"==this.props.activityType?React.createElement("span",{className:"dataset-activity-feed-item__action"
},"Created ",React.createElement("a",{className:"dataset-activity-feed-item__item-link",href:this.props.url},"a dataset")):"datasetVersion"==this.props.activityType?React.createElement("span",{className:"dataset-activity-feed-item__action"},"Created version ",this.props.versionNumber," of dataset ",React.createElement("a",{className:"dataset-activity-feed-item__item-link",href:this.props.url},this.props.title)):"topic"==this.props.activityType?React.createElement("span",{className:"dataset-activity-feed-item__action"},"Created a new discussion ",React.createElement("a",{className:"dataset-activity-feed-item__item-link",href:this.props.url},this.props.title)):"scriptComment"==this.props.activityType?React.createElement("span",{className:"dataset-activity-feed-item__action"},"Commented on kernel ",React.createElement("a",{className:"dataset-activity-feed-item__item-link",href:this.props.url},this.props.title)):"comment"==this.props.activityType?React.createElement("span",{className:"dataset-activity-feed-item__action"},"Commented on dataset discussion ",React.createElement("a",{className:"dataset-activity-feed-item__item-link",href:this.props.url},this.props.title)):"";return React.createElement("div",{className:"dataset-activity-feed-item"},React.createElement("div",{className:"dataset-activity-feed-item__images"},React.createElement("div",{className:"dataset-activity-feed-item__icon"},React.createElement("span",{className:s("fa",e)})),React.createElement("a",{href:this.props.userUrl},React.createElement("img",{className:"dataset-activity-feed-item__user-avatar",src:this.props.userAvatarUrl}))),React.createElement("div",{className:"dataset-activity-feed-item__user-link-container"},React.createElement("a",{className:"dataset-activity-feed-item__user-link",href:this.props.userUrl},this.props.userDisplayName)),React.createElement("div",{className:"dataset-activity-feed-item__details"},t),React.createElement(i.TimeAgo,{className:"dataset-activity-feed-item__time",time:this.props.date}))},t}(React.Component);t.DatasetActivityFeedItem=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(4),i=function(e){function t(t){var a=e.call(this,t)||this;return a.handleClick=function(e){a.setState({selectedValue:e.value}),a.props.onChange(e)},a.state={selectedValue:t.selectedValue},a}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement("ul",{className:"radio-button-list"},this.props.options.map(function(t){var a=e.state.selectedValue===t.value;return React.createElement("li",{className:s("radio-button-list__option",a?"radio-button-list__option--selected":"",e.props.textIsClickable?"checkbox--clickable":""),key:t.value,onClick:e.props.textIsClickable?function(){return e.handleClick(t)}:null},React.createElement("span",{className:s("radio-button-list__option-radio",e.props.textIsClickable?"":"radio-button-list__option-radio--clickable",a?"radio-button-list__option-radio--selected":""),onClick:function(){return e.handleClick(t)}}),React.createElement("span",{className:s("radio-button-list__option-label"),dangerouslySetInnerHTML:e.props.textIsHtml?{__html:t.text}:null},e.props.textIsHtml?null:t.text))}))},t}(React.Component);t.RadioButtonList=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(4),r=function(e){function t(t){var a=e.call(this,t)||this;return a.loadCurrentVisibilityState=function(){s.ajax({type:"POST",url:"/account/get-banner-state",data:{bannerName:a.props.bannerName,showBanner:!a.state.isVisible},success:function(e){a.setState({isVisible:e.showBanner})}})},a.onDismiss=function(){s.ajax({type:"POST",url:"/account/dismiss-banner",data:{bannerName:a.props.bannerName,showBanner:!a.state.isVisible}}),a.setState({isVisible:!a.state.isVisible})},a.state=t,null==a.state.isVisible&&a.loadCurrentVisibilityState(),a}return n(t,e),t.prototype.render=function(){var e=this;return null==this.state.isVisible?null:React.createElement("div",{className:i("info-toggle",this.state.isVisible?null:"info-toggle--clickable"),onClick:this.state.isVisible?null:function(){return e.onDismiss()}},React.createElement("div",{className:"info-toggle__content"},React.createElement("div",{className:"info-toggle__icon info-toggle__icon--info"}),React.createElement("div",{className:i("info-toggle__icon",this.state.isVisible?"info-toggle__icon--collapse":"info-toggle__icon--expand"),onClick:function(){return e.onDismiss()}}),this.state.isVisible?this.props.expandedContent:this.props.collapsedContent))},t}(React.Component);t.InfoToggle=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(7),i=a(4),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement("div",{className:"dataset-version-list"},this.props.datasetVersionListItems.map(function(t,a){var n=(e.props.activeVersionId==t.id,"ready"==t.status?"":"failed"==t.status?"Processing this version failed.":"This version is in progress."),r="ready"==t.status||"failed"==t.status?t.status:"progress";return React.createElement("div",{key:e.props.datasetVersionListKeyBaseName+a,className:i("dataset-version-list__item",e.props.isEditing?"dataset-version-list__item--editing":"dataset-version-list__item--read-only")},React.createElement("div",{className:"dataset-version-list__item-meta"},e.props.hideVersionStatuses?null:React.createElement("div",{className:i("dataset-version-list__item-status","dataset-version-list__item-status--"+r,"progress"==r?"fa-spin":"",e.props.isEditing?"dataset-version-list__item-name--editing":""),title:n}),React.createElement("div",{className:i("dataset-version-list__item-name",e.props.isEditing?"dataset-version-list__item-name--editing":"")},"ready"==t.status?React.createElement("a",{href:t.datasetVersionUrl,className:"dataset-version-list__item-link"},"Version "+t.versionNumber+" "):null),React.createElement("div",{className:i("dataset-version-list__item-date",e.props.isEditing?"dataset-version-list__item-date--editing":"")},React.createElement(s.TimeAgo,{time:t.creationDate}))),React.createElement("div",{className:i("dataset-version-list__item-notes","dataset-version-list__item-notes--"+r),title:n},e.props.datasetVersionNotesRenderer(t.versionNotes,a,e.props.textareaPlaceholder)))}))},t}(React.Component);t.DatasetVersionList=r},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("a",{className:"dataset-contributors-teaser-item",href:this.props.userUrl},React.createElement("div",{className:"dataset-contributors-teaser-item__avatar"},React.createElement("img",{className:"dataset-contributors-teaser-item__avatar-image",src:this.props.userAvatarUrl})),React.createElement("div",{className:"dataset-contributors-teaser-item__info"},React.createElement("span",{className:"dataset-contributors-teaser-item__user"},this.props.displayName)),React.createElement("div",{className:"dataset-contributors-teaser-item__rank"},React.createElement("span",{className:"dataset-contributors-teaser-item__rank-number"},this.props.rank)))},t}(React.Component);t.DatasetContributorsTeaserItem=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement(s.ScriptList,{languagesMetadataUrl:"/kernels/alllang",listTitle:"Kernels",loginAndReturnUrl:null,newNotebookUrl:null,newScriptUrl:null,outputTypesMetadataUrl:"/kernels/allouttypes",showFilters:!0,showScriptProjectName:!1,sourceBaseUrl:"/kernels/d/"+this.props.datasetId+"/",isHidden:"kernels"!=this.props.currentTab})},t}(React.Component);t.DatasetKernels=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(40),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return"discussion"===this.props.currentTab?React.createElement(i.Forum,s({},$.extend(!0,{},this.props.discussion,this.props.newTopic),{onTopicClicked:this.props.onTopicClicked,topicId:this.props.topicId,isNew:this.props.isNewTopic,topicSubmitted:this.props.onTopicSubmitted})):null},t}(React.Component);t.DatasetDiscussion=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(72),r=a(154),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement(s.ContentBox,{title:"Contributors"},this.props.contributors.map(function(e){return React.createElement("a",{className:"dataset-contributors__item",href:e.userUrl,key:e.rank},React.createElement("div",{className:"dataset-contributors__rank"},React.createElement("span",{className:"dataset-contributors__rank-number"},e.rank)),React.createElement("div",{className:"dataset-contributors__avatar"},React.createElement("img",{className:"dataset-contributors__avatar-image",src:e.userAvatarUrl})),React.createElement("div",{className:"dataset-contributors__info"},React.createElement("div",null,React.createElement("span",{className:"dataset-contributors__user"},e.displayName),React.createElement("div",{className:"dataset-contributors__meta"},React.createElement(i.Pluralize,{word:"kernel",count:e.totalScripts})," |",React.createElement(i.Pluralize,{word:"post",count:e.totalForumMessages})))))}),React.createElement(r.LoadingText,{isLoading:this.props.contributorsIsLoading,text:"Loading more contributors"}))},t}(React.Component);t.DatasetContributors=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(180),r=a(161),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderItem=function(e,t){return React.createElement(i.DatasetActivityFeedItem,s({},e,{key:t}))},t.prototype.render=function(){return this.props.isNewDataset?null:React.createElement(r.SmartListContainer,{title:"Activity Feed",pluralItemDescription:"activity",data:this.props.hasLoadedFeed?this.props.feed:null,dataUrl:this.props.datasetUrl+"/feed.json",itemRenderer:this.renderItem.bind(this),isHidden:"feed"!=this.props.currentTab})},t}(React.Component);t.DatasetActivityFeed=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(11),i=a(5),r=a(13),o=a(27),l=a(26),c=a(6),p=a(29),u=a(30),d=a(190),m=20,h=function(e){function t(t){var a=e.call(this,t)||this;a.handleResize=function(){var e=window.innerWidth;a.setState({windowWidth:e,shouldUseMobileSort:e<=p.Breakpoints.mobileMax})},a.onWindowPopState=function(e){if(e.state&&e.state.datasetListFilterState&&e.state.datasetListFilterState.sortBy){var t=e.state.datasetListFilterState;a.onFilterChanged(t.sortBy,t.group,!1)}else a.onFilterChanged(a.props.sortBy,a.props.selectionGroup,!1)},a.onSearchChange=function(e){var t=null==a.qTextBox||""==a.qTextBox;a.qTextBox=e.target.value,t&&null!=a.qTextBox&&""!=a.qTextBox&&a.setState({sortBy:"relevance"}),a.timer&&clearInterval(a.timer),a.timer=window.setInterval(function(){return a.updateSearch(a.qTextBox)},200)},a.handleBeforeUnload=function(e){var t=$(".datasets__list-wrapper");t.is(document.activeElement)||0!==t.has(document.activeElement).length||a.logSearchAction()},a.updateSearch=function(e){a.timer&&clearInterval(a.timer),a.setState({search:e,sortBy:null==e||""==e?"hottest":a.state.sortBy},function(){return a.onFilterChanged(a.state.sortBy,a.state.selectionGroup,!0)})},a.handleClickResult=function(e,t,n){a.logSearchAction("dataset-"+e,t,n)},a.props.userId?a.initForProfile():a.initForDatasetTab();var n=a.props.datasetListItems||[];return a.state={page:1,sortBy:a.props.sortBy||"hottest",selectionGroup:a.props.selectionGroup||(a.props.userId?"my":"featured"),search:a.props.search,isLoadingMoreData:!1,hasMoreData:n.length<a.props.totalDatasetListItems,hasLoadedSomeData:n.length>0,datasetListItems:n,totalDatasetListItems:a.props.totalDatasetListItems,shouldUseMobileSort:window.innerWidth<=p.Breakpoints.mobileMax,shouldShowMobileSort:!1},a}return n(t,e),t.prototype.initForDatasetTab=function(){this.availableSelectionGroups=[{value:"featured",label:"Featured"},{value:"all",label:"All"}],c.Current.isAnonymous||(this.props.canSeeUnfeaturedTab&&this.availableSelectionGroups.push({value:"unfeatured",label:"Unfeatured"}),(this.props.canCreateNewDataset||this.props.userId)&&this.availableSelectionGroups.push({value:"my",label:"Mine"}),this.availableSelectionGroups.push({value:"upvoted",label:"Upvoted"}))},t.prototype.initForProfile=function(){this.availableSelectionGroups=[{value:"my",label:"Mine"},{separator:!0},{value:"upvoted",label:"Upvoted"}]},t.prototype.componentDidMount=function(){window.Intercom("trackEvent","view_datasets"),this.props.datasetListItems||this.onFilterChanged(this.state.sortBy,this.state.selectionGroup,!1)},t.prototype.componentWillMount=function(){window.addEventListener("resize",this.handleResize,!1),window.addEventListener("popstate",this.onWindowPopState,!1),window.addEventListener("beforeunload",this.handleBeforeUnload,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize,!1),window.removeEventListener("popstate",this.onWindowPopState,!1),window.removeEventListener("beforeunload",this.handleBeforeUnload,!1)},t.prototype.onSortByChanged=function(e){this.onFilterChanged(e,this.state.selectionGroup,!0)},t.prototype.onSelectionGroupChanged=function(e){this.onFilterChanged(this.state.sortBy,e,!0)},t.prototype.onFilterChanged=function(e,t,a){var n=this;this.container&&(this.container.style.minHeight=$(this.container).height()+"px"),this.setState({page:1,datasetListItems:[],hasLoadedSomeData:!1,isLoadingMoreData:!0,hasMoreData:!0,sortBy:"upvoted"==t&&"relevance"==e?"hottest":e,selectionGroup:t},function(){var e=window.history.state||{};e.datasetListFilterState=n.getFilterParams();var t=window.location.pathname+"?"+$.param(e.datasetListFilterState);a&&window.history.pushState(e,null,t),n.getData(e.datasetListFilterState).then(function(){n.container.style.minHeight="initial"})})},t.prototype.onScroll=function(){var e=this;!this.state.isLoadingMoreData&&this.state.hasMoreData&&this.setState({isLoadingMoreData:!0,page:this.state.page+1},function(){var t=e.getFilterParams();e.getData(t)})},t.prototype.logSearchAction=function(e,t,a){this.state.search&&$.ajax({url:"/search/log",type:"POST",data:{index:"datasets",isQuick:!1,q:this.state.search,isSuccess:null!=e&&null!=t,rank:a,id:e,url:t}})},t.prototype.getFilterParams=function(){var e={sortBy:this.state.sortBy,group:this.state.selectionGroup};return this.props.userId&&(e.userId=this.props.userId,e.group="upvoted"===e.group?"upvoted":"my"),1!==this.state.page&&(e.page=this.state.page),this.state.search&&"upvoted"!=this.state.selectionGroup&&(e.search=this.state.search),e},t.prototype.getData=function(e){var t=this;return this.currentDataRequest&&4!==this.currentDataRequest.readyState&&this.currentDataRequest.abort(),this.currentDataRequest=$.ajax({url:"/datasets.json?"+$.param(e),method:"GET",success:function(e){var a=t.state.datasetListItems.concat(e.datasetListItems);return t.setState({datasetListItems:a,totalDatasetListItems:e.totalDatasetListItems,isLoadingMoreData:!1,hasLoadedSomeData:a.length>0,hasMoreData:a.length<e.totalDatasetListItems})}}),this.currentDataRequest},t.prototype.getSelectionGroupItems=function(){var e=this;return this.availableSelectionGroups.map(function(t,a){return t.separator?{separator:!0}:{name:t.label,key:t.value,href:"?sortBy="+e.state.sortBy+"&group="+t.value,action:function(){e.onSelectionGroupChanged(t.value)}}})},t.prototype.getTitle=function(){if(this.state.isLoadingMoreData)return" ";var e="";switch(this.state.selectionGroup){case"featured":e="featured datasets";break;case"unfeatured":e="unfeatured datasets";break;case"my":e="datasets created";break;case"upvoted":e="upvoted datasets";break;case"all":e="datasets"}return(this.state.totalDatasetListItems||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" "+e},t.prototype.getAvailableSortingOrders=function(){var e=[{value:"hottest",label:"Hotness"},{value:"votes",label:"Most Votes"},{value:"updated",label:"Recently Updated"},{value:"active",label:"Recently Active"}];return this.state.search&&e.push({value:"relevance",label:"Relevance"}),e},t.prototype.renderSortBy=function(){var e=this;return React.createElement("div",{className:""},this.state.shouldUseMobileSort?React.createElement("a",{className:"datasets__filters-link--mobile",onClick:function(){return e.showMobileSortMenu(!0)}},"Filter/Sort ",React.createElement("span",{className:"fa fa-chevron-right"})):React.createElement("div",{className:"datasets__filters"},React.createElement("p",{className:"datasets__filters-label"},"Sort By"),React.createElement(r.SelectBox,{options:this.getAvailableSortingOrders(),onChange:function(t){return e.onSortByChanged(t)},searchable:!1,value:this.state.sortBy})))},t.prototype.renderOptionalLoadingMessage=function(){return this.state.isLoadingMoreData?React.createElement("div",{className:"script-list-react__message"},"Loading ",this.state.hasLoadedSomeData?"more ":"","datasets..."):null},t.prototype.renderOptionalNoMoreScriptsMessage=function(){return!this.state.hasMoreData&&(0===this.state.datasetListItems.length||this.state.datasetListItems.length>m)?React.createElement("div",{className:"script-list-react__message"},React.createElement("span",null,"No ",this.state.hasLoadedSomeData?"more ":"","datasets to show ¯\\_(ツ) _/¯"),React.createElement("br",null)):null},t.prototype.renderSearch=function(e){return React.createElement("label",{className:"datasets__search-wrapper datasets__search-wrapper--"+e,style:{display:"upvoted"==this.state.selectionGroup?"none":""}},React.createElement("input",{type:"text",className:"datasets__search datasets__search--"+e,ref:"search",defaultValue:this.props.search,onChange:this.onSearchChange}))},t.prototype.renderSubTitleBar=function(){return React.createElement(o.SelectionGroup,{children:this.getSelectionGroupItems(),selected:this.state.selectionGroup,filters:React.createElement(p.MediaQuery,{minWidth:p.Breakpoints.mobileMax+1},this.renderSearch("sub-title-bar"))})},t.prototype.showMobileSortMenu=function(e){this.setState({shouldShowMobileSort:e})},t.prototype.renderMobileSortMenu=function(){var e=this;return React.createElement(u.OffCanvasContainer,{closeButtonCallback:function(){return e.showMobileSortMenu(!1)},shouldShowOffCanvas:this.state.shouldShowMobileSort&&this.state.shouldUseMobileSort,shouldUseCloseButton:!0,shouldUseRightSide:!0},React.createElement("div",{className:"datasets__filters--mobile"},React.createElement("p",{className:"datasets__filters-label--mobile"},"Sort By"),React.createElement(r.SelectBox,{className:"datasets__filter--mobile",options:this.getAvailableSortingOrders(),onChange:function(t){e.onSortByChanged(t),e.showMobileSortMenu(!1)},searchable:!1,value:this.state.sortBy})),this.renderSearch("off-canvas"))},t.prototype.handleNewDatasetClick=function(){goog_report_conversion()},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"datasets",ref:function(t){return e.container=t}},this.props.banner?React.createElement(s.Banner,{title:"Datasets",infoTitle:"Welcome to Kaggle Datasets",infoSubtitle:"The best place to discover and seamlessly analyze open data",infoBanner:this.props.banner,bannerImageClassName:"datasets__banner-image",callToActionText:"Learn More",callToActionUrl:"/datasets/about",onCallToActionClick:null,callToActionText2:"New Dataset",callToActionUrl2:"/datasets/new",onCallToActionClick2:this.handleNewDatasetClick,hideCallToActionOnSmallDisplays:!0,panels:[{imageSrc:"/static/images/datasets-1-search@2x.png",title:"Discover",description:"Use the search box to find open datasets on everything from government, health, and science to popular games and dating trends."},{imageSrc:"/static/images/datasets-2-explore@2x.png",title:"Explore",description:React.createElement("span",null,"Execute, share, and comment on code for any open dataset with our in-browser analytics tool, ",React.createElement("a",{href:"/kernels"},"Kaggle Kernels"),". You can also download datasets in an easy-to-read format.")},{imageSrc:"/static/images/datasets-3-create@2x.png",title:"Create a Dataset",description:React.createElement("span",null,"Contribute to the open data movement and connect with other data enthusiasts by clicking “",React.createElement("a",{href:"/datasets/new"},"New Dataset"),"” to publish an open dataset of your own.")}]}):null,React.createElement("div",{className:"datasets__list-wrapper"},React.createElement("div",{className:"datasets__list"},React.createElement(i.ContentBox,{title:this.getTitle(),titleBarRightSide:this.renderSortBy(),subTitleBar:this.renderSubTitleBar()},React.createElement(l.WindowInfiniteScroll,{onScroll:function(){return e.onScroll()}},this.state.datasetListItems.map(function(t,a){return React.createElement(d.DatasetListItem,{key:a,dataset:t,hideIsFeaturedLabel:"featured"==e.state.selectionGroup,onClick:function(){return e.handleClickResult(t.datasetId,t.datasetUrl,a+1)}})}),this.renderOptionalLoadingMessage(),this.renderOptionalNoMoreScriptsMessage())))," ")," ",this.renderMobileSortMenu())},t}(React.Component);t.DatasetListReact=h},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(23),i=a(175),r=a(35),o=a(72),l=a(7),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this.props.dataset.voteButton;return React.createElement("div",{key:this.props.index,className:"dataset-list-item"},React.createElement("a",{className:"dataset-list-item__link",href:this.props.dataset.datasetUrl,onClick:this.props.onClick}),React.createElement("div",{className:"dataset-list-item__images"},React.createElement("div",{className:"dataset-list-item__votes"},React.createElement(s.VoteButton,{totalVotes:e.totalVotes,hasAlreadyVotedDown:e.hasAlreadyVotedDown,hasAlreadyVotedUp:e.hasAlreadyVotedUp,canDownvote:e.canDownvote,canUpvote:e.canUpvote,voteDownUrl:e.voteDownUrl,voteUpUrl:e.voteUpUrl})),React.createElement("div",{className:"dataset-list-item__image-wrapper"},React.createElement("img",{alt:this.props.dataset.title,className:"dataset-list-item__image",src:this.props.dataset.cardImageUrl}),this.props.hideOwnerAvatar?null:React.createElement("a",{className:"dataset-list-item__image--author-link",href:this.props.dataset.ownerUrl},React.createElement("img",{alt:this.props.dataset.ownerName,className:"dataset-list-item__image--author",src:this.props.dataset.ownerAvatarUrl})))),React.createElement("div",{className:"dataset-list-item__info"},React.createElement("a",{className:"dataset-list-item__name",href:this.props.dataset.datasetUrl},React.createElement(i.GroupIcon,{groupSize:this.props.dataset.privateGroupMemberCount}),this.props.dataset.title,this.props.dataset.isHidden&&!this.props.dataset.isFailed?React.createElement(r.Badge,{text:"Hidden",option:"info"}):null,this.props.dataset.isFailed?React.createElement(r.Badge,{text:"Failed",option:"danger"}):null,this.props.dataset.isFeatured&&!this.props.hideIsFeaturedLabel?React.createElement(r.Badge,{text:"Featured",option:"info"}):null),React.createElement("p",{className:"dataset-list-item__summary"},this.props.dataset.overview),React.createElement("p",{className:"dataset-list-item__details"},React.createElement("a",{href:this.props.dataset.ownerUrl,className:"dataset-list-item__details--author"},this.props.dataset.ownerName),"  · updated ",React.createElement(l.TimeAgo,{time:this.props.dataset.dateUpdated}))),React.createElement("div",{className:"dataset-list-item__metadata"},React.createElement("p",{className:"dataset-list-item__metadatum"},React.createElement("span",{className:"dataset-list-item__metadatum--nonlink"},React.createElement(o.Pluralize,{count:this.props.dataset.downloadCount,word:"download",formatNumber:!0}))),React.createElement("p",{className:"dataset-list-item__metadatum"},React.createElement("a",{className:"dataset-list-item__metadatum--link",href:this.props.dataset.scriptsUrl},React.createElement(o.Pluralize,{count:this.props.dataset.scriptCount,word:"kernel",formatNumber:!0}))),React.createElement("p",{className:"dataset-list-item__metadatum"},React.createElement("a",{className:"dataset-list-item__metadatum--link",href:this.props.dataset.forumUrl},React.createElement(o.Pluralize,{count:this.props.dataset.topicCount,word:"comment",formatNumber:!0})))))},t}(React.Component);t.DatasetListItem=c},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(40),r=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.render=function(){for(var e=[],t=3,a=0;a<this.props.forums.length;a+=t)e.push(this.props.forums.slice(a,a+t));var n=0;return React.createElement("div",null,React.createElement(i.Banner,{title:"Discussion",bannerImageClassName:"discussion__banner-image"}),React.createElement("div",{className:"discussion"},React.createElement("div",{className:"discussion__forums"},React.createElement("div",{className:"discussion__forums-header"},"Site Forums"),e.map(function(e){return React.createElement("div",{className:"discussion__forums-row",key:n++},e.map(function(e){return React.createElement(i.BlockLink,{borderless:!0,className:"discussion__forum",href:e.url,key:e.name},React.createElement("img",{className:"discussion__forum-image",src:e.imageUrl}),React.createElement("div",{className:"discussion__forum-title"},React.createElement("span",null,e.name," ",e.isPrivate?React.createElement("span",{className:"fa fa-lock"}):null),React.createElement("span",{className:"discussion__forum-subtitle"},e.subtitle),e.lastPostDate?React.createElement("a",{className:"discussion__forum-last-post",href:e.lastPostUrl},"last post ",React.createElement(i.TimeAgo,{time:e.lastPostDate})):null))}))})),React.createElement(i.Forum,s({},this.props,{isRootLevel:!0,isSitewide:!0,onTopicClicked:function(e){return window.location.href=e.topicUrl}}))))},t}(React.Component);t.Discussion=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(193),i=a(194),r=a(197),o=a(198),l=a(199),c=a(124),p=a(5),u=a(6),d=a(160),m=a(202),h=(a(196)(),a(203).saveAs),g=50,f=function(e){function t(t){var a=e.call(this,t)||this;a.handleAutoSave=function(){a.setState({canSave:!1,lastSavedTime:new Date,wasAutoSaved:!0})},a.handleChangeEvents=function(e){e&&e.length>0&&"load_notebook"===e[0]._type?a.loadAutosaved(a.props.scriptRunId||a.props.sourceScriptRunId):a.setState({editHistory:a.state.editHistory.concat(e)})},a.loadAutosaved=function(e){e&&$.ajax("/redis/autosave/"+e).then(function(e){return a.setState({startingStateIpynb:e})})},a.handleScriptResultMessage=function(e){a.setState({scriptResultMessage:e})},a.handleRedisConnectionError=function(e,t,n){a.redisMessageTimeout&&window.clearTimeout(a.redisMessageTimeout);var s=e;("warning"===t||n&&n>20)&&(s=e+" You can save your work by downloading it to an ipynb file..."),a.setState({redisConnectionMessage:s,redisConnectionMessageType:t}),a.redisMessageTimeout=window.setTimeout(function(){a.setState({redisConnectionMessage:""})},3e3)},a.handleRedisConnectionOk=function(){""!==a.state.redisConnectionMessage&&"success"!==a.state.redisConnectionMessageType&&(a.redisMessageTimeout&&window.clearTimeout(a.redisMessageTimeout),a.setState({redisConnectionMessage:"Reconnected to the server 👍",redisConnectionMessageType:"success"}),a.redisMessageTimeout=window.setTimeout(function(){a.setState({redisConnectionMessage:""})},3e3))},a.kernelLanguageIdToName=function(e){var t=a.props.scriptLanguageTemplates.filter(function(t){return t.languageId==e});return t&&t.length>0?t[0].baseScriptLanguageName:(console.warn("Unknown kernel language id: "+e.toString()),"")},a.kernelLanguageName=function(){return a.state?a.kernelLanguageIdToName(a.state.kernelLanguageId):a.kernelLanguageIdToName(a.props.scriptLanguageId)},a.handleKernelStatusChange=function(e){a.setState({kernelStatus:e})},a.handleChangeCellType=function(e,t){var n=s.UpdateCellEditEvent(e,a.getCellContents(e),t,null);a.setState({editHistory:a.state.editHistory.concat(n)}),a.kernel.sendEditEvent(n,a.serializeCellsToIpynbWithNoOutputs)},a.handleChangeCollapsed=function(e,t){var n=s.UpdateCellEditEvent(e,a.getCellContents(e),null,t);a.setState({editHistory:a.state.editHistory.concat(n)}),a.kernel.sendEditEvent(n,a.serializeCellsToIpynbWithNoOutputs)},a.handleCellExecuteRequest=function(e){a.state.isEditingTitle&&""!==a.state.title&&a.handleTitleEditingStateChanged();var t,n=a.state.editHistory;a.pendingEditEvent&&a.pendingEditEvent._cell_guid===e?(t=a.pendingEditEvent.source,n=n.concat(a.pendingEditEvent),a.pendingEditEvent=null):t=a.getCellContents(e),a.setState({editHistory:n.concat(s.CellExecutionRequest(e))}),a.kernel.executeCell(e,t,a.serializeCellsToIpynbWithNoOutputs),a.hasExecutedCodeCell=!0},a.handlePlayAll=function(){var e=a.serializeCellsToIpynb().cells,t=e.filter(function(e){return"code"===e.cell_type}).map(function(e){return e.metadata._cell_guid});a.state.isEditingTitle&&""!==a.state.title&&a.handleTitleEditingStateChanged(),a.pushNewCellContents().then(function(){a.setState({editHistory:a.state.editHistory.concat(t.map(function(e){return s.CellExecutionRequest(e)}))})}),a.kernel.executeCells(e,a.serializeCellsToIpynbWithNoOutputs),a.hasExecutedCodeCell=!0},a.handleCellCancelRequest=function(e){a.kernel.requestKernelInterrupt()},a.handleCellCancelled=function(){
a.state.busyCellUuid&&a.setState({editHistory:a.state.editHistory.concat(s.MakeCellIdleEditEvent(a.state.busyCellUuid))})},a.handleUpdateTitle=function(e){u.Current.log("Received new title from server: "+e),a.setState({title:e})},a.handleUpdateUrl=function(e){history.replaceState&&history.replaceState({},"",e)},a.handleRedirectToRenderedNotebook=function(){window.location.href+="/../"},a.handleUpdateTitleErrorMessage=function(e){u.Current.log("Received title error: "+e),a.setState({titleErrorText:e})},a.autosave=function(){if(a.kernel&&a.kernel.scriptRunId){var e=JSON.parse(JSON.stringify(a.serializeCellsToIpynb()));e.cells.forEach(function(e){return e.outputs=[]});var t=JSON.stringify(e,null,2);if(a.previousIpynbContent!==t){var n=!e.cells||0===e.cells.length;if(n)return;$.ajax({url:"/redis/autosave/"+a.kernel.scriptRunId,type:"POST",data:JSON.stringify({ipynbContent:t}),processData:!1,contentType:"application/json"}),a.previousIpynbContent=t}}},a.handlePageChange=function(e){if(a.state.hasUnpublishedChanges){var t="Your notebook has unpublished changes. Are you sure you want to leave this page?";return e.returnValue=t,t}return null},a.handleTitleEditingStateChanged=function(){a.state.isEditingTitle?(a.setState({isEditingTitle:!1}),a.kernel.requestNewTitle(a.state.title)):a.setState({isEditingTitle:!0})},a.handleTitleEditorLoseFocus=function(){""!==a.state.title&&a.handleTitleEditingStateChanged()},a.handleLanguageChanged=function(e){var t=+e;if(isNaN(t))return void u.Current.warn("Invalid new language id: "+e);if(t===a.state.kernelLanguageId)return void u.Current.log("No language change needed.");var n=a.serializeCellsToIpynbWithNoOutputs(),s=a.switchLanguageTemplateIfPresent(n,t),i=JSON.stringify(s);a.kernel.changeLanguage(t,i),a.setState({kernelLanguageId:t,startingStateIpynb:i,editHistory:[],kernelInfoText:"",scriptResultMessage:""})},a.handlePrivacyChanged=function(){a.setState({isShowingPrivacyModal:!0})},a.handleChangeToPublic=function(){a.setState({isPrivate:!1})},a.handleRestartKernel=function(){var e=a.serializeCellsToIpynbWithNoOutputs(),t=JSON.stringify(e);a.kernel.changeLanguage(a.state.kernelLanguageId,t),a.setState({startingStateIpynb:t,editHistory:[],kernelInfoText:"",scriptResultMessage:""})},a.handleTitleChanged=function(e){a.setState({title:e,titleErrorText:""})},a.handleTitleEditorGainFocus=function(){a.setState({titleEditorHasFocus:!0})},a.handleRenderHtml=function(){var e=!0;a.kernel.requestRenderingHtml(!e,a.pendingEditEvent),a.setState({scriptResultMessage:"",hasUnpublishedChanges:!1,editHistory:a.state.editHistory.concat(a.pendingEditEvent)})},a.handleRenderRequestError=function(e){a.setState({titleErrorText:e})},a.handleUploadIpynb=function(e){a.deleteAllCellsOnServer();var t=e.target.files[0],n=new FileReader;n.onload=function(e){var t=a.parseIpynbFile(e.target.result);a.sendNewCellsToServer(t)},n.readAsText(t)},a.handleDownloadIpynb=function(){var e=a.serializeCellsToIpynb();e.cells=e.cells.map(function(e){return{cell_type:e.cell_type,source:e.source,execution_count:e.execution_count,outputs:e.outputs,metadata:{}}});var t=new Blob([JSON.stringify(e,null,2)],{type:"text/plain;charset=utf-8"});h(t,"notebook.ipynb",!0)},a.handleKernelSpecChange=function(e,t){a.setState({kernelMetadata:{kernelspec:e,language_info:t},kernelInfoText:t.version})},a.updateActiveCellProperties=function(e,t,n){a.setState({activeCellUuid:e,activeCellIsCollapsed:t,activeCellType:n})},a.updateBusyCellProperties=function(e){a.setState({busyCellUuid:e})},a.updateCellCount=function(e){a.setState({nTotalCells:e})},a.handleInsertActivatedCellBefore=function(e){a.handleInsertActivatedCell(null,e)},a.handleInsertActivatedCellAfter=function(e){void 0===e&&(e=null),a.handleInsertActivatedCell(e,null)},a.handleInsertActivatedCell=function(e,t){var n=s.InsertCellEditEvent(s.strictlyFormattedUuid(),e,!1,s.NotebookCellType.Code,"",t),i=s.ActivateCellEditEvent(n._cell_guid);a.setState({editHistory:a.state.editHistory.concat([n,i])}),a.kernel.sendEditEvents([n,i],a.serializeCellsToIpynbWithNoOutputs)},a.insertMarkdownCellAtStart=function(){var e=s.InsertCellEditEvent(s.strictlyFormattedUuid(),null,!1,s.NotebookCellType.Markdown,"",a.state.firstCellUuid),t=s.ActivateCellEditEvent(e._cell_guid);a.setState({editHistory:a.state.editHistory.concat([e,t])}),a.kernel.sendEditEvents([e,t],a.serializeCellsToIpynbWithNoOutputs)},a.handleDeleteCell=function(e){confirm("Delete cell?")&&a.registerEditEvent(s.DeleteCellEditEvent(e))},a.handleNewCellContents=function(e,t,n){a.pendingEditEvent&&a.pendingEditEvent._cell_guid===e?a.pendingEditEvent.source=t||"":a.pendingEditEvent?(a.pushNewCellContents(),a.pendingEditEvent=s.UpdateCellEditEvent(e,t,n,!1)):a.pendingEditEvent=s.UpdateCellEditEvent(e,t,n,!1),a.setState({canSave:!0,hasUnpublishedChanges:!0})},a.pushNewCellContents=function(){var e=jQuery.Deferred();return a.pendingEditEvent?(a.setState({editHistory:a.state.editHistory.concat(a.pendingEditEvent),canSave:!1,lastSavedTime:new Date},function(){return e.resolve()}),a.kernel.sendEditEvent(a.pendingEditEvent,a.serializeCellsToIpynbWithNoOutputs),a.pendingEditEvent=null):e.resolve(),e},a.handleActivateCell=function(e){a.pushNewCellContents().then(function(){a.setState({editHistory:a.state.editHistory.concat(s.ActivateCellEditEvent(e))})})},a.handleDeactivateCell=function(e){a.pushNewCellContents().then(function(){a.setState({editHistory:a.state.editHistory.concat(s.DeactivateCellEditEvent(e))})})},a.handleDocumentClick=function(e){var t=["notebook-editor","notebook-editor__notebook-contents","notebook-editor__cells-container","content-box__content-section"];-1!==t.indexOf(e.target.className)&&a.deactivateActiveCell()},a.deactivateActiveCell=function(){a.state.activeCellUuid&&a.handleDeactivateCell(a.state.activeCellUuid)},a.updateInputFileMetadata=function(e,t,n){if(a.props.updateInputMetadataUrl){var s={fileName:e,columns:[{fileName:e,columnIndex:t,description:n.description,dataType:n.harmonizedDataType}]};$.ajax({url:a.props.updateInputMetadataUrl,type:"PATCH",processData:!1,contentType:"application/json",dataType:"text",data:JSON.stringify(s),success:function(e){e&&d.PageMessages.error("Your description could not be saved: "+e,{clear:!0})},error:function(){d.PageMessages.error("Sorry, there was a problem saving your update.",{clear:!0})}})}},a.onDataSourcesChanged=function(e,t){a.setState({dataSources:t},function(){a.handleRestartKernel()})};var n=!a.props.scriptId||a.props.scriptId<=0,o=a.props.scriptRunId&&a.props.scriptRunId>0;a.state={kernelLanguageId:a.props.scriptLanguageId,kernelStatus:s.KernelStatus.Initializing,startingStateIpynb:"",editHistory:n||a.props.loadNotebookPending?a.getInitialEdits():[],title:a.props.existingTitle||"",isEditingTitle:a.props.existingTitle&&!a.props.forkParentScriptVersionId?!1:!0,titleErrorText:"",canUndo:!1,canRedo:!1,kernelMetadata:{kernelspec:{name:"python"},language_info:{name:"python",version:"3.5.1"}},kernelInfoText:"",canSave:!1,hasUnpublishedChanges:!1,lastSavedTime:null,wasAutoSaved:!1,titleEditorHasFocus:!1,activeCellUuid:null,activeCellIsCollapsed:null,activeCellType:null,busyCellUuid:null,hasCodeCell:!0,hasNonEmptyCell:!0,nTotalCells:0,redisConnectionMessage:"",redisConnectionMessageType:"success",scriptResultMessage:"",downloadDataMessage:null,isInKeyboardShortcutCommandMode:!1,firstCellIsMarkdown:!1,firstCellUuid:null,isPrivate:a.props.isPrivate,scriptId:a.props.scriptId||null,dataSources:a.props.dataSources};var l={initialScriptId:a.props.scriptId,initialTitle:a.props.existingTitle&&""!==a.props.existingTitle?a.props.existingTitle:null,initialScriptRunId:a.props.scriptRunId,initialLanguageId:a.props.scriptLanguageId,scriptProjectId:a.props.scriptProjectId,readOnly:a.props.readOnly,onKernelStatusChange:function(e){a.setState({kernelStatus:e})},onUpdateTitle:a.handleUpdateTitle,onUpdateUrl:a.handleUpdateUrl,onUpdateScriptId:function(e){a.setState({scriptId:e})},onUpdateTitleErrorMessage:a.handleUpdateTitleErrorMessage,onKernelSpecChange:a.handleKernelSpecChange,initialEditEvents:a.state.editHistory,onSave:a.handleAutoSave,onRedirectToRenderedNotebook:a.handleRedirectToRenderedNotebook,receiveChanges:a.handleChangeEvents,onConnectionOk:a.handleRedisConnectionOk,onConnectionProblem:a.handleRedisConnectionError,onDataDownloadUpdate:function(e){return a.setState({downloadDataMessage:e})},onExecutionCancelRequestSent:a.handleCellCancelled,onKernelResultMessage:a.handleScriptResultMessage,isDataset:a.props.isDataset};a.kernel=new i.NotebookKernelDispatcher(l),o?(a.loadAutosaved(a.kernel.scriptRunId),a.connectToExistingScriptRun()):a.kernel.startKernel(a.props.forkParentScriptVersionId,a.props.sourceScriptRunId).then(function(){return a.loadAutosaved(a.kernel.scriptRunId)}),window.setInterval(a.pushNewCellContents,6e4);var c={onChangedToEditMode:function(){a.setState({isInKeyboardShortcutCommandMode:!1})},onChangedToCommandMode:function(){a.setState({isInKeyboardShortcutCommandMode:!0})},onInsertCellAbove:function(){a.state.activeCellUuid&&a.handleInsertActivatedCellBefore(a.state.activeCellUuid)},onInsertCellBelow:function(){a.state.activeCellUuid&&a.handleInsertActivatedCellAfter(a.state.activeCellUuid)},onSave:function(){},onCancelExecution:function(){return a.handleCellCancelRequest(a.state.activeCellUuid)},onMakeCodeCell:function(){return a.handleChangeCellType(a.state.activeCellUuid,s.NotebookCellType.Code)},onMakeMarkdownCell:function(){return a.handleChangeCellType(a.state.activeCellUuid,s.NotebookCellType.Markdown)},onDeleteCell:function(){return a.handleDeleteCell(a.state.activeCellUuid)}};return a.shortcuts=new r.NotebookKeyboardShortcutter(c),document.addEventListener("keydown",a.shortcuts.handleKeyDown,!0),a.props.url&&""!==a.props.url&&a.handleUpdateUrl(a.props.url),a}return n(t,e),t.prototype.getInitialEdits=function(){if(this.props.loadNotebookPending)return[];var e=s.InsertCellEditEvent(s.strictlyFormattedUuid(),null);return this.props.templateText&&""!==this.props.templateText&&(e.source=this.props.templateText),[e]},t.prototype.connectToExistingScriptRun=function(){this.kernel.subscribeToRedisKeys(0)},t.prototype.stopCellExecution=function(e){this.kernel.cancelCellExecution()},t.prototype.componentDidMount=function(){this.kernel.containerDidMount(),document.addEventListener("click",this.handleDocumentClick,!1),window.addEventListener("beforeunload",this.handlePageChange),this.autosaveIntervalHandle=window.setInterval(this.autosave.bind(this),5e3)},t.prototype.componentWillUnmount=function(){this.kernel.containerWillUnmount(),document.removeEventListener("keydown",this.shortcuts.handleKeyDown,!0),document.removeEventListener("click",this.handleDocumentClick,!1),window.removeEventListener("beforeunload",this.handlePageChange),clearInterval(this.autosaveIntervalHandle)},t.prototype.componentDidUpdate=function(){this.state.editHistory.length>g&&this.setState({startingStateIpynb:JSON.stringify(this.serializeCellsToIpynb()),editHistory:[]})},t.prototype.switchLanguageTemplateIfPresent=function(e,t){var a=this.props.scriptLanguageTemplates.map(function(e){return e.languageId}).indexOf(this.state.kernelLanguageId),n=this.props.scriptLanguageTemplates.map(function(e){return e.languageId}).indexOf(t),s=this.props.scriptLanguageTemplates[a].template,i=e.cells.map(function(e){return e.source}).indexOf(s);return-1===i?(u.Current.log("No language template found."),e):(u.Current.log("Swapping language template."),e.cells[i].source=this.props.scriptLanguageTemplates[n].template,e)},t.prototype.parseIpynbFile=function(e){var t=JSON.parse(e);return t.cells.forEach(function(e){e.metadata.hasOwnProperty("_cell_guid")||(e.metadata._cell_guid=s.strictlyFormattedUuid()),e.metadata.hasOwnProperty("_active")||(e.metadata._active=!1)}),this.setState({startingStateIpynb:JSON.stringify(t),editHistory:[]}),t.cells},t.prototype.deleteAllCellsOnServer=function(){var e=this.serializeCellsToIpynb().cells;this.kernel.sendEditEvents(e.map(function(e){return s.DeleteCellEditEvent(e.metadata._cell_guid)}),this.serializeCellsToIpynbWithNoOutputs)},t.prototype.sendNewCellsToServer=function(e){this.kernel.sendEditEvents(e.map(function(t,a){return s.InsertCellEditEvent(t.metadata._cell_guid,a>0?e[a-1].metadata._cell_guid:null,t.metadata.collapsed,"code"===t.cell_type?s.NotebookCellType.Code:s.NotebookCellType.Markdown,t.source)}),this.serializeCellsToIpynbWithNoOutputs)},t.prototype.updateCellProperties=function(e,t){this.setState({hasCodeCell:e,hasNonEmptyCell:t})},t.prototype.registerEditEvent=function(e){this.pendingEditEvent?(this.setState({editHistory:this.state.editHistory.concat([this.pendingEditEvent,e])}),this.kernel.sendEditEvents([this.pendingEditEvent,e],this.serializeCellsToIpynbWithNoOutputs),this.pendingEditEvent=null):(this.setState({editHistory:this.state.editHistory.concat(e)}),this.kernel.sendEditEvent(e,this.serializeCellsToIpynbWithNoOutputs))},t.prototype.renderHeader=function(){var e=this,t=this.state.kernelStatus===s.KernelStatus.RenderingHtml,a=this.props.readOnly||t,n=null;""!==this.state.titleErrorText&&(n=(n||[]).concat({type:"error",message:this.state.titleErrorText})),""!==this.state.redisConnectionMessage&&(n=(n||[]).concat({type:this.state.redisConnectionMessageType,message:this.state.redisConnectionMessage})),""!==this.state.scriptResultMessage&&(n=(n||[]).concat({type:"error",message:this.state.scriptResultMessage}));var i=this.props.scriptLanguageTemplates.map(function(e){return{label:e.baseScriptLanguageName,value:e.languageId.toString()}});a&&(i=i.filter(function(t){return t.value===e.state.kernelLanguageId.toString()}));var r=""===this.state.title,l=this.state.titleErrorText&&""!==this.state.titleErrorText,c=!(r||l||a||this.state.isEditingTitle||this.state.kernelStatus!==s.KernelStatus.Running),p="Render the notebook as a new HTML page";r?p="You must enter a title before saving a complete run.":this.state.isEditingTitle&&(p="You must finish editing the title before saving a complete run.");var u=function(){return e.handleInsertActivatedCellAfter(e.state.activeCellUuid)},d=this.state.kernelStatus!==s.KernelStatus.RestartingKernel;return React.createElement(o.NotebookHeader,{readOnly:a,activeCellUuid:this.state.activeCellUuid,activeCellIsCollapsed:this.state.activeCellIsCollapsed,activeCellType:this.state.activeCellType,availableLanguageChoices:i,busyCellUuid:this.state.busyCellUuid,canDownloadIpynb:this.state.hasNonEmptyCell,canExecuteActiveCell:this.state.activeCellType===s.NotebookCellType.Code&&this.state.kernelStatus===s.KernelStatus.Running,canExecuteAll:this.state.hasCodeCell&&this.state.kernelStatus===s.KernelStatus.Running,canRenderHtml:c,canRestartKernel:d,isEditingTitle:this.state.isEditingTitle,kernelInfoLine:this.state.kernelInfoText,kernelLanguageDropdownValue:this.state.kernelLanguageId.toString(),kernelLanguageName:this.kernelLanguageName(),kernelStatus:this.state.kernelStatus,canSave:this.state.canSave,lastSavedTime:this.state.lastSavedTime,wasAutoSaved:this.state.wasAutoSaved,nTotalCells:this.state.nTotalCells,onAddCell:u,onCancel:this.handleCellCancelRequest,onChangeCellType:this.handleChangeCellType,onDelete:this.handleDeleteCell,onDownloadIpynb:this.handleDownloadIpynb,onExecute:this.handleCellExecuteRequest,onExecuteAll:this.handlePlayAll,onLanguageChanged:this.handleLanguageChanged,onPrivacyChanged:this.handlePrivacyChanged,onRenderHtml:this.handleRenderHtml,onRenderHtmlRequestError:this.handleRenderRequestError,onRestartKernel:this.handleRestartKernel,onTitleChanged:this.handleTitleChanged,onTitleEditingStateChanged:this.handleTitleEditingStateChanged,onTitleEditorGainFocus:this.handleTitleEditorGainFocus,onTitleEditorLoseFocus:this.handleTitleEditorLoseFocus,onChangeCollapsed:this.handleChangeCollapsed,onUploadIpynb:this.handleUploadIpynb,pageMessages:n,renderHtmlToolTipText:p,title:this.state.title,isPrivate:this.state.isPrivate,scriptId:this.state.scriptId,onChangeToPublic:this.handleChangeToPublic,imageUrl:this.props.imageUrl})},t.prototype.render=function(){var e=this,t=this.props.readOnly||this.state.kernelStatus===s.KernelStatus.RenderingHtml,a=null;t||this.state.firstCellIsMarkdown||(a=React.createElement("div",{className:"notebook-editor__add-description-prompt",onClick:this.insertMarkdownCellAtStart},React.createElement("div",{className:"notebook-editor__add-description-prompt-inner"},"Click here to add an introduction.")));var n=this.state.kernelStatus===s.KernelStatus.Running,i=null;return this.props.hasMultipleDataSourcesEnabled&&0===this.state.dataSources.length?i=React.createElement(p.ContentBox,null,React.createElement(m.AddDataSourceBanner,{scriptVersionId:this.props.scriptRunId,onDataSourceAdded:this.onDataSourcesChanged})):(this.props.inputFiles&&this.props.inputFiles.length>0||this.props.dataSources&&this.props.dataSources.length>0)&&(i=React.createElement(p.CollapsibleContentBox,{title:"Input Files",initiallyCollapsed:!0},React.createElement(c.FilePreviewList,{files:this.props.inputFiles,dataSources:this.state.dataSources,userCanEditMetadata:!u.Current.isAnonymous&&this.props.isDataset,onMetadataChange:this.props.updateInputMetadataUrl?this.updateInputFileMetadata:null,onDataSourceAdded:this.handleRestartKernel,onDataSourceRemoved:this.handleRestartKernel,scriptVersionId:this.kernel.scriptRunId,hasMultipleDataSourcesEnabled:this.props.hasMultipleDataSourcesEnabled}))),React.createElement("div",{className:"notebook-editor"},this.renderHeader(),React.createElement("div",{className:"notebook-editor__notebook-contents"},this.state.downloadDataMessage&&""!==this.state.downloadDataMessage?React.createElement(v,{message:this.state.downloadDataMessage}):null,i,React.createElement(p.ContentBox,{title:"Notebook"},a,React.createElement(l.NotebookCellsContainer,{startingStateIpynb:this.state.startingStateIpynb,editHistory:this.state.editHistory,kernelMetadata:this.state.kernelMetadata,kernelLanguageName:this.kernelLanguageName(),isReadOnly:t,isInCommandMode:this.state.isInKeyboardShortcutCommandMode,canExecute:n,registerGetIpynb:function(t){e.serializeCellsToIpynb=t},registerGetIpynbWithNoOutputs:function(t){e.serializeCellsToIpynbWithNoOutputs=t},registerGetCellContents:function(t){e.getCellContents=t},onUpdateNumberOfCells:this.updateCellCount,onChangeActiveCell:this.updateActiveCellProperties,onChangeBusyCell:this.updateBusyCellProperties,onAppendActivatedCell:function(){return e.handleInsertActivatedCellAfter(null)},onNewCellContents:this.handleNewCellContents,onChangeCellType:this.handleChangeCellType,onChangeCollapsed:this.handleChangeCollapsed,onAutocomplete:this.state.kernelStatus===s.KernelStatus.Running?this.kernel.requestAutocomplete:function(){},onExecuteCell:this.state.kernelStatus===s.KernelStatus.Running?this.handleCellExecuteRequest:function(){},onActivateCell:this.handleActivateCell,onDeactivateCell:this.handleDeactivateCell,onDeleteCell:this.handleDeleteCell,onAddAbove:this.handleInsertActivatedCellBefore,onAddBelow:this.handleInsertActivatedCellAfter,onUpdateFirstCellIsMarkdown:function(t){e.setState({firstCellIsMarkdown:t})},onUpdateFirstCellUuid:function(t){e.setState({firstCellUuid:t})}}),React.createElement("div",{className:"notebook-editor__new-block-prompt",onClick:function(){return e.handleInsertActivatedCell(null,null)}},React.createElement("span",{className:"fa fa-plus-square"}),"Add a new text or code cell here"),this.state.isPrivate?null:React.createElement("div",{className:"notebook-editor__license-publish-info"},"Code in this notebook will be released under the ",React.createElement("a",{href:"http://www.apache.org/licenses/LICENSE-2.0"}," Apache 2.0 ")," open source license when you click Publish, or after 20 minutes of idle time."))))},t}(React.Component);t.NotebookEditor=f;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.shouldComponentUpdate=function(e){return!e.message!=!this.props.message?!0:e.message&&e.message!==this.props.message},t.prototype.render=function(){return React.createElement(p.ContentBox,{title:"Preparing Worker"},React.createElement("div",{className:"notebook-editor__download-data-message"},this.props.message))},t}(React.Component)},function(e,t,a){"use strict";function n(e,t){var a=C.keys(t),n=C.keys(e);return a.length!==n.length?!1:!n.some(function(a){return!C.has(t,a)||"function"!=typeof t[a]&&"object"!=typeof t[a]&&e[a]&&t[a]!==e[a]||"function"==typeof t[a]&&e[a]&&t[a].toString()!==e[a].toString()})}function s(e,t){var a=Array(t+1).join("0");return(a+e).slice(-t)}function i(e){if(C.has(e,"_type")&&e._type===t.KernelInfoResponseType)return!1;if(!C.has(e,"_guid"))return!1;var a=e._guid.substr(e._guid.length-x-M.length-1,M.length);return M===a}function r(e){return!i(e)}function o(){var e=s((T++).toString(16),x);return P+"-"+M+"-"+e}function l(e,a,n,s,i,r){return void 0===n&&(n=!1),void 0===s&&(s=S.Code),void 0===i&&(i=""),void 0===r&&(r=null),{_type:t.InsertCellEditEventType,_guid:o(),_cell_guid:e,_below_cell_guid:a,_above_cell_guid:r,collapsed:n,cell_type:s===S.Code?"code":"markdown",source:i}}function c(e,a){return{_type:t.AppendCellEditEventType,_guid:o(),_cell_guid:e,source:a}}function p(e){return{_type:t.DeleteCellEditEventType,_guid:o(),_cell_guid:e}}function u(e){return{_type:t.ActivateCellEditEventType,_guid:o(),_cell_guid:e}}function d(e){return{_type:t.DeactivateCellEditEventType,_guid:o(),_cell_guid:e}}function m(e,a,n,s){var i={_type:t.UpdateCellEditEventType,_guid:o(),_cell_guid:e};return null!=n&&(i.cell_type=n===S.Code?"code":"markdown"),null!=a&&(a instanceof Array?i.source=a.join("\n"):i.source=a),null!=s&&(i.collapsed=s),i}function h(e){return{_type:t.UpdateCellEditEventType,_guid:o(),_cell_guid:e,execution_state:"idle"}}function g(e,t){return{_type:"complete_request",_guid:o(),code:e,cursor_pos:t}}function f(e){return{_type:"execute_cell",_guid:o(),_cell_guid:e}}function v(){return{_guid:o(),_type:"interrupt_kernel"}}function y(){return{_guid:o(),_type:"close_notebook",nbconvert:"full"}}function _(){return{_guid:o(),_type:"close_notebook",nbconvert:null}}function b(){return{_guid:o(),_type:"snapshot_notebook_request"}}function E(){return R(8)+"-"+R(4)+"-"+R(4)+"-"+R(4)+"-"+R(12)}function R(e){void 0===e&&(e=40);for(var t="",a=0;e>a;a++)t+=(16*Math.random()|0).toString(16);return t}var w=a(6),C=a(24);t.propsAreShallowEqual=n;var S;!function(e){e[e.Code=0]="Code",e[e.Markdown=1]="Markdown"}(S=t.NotebookCellType||(t.NotebookCellType={}));var N;!function(e){e[e.Idle=0]="Idle",e[e.Busy=1]="Busy"}(N=t.CellExecutionStatus||(t.CellExecutionStatus={}));var k;!function(e){e[e.Initializing=0]="Initializing",e[e.Requested=1]="Requested",e[e.Queued=2]="Queued",e[e.Starting=3]="Starting",e[e.Running=4]="Running",e[e.Error=5]="Error",e[e.Stopped=6]="Stopped",e[e.DownloadingData=7]="DownloadingData",e[e.LostHeartbeat=8]="LostHeartbeat",e[e.Reconnecting=9]="Reconnecting",e[e.RenderingHtml=10]="RenderingHtml",e[e.RestartingKernel=11]="RestartingKernel"}(k=t.KernelStatus||(t.KernelStatus={}));var T=0,M=R(4)+"-"+R(4)+"-"+R(4),x=12,P=s((w.Current.userId||0).toString(16),8);t.ThisClientSent=i,t.NotFromThisClient=r,t.messageUuid=o,t.LoadNotebookEditEventType="load_notebook",t.InsertCellEditEventType="insert_cell",t.InsertCellEditEvent=l,t.AppendCellEditEventType="append_cell",t.AppendCellEditEvent=c,t.DeleteCellEditEventType="delete_cell",t.DeleteCellEditEvent=p,t.ActivateCellEditEventType="activate_cell",t.ActivateCellEditEvent=u,t.DeactivateCellEditEventType="deactivate_cell",t.DeactivateCellEditEvent=d,t.UpdateCellEditEventType="update_cell",t.UpdateCellEditEvent=m,t.MakeCellIdleEditEvent=h,t.AutocompleteRequest=g,t.CellExecutionRequestType="execute_cell",t.CellExecutionRequest=f,t.KernelInfoResponseType="kernel_info",t.InterruptKernelType="interrupt_kernel",t.InterruptKernelRequest=v,t.CloseNotebookType="close_notebook",t.CloseNotebookRequest=y,t.CloseNotebookForLanguageChangeRequest=_,t.SerializeNotebookType="snapshot_notebook_request",t.SerializeNotebookRequest=b,t.strictlyFormattedUuid=E,t.uuid=R},function(e,t,a){"use strict";var n,s=a(193),i=a(195),r=a(6),o=a(24);!function(e){e[e.Ok=0]="Ok",e[e.NotFound=1]="NotFound",e[e.Stopped=2]="Stopped"}(n||(n={}));var l=function(){function e(e){var t=this;this.hasRecordedIntercomEvent=!1,this.handleAjaxError=function(e,t,a){alert(a)},this.handleRedisInterfaceStateChange=function(e){e===i.InterfaceState.PollingUntilReconnected?(t.props.onConnectionProblem("Relocating the Kaggle mothership...","warning",0),t.updateStatus(s.KernelStatus.Reconnecting)):e===i.InterfaceState.GivenUp?(t.props.onConnectionProblem("Critical connection problem. Time to download an ipynb copy and refresh the page. Sorry! :^(","error",0),t.updateStatus(s.KernelStatus.Error)):t.props.onConnectionOk()},this.updatePrivateStatus=function(e){t.kernelStatus=e},this.updateParentStatus=function(e){t.kernelStatus=e,t.props.onKernelStatusChange(e)},this.processKernelStartupResult=function(e){var a=JSON.parse(e);return a.ErrorMessage?void("Invalid script language"===a.ErrorMessage&&11===t.kernelLanguage?alert("Sorry, Julia notebooks are temporariliy unavailable."):alert(a.ErrorMessage)):(r.Current.log("Received ScriptId: "+a.ScriptId+" and ScriptRun id: "+a.ScriptRunId),t.scriptId=a.ScriptId,t.scriptRunId=a.ScriptRunId,t.updateStatus(s.KernelStatus.Queued),t.subscribeToRedisKeys(0),r.Current.log("Updating Url: '"+a.NewUrl+"'"),t.props.onUpdateUrl(a.NewUrl),void t.props.onUpdateScriptId(a.ScriptId))},this.processStatusResult=function(e){t.props.onConnectionOk();var a=e.map(function(e){return JSON.parse(e)});if(r.Current.log("Status: "),r.Current.log(a),t.kernelStatus===s.KernelStatus.RenderingHtml)return void(a.some(function(e){return"done"===e.complete||"done"===e.running})&&t.props.onRedirectToRenderedNotebook());var n=a[a.length-1];if("done"===n.assigned&&t.updateStatus(s.KernelStatus.Initializing),"Acquiring resources"in n){if(t.updateStatus(s.KernelStatus.DownloadingData),"object"==typeof n["Acquiring resources"]){var i=n["Acquiring resources"],o=!1;if("dataset"in i){var l="";for(var c in i.dataset)l+=c+": "+i.dataset[c]+"\n","done"!==i.dataset[c]&&(o=!0);o&&t.props.onDataDownloadUpdate(l.trim())}}}else t.props.onDataDownloadUpdate(null);"started"===n.running&&t.kernelStatus!==s.KernelStatus.Running&&t.updateStatus(s.KernelStatus.Starting),a.some(function(e){return"done"===e.complete||"done"===e.running})&&(window.clearTimeout(t.heartbeatWarningTimeout),t.updateStatus(s.KernelStatus.Stopped),t.unsubscribeFromRedisKeys(),t.kernelHasStarted=!1,t.props.onKernelResultMessage("The kernel was stopped, for exceeding the limits on idle time (20 minutes), storage (512 Mb) or memory (8Gb). You can use the restart button in the toolbar to try again..."),t.getKernelRunResults())},this.processWorkerHeartbeat=function(e){t.kernelStatus!==s.KernelStatus.RenderingHtml&&t.kernelStatus!==s.KernelStatus.Stopped&&(t.heartbeatWarningTimeout&&window.clearTimeout(t.heartbeatWarningTimeout),(t.kernelStatus===s.KernelStatus.LostHeartbeat||t.kernelStatus===s.KernelStatus.Reconnecting)&&t.updateStatus(s.KernelStatus.Running),t.heartbeatWarningTimeout=window.setTimeout(function(){t.kernelStatus===s.KernelStatus.Running&&t.updateStatus(s.KernelStatus.LostHeartbeat)},3e4))},this.processChangesResult=function(e){t.props.onConnectionOk();var a=e.map(function(e){return JSON.parse(e)});t.updateListOfCellsOnServer(a);var n=a.filter(s.NotFromThisClient),i=n.map(function(e){return e._type}).indexOf(s.KernelInfoResponseType);-1!==i&&(r.Current.log("Processing startup..."),t.processWorkerStartup(n[i]),n.splice(i,1)),r.Current.log("Sending changes to Editor at "+(new Date).getTime()),t.props.receiveChanges(n)},this.updateListOfCellsOnServer=function(e){e&&e.length&&0!=e.length&&e.forEach(t.updateListOfCellsOnServerAfterChange)},this.updateListOfCellsOnServerAfterChange=function(e){if(e._type){if(e._type==s.InsertCellEditEventType)t.cellUuidsServerKnowsAbout.push(e._cell_guid);else if(e._type===s.LoadNotebookEditEventType){var a=e.notebook.cells;(i=t.cellUuidsServerKnowsAbout).push.apply(i,a.map(function(e){return e.metadata._cell_guid}))}else if(e._type===s.DeleteCellEditEventType){var n=t.cellUuidsServerKnowsAbout.indexOf(e._cell_guid);n>-1&&t.cellUuidsServerKnowsAbout.splice(n,1)}var i}},this.requestAutocomplete=function(e,a,n){if(!t.props.readOnly){var r=s.AutocompleteRequest(e,a);i.redis.request(t.scriptRunId,JSON.stringify([r]),2,function(e){return t.handleAutocompleteResult(e,n)},function(){})}},this.handleAutocompleteResult=function(e,t){r.Current.log("Received autocomplete result: "+e);var a=JSON.parse(e);return"complete_reply"!==a._type?void console.warn("Incorrect _type, aborting"):void t(a.matches,a.cursor_start,a.cursor_end)},this.processKernelTitleResult=function(e){var a=JSON.parse(e);return a.ErrorMessage&&""!==a.ErrorMessage?void t.props.onUpdateTitleErrorMessage(a.ErrorMessage):void t.props.onUpdateUrl(a.NewUrl)},this.processKernelTitleCheckResult=function(e){var a=JSON.parse(e);a.ErrorMessage&&""!==a.ErrorMessage&&t.props.onUpdateTitleErrorMessage(a.ErrorMessage)},this.parseKernelRunResults=function(e){var a=JSON.parse(e);a.results&&a.results.FailureMessage&&t.props.onKernelResultMessage(a.results.FailureMessage+"; you can use the restart button in the toolbar to try again...")},this.props=o.clone(e),this.kernelStatus=s.KernelStatus.Initializing,this.scriptRunId=this.props.initialScriptRunId||0,this.scriptId=this.props.initialScriptId||0,this.kernelLanguage=this.props.initialLanguageId,this.updateStatus=this.updatePrivateStatus,this.initialEditsBeforeKernelReady=this.props.initialEditEvents,this.cellUuidsServerKnowsAbout=[],this.updateListOfCellsOnServer(this.initialEditsBeforeKernelReady),this.kernelHasStarted=!1,i.redis.addInterfaceStateCallback(this.handleRedisInterfaceStateChange)}return e.prototype.containerDidMount=function(){this.props.onKernelStatusChange(this.kernelStatus),this.updateStatus=this.updateParentStatus},e.prototype.startKernel=function(e,t,a){if(void 0===a&&(a=""),this.props.readOnly)return $.Deferred().resolve().promise();r.Current.log("Starting kernel..."),this.forkParentScriptVersionId=e||null;var n={ScriptId:this.scriptId,SourceScriptVersionId:t&&t>0?t:null,LanguageId:this.kernelLanguage,ScriptProjectId:this.props.scriptProjectId,Title:this.props.initialTitle||"Notebook"+s.uuid(10),ForkParentScriptVersionId:e&&e>0?e:null,IpynbContents:a},i=$.ajax({url:"/kernels/byod/newkernel",type:"POST",data:JSON.stringify(n),processData:!1,contentType:"application/json",success:this.processKernelStartupResult,error:this.handleAjaxError});return this.updateStatus(s.KernelStatus.Requested),i},e.prototype.subscribeToRedisKeys=function(e){i.redis.subscribe(this.scriptRunId,"status",-1,this.processStatusResult),i.redis.subscribe(this.scriptRunId,"jupyter:changes",e,this.processChangesResult),i.redis.subscribe(this.scriptRunId,"heartbeats:worker",0,this.processWorkerHeartbeat)},e.prototype.unsubscribeFromRedisKeys=function(){i.redis.unsubscribe("status"),i.redis.unsubscribe("jupyter:changes"),i.redis.unsubscribe("heartbeats:worker")},e.prototype.prependInsertCellEventIfNeeded=function(e,t){var a=this,n=e.filter(function(e){return e._type!==s.InsertCellEditEventType}).map(function(e){return e._cell_guid}).filter(function(e){return-1===a.cellUuidsServerKnowsAbout.indexOf(e)});if(0===n.length)return e;r.Current.log("Prepending insert events for uuids: "+n);var i=t().cells.map(function(e){return e.metadata._cell_guid}),o=t().cells.map(function(e){return"markdown"===e.cell_type?s.NotebookCellType.Markdown:s.NotebookCellType.Code}),l=[];return n.forEach(function(e){l.push(a.getInsertCellEvent(e,"",i,o[i.indexOf(e)]))}),l.concat(e)},e.prototype.updateOrInsertCell=function(e,t,a){if(this.cellUuidsServerKnowsAbout.indexOf(e)>-1)return s.UpdateCellEditEvent(e,t,s.NotebookCellType.Code,!1);var n=a().cells.map(function(e){return e.metadata._cell_guid});return this.getInsertCellEvent(e,t,n,s.NotebookCellType.Code)},e.prototype.getInsertCellEvent=function(e,t,a,n){
var i=a.indexOf(e),r=t||"",o=n||s.NotebookCellType.Code;return 0===i?a.length>1?s.InsertCellEditEvent(e,null,!1,o,r,a[1]||null):s.InsertCellEditEvent(e,null,!1,o,r):s.InsertCellEditEvent(e,a[i+1]||null,!1,o,r)},e.prototype.containerWillUnmount=function(){r.Current.log("NotebookKernelDispatcher is stopping")},e.prototype.getSavedNotebookState=function(e){r.Current.log("Getting existing state for script run "+this.scriptRunId),i.redis.request(this.scriptRunId,JSON.stringify([s.SerializeNotebookRequest()]),30,e,this.props.onConnectionProblem)},e.prototype.executeCell=function(e,t,a){var n=this;if(!this.props.readOnly){r.Current.log("Requesting cell execution for id "+e+" at "+(new Date).getTime()),r.Current.log("Source: '"+t+"'");var o=this.updateOrInsertCell(e,t,a),l=s.CellExecutionRequest(e);i.redis.request(this.scriptRunId,JSON.stringify([o,l]),10,null,function(t,a,i){r.Current.log("Cancelling busy status for id "+e+" at "+(new Date).getTime()),n.props.receiveChanges([s.MakeCellIdleEditEvent(e)]),n.props.onConnectionProblem(t,a,i)}),this.hasRecordedIntercomEvent||(window.Intercom("trackEvent","run_notebook",{scriptversion_id:this.scriptRunId}),this.props.isDataset?window.Intercom("trackEvent","run_dataset_notebook",{scriptversion_id:this.scriptRunId}):window.Intercom("trackEvent","run_comp_notebook",{scriptversion_id:this.scriptRunId}),this.hasRecordedIntercomEvent=!0)}},e.prototype.executeCells=function(e,t){if(!this.props.readOnly){var a=e.filter(function(e){return"code"===e.cell_type}),n=this.prependInsertCellEventIfNeeded(a.map(function(e){return s.CellExecutionRequest(e.metadata._cell_guid)}),t);i.redis.request(this.scriptRunId,JSON.stringify(n),10,null,this.props.onConnectionProblem),this.hasRecordedIntercomEvent||(window.Intercom("trackEvent","run_notebook",{scriptversion_id:this.scriptRunId}),this.props.isDataset?window.Intercom("trackEvent","run_dataset_notebook",{scriptversion_id:this.scriptRunId}):window.Intercom("trackEvent","run_comp_notebook",{scriptversion_id:this.scriptRunId}),this.hasRecordedIntercomEvent=!0)}},e.prototype.cancelCellExecution=function(){this.props.readOnly||i.redis.request(this.scriptRunId,JSON.stringify([s.InterruptKernelRequest()]),15,this.props.onExecutionCancelRequestSent,this.props.onConnectionProblem)},e.prototype.changeLanguage=function(e,t){var a=this;if(!this.props.readOnly){this.kernelHasStarted=!1,r.Current.log("Submitting stop request...");var n=s.CloseNotebookForLanguageChangeRequest();i.redis.request(this.scriptRunId,JSON.stringify([n]),10,function(){r.Current.log("Stop request submitted."),a.heartbeatWarningTimeout&&window.clearTimeout(a.heartbeatWarningTimeout),a.unsubscribeFromRedisKeys(),a.kernelLanguage=e,a.initialEditsBeforeKernelReady=[],a.kernelHasStarted=!1,a.startKernel(a.forkParentScriptVersionId,null,t)},this.props.onConnectionProblem)}},e.prototype.requestNewTitle=function(e){return this.props.readOnly?void 0:this.scriptRunId?void this.sendTitleChangeOrCheckRequest(e,!1,this.processKernelTitleResult):void alert("Please try again in a few seconds.")},e.prototype.checkNewTitle=function(e){this.props.readOnly||this.scriptRunId&&this.sendTitleChangeOrCheckRequest(e,!0,this.processKernelTitleResult)},e.prototype.sendTitleChangeOrCheckRequest=function(e,t,a){var n={ScriptVersionId:this.scriptRunId,NewTitle:e,CheckOnly:t};$.ajax({url:"/kernels/byod/kerneltitle",type:"POST",data:JSON.stringify(n),processData:!1,contentType:"application/json",success:a,error:this.handleAjaxError})},e.prototype.sendEditEvent=function(e,t){if(!this.props.readOnly&&e._type!==s.ActivateCellEditEventType){if(!this.kernelHasStarted)return void this.initialEditsBeforeKernelReady.push(e);r.Current.log("Sending edit event at "+(new Date).getTime()+": "+JSON.stringify(e));var a=this.prependInsertCellEventIfNeeded([e],t);i.redis.request(this.scriptRunId,JSON.stringify(a),5,function(e){r.Current.log(e)},this.props.onConnectionProblem)}},e.prototype.sendEditEvents=function(e,t){if(!this.props.readOnly){var a=e.filter(function(e){return e._type!==s.ActivateCellEditEventType});if(0!==a.length){if(!this.kernelHasStarted)return void(this.initialEditsBeforeKernelReady=this.initialEditsBeforeKernelReady.concat(a));var n=this.prependInsertCellEventIfNeeded(a,t);r.Current.log("Sending edit events at "+(new Date).getTime()+":"),r.Current.log(JSON.stringify(n)),i.redis.request(this.scriptRunId,JSON.stringify(n),5,function(e){r.Current.log(e)},this.props.onConnectionProblem)}}},e.prototype.processWorkerStartup=function(e){this.updateStatus(s.KernelStatus.Running),this.kernelHasStarted=!0,this.initialEditsBeforeKernelReady.length>0&&this.sendEditEvents(this.initialEditsBeforeKernelReady,function(){return{cells:[]}}),this.props.onKernelSpecChange(e.kernelspec,e.kernel_info_reply_content.language_info)},e.prototype.requestRenderingHtml=function(e,t){var a=this;if(!this.props.readOnly){var n,r=s.CloseNotebookRequest();n=t?[t,r]:[r],i.redis.request(this.scriptRunId,JSON.stringify(n),10,function(){a.updateStatus(s.KernelStatus.RenderingHtml),a.heartbeatWarningTimeout&&window.clearTimeout(a.heartbeatWarningTimeout)},this.props.onConnectionProblem)}},e.prototype.requestKernelInterrupt=function(){return this.props.readOnly?void 0:this.kernelStatus!==s.KernelStatus.Running?void console.warn("Ignoring kernel interrupt request; not running"):void i.redis.request(this.scriptRunId,JSON.stringify([s.InterruptKernelRequest()]),30,function(e){r.Current.log("Interrupt kernel response:\n"+e)},this.props.onConnectionProblem)},e.prototype.getKernelRunResults=function(){$.ajax({url:"/kernels/statmin?id="+this.scriptRunId,success:this.parseKernelRunResults,error:r.Current.warn})},e}();t.NotebookKernelDispatcher=l},function(e,t,a){"use strict";var n,s=a(6),i=a(24),r=a(2),o=a(196)();!function(e){e[e.Unstarted=0]="Unstarted",e[e.LongPolling=1]="LongPolling",e[e.Polling=2]="Polling",e[e.PollingUntilReconnected=3]="PollingUntilReconnected",e[e.GivenUp=4]="GivenUp"}(n=t.InterfaceState||(t.InterfaceState={}));var l=2,c=300,p=15,u=20,d=50,m=function(){function e(){var e=this;this.subscriptions=[],this.interfaceState=n.Unstarted,this.pollIntervalSeconds=l,this.interfaceStateCallbacks=[],this.request=function(t,a,i,l,c,p){if(void 0===p&&(p=0),p>10)return s.Current.warn("Giving up on request after multiple retries."),void s.Current.log(a);if(e.interfaceState===n.GivenUp)return void c("The server is unreachable","error",null);if(e.interfaceState===n.PollingUntilReconnected){var u="I can't reach the server right now, but I'm trying to reconnect.",d=e.lostConnectionTime?1e3*(e.lostConnectionTime.getTime()-(new Date).getTime()):-1;return d>0&&1800>d&&(u="I've been trying to reconnect to the server since "+o.ago(e.lostConnectionTime)+"."),void c(u,"warning",d)}r.ajax({url:"/redis/nbreq/"+t,timeout:1e3*i,type:"POST",data:a,processData:!1,contentType:"application/json",success:l,error:function(n,s,r){e.handleRequestError(n,s,r,t,a,i,l,c,p)}})},this.handleRequestError=function(t,a,n,i,r,o,l,c,p){return t.status&&t.status>=400?(s.Current.warn("Received status "+t.status+" on request. Retrying in three seconds."),void window.setTimeout(function(){return e.request(i,r,o,l,c,p+1)},3e3)):void("timeout"===n||"error"===a&&!n?(e.switchToPollingUntilReconnected(),c("I'm having trouble reaching the server, but I'm trying to reconnect.","warning",null)):c(a+": "+n,"error",null))},this.handleVisibilityChange=function(){e.isVisible="hidden"!==document[e.visibilityState],s.Current.log("Visibility state is now: "+document[e.visibilityState]),e.interfaceState!==n.Unstarted&&(e.isVisible?e.interfaceState===n.Polling?(s.Current.log("Switching to long-polling"),e.cancelPoll(),e.executeLongPoll(),e.updateInterfaceState(n.LongPolling)):(s.Current.log("Cancelling switch to polling"),window.clearTimeout(e.switchToPollTimeout)):(s.Current.log("Switching to polling in 30 seconds"),e.switchToPollTimeout=window.setTimeout(function(){e.cancelLongPoll(),e.executePoll(),e.updateInterfaceState(n.Polling)},3e4)))},this.dispatchResult=function(t){s.Current.log("Incoming Redis at "+(new Date).getTime()),(e.interfaceState===n.PollingUntilReconnected||e.interfaceState===n.GivenUp)&&(s.Current.log("Reconnected succesfully. Resuming normal polling."),e.pollIntervalSeconds=l,e.updateInterfaceState(e.isVisible?n.LongPolling:n.Polling),e.lostConnectionTime=null);var a=JSON.parse(t),i=e.subscriptions.map(function(e){return e.channel}).indexOf(a.Key);-1!==i?(e.subscriptions[i].callback(a.Result.map(function(e){return e.Value})),i=e.subscriptions.map(function(e){return e.channel}).indexOf(a.Key),-1!==i&&(e.subscriptions[i].position=Math.max.apply(Math,a.Result.map(function(e){return e.Position})))):"timeout"===a.Key&&e.interfaceState===n.Polling?e.pollIntervalSeconds<c&&(e.pollIntervalSeconds*=2,s.Current.log("Received timeout, increasing poll interval to: "+e.pollIntervalSeconds)):"timeout"!==a.Key&&e.interfaceState===n.Polling&&(e.pollIntervalSeconds=l),e.interfaceState===n.LongPolling?e.executeLongPoll():e.interfaceState===n.Polling&&e.executePoll()},this.handleAjaxError=function(t,a,i){return"abort"===a?void s.Current.log("Ignoring response from aborted Ajax."):(s.Current.warn(a+("error"===a?": "+i:"")),e.interfaceState!==n.PollingUntilReconnected&&e.interfaceState!==n.GivenUp?e.switchToPollingUntilReconnected():e.pollingErrors++,e.pollingErrors>=u?(s.Current.warn("Stopping reconnection attempts."),void e.updateInterfaceState(n.GivenUp)):void e.executePoll())},this.addPageVisibilityHandler(),this.executeAjax=i.throttle(this.executeAjaxImmediate,1e3/(60*d))}return e.prototype.addPageVisibilityHandler=function(){var e=this;"undefined"!=typeof document.hidden?(this.hiddenProperty="hidden",this.visibilityChangeEvent="visibilitychange",this.visibilityState="visibilityState"):"undefined"!=typeof document.mozHidden?(this.hiddenProperty="mozHidden",this.visibilityChangeEvent="mozvisibilitychange",this.visibilityState="mozVisibilityState"):"undefined"!=typeof document.msHidden?(this.hiddenProperty="msHidden",this.visibilityChangeEvent="msvisibilitychange",this.visibilityState="msVisibilityState"):"undefined"!=typeof document.webkitHidden&&(this.hiddenProperty="webkitHidden",this.visibilityChangeEvent="webkitvisibilitychange",this.visibilityState="webkitVisibilityState"),document.addEventListener(this.visibilityChangeEvent,this.handleVisibilityChange,!1),window.addEventListener("beforeunload",function(){document.removeEventListener(e.visibilityChangeEvent,e.handleVisibilityChange,!1)}),this.isVisible="hidden"!==document[this.visibilityState]},e.prototype.addInterfaceStateCallback=function(e){this.interfaceStateCallbacks.push(e)},e.prototype.updateInterfaceState=function(e){this.interfaceState=e,this.interfaceStateCallbacks.length>0&&this.interfaceStateCallbacks.forEach(function(t){return t(e)})},e.prototype.subscribe=function(e,t,a,i){var r=this;this.scriptRunId=e,s.Current.log("Subscribing to key: "+t+" for script run "+e),this.subscriptions.push({channel:t,callback:i,position:a}),this.interfaceState===n.Unstarted?this.isVisible?(this.longPollTimeout&&(window.clearTimeout(this.longPollTimeout),this.longPollTimeout=null),this.longPollTimeout=window.setTimeout(function(){r.updateInterfaceState(n.LongPolling),r.executeLongPoll()})):(this.updateInterfaceState(n.Polling),this.executePoll()):this.restartSubscription()},e.prototype.unsubscribe=function(e){var t=this.subscriptions.map(function(e){return e.channel}).indexOf(e);-1!==t?(s.Current.log("Unsubscribed from '"+e+"'"),this.subscriptions.splice(t,1)):console.warn("Not unsubscribing from '"+e+"'; not found."),0===this.subscriptions.length&&(this.cancelLongPoll(),this.cancelPoll(),this.updateInterfaceState(n.Unstarted))},e.prototype.serializeSubscriptions=function(){for(var e={scriptRun:{id:this.scriptRunId}},t=0;t<this.subscriptions.length;t++){for(var a=this.subscriptions[t],n=a.channel.split(":"),s=e.scriptRun,r=0;r<n.length-1;r++)i.has(s,n[r])||(s[n[r]]={}),s=s[n[r]];s[n[n.length-1]]=this.subscriptions[t].position}return e},e.prototype.executeAjaxImmediate=function(e){return r.ajax({url:e,timeout:13e4,type:"POST",data:JSON.stringify(this.serializeSubscriptions()),processData:!1,contentType:"application/json",success:this.dispatchResult,error:this.handleAjaxError})},e.prototype.restartSubscription=function(){this.interfaceState===n.LongPolling?(this.cancelLongPoll(),this.executeLongPoll()):this.interfaceState===n.Polling||this.interfaceState===n.PollingUntilReconnected?(this.cancelPoll(),this.executePoll()):console.warn("restartSubscription: not currently polling")},e.prototype.executeLongPoll=function(){this.longPollQuery=this.executeAjax("/redis/sub/")},e.prototype.cancelLongPoll=function(){this.longPollQuery&&this.longPollQuery.abort(),this.longPollTimeout&&window.clearTimeout(this.longPollTimeout),this.updateInterfaceState(n.Unstarted)},e.prototype.executePoll=function(){var e=this;this.pollTimeout&&window.clearTimeout(this.pollTimeout),this.pollTimeout=window.setTimeout(function(){e.executeAjax("/redis/check/")},1e3*this.pollIntervalSeconds)},e.prototype.cancelPoll=function(){this.pollTimeout&&window.clearTimeout(this.pollTimeout),this.pollIntervalSeconds=l,this.updateInterfaceState(n.Unstarted)},e.prototype.switchToPollingUntilReconnected=function(){s.Current.log("Switching to slow polls until successful reconnection."),this.updateInterfaceState(n.PollingUntilReconnected),this.pollIntervalSeconds=p,this.pollingErrors=1,this.lostConnectionTime=new Date},e}();t.redis=new m},,function(e,t,a){"use strict";var n,s=a(24);!function(e){e[e.Edit=0]="Edit",e[e.Command=1]="Command",e[e.SecondCommandKey=2]="SecondCommandKey"}(n||(n={}));var i=13,r=27,o=65,l=66,c=83,p=73,u=89,d=77,m=68,h=function(){function e(e){var t=this;this.handleKeyDown=function(e){t.mode===n.Edit?t.handleEditModeKeyDown(e):t.mode===n.Command?t.handleCommandModeKeyDown(e):t.handleSecondCommandKey(e)},this.handleEditModeKeyDown=function(e){e.keyCode==r&&(e.preventDefault(),e.stopPropagation(),t.setMode(n.Command))},this.fireActionAndReturnToEditMode=function(e,a){void 0===a&&(a=null),e.preventDefault(),e.stopPropagation(),a&&a(),t.setMode(n.Edit)},this.waitForSecondCommandKey=function(e,a){e.preventDefault(),e.stopPropagation(),t.previousCommandKeyCode=a,t.setMode(n.SecondCommandKey,!1)},this.handleSecondCommandKey=function(e){if(e.keyCode===t.previousCommandKeyCode)switch(e.keyCode){case m:t.fireActionAndReturnToEditMode(e,t.props.onDeleteCell);break;default:t.fireActionAndReturnToEditMode(e)}else t.fireActionAndReturnToEditMode(e)},this.handleCommandModeKeyDown=function(e){switch(console.log(e),e.keyCode){case i:t.fireActionAndReturnToEditMode(e);break;case o:t.fireActionAndReturnToEditMode(e,t.props.onInsertCellAbove);break;case l:t.fireActionAndReturnToEditMode(e,t.props.onInsertCellBelow);break;case c:t.fireActionAndReturnToEditMode(e,t.props.onSave);break;case p:t.fireActionAndReturnToEditMode(e,t.props.onCancelExecution);break;case u:t.fireActionAndReturnToEditMode(e,t.props.onMakeCodeCell);break;case d:t.fireActionAndReturnToEditMode(e,t.props.onMakeMarkdownCell);break;case m:t.waitForSecondCommandKey(e,m)}},this.props=s.clone(e),this.setMode(n.Edit,!1)}return e.prototype.setMode=function(e,t){void 0===t&&(t=!0),this.mode=e,e===n.Edit?t&&this.props.onChangedToEditMode():t&&this.props.onChangedToCommandMode()},e}();t.NotebookKeyboardShortcutter=h},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(193),i=a(158),r=a(153),o=a(13),l=a(47),c=a(169),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e="fa fa-circle",t={},a=s.KernelStatus[this.props.status].replace(/([a-z])([A-Z])/g,"$1 $2");switch(this.props.status){case s.KernelStatus.Initializing:case s.KernelStatus.Queued:case s.KernelStatus.Requested:break;case s.KernelStatus.Starting:t={color:"#FF8C00"};break;case s.KernelStatus.Running:t={color:"#1DBB9A"};break;case s.KernelStatus.DownloadingData:t={color:"#B3B3B3"};break;case s.KernelStatus.LostHeartbeat:a="Reconnecting";case s.KernelStatus.Reconnecting:t={color:"#FFCC00"};break;case s.KernelStatus.Error:e="fa fa-times-circle",t={color:"#C92C2C"};break;case s.KernelStatus.Stopped:e="fa fa-square",t={color:"#C0C0C0"};break;case s.KernelStatus.RenderingHtml:e="fa fa-refresh fa-spin",t={color:"#B3B3B3"};break;default:e="fa fa-square",t={color:"#2F9C0A"}}return React.createElement("div",{className:"pageheader__notebook-header-item"},React.createElement("div",{className:"notebook-editor__kernel-status"},React.createElement("span",{className:e,style:t}),React.createElement("span",{className:"notebook-editor__kernel-status-description",style:t},a)))},t}(React.Component);t.NotebookKernelStatusIndicator=p;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.shouldComponentUpdate=function(e){return JSON.stringify(this.props)!==JSON.stringify(e)},t.prototype.render=function(){return React.createElement("div",{className:"pageheader__notebook-header-button"+(this.props.isActive?"":" pageheader__notebook-header-button--disabled"),onClick:this.props.isActive?this.props.clickAction:null},React.createElement("span",{className:"fa fa-"+this.props.faClass,title:this.props.tooltip}))},t}(React.Component),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.shouldComponentUpdate=function(e){return JSON.stringify(this.props)!==JSON.stringify(e)},t.prototype.render=function(){var e,t=this,a=null!==this.props.activeCellUuid&&""!==this.props.activeCellUuid,n=null!==this.props.busyCellUuid&&""!==this.props.busyCellUuid,d=a&&this.props.activeCellType===s.NotebookCellType.Code,m=!this.props.readOnly&&n,h=this.props.canExecuteActiveCell&&!this.props.readOnly&&a&&d&&!m,g=m?"Cancel current execution":h?"Execute cell":"Select a code cell to execute",f=m?function(){return t.props.onCancel(t.props.busyCellUuid)}:h?function(){return t.props.onExecute(t.props.activeCellUuid)}:null,v=null;return this.props.isEditingTitle?e=React.createElement(r.InlineTextEditor,{className:"pageheader__notebook-header-title--input",value:this.props.title,placeholder:"Enter a title for your notebook",onGainFocusCallback:this.props.onTitleEditorGainFocus,onLoseFocusCallback:this.props.onTitleEditorLoseFocus,onChangeCallback:this.props.onTitleChanged}):(e=this.props.title,v=this.props.onTitleEditingStateChanged),React.createElement(i.PageHeader,null,React.createElement(i.PageHeaderTopRow,{title:e,coverImageUrl:this.props.imageUrl,subtitle:null,titleUrl:null,isEditingHeaderInfo:this.props.isEditingTitle,modifier:"notebook",nodeId:"pageheader__top--notebook",onTitleClick:v}),React.createElement(i.PageHeaderBottomRow,{pageMessages:this.props.pageMessages},React.createElement("div",{className:"pageheader__nav pageheader__nav--notebook"},React.createElement(p,{status:this.props.kernelStatus}),React.createElement("div",{className:"pageheader__notebook-header-restart-button"},React.createElement(l.ButtonRoundEdged,{onClick:this.props.onRestartKernel,text:"Restart"})),React.createElement("div",{className:"pageheader__notebook-header-button-group"},React.createElement(u,{faClass:m?"stop":"play",isActive:h||m,tooltip:g,clickAction:f}),React.createElement(u,{faClass:"forward",isActive:!this.props.readOnly&&this.props.canExecuteAll,tooltip:"Execute all cells",clickAction:this.props.onExecuteAll})),React.createElement("div",{className:"pageheader__notebook-header-button-group"},React.createElement("div",{className:"pageheader__notebook-header-button"+(this.props.readOnly?" pageheader__notebook-header-button--disabled":"")},React.createElement("label",{htmlFor:"ipynb-file-upload"},React.createElement("span",{className:"fa fa-cloud-upload",title:"Upload ipynb file (beta)"})),React.createElement("input",{id:"ipynb-file-upload",type:"file",style:{display:"none"},onChange:this.props.onUploadIpynb})),React.createElement("div",{className:"pageheader__notebook-header-button"+(this.props.canDownloadIpynb?"":" pageheader__notebook-header-button--disabled"),onClick:this.props.onDownloadIpynb},React.createElement("span",{className:"fa fa-cloud-download",title:"Download ipynb file"}))),React.createElement("div",{className:"pageheader__notebook-language-select"},React.createElement(o.SelectBox,{options:this.props.availableLanguageChoices,className:"pageheader__notebook-language-select-box",onChange:this.props.onLanguageChanged,searchable:!1,value:this.props.kernelLanguageDropdownValue})),""===this.props.kernelInfoLine?null:React.createElement("div",{className:"pageheader__notebook-header-button--extraspace"},this.props.kernelInfoLine),this.props.scriptId?React.createElement("div",{className:"pageheader__notebook-privacy-select pageheader__notebook-privacy-select--"+(this.props.isPrivate?"private":"public")},React.createElement(c.PrivacyToggle,{kernelType:"Notebook",displayMode:"SelectBox",isPrivate:this.props.isPrivate,scriptId:this.props.scriptId,onChangeToPublic:this.props.onChangeToPublic})):null,React.createElement("div",{className:"pageheader__notebook-save-message"},this.props.canSave?"…":this.props.lastSavedTime?"Saved":"")),React.createElement("a",{onClick:this.props.canRenderHtml?this.props.onRenderHtml:function(){return t.props.onRenderHtmlRequestError(t.props.renderHtmlToolTipText)},className:"pageheader__calltoaction pageheader__calltoaction--notebook"+(this.props.canRenderHtml?"":"-disabled")},React.createElement("span",{title:this.props.renderHtmlToolTipText},this.props.kernelStatus===s.KernelStatus.RenderingHtml?"Rendering…":"Publish"))))},t}(React.Component);t.NotebookHeader=d},function(e,t,a){"use strict";function n(e){if(0==e.length)return[];var t=JSON.parse(e);return t.cells?t.cells.map(function(e){return e.source=r(e.source),e}):[]}function s(e,t){return void 0===t&&(t=[]),e.reduce(b,t)}function i(e,t){var a=t.map(function(e){return e.metadata._cell_guid}).indexOf(e);if(-1===a)throw"Invalid uuid: "+e;return a}function r(e){return e?e instanceof Array?e.map(function(e){return e.replace(/\n$/,"")}).join("\n"):e:null}function o(e,t,a){return{metadata:{_cell_guid:e,_active:!1,collapsed:!1},source:r(t),execution_count:null,cell_type:a===S.NotebookCellType.Markdown?"markdown":"code",outputs:[]}}function l(e,t){var a=i(e,t),n=a>0?t.slice(0,a):[],s=t.slice(a+1);return n.concat(s)}function c(e,t,a,n,s,i){var r="markdown"===s?S.NotebookCellType.Markdown:S.NotebookCellType.Code;return a?p(e,t,a,r,i):n?u(e,t,n,r,i):d(e,t,r,i)}function p(e,t,a,n,s){var r=i(a,s),l=s.slice(0,r),c=s.slice(r),p=o(e,t,n);return l.concat(p).concat(c)}function u(e,t,a,n,s){var r=i(a,s),l=s.slice(0,r+1),c=s.slice(r+1),p=o(e,t,n);return l.concat(p).concat(c)}function d(e,t,a,n){var s=o(e,t,a);return n.concat(s)}function m(e,t,a,n,s,o,l,c){var p=i(e,c);return c[p].source=null==t?c[p].source:r(t),c[p].metadata.collapsed=null==a?c[p].metadata.collapsed:a,c[p].cell_type=n||c[p].cell_type,c[p].execution_state=s||c[p].execution_state,c[p].execution_count=o||c[p].execution_count,l?c[p].outputs=v(l,[]):"busy"===s&&(c[p].outputs=[]),c}function h(e,t,a,n){var s=i(e,n);return n[s].source instanceof Array?(k.Current.warn("Cell source array in "+e),n[s].source.push(t)):n[s].source+=r(t)||"",a&&a.length>0&&(n[s].outputs=v(a,n[s].outputs)),n}function g(e,t){return t.forEach(function(t){return t.metadata._active=t.metadata._cell_guid===e}),t}function f(e,t){return t.forEach(function(e){return e.metadata._active=!1}),t}function v(e,t){return e.reduce(_,t)}function y(e,t){if(e&&e.length>0&&e[e.length-1].name===t.name){var a=e[e.length-1].text[e[e.length-1].text.length-1];e[e.length-1].text+=("\n"===a?"":"\n")+t.text}else e.push(t);return e}function _(e,t){return"stream"===t.output_type?y(e,t):e.concat(t)}function b(e,t){if(!t)return e;switch(t._type){case S.DeleteCellEditEventType:return l(t._cell_guid,e);case S.InsertCellEditEventType:return c(t._cell_guid,t.source||"",t._above_cell_guid,t._below_cell_guid,t.cell_type,e);case S.UpdateCellEditEventType:return m(t._cell_guid,t.source,t.collapsed,t.cell_type,t.execution_state,t.execution_count,t.outputs,e);case S.AppendCellEditEventType:return h(t._cell_guid,t.source,t.outputs,e);case S.ActivateCellEditEventType:return g(t._cell_guid,e);case S.DeactivateCellEditEventType:return f(t._cell_guid,e);case S.CellExecutionRequestType:return m(t._cell_guid,null,null,null,"busy",null,null,e);default:return e}}function E(e,t){return{metadata:t,nbformat:4,nbformat_minor:0,cells:e}}function R(e,t){var a=e.slice();return a.forEach(function(e){e.execution_count=null,e.outputs=[],e.execution_state="idle"}),E(a,t)}var w=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},C=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},S=a(193),N=a(200),k=a(6),T=function(e){function t(t){var a=e.call(this,t)||this;return a.getCellContents=function(e){var t=i(e,a.state.cells);return a.state.cells[t].source},a.state={cells:s(a.props.editHistory,n(a.props.startingStateIpynb)),nextEditToApply:a.props.editHistory.length},a.props.registerGetIpynb(function(){return E(a.state.cells,a.props.kernelMetadata)}),a.props.registerGetIpynbWithNoOutputs(function(){return R(a.state.cells,a.props.kernelMetadata)}),a.props.registerGetCellContents(function(e){return a.getCellContents(e)}),a}return w(t,e),t.prototype.componentWillMount=function(){this.checkActiveAndBusyCells(this.state.cells),this.props.onUpdateNumberOfCells(this.state.cells.length)},t.prototype.checkActiveAndBusyCells=function(e){this.updateActiveCellProperties(e),this.updateBusyCellProperties(e),this.props.onUpdateFirstCellIsMarkdown(0===e.length||"markdown"===e[0].cell_type),this.props.onUpdateFirstCellUuid(0===e.length?null:e[0].metadata._cell_guid)},t.prototype.updateActiveCellProperties=function(e){var t=e.filter(function(e){return e.metadata._active});0===t.length?this.props.onChangeActiveCell(null,null,null):this.props.onChangeActiveCell(t[0].metadata._cell_guid,t[0].metadata.collapsed,"markdown"===t[0].cell_type?S.NotebookCellType.Markdown:S.NotebookCellType.Code)},t.prototype.updateBusyCellProperties=function(e){var t=e.filter(function(e){return e.execution_state&&"busy"===e.execution_state});0===t.length?this.props.onChangeBusyCell(null):this.props.onChangeBusyCell(t[0].metadata._cell_guid)},t.prototype.componentWillReceiveProps=function(e){var t=this,a=e.startingStateIpynb!==this.props.startingStateIpynb,i=e.editHistory.length!==this.props.editHistory.length||e.editHistory.length>0&&e.editHistory.length>this.state.nextEditToApply;if(a||i){var r;if(a?(r=n(e.startingStateIpynb),k.Current.log("New cells from startingStateIpynb:"),k.Current.log(r)):r=this.state.cells.map(function(e){return N.copyCell(e)}),i&&e.editHistory.length){var o=this.state.nextEditToApply;k.Current.log("New edits from "+this.state.nextEditToApply+":"),k.Current.log(e.editHistory.slice(o)),r=s(e.editHistory.slice(o),r)}this.setState({cells:r,nextEditToApply:e.editHistory.length}),this.checkActiveAndBusyCells(r),this.state.cells.length!==r.length&&this.props.onUpdateNumberOfCells(r.length),this.props.kernelMetadata!==e.kernelMetadata&&(e.registerGetIpynb(function(){return E(t.state.cells,e.kernelMetadata)}),e.registerGetIpynbWithNoOutputs(function(){return R(t.state.cells,e.kernelMetadata)}))}},t.prototype.shouldComponentUpdate=function(e,t){return this.state.nextEditToApply!==t.nextEditToApply||e.startingStateIpynb!==this.props.startingStateIpynb||this.props.isReadOnly!==e.isReadOnly||this.props.canExecute!==e.canExecute||this.props.isInCommandMode!==e.isInCommandMode},t.prototype.cellCanMoveDown=function(e){return e!==this.state.cells[this.state.cells.length-1].metadata._cell_guid},t.prototype.onCellMoveDown=function(e){var t=i(e,this.state.cells);this.props.onActivateCell(this.state.cells[t+1].metadata._cell_guid)},t.prototype.cellCanMoveUp=function(e){return e!==this.state.cells[0].metadata._cell_guid},t.prototype.onCellMoveUp=function(e){var t=i(e,this.state.cells);this.props.onActivateCell(this.state.cells[t-1].metadata._cell_guid)},t.prototype.onCellAppendOrMoveDown=function(e){this.props.canExecute&&(this.cellCanMoveDown(e)?this.onCellMoveDown(e):this.props.onAppendActivatedCell())},t.prototype.render=function(){var e=this,t=this.state.cells;return this.props.isReadOnly&&(t=this.state.cells.map(function(e){return N.copyCell(e)}),t.forEach(function(e){return e.metadata._active=!1})),React.createElement("div",{className:"notebook-editor__cells-container"},t.map(function(t,a){return React.createElement(N.NotebookCell,C({key:"notebook-cell-"+(t.metadata._cell_guid||a),readOnly:e.props.isReadOnly?"nocursor":!1,isInCommandMode:e.props.isInCommandMode,languageName:e.props.kernelLanguageName,onChangeCellType:function(a){return e.props.onChangeCellType(t.metadata._cell_guid,a)},canExecute:e.props.canExecute,onExecute:function(){return e.props.onExecuteCell(t.metadata._cell_guid)},onAutocomplete:e.props.onAutocomplete,onContentsChange:function(a){return e.props.onNewCellContents(t.metadata._cell_guid,a,"markdown"===t.cell_type?S.NotebookCellType.Markdown:S.NotebookCellType.Code)},canMoveDown:function(){return e.cellCanMoveDown(t.metadata._cell_guid)},canMoveUp:function(){return e.cellCanMoveUp(t.metadata._cell_guid)},onMoveDown:function(){return e.onCellMoveDown(t.metadata._cell_guid)},onMoveUp:function(){return e.onCellMoveUp(t.metadata._cell_guid)},onMouseUp:t.metadata._active?null:function(){console.log(e),e.props.onActivateCell(t.metadata._cell_guid)},appendNewOrMoveDown:function(){return e.onCellAppendOrMoveDown(t.metadata._cell_guid)},onUncollapse:function(){return e.props.onChangeCollapsed(t.metadata._cell_guid,!1)},onDeactivate:function(){return e.props.onDeactivateCell(t.metadata._cell_guid)},onDelete:function(){return e.props.onDeleteCell(t.metadata._cell_guid)},onCollapse:function(){return e.props.onChangeCollapsed(t.metadata._cell_guid,!0)},onAddAbove:function(){return e.props.onAddAbove(t.metadata._cell_guid)},onAddBelow:function(){return e.props.onAddBelow(t.metadata._cell_guid)}},t))}))},t}(React.Component);t.NotebookCellsContainer=T},function(e,t,a){"use strict";function n(e){return JSON.parse(JSON.stringify(e))}var s=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},i=a(193),r=a(50),o=a(130),l=a(126),c=a(33),p=a(6),u=a(24),d=a(201);t.copyCell=n;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCodeCell=function(){return"code"===t.props.cell_type},t.isBusy=function(){return t.props.execution_state&&"busy"===t.props.execution_state},t}return s(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,a=e;return this.props.isInCommandMode!==a.isInCommandMode?!0:(this.props.metadata._active&&a.metadata._active&&(t=u.omit(this.props,"source"),a=u.omit(e,"source")),JSON.stringify(t)!==JSON.stringify(a))},t.prototype.renderToolbar=function(e){var t=this;if(!e)return null;var a=null;"code"===this.props.cell_type&&this.props.canExecute&&(a=React.createElement("div",{className:"notebook-editor__cell-toolbar-button",style:{padding:0,marginLeft:"15px",marginRight:"7px",marginTop:"2px"},onClick:this.props.onExecute},React.createElement(c.ToolTip,{tipText:"Execute cell"},React.createElement("span",{className:"fa fa-play"}))));var n=null;return React.createElement("div",{className:"notebook-editor__cell-toolbar"},React.createElement("div",{className:"notebook-editor__cell-type-toggle-group"},React.createElement("div",{className:"notebook-editor__cell-type-toggle-group-inner"
},React.createElement("div",{onClick:function(){return t.props.onChangeCellType(i.NotebookCellType.Markdown)},className:"notebook-editor__cell-type-toggle"+("markdown"===this.props.cell_type?" notebook-editor__cell-type-toggle--active":"")},"Markdown"),React.createElement("div",{onClick:function(){return t.props.onChangeCellType(i.NotebookCellType.Code)},className:"notebook-editor__cell-type-toggle"+("code"===this.props.cell_type?" notebook-editor__cell-type-toggle--active":"")},this.props.languageName)),a),React.createElement("div",{className:"notebook-editor__cell-toolbar-lhs"},React.createElement("div",{className:"notebook-editor__cell-toolbar-button-group"},n,React.createElement("div",{className:"notebook-editor__cell-toolbar-button",onClick:this.props.onAddAbove},React.createElement(c.ToolTip,{tipText:"Add cell above"},React.createElement("span",{className:"notebook-editor__cell-toolbar-multi-icon-button"},React.createElement("span",{className:"fa fa-plus"}),React.createElement("span",{className:"fa fa-caret-up"})))),React.createElement("div",{className:"notebook-editor__cell-toolbar-button",onClick:this.props.onAddBelow},React.createElement(c.ToolTip,{tipText:"Add cell below"},React.createElement("span",{className:"notebook-editor__cell-toolbar-multi-icon-button"},React.createElement("span",{className:"fa fa-plus"}),React.createElement("span",{className:"fa fa-caret-down"}))))),React.createElement("div",{className:"notebook-editor__cell-toolbar-button-group"},React.createElement("div",{className:"notebook-editor__cell-toolbar-button notebook-editor__cell-toolbar-button--red",onClick:this.props.onDelete},React.createElement(c.ToolTip,{tipText:"Delete cell"},React.createElement("span",{className:"fa fa-trash"}))))))},t.prototype.renderCellOutputChunk=function(e,t){switch(e.output_type){case"execute_result":case"display_data":var a=null,n=null;if("image/png"in e.data)n=React.createElement("img",{src:"data:image/png;base64,"+e.data["image/png"],key:t+"-img"});else if("text/html"in e.data){var s={__html:d.sanitizeHTML(e.data["text/html"])};a=React.createElement("div",{className:"notebook-editor__html-output",key:t+"-html",dangerouslySetInnerHTML:s})}else"text/plain"in e.data&&(a=React.createElement("div",{className:"notebook-editor__cell-output",key:t+"-text"},e.data["text/plain"]));return React.createElement("div",{key:t},a,n);case"stream":return"stderr"===e.name?React.createElement("div",{className:"notebook-editor__cell-output notebook-editor__cell-output--stderr",key:t+"-stderr"},e.text):React.createElement("div",{className:"notebook-editor__cell-output",key:t+"-stdout"},e.text);case"error":var i=null,r=null;return"ename"in e&&"evalue"in e?i=React.createElement("div",{className:"notebook-editor__cell-output notebook-editor__cell-output--stderr",key:t+"-desc"},React.createElement("span",null,e.ename+": "+e.evalue)):console.warn("Missing ename/evalue in error event"),"traceback"in e&&(r=React.createElement("div",{className:"notebook-editor__cell-output notebook-editor__cell-output--stderr",key:t+"-trace"},React.createElement("span",null,e.traceback.join("\n")))),React.createElement("div",{key:t+"-err"},i,r);default:return console.warn("Unknown output_type in cell "+this.props.metadata._cell_guid),null}},t.prototype.renderCellOutput=function(){var e=this;return this.isCodeCell()&&this.props.outputs&&0!==this.props.outputs.length?React.createElement("div",{className:"notebook-editor__cell-output-section"},React.createElement("div",{className:"notebook-editor__cell-number-container"},React.createElement("div",{className:"notebook-editor__cell-number-out"},"Out["+this.props.execution_count+"]:")),this.props.outputs.map(function(t,a){return e.renderCellOutputChunk(t,e.props.metadata._cell_guid+"-"+a.toString())})):null},t.prototype.componentWillUpdate=function(){this.mainDiv?this.lastMainDivTop=this.mainDiv.getBoundingClientRect().top:this.lastMainDivTop=null},t.prototype.componentDidUpdate=function(e){!e.metadata._active&&this.props.metadata._active&&this.mainDiv&&this.lastMainDivTop&&window.scrollBy(0,this.mainDiv.getBoundingClientRect().top-this.lastMainDivTop)},t.prototype.render=function(){var e=this,t=null,a="",n=null;if(this.isCodeCell()){var s=" ";this.isBusy()?s="*":null!==this.props.execution_count&&(s=this.props.execution_count?this.props.execution_count.toString():" "),n=this.props.metadata.collapsed?React.createElement("div",{className:"notebook-editor__cell-number-in notebook-editor__cell-number-in--collapsed"},"["+s+"]"):React.createElement("div",{className:"notebook-editor__cell-number-in"},"In["+s+"]:"),n=React.createElement("div",{className:"notebook-editor__cell-number-container"},n)}if(this.props.metadata.collapsed){var i=void 0;return i=this.props.source instanceof Array?this.props.source.length:this.props.source?this.props.source.split(/\r\n|\r|\n/).length:0,React.createElement("div",{className:"notebook-editor__cell notebook-editor__cell--collapsed"},n,React.createElement("div",{className:"notebook-editor__cell-expand-div"},React.createElement("div",{className:"notebook-editor__cell-action-text",onClick:this.props.onUncollapse},this.isCodeCell()?React.createElement("span",{className:"fa fa-code"}):React.createElement("span",{className:"fa fa-align-left"}),"Expand",i>0?React.createElement("span",{className:"notebook-editor__cell-expand-lines"},i," ",i>1?React.createElement("span",null,"lines"):React.createElement("span",null,"line")):null)))}var c;if(c=this.props.source?this.props.source instanceof Array?0===this.props.source.length?"":this.props.source.some(function(e){return e.indexOf("\n")>-1})?this.props.source.join(""):this.props.source.join("\n"):this.props.source:"",this.isCodeCell()){var u={mode:this.props.languageName.toLowerCase(),scrollbarStyle:"native",indentUnit:4,indentWithTabs:!1,autoCloseBrackets:!0,readOnly:this.props.readOnly,theme:"kaggle"};a="code",t=React.createElement(r.CodeMirrorEditor,{value:this.props.metadata._active?null:c,defaultValue:c,onChange:this.props.onContentsChange,hasFocus:this.props.metadata._active,onMouseUp:this.props.readOnly?null:this.props.onMouseUp,options:u,getAutocomplete:this.props.onAutocomplete,canMoveUp:this.props.canMoveUp,canMoveDown:this.props.canMoveDown,onMoveUp:this.props.onMoveUp,onMoveDown:this.props.onMoveDown,onCtrlEnter:function(){e.isBusy()||e.props.onExecute()},onShiftEnter:function(){e.isBusy()||(e.props.onExecute(),e.props.appendNewOrMoveDown())}})}else{a="markdown";var d=this.props.metadata._active||""===c.trim();t=React.createElement("div",null,React.createElement("div",{style:d?{display:"inherit",animationName:"notebook-markdown-editor",animationDuration:"0.5s"}:{display:"none"}},React.createElement(o.MarkdownEditor,{shouldSanitizeHtml:!0,onChangeCallback:function(){},onChangeImmediate:this.props.onContentsChange,defaultValue:c,hidePreview:!0,alwaysShowToolbar:!0,hasFocus:this.props.metadata._active,onMoveUp:this.props.onMoveUp,onMoveDown:this.props.onMoveDown,suffix:this.props.metadata._cell_guid,onKeyPress:function(t){t.shiftKey&&13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.props.appendNewOrMoveDown())}})),d?null:React.createElement(l.MarkdownConverter,{content:c,mimeType:"text/markdown"}))}var m="";this.props.metadata._active&&(m=" notebook-editor__cell--active",this.props.isInCommandMode&&(m+=" notebook-editor__cell--command"));var h=this.renderToolbar(this.props.metadata._active);return p.Current.log("Cell "+this.props.metadata._cell_guid+" rendered at "+(new Date).getTime()),React.createElement("div",{className:"notebook-editor__cell-plus-toolbar"},h,React.createElement("div",{className:"notebook-editor__cell notebook-editor__cell--"+a+m,onMouseUp:this.props.onMouseUp},n,React.createElement("div",{className:"notebook-editor__cell-inner notebook-editor__cell-inner--"+a,ref:function(t){return e.mainDiv=t}},t),this.renderCellOutput()))},t}(React.Component);t.NotebookCell=m},,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=function(e){function t(t){var a=e.call(this,t)||this;return a.onAddButtonClick=function(){a.setState({isModalShown:!0})},a.onModalClosed=function(){a.setState({isModalShown:!1})},a.onDataSourceAdded=function(e){return s.addDataSource(e,a.props.scriptVersionId).then(function(t){a.setState({isModalShown:!1},function(){a.props.onDataSourceAdded(e,t)})})},a.state={isModalShown:!1},a}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"add-data-source-banner"},React.createElement(s.AddDataSourceModal,{isShown:this.state.isModalShown,onClose:this.onModalClosed,onDataSourceAdded:this.onDataSourceAdded,scriptVersionId:this.props.scriptVersionId}),React.createElement("div",{className:"add-data-source-banner__title"},"Add Data Source"),React.createElement("div",{className:"add-data-source-banner__body"},"Connect your Kernel to our library of datasets"),React.createElement(s.ButtonAutoWidth,{text:"Add a Data Source",onClick:this.onAddButtonClick}))},t}(React.Component);t.AddDataSourceBanner=i},,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(40),r=function(e){function t(t){var a=e.call(this,t)||this;return a.onWindowPopState=function(e){e.state&&a.setState(e.state)},a.visitUrl=function(e,t){void 0===t&&(t=!1);var n={isNew:a.state.isNew,topicId:a.state.topicId};t?history.replaceState(n,document.title,e):history.pushState(n,document.title,e)},a.getUrl=function(){return""+a.props.url+(a.state.isNew?"/new":a.state.topicId?"/"+a.state.topicId:"")+(window.location.hash?window.location.hash:"")},a.state={isNew:a.props.isNew,topicId:a.props.topicId},a}return n(t,e),t.prototype.componentWillMount=function(){window.addEventListener("popstate",this.onWindowPopState,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("popstate",this.onWindowPopState,!1)},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"site-forum"},React.createElement("div",{className:"site-forum__header"},React.createElement(i.PageHeader,null,React.createElement(i.PageHeaderTopRow,{coverImageUrl:this.props.imageUrl,isEditingHeaderInfo:!1,subtitle:this.props.subtitle,title:this.props.name,titleUrl:this.props.url}),React.createElement(i.PageHeaderBottomRow,null,React.createElement(i.PageHeaderNav,{classNameModifier:"profile",menuLinks:this.props.forums.filter(function(e){return"Spam Posts"!==e.name&&"Deleted Posts"!==e.name}).map(function(e){return{href:e.url,title:e.name,text:e.name}}),overflowMenuLinks:this.props.forums.filter(function(e){return"Spam Posts"===e.name||"Deleted Posts"===e.name}).map(function(e){return{href:e.url,title:e.name,text:e.name}}),activeTab:this.props.name}),React.createElement(i.PageHeaderCallToAction,{onClick:function(){return e.setState({isNew:!0,topicId:null},function(){return e.visitUrl(e.getUrl())})},text:"New Topic",title:"New Topic"})))),React.createElement(i.Forum,s({},this.props,{forumId:this.props.id,isNew:this.state.isNew,onTopicClicked:function(t){return e.setState({topicId:t.id},function(){return e.visitUrl(e.getUrl())})},topicSubmitted:function(t){return e.setState({isNew:!1,topicId:t},function(){return e.visitUrl(e.getUrl())})},parentName:this.props.name,parentUrl:this.props.url,topicId:this.state.topicId})))},t}(React.Component);t.SiteForum=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(6),r=a(208),o=function(e){function t(t){var a=e.call(this,t)||this;a.mobileHeaderUpperBound=800,a.handleClick=function(e){s(e.target).closest(".site-header-react__user-nav").length||s(e.target).closest(".site-header-react__user").length||!a.state.shouldShowUserDropdown||a.setState({shouldShowUserDropdown:!1}),s(e.target).closest(".site-header-react__mobile-menu").length||s(e.target).closest(".site-header-react__mobile-menu-button").length||!a.state.shouldShowMobileMenu||a.setState({shouldShowMobileMenu:!1})},a.handleResize=function(){var e=window.innerWidth;a.setState({windowWidth:e,shouldShowMobileHeader:e<=a.mobileHeaderUpperBound})},a.updateSiteHeaderState=function(e,t){var n={};n[e]=t,a.setState(n)};var n=window.innerWidth;return a.state=s.extend({},a.props,{shouldShowUserDropdown:!1,shouldShowMobileHeader:n<=a.mobileHeaderUpperBound,windowWidth:n}),a}return n(t,e),t.prototype.componentDidMount=function(){window.addEventListener("touchstart",this.handleClick,!1),window.addEventListener("mousedown",this.handleClick,!1),window.addEventListener("resize",this.handleResize,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("touchstart",this.handleClick,!1),window.removeEventListener("mousedown",this.handleClick,!1),window.removeEventListener("resize",this.handleResize,!1)},t.prototype.render=function(){var e=[{itemUrl:"/competitions",itemName:"Competitions"},{itemUrl:"/datasets",itemName:"Datasets"},{itemUrl:"/kernels",itemName:"Kernels"},{itemUrl:"/discussion",itemName:"Discussion"},{itemUrl:"/jobs",itemName:"Jobs"}],t=[{itemUrl:"/competitions",itemName:"Competitions"},{itemUrl:"/datasets",itemName:"Datasets"},{itemUrl:"/kernels",itemName:"Kernels"},{itemUrl:"/jobs",itemName:"Jobs"},{itemUrl:"/rankings",itemName:"Kaggle Rankings"},{itemUrl:"/discussion",itemName:"Discussion"},{itemUrl:"/blog",itemName:"Blog"},{itemUrl:"/wiki",itemName:"Wiki"},{itemUrl:"/host",itemName:"Host a Competition"}];i.Current.isAdmin&&t.push({itemUrl:"/admin/home",itemName:"Admin"});var a={mainNavItems:e,mobileNavItems:t,userURL:i.Current.userProfileUrl,userDisplayName:i.Current.userDisplayName,userAvatarURL:i.Current.userThumbnailUrl,userIsAnonymous:i.Current.isAnonymous,updateSiteHeaderState:this.updateSiteHeaderState};return React.createElement(r.SiteHeader,s.extend({},this.state,a))},t}(React.Component);t.SiteHeaderContainer=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(12),i=a(33),r=a(6),o=a(209),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderMainNav=function(){return this.props.mainNavItems.length?React.createElement("nav",{className:"site-header-react__nav"},this.props.mainNavItems.map(function(e,t){return React.createElement("li",{key:t,className:"site-header-react__nav-item"},React.createElement("a",{href:e.itemUrl},e.itemName))})):null},t.prototype.renderMobileNav=function(){return this.props.mobileNavItems.length?React.createElement("nav",{className:"site-header-react__mobile-nav"},this.props.mobileNavItems.map(function(e,t){return React.createElement("li",{key:t,className:"site-header-react__mobile-nav-item"},React.createElement("a",{href:e.itemUrl},e.itemName))}),this.props.userIsAnonymous?null:React.createElement("li",{className:"site-header-react__mobile-nav-item site-header-react__mobile-nav-item--log-off"},React.createElement("a",{href:"/account/logoff"},"Log Out"))):null},t.prototype.renderUserDropdown=function(){var e={__html:this.props.userDisplayName};return React.createElement("div",{className:"site-header-react__user-nav-container"},React.createElement("nav",{className:"site-header-react__user-nav"},React.createElement("li",{className:"site-header-react__user-nav-item"},React.createElement("span",{className:"site-header-react__user-name"},"Signed in as ",React.createElement("span",{dangerouslySetInnerHTML:e}))),React.createElement("li",{className:"site-header-react__user-nav-item"},React.createElement("a",{href:this.props.userURL,className:"site-header-react__user-nav-link"},React.createElement("span",null,"My Profile"))),React.createElement("li",{className:"site-header-react__user-nav-item"},React.createElement("a",{href:"/rankings",className:"site-header-react__user-nav-link"},React.createElement("span",null,"Kaggle Rankings"))),React.createElement("li",{className:"site-header-react__user-nav-item"},React.createElement("a",{href:"/blog",className:"site-header-react__user-nav-link"},React.createElement("span",null,"Blog"))),React.createElement("li",{className:"site-header-react__user-nav-item"},React.createElement("a",{href:"/wiki",className:"site-header-react__user-nav-link"},React.createElement("span",null,"Wiki"))),React.createElement("li",{className:"site-header-react__user-nav-item"},React.createElement("a",{href:"/host",className:"site-header-react__user-nav-link"},React.createElement("span",null,"Host a Competition"))),r.Current.isAdmin?React.createElement("li",{className:"site-header-react__user-nav-item"},React.createElement("a",{href:"/admin/home",className:"site-header-react__user-nav-link"},React.createElement("span",null,"Admin"))):null,React.createElement("li",{className:"site-header-react__user-nav-item"},React.createElement("a",{href:"/account/logoff",className:"site-header-react__user-nav-link"},React.createElement("span",null,"Sign Out")))))},t.prototype.toggleUserDropdown=function(){this.props.updateSiteHeaderState("shouldShowUserDropdown",!this.props.shouldShowUserDropdown)},t.prototype.toggleMobileMenu=function(){this.props.updateSiteHeaderState("shouldShowMobileMenu",!this.props.shouldShowMobileMenu)},t.prototype.renderMobileMenu=function(){var e=this,t={__html:this.props.userDisplayName};return React.createElement("div",{className:"site-header-react__mobile-menu"},this.props.userIsAnonymous?React.createElement("div",{className:"site-header-react__mobile-menu--anonymous"},React.createElement("a",{className:"site-header-react__mobile-sign-up",href:"/account/register"},"Sign Up"),React.createElement("a",{className:"site-header-react__mobile-sign-in",href:"/account/login"},"Log In")):React.createElement("a",{href:this.props.userURL,className:"site-header-react__mobile-user"},React.createElement("img",{src:this.props.userAvatarURL,alt:this.props.userDisplayName+" avatar image",className:"site-header-react__mobile-avatar"}),React.createElement("span",{className:"site-header-react__mobile-user-name",dangerouslySetInnerHTML:t})),React.createElement(o.QuickSearchContainer,{placeholder:"Search kaggle",index:"global",suppressAutoFocus:!0}),this.renderMobileNav(),React.createElement("div",{className:"site-header-react__mobile-menu-close-wrapper"},React.createElement("span",{className:"site-header-react__mobile-menu-close",onClick:function(){return e.toggleMobileMenu()}},React.createElement("span",{className:"fa fa-times-circle-o"}),React.createElement("span",{className:"site-header-react__mobile-menu-close-text"},"Close"))))},t.prototype.renderMobileHeader=function(){var e=this;return React.createElement("div",{className:"site-header-react__mobile-content"},React.createElement("span",{className:"fa fa-bars site-header-react__mobile-menu-button",onClick:function(){return e.toggleMobileMenu()}}),React.createElement("div",{className:"site-header-react__mobile-logo"},React.createElement("a",{href:"/"},React.createElement("img",{alt:"Kaggle",src:"/static/images/site-logo.png"}))),this.props.shouldShowMobileMenu?this.renderMobileMenu():null)},t.prototype.renderDesktopHeader=function(){var e=this;return React.createElement("div",{className:"site-header-react__container"},r.Current.isAdmin?React.createElement("div",null,React.createElement("div",{className:"site-header-react__environment"},React.createElement("div",{className:"site-header-react__environment-side site-header-react__environment-side--left site-header-react__environment-side--"+(r.Current.isDebug||"localhost"!=r.Current.environment?r.Current.environment:"www")},"localhost"==r.Current.environment||"staging"==r.Current.environment?r.Current.environment:"live",r.Current.isDebug||"localhost"!=r.Current.environment?null:" in release mode"),React.createElement("div",{className:"site-header-react__environment-middle"}),React.createElement("div",{className:"site-header-react__environment-side site-header-react__environment-side--right site-header-react__environment-side--"+(r.Current.isDebug||"localhost"!=r.Current.environment?r.Current.environment:"www")},"localhost"==r.Current.environment||"staging"==r.Current.environment?r.Current.environment:"live",r.Current.isDebug||"localhost"!=r.Current.environment?null:" in release mode"))):null,React.createElement("div",{className:"site-header-react__content"},React.createElement("div",{className:"site-header-react__logo"},React.createElement("a",{href:"/"},React.createElement("img",{alt:"Kaggle",src:"/static/images/site-logo.png"}))),React.createElement("div",{className:"site-header-react__quick-search"},React.createElement(o.QuickSearchContainer,{placeholder:"Search kaggle",index:"global"})),this.renderMainNav(),React.createElement("div",{className:"site-header-react__user"},this.props.userIsAnonymous?React.createElement("ul",{className:"site-header-react__user--anonymous"},React.createElement("li",null,React.createElement(s.Button,{text:"Sign Up",isSmall:!0,href:"/account/register"})),React.createElement("li",null,React.createElement("a",{className:"site-header-react__sign-in-link",href:"/account/login"},"Log In"))):this.props.shouldShowUserDropdown?React.createElement("div",{className:"site-header-react__user--logged-in--active",onClick:function(){return e.toggleUserDropdown()}},React.createElement("ul",null,React.createElement("li",{className:"site-header-react__user-avatar"},React.createElement("span",{className:"fa fa-caret-down site-header-react__caret-down"}),React.createElement("img",{src:this.props.userAvatarURL}))),this.renderUserDropdown()):React.createElement(i.ToolTip,{tipText:"Profile & community"},React.createElement("div",{className:"site-header-react__user--logged-in",onClick:function(){return e.toggleUserDropdown()}},React.createElement("ul",null,React.createElement("li",{className:"site-header-react__user-avatar"},React.createElement("span",{className:"fa fa-caret-down site-header-react__caret-down"}),React.createElement("img",{src:this.props.userAvatarURL}))))))))},t.prototype.render=function(){return React.createElement("div",{className:"site-header-react"},this.props.shouldShowMobileHeader?this.renderMobileHeader():this.renderDesktopHeader())},t}(React.Component);t.SiteHeader=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(210),r=function(e){function t(t){var a=e.call(this,t)||this;return a.handleChange=function(e){return a.qTextBox=e,""===a.qTextBox.trim()?void a.handleClose():(a.timer&&clearInterval(a.timer),void(a.timer=window.setTimeout(function(){return a.executeSearch(a.qTextBox)},200)))},a.handleClose=function(){a.state.isClosed||(a.setState({isClosed:!0}),a.logSearchAction())},a.handleSearch=function(){a.executeSearch(a.qTextBox)},a.executeSearch=function(e){a.timer&&clearInterval(a.timer),a.qTextBox&&a.qTextBox.trim()&&s.ajax({url:"/search/quick/"+a.props.index,type:"POST",data:{q:e}}).done(function(t){a.qTextBox===e&&(a.qResults=e,a.setState({isClosed:!1,response:t}))})},a.handleClickResult=function(e,t,n){a.logSearchAction(e,t,n)},a.handleSelectionMove=function(e){if(a.state.response&&0!=a.state.response.results.length){var t=(null!=a.state.selectedItemIndex?a.state.selectedItemIndex:0>e?a.state.response.results.length:-1)+e;0>t&&(t=a.state.response.results.length-1),t>a.state.response.results.length-1&&(t=0),a.setState({selectedItemIndex:t})}},a.handleIndexSelection=function(e){a.setState({selectedItemIndex:e})},a.state={isClosed:!0},a}return n(t,e),t.prototype.logSearchAction=function(e,t,a){this.qResults&&s.ajax({url:"/search/log",type:"POST",data:{index:this.props.index,isQuick:!0,q:this.qResults,isSuccess:null!=e&&null!=t,rank:a,id:e,url:t}})},t.prototype.render=function(){var e={onChange:this.handleChange,placeholder:this.props.placeholder,response:this.state.response,onClose:this.handleClose,isClosed:this.state.isClosed,onClickResult:this.handleClickResult,rightJustifyResults:this.props.rightJustifyResults,isSiteSearch:"global"==this.props.index,selectedItemIndex:this.state.selectedItemIndex,onSelectionMove:this.handleSelectionMove,onIndexSelection:this.handleIndexSelection,onSearch:this.handleSearch,suppressAutoFocus:this.props.suppressAutoFocus};return React.createElement(i.QuickSearch,s.extend({},this.state,e))},t}(React.Component);t.QuickSearchContainer=r},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleKeyDown=function(e){if(27==e.keyCode&&t.props.onClose(),38==e.keyCode&&t.props.onSelectionMove(-1),40==e.keyCode&&t.props.onSelectionMove(1),13==e.keyCode){var a=document.getElementById("search-result-"+t.props.selectedItemIndex);a&&a.click()}},t.handleMouseUp=function(e){var a=$(".quick-search");a.is(e.target)||0!==a.has(e.target).length||t.props.onClose()},t.handleChange=function(e){t.props.onChange(e.target.value)},t.handleMouseOver=function(e){t.props.onIndexSelection(e)},t.handleClickResult=function(e,a){t.props.onIndexSelection(a);var n=t.props.response.results[a];t.props.onClickResult(n.key,n.url,n.rank)},t}return a(t,e),t.prototype.componentDidMount=function(){$(document.body).on("keydown",this.handleKeyDown),$(document.body).on("mouseup",this.handleMouseUp)},t.prototype.componentWillUnmount=function(){$(document.body).off("keydown",this.handleKeyDown),$(document.body).off("mouseup",this.handleMouseUp)},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"quick-search"},React.createElement("div",{className:"quick-search__search-box-container"},React.createElement("input",{className:"quick-search__search-box",type:"text",placeholder:this.props.placeholder||"Search",onChange:this.handleChange,tabIndex:this.props.isSiteSearch?1:null,autoFocus:this.props.isSiteSearch&&!this.props.suppressAutoFocus}),React.createElement("div",{className:"quick-search__button fa fa-search",onClick:function(){return e.props.onSearch()}})),this.props.isClosed?null:React.createElement("div",{className:"quick-search__results "+(this.props.rightJustifyResults?"quick-search__results--right":"")},this.props.response&&this.props.response.results&&this.props.response.results.length>0?this.props.response.results.map(function(t,a){return React.createElement("a",{id:"search-result-"+a,className:"quick-search__result "+(e.props.selectedItemIndex==a?"quick-search__result--selected":""),href:t.url,key:t.key,onClick:function(t){return e.handleClickResult(t,a)},onMouseOver:function(){return e.handleMouseOver(a)}},React.createElement("img",{className:"quick-search__result-thumbnail",src:t.thumbnailImageUrl}),React.createElement("div",{className:"quick-search__result-content"},React.createElement("div",{className:"quick-search__result-title"},t.title),React.createElement("div",{className:"quick-search__result-overview"},e.props.isSiteSearch?React.createElement("span",{className:"quick-search__result-type"},t.documentType):null,e.props.isSiteSearch&&t.subtitle?React.createElement("span",null," - "):null,t.subtitle?React.createElement("span",null,t.subtitle):null)))}):React.createElement("div",{className:"quick-search__not-found"},"We couldn't find anything matching your search. ¯\\_(ツ) _/¯")))},t}(React.Component);t.QuickSearch=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(73),r=a(212),o=a(160),l=a(40),c=function(e){function t(t){var a=e.call(this,t)||this;a.resizeListener=function(){return a.setState(a.getMenuLinks(a.state.isEditingHeader))},a.validationRules=[{isValid:function(){return!(!a.state.displayName||!a.state.displayName.trim())},id:"profile-no-display-name",message:function(){return"Please enter a display name."}},{isValid:function(){return!(a.state.displayName&&(a.state.displayName.trim().length<2||a.state.displayName.trim().length>50))},id:"profile-display-name-length",message:function(){return"Your display name must be between 2 and 50 characters in length."}},{isValid:function(){return!a.state.websiteUrl||l.isValidUrl(a.state.websiteUrl)},id:"profile-website-format",message:function(){return"Please enter a valid website URL."}},{isValid:function(){return!a.state.linkedInUrl||l.isValidUrl(a.state.linkedInUrl)},id:"profile-linkedin-format",message:function(){return"Please enter a valid LinkedIn URL."}}],a.onWindowPopState=function(e){e.state&&e.state.profileTabState&&a.setState(e.state.profileTabState)},a.onProfileTabChanged=function(e){o.PageMessages.clear(),a.checkHiddenTabMessage(e),a.setState({activePane:e,activeTab:e},function(){return a.updateUrlForTab(e)})},a.replaceUrlForTab=function(e){var t=window.history.state||{},n=a.props.userUrl;"home"!=e.toLowerCase()&&(n+="/"+e.toLowerCase()),history.replaceState(t,"",n)},a.updateUrlForTab=function(e){var t={};t.profileTabState={activePane:e,activeTab:e};var n=a.props.userUrl;"home"!=e.toLowerCase()&&(n+="/"+e.toLowerCase()),history.pushState(t,"",n)},a.onProfilePropChanged=function(e,t){var n={};n[e]=t,a.setState(n)},a.onProfileEditingStateCancelled=function(e,t){var n={},i={};n["isEditing"+e]=!1;for(var r=0,l=t;r<l.length;r++){var c=l[r];i[c]=a.props[c]}a.setState(s.extend({},n,i,a.getMenuLinks(!1)),function(){o.PageMessages.clear()})},a.onProfileEditingStateChanged=function(e){var t=a.state["isEditing"+e],n=a.getMenuLinks(!t);if(n["isEditing"+e]=!t,!t)return void a.setState(n);var i=a.getValidationPageMessages();o.PageMessages.clear(),o.PageMessages.add(i),i.length>0||a.setState(n,function(){var e={displayName:a.state.displayName,country:a.state.country,region:a.state.region,city:a.state.city,gitHubUserName:a.state.gitHubUserName,linkedInUrl:a.state.linkedInUrl,twitterUserName:a.state.twitterUserName,userAvatarUrl:a.state.userAvatarUrl,occupation:a.state.occupation,organization:a.state.organization,websiteUrl:a.state.websiteUrl};s.ajax({url:a.props.userUrl+".json",type:"PUT",contentType:"application/json",data:JSON.stringify(e),success:function(e){return"error"==e.status?void o.PageMessages.error({htmlMessage:e.message}):(a.setState({twitterUserName:e.twitterUserName,gitHubUserName:e.gitHubUserName}),void o.PageMessages.success("Changes to your profile have been saved."))},error:function(e){o.PageMessages.error({htmlMessage:'There was a problem saving your profile changes. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'})}})})},a.onUpdateProfileImage=function(e,t){return e.append("userId",a.props.userId),e.append("imageLeft",t[0].left),e.append("imageTop",t[0].top),e.append("imageWidth",t[0].width),e.append("imageHeight",t[0].height),s.ajax({url:a.props.userUrl+"/image.json",type:"POST",dataType:"json",contentType:!1,processData:!1,data:e,success:function(e){s("body").css({overflow:"visible"}),s("html").css("overflow","visible"),a.setState({isEditingHeader:!1,userAvatarUrl:a.props.userAvatarUrl+"?r="+(new Date).getMilliseconds()}),o.PageMessages.success("Your profile image has been updated.")}})};var n,i=a.props.canEdit,r=a.props.competitionsSummary.totalResults,c=a.props.scriptsSummary.totalResults,p=a.props.discussionsSummary.totalResults,u=a.props.totalDatasets,d=a.props.totalOrganizations;
switch(a.props.activePane.toLowerCase()){case"competitions":n=i||r>0?"competitions":"home";break;case"kernels":n=i||c>0?"kernels":"home";break;case"discussion":n=i||p>0?"discussion":"home";break;case"datasets":n=i||u>0?"datasets":"home";break;case"organizations":n=i||d>0?"organizations":"home";break;case"account":n=i?"account":"home";break;default:n="home"}return a.state=s.extend({},a.props,{activePane:n,activeTab:n,isEditingHeader:!1},a.getMenuLinks(!1)),a.replaceUrlForTab(n),a}return n(t,e),t.prototype.componentWillUnmount=function(){window.removeEventListener("popstate",this.onWindowPopState,!1),window.removeEventListener("resize",this.resizeListener)},t.prototype.componentDidMount=function(){if(window.addEventListener("popstate",this.onWindowPopState,!1),window.addEventListener("resize",this.resizeListener),this.checkHiddenTabMessage(this.state.activePane),24266===this.props.userId){var e='In memory of Lucas, <a href="/forums/f/15/kaggle-forum/t/20388/data-scientist-hero/116473#post116473">a data scientist hero</a>';this.setState({pageMessages:[{type:"info",id:"tribute",htmlMessage:e}]})}},t.prototype.buildLink=function(e,t){return void 0===t&&(t=null),{count:null==t?null:i.numberWithCommas(t),href:"Home"==e?this.props.userUrl:this.props.userUrl+"/"+e.toLowerCase(),title:e,text:e,tab:e}},t.prototype.getMenuLinks=function(e){for(var t=document.body.clientWidth,a=this.props.canEdit,n=this.props.competitionsSummary.totalResults,s=this.props.scriptsSummary.totalResults,i=this.props.discussionsSummary.totalResults,r=this.props.totalDatasets,o=this.props.totalOrganizations,c=a?e?190:this.props.isAdmin&&this.props.userId!==l.Current.userId?230:121:136,p=Math.min(t,950)-c,u=67,d=[{link:this.buildLink("Home"),shouldShow:!0,width:72},{link:this.buildLink("Competitions",n),shouldShow:a||n>0,width:164},{link:this.buildLink("Kernels",s),shouldShow:a||s>0,width:122},{link:this.buildLink("Discussion",i),shouldShow:a||i>0,width:145},{link:this.buildLink("Datasets",r),shouldShow:(a||r>0)&&this.props.canCreateDatasets,width:130},{link:this.buildLink("Organizations",o),shouldShow:a||o>0,width:166},{link:this.buildLink("Account"),shouldShow:a||e,width:90}],m=[],h=[],g=0,f=d;g<f.length;g++){var v=f[g];v.shouldShow&&(v.width<p?(m.push(v.link),p-=v.width):(u>p&&h.push(m.pop()),h.push(v.link),p=u))}return{menuLinks:m,overflowMenuLinks:h}},t.prototype.getValidationPageMessages=function(e){var t=[];return this.validationRules.forEach(function(a){var n=t.filter(function(e){return e.id==a.id}).length>0;(a.isValid()&&n||!a.isValid()&&n&&!e)&&(t=t.filter(function(e){return e.id!=a.id})),a.isValid()||e||t.push({type:"error",id:a.id,message:a.message()})}),t},t.prototype.checkHiddenTabMessage=function(e){switch(e.toLowerCase()){case"competitions":this.showHiddenTabMessageIfNeeded("participate in a competition",this.props.competitionsSummary.totalResults);break;case"kernels":this.showHiddenTabMessageIfNeeded("create a kernel",this.props.scriptsSummary.totalResults);break;case"discussion":this.showHiddenTabMessageIfNeeded("participate in a discussion",this.props.discussionsSummary.totalResults);break;case"datasets":this.showHiddenTabMessageIfNeeded("create a dataset",this.props.totalDatasets);break;case"organizations":this.showHiddenTabMessageIfNeeded("join an organization",this.props.totalOrganizations)}},t.prototype.showHiddenTabMessageIfNeeded=function(e,t){this.props.canEdit&&0===t&&o.PageMessages.info("This tab is hidden from other users until you "+e+".")},t.prototype.render=function(){var e={onProfilePropChanged:this.onProfilePropChanged,onProfileEditingStateChanged:this.onProfileEditingStateChanged,onProfileEditingStateCancelled:this.onProfileEditingStateCancelled,onProfileTabChanged:this.onProfileTabChanged,onUpdateProfileImage:this.onUpdateProfileImage,userAvatarUrl:this.state.userAvatarUrl||this.props.userAvatarUrl};return React.createElement(r.Profile,s.extend({},this.state,e))},t}(React.Component);t.ProfileContainer=c},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(158),r=a(213),o=a(217),l=a(218),c=a(219),p=a(220),u=a(221),d=a(189),m=a(224),h=a(40),g=a(49),f=a(226),v=a(174),y=a(155),_=a(12),b=a(5),E=function(e){function t(t){var a=e.call(this,t)||this;return a.onCityChanged=function(e,t,n){a.props.onProfilePropChanged("city",e),a.props.onProfilePropChanged("region",t),a.props.onProfilePropChanged("country",n)},a.onUpdateImages=function(e,t){return a.props.onUpdateProfileImage(e,t).then(function(e){return a.setState({isEditingImage:!1})})},a.onOpenImageUploader=function(){a.setState({isEditingImage:!0})},a.onCloseImageUploader=function(){a.setState({isEditingImage:!1})},a.state={isEditingImage:!1},a}return n(t,e),t.prototype.getOverallTierName=function(){return"staff"===this.props.performanceTier?"Kaggle Team":this.props.performanceTierCategory+" "+this.props.performanceTier},t.prototype.getCityDescription=function(){var e=f.getCountryNameByCode(this.props.country)||this.props.country;return[this.props.city,this.props.region,e].filter(Boolean).join(", ")},t.prototype.renderDisplayName=function(){var e=this;return this.props.isEditingHeader&&this.props.canEdit?React.createElement(h.InlineTextEditor,{className:"profile__display-name--input",value:this.props.displayName,placeholder:"Enter your display name",onChangeCallback:function(t){return e.props.onProfilePropChanged("displayName",t)}}):React.createElement("span",null,this.props.displayName," ",this.props.genieUrl?React.createElement("a",{href:this.props.genieUrl,className:"profile__genie-link"},"Genie!"):null)},t.prototype.renderAdminCallToAction=function(){var e=this;return this.props.isEditingHeader?React.createElement("div",{className:"profile__cta-area"},React.createElement("a",{className:"profile__editing-cancel",onClick:function(){return e.props.onProfileEditingStateCancelled("Header",["displayName","gitHubUserName","linkedInUrl","twitterUserName","userAvatarUrl","country","region","city","occupation","organization","websiteUrl"])}},"cancel"),React.createElement("a",{className:"pageheader__calltoaction--active",onClick:function(){return e.props.onProfileEditingStateChanged("Header")},title:"Save Profile"},"Save Profile")):React.createElement("div",{className:"profile__cta-area"},this.props.userId!==h.Current.userId?React.createElement("a",{className:"profile__contact-user-link",onClick:function(){return e.props.onProfileTabChanged("contact")}},"Contact User"):null,React.createElement("a",{className:"pageheader__calltoaction",onClick:function(){return e.props.onProfileEditingStateChanged("Header")},title:"Edit Profile"},"Edit Profile"))},t.prototype.renderContactCallToAction=function(){var e=this;return React.createElement("a",{className:"pageheader__calltoaction",onClick:function(){return e.props.onProfileTabChanged("contact")},title:"Contact User"},"Contact User")},t.prototype.renderAvatarOverlay=function(){var e=React.createElement(v.ImageUploader,{title:"Upload Your Profile Image",imageSettings:[new v.ImageSetting("profile image","Select an area of the image to use for your profile",new v.Size(200,200),new v.Rectangle(new v.Point(0,0),new v.Size(0,0)))],originalImageUrl:null,containerSize:new v.Size(500,300),selectorBorderWidth:1,onCancel:this.onCloseImageUploader,onUpdateImages:this.onUpdateImages,hiResScale:2}),t=React.createElement(y.Modal,{buttonClassName:"pageheader__imageuploaderbutton",modalClassName:"pageheader__imageuploadermodal",modalContent:e,modalIsShown:this.state.isEditingImage,onShow:this.onOpenImageUploader,onClose:this.onCloseImageUploader});return React.createElement("div",{className:"profile__avatar-overlay"},t,React.createElement("p",{className:"profile__avatar-text",onClick:this.onOpenImageUploader},"Change Your Profile Photo"))},t.prototype.renderUserSocialLinks=function(){var e=this;return this.props.isEditingHeader?React.createElement("ul",{className:"profile__social-links--editing"},React.createElement("li",{className:"profile__social-link--editing"},React.createElement("span",{className:"fa fa-github"}),React.createElement(h.InlineTextEditor,{className:"profile__social-link--input",value:this.props.gitHubUserName,placeholder:"GitHub Username",onChangeCallback:function(t){return e.props.onProfilePropChanged("gitHubUserName",t)}})),React.createElement("li",{className:"profile__social-link--editing"},React.createElement("span",{className:"fa fa-twitter"}),React.createElement(h.InlineTextEditor,{className:"profile__social-link--input",value:this.props.twitterUserName,placeholder:"Twitter Username",onChangeCallback:function(t){return e.props.onProfilePropChanged("twitterUserName",t)}})),React.createElement("li",{className:"profile__social-link--editing"},React.createElement("span",{className:"fa fa-linkedin"}),React.createElement(h.InlineTextEditor,{className:"profile__social-link--input",value:this.props.linkedInUrl,placeholder:"LinkedIn URL",onChangeCallback:function(t){return e.props.onProfilePropChanged("linkedInUrl",t)}})),React.createElement("li",{className:"profile__social-link--editing"},React.createElement("span",{className:"fa fa-globe"}),React.createElement(h.InlineTextEditor,{className:"profile__social-link--input",value:this.props.websiteUrl,placeholder:"Website URL",onChangeCallback:function(t){return e.props.onProfilePropChanged("websiteUrl",t)}}))):React.createElement("ul",{className:"profile__social-links"},this.props.gitHubUserName&&this.props.gitHubUserName.length?React.createElement("li",{className:"profile__social-link"},React.createElement("a",{href:"https://github.com/"+this.props.gitHubUserName,rel:"nofollow"},React.createElement("span",{className:"fa fa-github"}))):null,this.props.twitterUserName&&this.props.twitterUserName.length?React.createElement("li",{className:"profile__social-link"},React.createElement("a",{href:"https://twitter.com/"+this.props.twitterUserName,rel:"nofollow"},React.createElement("span",{className:"fa fa-twitter"}))):null,this.props.linkedInUrl&&this.props.linkedInUrl.length?React.createElement("li",{className:"profile__social-link"},React.createElement("a",{href:this.props.linkedInUrl,rel:"nofollow"},React.createElement("span",{className:"fa fa-linkedin"}))):null,this.props.websiteUrl&&this.props.websiteUrl.length?React.createElement("li",{className:"profile__social-link"},React.createElement("a",{href:this.props.websiteUrl,className:"profile__social-link--url",rel:"nofollow"},this.props.websiteUrl)):null)},t.prototype.renderDatasetsPane=function(){var e=React.createElement(d.DatasetListReact,{banner:!1,canCreateNewDataset:!1,userId:this.props.userId});return this.props.totalDatasets>0||!this.props.canSeeCallToAction||this.props.userId!==h.Current.userId?e:React.createElement("div",null,React.createElement(b.ContentBox,null,React.createElement("div",{className:"profile__user-action-callout"},React.createElement("h4",null,"A data scientist with no data? No such thing!"),React.createElement("p",null,"Publish any dataset on Kaggle’s ",React.createElement("a",{href:"https://www.kaggle.com/datasets"},"open data platform"),", and your collection will grow here."),React.createElement("p",null,"Find other data enthusiasts with shared interests to discuss and collaborate for work or play."),React.createElement("div",{className:"profile__user-action-callout-button"},React.createElement(_.Button,{text:"New Dataset",href:"https://www.kaggle.com/datasets/new"})))),e)},t.prototype.renderActivePane=function(){switch(this.props.activePane.toLowerCase()){case"home":return React.createElement(m.HomeContainer,s({},this.props));case"competitions":return React.createElement(r.Competition,s({},this.props));case"kernels":return React.createElement(c.Scripts,s({},this.props));case"discussion":return React.createElement(o.Discussion,s({},this.props));case"contact":return React.createElement(l.Contact,s({},this.props));case"datasets":return this.renderDatasetsPane();case"organizations":return React.createElement(p.Organizations,s({},this.props));case"account":return this.props.canEdit?React.createElement(u.AccountContainer,{userName:this.props.userName}):React.createElement(m.HomeContainer,s({},this.props));default:return null}},t.prototype.renderNav=function(){var e=this;return React.createElement(i.PageHeaderNav,{activeTab:this.props.activeTab,classNameModifier:"profile",menuLinks:this.props.menuLinks,overflowMenuLinks:this.props.overflowMenuLinks,changeActiveTab:function(t){return e.props.onProfileTabChanged(t)}})},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"profile"},React.createElement("div",{className:"profile__header--"+this.props.performanceTier},React.createElement(i.PageHeader,null,React.createElement(i.PageHeaderTopRow,{modifier:"profile",title:this.renderDisplayName(),subtitle:"",isEditingHeaderInfo:!1,titleUrl:null},React.createElement(i.PageHeaderThumbnail,{classNameElement:"avatar",classNameModifier:"profile",imageUrl:this.props.userAvatarUrl,thumbnailOverlay:this.props.isEditingHeader?this.renderAvatarOverlay():null,targetUrl:""}),this.props.isEditingHeader?null:React.createElement("div",null,React.createElement(h.MediaQuery,{minWidth:0,maxWidth:h.Breakpoints.mobileMax},React.createElement("p",{className:"profile__user-metadata"},"Joined ",React.createElement(h.TimeAgo,{time:this.props.userJoinDate}),React.createElement("br",null),"last seen ",React.createElement(h.TimeAgo,{time:this.props.userLastActive,maxGranularity:"day"}))),React.createElement(h.MediaQuery,{minWidth:h.Breakpoints.tabletMin},React.createElement("p",{className:"profile__user-metadata"},"Joined ",React.createElement(h.TimeAgo,{time:this.props.userJoinDate})," · last seen ",React.createElement(h.TimeAgo,{time:this.props.userLastActive,maxGranularity:"day"})))),React.createElement(h.MediaQuery,{minWidth:h.Breakpoints.tabletMax},React.createElement("div",{className:"profile__user-tier profile__user-tier--"+this.props.performanceTier},React.createElement("a",{href:"/progression",title:"Progression"},React.createElement("p",null,React.createElement("img",{src:"/static/images/tiers/"+this.props.performanceTier+"@192.png",height:"92px",width:"92px"})),React.createElement("p",null,this.getOverallTierName())))),this.props.isEditingHeader&&this.props.canEdit?React.createElement("div",null,React.createElement("div",{className:"profile__user-occupation-edit"},React.createElement(h.InlineTextEditor,{className:"profile__user-occupation--input",value:this.props.occupation,placeholder:"Occupation",onChangeCallback:function(t){return e.props.onProfilePropChanged("occupation",t)}})," at ",React.createElement(h.InlineTextEditor,{className:"profile__user-occupation--input",value:this.props.organization,placeholder:"Organization",onChangeCallback:function(t){return e.props.onProfilePropChanged("organization",t)}})),React.createElement("div",{className:"profile__country-select"},React.createElement(g.CityLookup,{city:this.props.city,region:this.props.region,country:this.props.country,onChange:this.onCityChanged}))):React.createElement("div",null,React.createElement(h.MediaQuery,{minWidth:h.Breakpoints.tabletMax},React.createElement("div",null,React.createElement("p",{className:"profile__user-occupation"},(this.props.occupation||"")+" "+(this.props.occupation&&this.props.organization?"at":"")+" "+(this.props.organization||"")),React.createElement("p",{className:"profile__user-location"},this.getCityDescription()))),React.createElement(h.MediaQuery,{minWidth:h.Breakpoints.mobileMax,maxWidth:h.Breakpoints.tabletMax},React.createElement("div",null,React.createElement("p",{className:"profile__user-location"},(this.props.occupation||"")+" "+(this.props.occupation&&this.props.organization?"at":"")+" "+(this.props.organization||""),""+(this.props.occupation||this.props.organization?" · ":""),this.getCityDescription())))),this.renderUserSocialLinks()))),React.createElement("div",{className:"profile__wrapper"},React.createElement(i.PageHeaderBottomRow,{pageMessages:this.props.pageMessages},React.createElement(h.MediaQuery,{minWidth:0,maxWidth:h.Breakpoints.tabletMax},React.createElement(h.OverflowX,null,this.renderNav())),React.createElement(h.MediaQuery,{minWidth:h.Breakpoints.desktopMin},this.renderNav()),React.createElement(h.MediaQuery,{minWidth:h.Breakpoints.desktopMin},this.props.canEdit?this.renderAdminCallToAction():this.renderContactCallToAction()))),React.createElement("div",{className:"profile__wrapper"},this.renderActivePane()))},t}(React.Component);t.Profile=E},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(2),r=a(161),o=a(7),l=a(32),c=a(34),p=a(29),u=a(214),d=a(215),m=a(216),h=a(73),g=[{value:"best",label:"Best Results"},{value:"recent",label:"Most Recent"}],f=[{value:"completed",label:"Completed"},{value:"active",label:"Active"},{value:"tutorial",label:"Tutorial"}],v=function(e){function t(t){var a=e.call(this,t)||this;return a.state={competesWith:[]},a}return n(t,e),t.prototype.componentDidMount=function(){var e=this;i.get("/"+this.props.userName+"/competitions.json?includeStats=true").done(function(t){return e.setState(t)})},t.prototype.isTeamCompetition=function(e){return e.teamMembers.length>1},t.prototype.hasCompetitionEnded=function(e){return new Date(e.endDate)<new Date},t.prototype.getListTitle=function(){return this.state.totalCompetitions?React.createElement("span",null,React.createElement(h.FormatNumber,{number:this.state.totalCompetitions})," competitions entered"):" "},t.prototype.renderTimeAgo=function(e){return this.hasCompetitionEnded(e)?React.createElement(o.TimeAgo,{time:e.endDate}):"In progress"},t.prototype.renderRankingDescription=function(e){var t=e.ranking;return 1===t?this.hasCompetitionEnded(e)?React.createElement("span",{className:"profile-competitions__list-item-ranking-desc-winner"},"Winner"):React.createElement("span",null,"1st place"):10>=t?React.createElement("span",null,"Top 10"):React.createElement("span",null,"Top ",Math.round(100*t/e.totalCompetitors),"%")},t.prototype.renderTeamDescription=function(e){return this.isTeamCompetition(e)?React.createElement("span",null,e.totalEntries," submissions with team ",React.createElement("a",{href:e.teamUrl,className:"profile-competitions__team-link"},e.teamName)):React.createElement("span",null,e.totalEntries," entries as a solo competitor")},t.prototype.renderCompetitionListItem=function(e,t){return React.createElement(l.BlockLink,{key:t,href:e.competitionUrl},React.createElement("div",{className:"profile-competitions__list-item profile-competitions__list-item--"+(e.canQualifyTalent?"qualify":"no-qualify")},React.createElement("div",{className:"profile-competitions__list-item-thumbnail"},React.createElement("img",{src:e.thumbnailImageUrl,alt:e.competitionTitle})),React.createElement("div",{className:"profile-competitions__list-item-meta"},React.createElement("h2",{className:"profile-competitions__list-item-name"},React.createElement("a",{href:e.competitionUrl},e.competitionTitle)),React.createElement("div",{className:"profile-competitions__list-item-entries"},React.createElement("span",{className:"profile-competitions__list-item-entries--bold"},this.renderTimeAgo(e)," · Top ",Math.min(Math.ceil(e.ranking/e.totalCompetitors*100),100),"% ",e.canQualifyTalent?"":" · Competition Ineligible for Medals"),React.createElement("br",null),this.renderTeamDescription(e)),React.createElement("div",null,this.isTeamCompetition(e)?e.teamMembers.map(function(e,t){return React.createElement(c.Avatar,s({key:t},e,{width:30}))}):null)),React.createElement("div",{className:"profile-competitions__list-item-medal"},null!=e.medal?React.createElement("img",{src:"/static/images/medals/competitions/"+e.medal+"L@2x.png",title:e.medal}):React.createElement("div",{className:"profile-competitions__list-item-medal-spacer"}),React.createElement("div",{className:"profile-competitions__list-item-medal-rank-box"},React.createElement("div",{className:"profile-competitions__list-item-medal-rank"},React.createElement(m.FormatPlace,{number:e.ranking,superscript:!0})),React.createElement("div",{className:"profile-competitions__list-item-medal-teams"},"of ",e.totalCompetitors)))))},t.prototype.render=function(){return React.createElement("div",{className:"profile-competitions"},React.createElement(d.AchievementSummary,s({},this.props.competitionsSummary),React.createElement("div",{className:"achievement-summary__stats-wrapper"},React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.competitionsSummary.tier},"Competitions: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalCompetitions)),React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.competitionsSummary.tier},"Solo: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalSoloCompetitions," ",React.createElement("span",{className:"achievement-summary__stats-text--small"},this.state.totalSoloCompetitions?"("+Math.round(this.state.totalSoloCompetitions/this.state.totalCompetitions*100)+"%)":null," "))),React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.competitionsSummary.tier},"Team: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalTeamCompetitions," ",React.createElement("span",{className:"achievement-summary__stats-text--small"},this.state.totalTeamCompetitions?"("+Math.round(this.state.totalTeamCompetitions/this.state.totalCompetitions*100)+"%)":null," "))))),React.createElement(u.NextTier,{currentTier:this.props.competitionsSummary.tier,area:"competitions",userId:this.props.userId,tierRequirements:this.props.tierRequirements}),React.createElement(r.SmartListContainer,{titleResolver:this.getListTitle.bind(this),pluralItemDescription:"competitions",sortOptions:g,groups:f,data:this.state,dataUrl:"/"+this.props.userName+"/competitions.json",dataPathToList:"competitions",itemRenderer:this.renderCompetitionListItem.bind(this),mobileSortUpperBound:p.Breakpoints.tabletMax}))},t}(React.Component);t.Competition=v},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(24),i=a(6),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getNextTier=function(){var e=this,t=s.findIndex(this.props.tierRequirements,function(t){return t.tier===e.props.currentTier});return this.props.tierRequirements[t+1]},t.prototype.getRequirements=function(){var e=this;return this.getNextTier().requirements.filter(function(t){return!(t.isComplete||t.group&&t.group.toLowerCase()!==e.props.area)}).map(function(e){return e.label}).join(", ")},t.prototype.render=function(){return this.props.userId===i.Current.userId&&"grandmaster"!=this.props.currentTier?React.createElement("div",{className:"profile-next-tier profile-next-tier--"+this.getNextTier().tier},React.createElement("div",{className:"profile-next-tier__next-icon-box"},React.createElement("div",null,React.createElement("img",{src:"/static/images/tiers/"+this.getNextTier().tier+"@192.png",title:this.getNextTier().tier,height:"60",width:"60"}))),React.createElement("div",{className:"profile-next-tier__text"},React.createElement("div",{className:"profile-next-tier__title"},"Level up to ",React.createElement("span",{className:"profile-next-tier__capitalize"},this.props.area)," ",React.createElement("span",{className:"profile-next-tier__capitalize"},this.getNextTier().tier)),React.createElement("div",{className:"profile-next-tier__content"},this.getRequirements()))):null},t}(React.Component);t.NextTier=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(3),i=a(5),r=a(178),o=a(7),l=a(32),c=a(73),p=a(216),u=function(e){function t(t){var a=e.call(this,t)||this;return a.mode=t.children?"stats":"highlights",a}return n(t,e),t.prototype.formatNumber=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.prototype.getRank=function(){return"Top "+Math.min(Math.ceil(100*this.props.rankPercentage),100)+"%"},t.prototype.getTitle=function(){var e=this;return React.createElement("span",{className:"achievement-summary__title achievement-summary__title--"+(this.props.onProfileTabChanged?"link":"no-link"),onClick:this.props.onProfileTabChanged?function(){return e.props.onProfileTabChanged(e.props.summaryType)}:null},this.props.summaryType," ","stats"===this.mode?"Summary":this.props.tier)},t.prototype.getNoResultsMessage=function(){var e=this.props.summaryType.replace(/s$/,"");return"No "+e+" results"},t.prototype.shouldRenderComponent=function(){var e=!!this.props.children,t=!!this.props.highlights.length;return!e||t},t.prototype.renderScoreDescription=function(e){switch(this.props.summaryType){case"competitions":return React.createElement("div",null,React.createElement("p",null,React.createElement(p.FormatPlace,{number:e.score,superscript:!0})));default:return React.createElement("div",null,React.createElement("p",null,e.score),React.createElement("p",null,s("vote",e.score)))}},t.prototype.renderCompetitorCount=function(e){switch(this.props.summaryType){case"competitions":return React.createElement("div",{className:"achievement-summary__highlight__score-subtitle"},"of ",e.scoreOutOf);default:return React.createElement("div",null)}},t.prototype.renderRank=function(e){switch(this.props.summaryType){case"competitions":return React.createElement("span",null," · ","Top "+Math.min(Math.ceil(e.score/e.scoreOutOf*100),100)+"%");default:return React.createElement("span",null)}},t.prototype.renderMedal=function(e,t){return React.createElement("div",{className:"achievement-summary__medal achievement-summary__medal--"+t+" achievement-summary__medal--"+this.mode},React.createElement("p",null,React.createElement("img",{src:"/static/images/medals/"+this.props.summaryType+"/"+t+"L@1x.png",title:t})),React.createElement("p",null,e))},t.prototype.renderSmallMedal=function(e){return e?React.createElement("span",null,React.createElement("img",{src:"/static/images/medals/"+this.props.summaryType+"/"+e+"L@1x.png",title:e,height:"12px",width:"12 px",className:"achievement-summary__medal-small"})," · "):null},t.prototype.renderTeaserItem=function(e,t){return React.createElement(l.BlockLink,{href:e.url,key:t},React.createElement("div",{className:"achievement-summary__highlight"},React.createElement("div",{className:"achievement-summary__highlight__title"},React.createElement("p",null,React.createElement("a",{href:e.url,title:e.title},e.title)),React.createElement("p",{className:"achievement-summary__highlight__subtitle"},this.renderSmallMedal(e.medal),React.createElement(o.TimeAgo,{time:e.date}),this.renderRank(e))),React.createElement("div",{className:"achievement-summary__highlight__score"},this.renderScoreDescription(e)," ",this.renderCompetitorCount(e))))},t.prototype.renderTierIcon=function(){return React.createElement("img",{src:"/static/images/tiers/"+this.props.tier+"@48.png",title:this.props.tier,height:"30",width:"30"})},t.prototype.renderLargeTierIcon=function(){return React.createElement("img",{src:"/static/images/tiers/"+this.props.tier+"@192.png",title:this.props.tier,height:"70",width:"70"})},t.prototype.renderSummary=function(){return null!=this.props.rankCurrent&&this.props.highlights.length>0?this.props.rankCurrent>this.props.rankHighest?React.createElement("div",{className:"achievement-summary__rank-box-wrapper"},React.createElement("a",{href:"/rankings?group="+this.props.summaryType,className:"achievement-summary__rank-link"},React.createElement("div",{className:"achievement-summary__rank-box achievement-summary__rank-box--current"},React.createElement("div",{className:"achievement-summary__rank-label achievement-summary__rank-label--"+this.props.tier},"Current Rank"),React.createElement("div",{className:"achievement-summary__rank-text achievement-summary__rank-text--"+this.props.tier},this.props.rankCurrent),React.createElement("div",{className:"achievement-summary__rank-label--bottom"}," of ",React.createElement(c.FormatNumber,{number:this.props.rankOutOf})))),React.createElement("a",{href:"/rankings?group="+this.props.summaryType,className:"achievement-summary__rank-link"},React.createElement("div",{className:"achievement-summary__rank-box achievement-summary__rank-box--highest"},React.createElement("div",{className:"achievement-summary__rank-label achievement-summary__rank-label--"+this.props.tier},"Highest Rank"),React.createElement("div",{className:"achievement-summary__rank-text achievement-summary__rank-text--"+this.props.tier},this.props.rankHighest),React.createElement("div",{className:"achievement-summary__rank-label--bottom--empty"})))):React.createElement("a",{href:"/rankings?group="+this.props.summaryType,className:"achievement-summary__rank-link"},React.createElement("div",{className:"achievement-summary__rank-box"},React.createElement("div",{className:"achievement-summary__rank-label achievement-summary__rank-label--"+this.props.tier},"Rank"),React.createElement("div",{className:"achievement-summary__rank-text achievement-summary__rank-text--"+this.props.tier},this.props.rankCurrent),React.createElement("div",{className:"achievement-summary__rank-label--bottom"}," of ",React.createElement(c.FormatNumber,{number:this.props.rankOutOf})))):React.createElement("div",{className:"achievement-summary__rank-box"},React.createElement("a",{href:"/progression/",className:"achievement-summary__rank-link"},React.createElement("div",{className:"achievement-summary__rank-text achievement-summary__rank-text--smaller achievement-summary__rank-text--"+this.props.tier},"Unranked")))},t.prototype.render=function(){return this.shouldRenderComponent()?React.createElement(i.ContentBox,{title:this.getTitle(),titleBarRightSide:"highlights"===this.mode?this.renderTierIcon():null,contentClassName:"achievement-summary__content-box"},React.createElement("div",{className:"achievement-summary achievement-summary--"+this.mode},"stats"===this.mode?React.createElement("div",{className:"achievement-summary__tier"},React.createElement("div",null,this.renderLargeTierIcon()),React.createElement("div",null,this.props.summaryType,React.createElement("br",null),this.props.tier)):null,React.createElement("div",{className:"achievement-summary__wrapper achievement-summary__wrapper--"+this.props.summaryType},React.createElement("div",{className:"achievement-summary__rank"},this.renderSummary()),React.createElement("div",{className:"achievement-summary__medals"},this.renderMedal(this.props.totalGoldMedals,"gold"),this.renderMedal(this.props.totalSilverMedals,"silver"),this.renderMedal(this.props.totalBronzeMedals,"bronze")),"highlights"===this.mode?React.createElement("div",{className:"achievement-summary__items"},React.createElement(r.TeaserList,{listItems:this.props.highlights,listItemRenderer:this.renderTeaserItem.bind(this),
emptyListMessage:this.getNoResultsMessage()})):null),"stats"===this.mode?React.createElement("div",{className:"achievement-summary__stats"},this.props.children):null)):null},t}(React.Component);t.AchievementSummary=u},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(73),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getSuffix=function(){var e=this.props.number%100;if(e>10&&20>e)return"th";switch(this.props.number%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},t.prototype.render=function(){var e=this.props.superscript?{verticalAlign:"super",fontSize:"0.5em"}:{},t=React.createElement("span",{style:e},this.getSuffix());return React.createElement("span",null,React.createElement(s.FormatNumber,{number:this.props.number}),t)},t}(React.Component);t.FormatPlace=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(7),r=a(23),o=a(161),l=a(29),c=a(214),p=a(215),u=[{value:"mostVotes",label:"Most Votes"},{value:"latestPost",label:"Latest Post"}],d=[{value:"commentsAndTopics",label:"Comments and topics"},{value:"comments",label:"Comments"},{value:"topics",label:"Topics"},{separator:!0},{value:"upvoted",label:"Upvoted"}],m=398,h=function(e){function t(t){var a=e.call(this,t)||this;return a.state={},a}return n(t,e),t.prototype.componentDidMount=function(){var e=this;$.get("/"+this.props.userName+"/discussion.json").done(function(t){return e.setState(t)})},t.prototype.onDidUpdate=function(){$(".profile-discussion__list-item").each(function(e,t){var a=$(t),n=a.outerHeight();n>m&&a.find(".profile-discussion__show-more").show()})},t.prototype.onShowMoreClicked=function(e){var t=$(e.target);t.parents(".profile-discussion__list-item").css("max-height","none"),t.parents(".profile-discussion__show-more").remove()},t.prototype.getTitle=function(e,t){return null!=this.state.totalTopics&&t.data&&!t.isLoadingMoreData?(t.data.totalDiscussions||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" "+t.values.group.replace(/([A-Z])/g," $1").toLowerCase():" "},t.prototype.renderTaglineLink=function(e){return React.createElement("a",{href:e.url},e.name)},t.prototype.renderTaglineLinkPost=function(e,t){return React.createElement("a",{href:e.url+"?forumMessageId="+t+"#post"+t},e.name)},t.prototype.renderTagline=function(e){switch(e.type){case"forumMessage":return React.createElement("div",null,React.createElement("div",{className:"profile-discussion__list-item-tagline-title"},"Comment in: ",this.renderTaglineLinkPost(e.forumTopic,e.id)),React.createElement("p",null,React.createElement(i.TimeAgo,{time:e.postDate})," in forum: ",this.renderTaglineLink(e.forum)));case"scriptComment":return React.createElement("div",null,React.createElement("div",{className:"profile-discussion__list-item-tagline-title"},"Comment on: ",this.renderTaglineLink(e.script)),React.createElement("p",null,React.createElement(i.TimeAgo,{time:e.postDate})," (kernel comment) "));case"forumTopic":return React.createElement("div",null,React.createElement("div",{className:"profile-discussion__list-item-tagline-title"},"Topic: ",this.renderTaglineLink(e.forumTopic)),React.createElement("p",null,React.createElement(i.TimeAgo,{time:e.postDate})," in forum: ",this.renderTaglineLink(e.forum)));default:return null}},t.prototype.renderDiscussionListItem=function(e,t){return React.createElement("div",{key:t,className:"profile-discussion__list-item"},React.createElement("div",{className:"profile-discussion__list-item-vote"},React.createElement(r.VoteButton,{totalVotes:e.totalScore,hasAlreadyVotedUp:e.vote.hasAlreadyVotedUp,hasAlreadyVotedDown:e.vote.hasAlreadyVotedDown,canUpvote:e.vote.canUpvote,canDownvote:e.vote.canDownvote,voteUpUrl:e.vote.voteUpUrl,voteDownUrl:e.vote.voteDownUrl}),e.medal?React.createElement("img",{src:"/static/images/medals/discussion/"+e.medal+"L@1x.png",title:e.medal,height:"25px",width:"25px"}):null),React.createElement("div",{className:"profile-discussion__list-item-section"},React.createElement("div",{className:"profile-discussion__list-item-tagline"},this.renderTagline(e),e.attachments.map(function(e){return React.createElement("div",null,React.createElement("a",{href:e.downloadUrl},e.fileName)," (",e.fileSizeDescription,")")}),React.createElement("p",null,"---")),React.createElement("div",{className:"profile-discussion__list-item-body"},React.createElement("div",{className:"profile-discussion__show-more",onClick:this.onShowMoreClicked},React.createElement("div",null," "),React.createElement("p",null,"Read full comment ",React.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true"}))),React.createElement("div",{className:"markdown-converter__text--rendered",dangerouslySetInnerHTML:{__html:e.message}}))))},t.prototype.render=function(){return React.createElement("div",{className:"profile-discussion"},React.createElement(p.AchievementSummary,s({},this.props.discussionsSummary),React.createElement("div",{className:"achievement-summary__stats-wrapper"},React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.discussionsSummary.tier},"Total Posts: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalDiscussions)),React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.discussionsSummary.tier},"Comments: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalReplies)),React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.discussionsSummary.tier},"Topics: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalDiscussions?this.state.totalDiscussions-this.state.totalReplies:null)),React.createElement("div",{className:"achievement-summary__stats-divider"}),React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.discussionsSummary.tier},"Net Votes: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalUpvotes)),React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.discussionsSummary.tier},"Votes/Post: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalUpvotes?Math.round(this.state.totalUpvotes/this.state.totalDiscussions*100)/100:null)))),React.createElement(c.NextTier,{currentTier:this.props.discussionsSummary.tier,area:"discussion",userId:this.props.userId,tierRequirements:this.props.tierRequirements}),React.createElement(o.SmartListContainer,{titleResolver:this.getTitle.bind(this),pluralItemDescription:"discussions",sortOptions:u,groups:d,data:this.state,dataUrl:"/"+this.props.userName+"/discussion.json",dataPathToList:"discussions",itemRenderer:this.renderDiscussionListItem.bind(this),onDidUpdate:this.onDidUpdate,mobileSortUpperBound:l.Breakpoints.tabletMax}))},t}(React.Component);t.Discussion=h},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=function(e){function t(t){var a=e.call(this,t)||this;return a.onSendEmail=function(){var e=$(a.refs.form).serializeArray();$.post(a.endpointUrl,e).then(function(e){s.PageMessages.clear(),e?(s.PageMessages.success("Your message has been sent"),a.setState({canSend:!1})):s.PageMessages.error("There was a problem sending your message")})},a.endpointUrl=a.props.userUrl+"/contact.json",a.state={hasLoaded:!1},a}return n(t,e),t.prototype.componentDidMount=function(){var e=this;$.get(this.endpointUrl).then(function(t){t.errorMessage&&s.PageMessages.error(t.errorMessage),t.infoMessage&&s.PageMessages.info(t.infoMessage),e.setState({hasLoaded:!0,canSend:t.canSend})})},t.prototype.render=function(){var e=this;return this.state.hasLoaded?React.createElement("div",{className:"profile-contact"},React.createElement(s.ContentBox,{title:"Contact User"},React.createElement("div",{className:"profile-contact__wrapper"},React.createElement("form",{ref:"form",disabled:!this.state.canSend},React.createElement("div",{className:"profile-contact__row"},React.createElement("label",{className:"profile-contact__row-label"},"To"),React.createElement("div",{className:"profile-contact__row-value"},this.props.displayName," ",React.createElement("span",{className:"profile-contact__confidential"},"<confidential> "))),React.createElement("div",{className:"profile-contact__row"},React.createElement("label",{className:"profile-contact__row-label"},"From"),React.createElement("div",{className:"profile-contact__row-value"},s.Current.userDisplayName," <",s.Current.userEmail,"> ")),React.createElement("div",{className:"profile-contact__row"},React.createElement("label",{className:"profile-contact__row-label"},"Subject"),React.createElement("div",{className:"profile-contact__row-value"},React.createElement("input",{type:"text",className:"profile-contact__subject",name:"subject",disabled:!this.state.canSend,autoFocus:!0}))),React.createElement("div",{className:"profile-contact__row"},React.createElement("textarea",{className:"profile-contact__body",name:"body",disabled:!this.state.canSend})),React.createElement("div",{className:"profile-contact__row"},React.createElement(s.Button,{text:"Send Email",onClick:this.onSendEmail,isDisabled:!this.state.canSend}),this.state.canSend?React.createElement("a",{className:"profile-contact__discard-link",onClick:function(){return e.props.onProfileTabChanged("home")}},"Discard"):null))))):null},t}(React.Component);t.Contact=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(2),r=a(5),o=a(215),l=a(1),c=a(214),p=a(6),u=function(e){function t(t){var a=e.call(this,t)||this;return a.state={},a}return n(t,e),t.prototype.componentDidMount=function(){var e=this;i.get("/"+this.props.userName+"/code.json").done(function(t){return e.setState(t)})},t.prototype.render=function(){var e=null;return this.props.canSeeCallToAction&&0===this.props.totalScripts&&this.props.userId===p.Current.userId&&(e=React.createElement(r.ContentBox,null,React.createElement("div",{className:"profile__user-action-callout"},React.createElement("h4",null,"In the words of your first math teacher, “Show your work”. "),React.createElement("p",null,"Any code you write and execute in ",React.createElement("a",{href:"https://www.kaggle.com/kernels"},"Kernels")," will be published here."),React.createElement("p",null,"A portfolio of models and dazzling visuals will attract collaborators, recruiters, and upvotes!")))),React.createElement("div",{className:"profile___scripts"},React.createElement(o.AchievementSummary,s({},this.props.scriptsSummary),React.createElement("div",{className:"achievement-summary__stats-wrapper"},React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.scriptsSummary.tier},"Upvotes: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalUpvotes)),React.createElement("div",null,React.createElement("span",{className:"achievement-summary__stats-label achievement-summary__stats-label--"+this.props.scriptsSummary.tier},"Forks: "),React.createElement("span",{className:"achievement-summary__stats-text"},this.state.totalForks)))),React.createElement(c.NextTier,{currentTier:this.props.scriptsSummary.tier,area:"kernels",userId:this.props.userId,tierRequirements:this.props.tierRequirements}),e,React.createElement(l.ScriptList,{listTitle:"Kernels",banner:!1,showFilters:!0,sourceBaseUrl:"/kernels/all/",userId:this.props.userId,languagesMetadataUrl:"/kernels/alllang",outputTypesMetadataUrl:"/kernels/allouttypes",loginAndReturnUrl:null,newNotebookUrl:null,newScriptUrl:null,showScriptProjectName:!0,showHiddenSelectionGroup:this.props.canEdit}))},t}(React.Component);t.Scripts=u},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(40),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderTitle=function(e){var a=t.props.totalOrganizations;return React.createElement("span",null,React.createElement(i.Pluralize,{count:a,word:"organization",formatNumber:!0})," joined")},t.renderOrganization=function(e){return React.createElement(i.OrganizationCard,s({},e,{key:e.url}))},t.renderFooter=function(e){return React.createElement("div",{className:"profile__organizations-footer"},React.createElement(i.Button,{href:"/organizations/new",text:"Create an organization"}))},t}return n(t,e),t.prototype.render=function(){return React.createElement(i.SmartListContainer,{titleResolver:this.renderTitle,dataUrl:this.props.userUrl+"/organizations.json",itemRenderer:this.renderOrganization,listFooterRenderer:this.renderFooter,pluralItemDescription:"organizations"})},t}(React.Component);t.Organizations=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(222),r=a(160),o=function(e){function t(t){var a=e.call(this,t)||this;return a.state=a.getDefaultState(),a}return n(t,e),t.prototype.getDefaultState=function(){var e=this;return{onEditClick:this.onEditClick.bind(this),onSaveClick:this.onSaveClick.bind(this),onCancelClick:this.onCancelClick.bind(this),onUnlinkClick:this.onUnlinkClick.bind(this),onChangePasswordClick:this.onChangePasswordClick.bind(this),onCancelPasswordClick:this.onCancelPasswordClick.bind(this),onSavePasswordClick:this.onSavePasswordClick.bind(this),attributesForm:function(t){return e.attributesForm=t},changePasswordForm:function(t){return e.changePasswordForm=t},isEditing:!1,logins:[]}},t.prototype.getFormData=function(e){var t={};return s.each(s(e).serializeArray(),function(e,a){t[a.name]=a.value}),t},t.prototype.onChangePasswordClick=function(){this.setState({isShowingChangePassword:!0})},t.prototype.onCancelPasswordClick=function(){this.setState({isShowingChangePassword:!1})},t.prototype.onSavePasswordClick=function(){var e=this;s.ajax({url:"https://"+window.location.hostname+"/"+this.props.userName+"/password.json/",type:"PUT",data:this.getFormData(this.changePasswordForm)}).done(function(t){t.success?(e.setState({isShowingChangePassword:!1}),r.PageMessages.success("Your password has been changed.")):r.PageMessages.error("The current password is incorrect or the new password is invalid.")})},t.prototype.onEditClick=function(){this.setState({isEditing:!0,validation:[]})},t.prototype.onSaveClick=function(){var e=this;r.PageMessages.clear(),s.ajax({url:"/"+this.props.userName+"/account.json",type:"PUT",data:this.getFormData(this.attributesForm)}).done(function(t){e.setState(s.extend({isEditing:!1},t)),r.PageMessages.success("Your account settings have been changed.")}).fail(function(t){403===t.status?e.setState({validation:JSON.parse(t.responseText)}):r.PageMessages.error("An error has occurred. Please try again.")})},t.prototype.onCancelClick=function(){this.setState({isEditing:!1})},t.prototype.onUnlinkClick=function(e){var t=this;s.ajax({url:"/"+this.props.userName+"/account/link/"+e.loginProviderName.toLowerCase()+"/"+e.loginId+".json",type:"delete"}).done(function(e){t.setState(e),r.PageMessages.add(e.pageMessages)})},t.prototype.componentDidMount=function(){var e=this;s.get("/"+this.props.userName+"/account.json").done(function(t){return e.setState(t)})},t.prototype.render=function(){return React.createElement(i.Account,s.extend({},this.state,this.props))},t}(React.Component);t.AccountContainer=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(48),r=a(223),o=["Facebook","Google","Yahoo"],l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getFormattedDateOfBirth=function(){if(this.props.dateOfBirth){var e=this.props.dateOfBirth;return e.substring(0,4)+"/"+e.substring(5,7)+"/"+e.substring(8,10)}return null},t.prototype.getValidationMessage=function(e){return this.props.validation?(this.props.validation.filter(function(t){return t.key===e})[0]||{}).error:null},t.prototype.getIdentityProviders=function(){var e=this.props.logins.map(function(e){return e.loginProviderName});return o.filter(function(t){return e.indexOf(t)<0})},t.prototype.renderTitleBarRightSide=function(){return this.props.isEditing?React.createElement("div",{className:"account__multiple-button-container"},React.createElement("a",{className:"account__edit--cancel",onClick:this.props.onCancelClick},"cancel"),React.createElement("div",{className:"account__edit",onClick:this.props.onSaveClick},"Save")):React.createElement("div",{className:"account__edit",onClick:this.props.onEditClick},"Edit")},t.prototype.renderPhoneVerificationContent=function(){return this.props.isSmsVerified?"Verified":React.createElement("a",{href:this.props.verifyAccountUrl,className:"account__verify-account",title:"Verify you account"},"Not verified »")},t.prototype.renderAccountInfo=function(){var e=this;return React.createElement("form",{ref:function(t){return e.props.attributesForm(t)}},React.createElement(s.ContentBox,{title:this.props.userId?"Account (User ID "+this.props.userId+")":" ",titleBarRightSide:this.renderTitleBarRightSide()},React.createElement(r.AccountAttribute,{label:"User Name",value:this.props.userName,description:"Your username cannot be changed."}),React.createElement(r.AccountAttribute,{label:"Display Name",value:this.props.displayName,isEditing:this.props.isEditing,fieldName:"displayName",validationMessage:this.getValidationMessage("DisplayName"),description:"The name users will see publicly. We recommend using your full name."}),React.createElement(r.AccountAttribute,{label:"Date of Birth",isEditing:this.props.isEditing,fieldName:"dateOfBirth",validationMessage:this.getValidationMessage("DateOfBirth"),value:this.getFormattedDateOfBirth()}),React.createElement(r.AccountAttribute,{label:"Email Address",value:this.props.emailAddress,validationMessage:this.getValidationMessage("EmailAddress"),isEditing:this.props.isEditing,fieldName:"emailAddress"}),React.createElement(r.AccountAttribute,{label:"Phone Verification",value:this.renderPhoneVerificationContent()}),React.createElement("div",{className:"account__item"},React.createElement("label",null,"Email Preferences"),React.createElement("div",null,React.createElement(i.Checkbox,{isChecked:this.props.isSubscribedToMailingList,text:"Subscribe to mailing list for competition updates",isEditable:this.props.isEditing,textIsClickable:!0,formInputName:"isSubscribedToMailingList"}))),React.createElement("div",{className:"account__item"},React.createElement("a",{className:"account__close-account",href:"/account/delete"},"Close account..."))))},t.prototype.renderChangePassword=function(){var e=this;return this.props.isShowingChangePassword?React.createElement("form",{ref:function(t){return e.props.changePasswordForm(t)},className:"account__change-password"},React.createElement("div",null,React.createElement("label",null,"Current password"),React.createElement("p",null,React.createElement("input",{type:"password",name:"currentPassword"}))),React.createElement("div",null,React.createElement("label",null,"New password"),React.createElement("p",null,React.createElement("input",{type:"password",name:"newPassword"}))),React.createElement("div",null,React.createElement("label",null,"Confirm new password"),React.createElement("p",null,React.createElement("input",{type:"password",name:"confirmPassword"}))),React.createElement("span",{className:"account__change-password-buttons"},React.createElement("a",{onClick:this.props.onCancelPasswordClick},"Cancel"),React.createElement("a",{onClick:this.props.onSavePasswordClick},"Save"))):null},t.prototype.renderKaggleLogin=function(e,t){return React.createElement("div",{className:"account__login account__login--active",key:t},React.createElement("div",{className:"account__login-image--kaggle"}),React.createElement("div",null,React.createElement("div",null,React.createElement("h3",null,"Kaggle username"),React.createElement("p",null,this.props.userName||this.props.displayName," ",this.props.isShowingChangePassword?null:React.createElement("a",{onClick:this.props.onChangePasswordClick},"Change password »")),this.renderChangePassword())))},t.prototype.renderSocialLogin=function(e,t){var a=this;return React.createElement("div",{className:"account__login account__login--active",key:t},React.createElement("div",{className:"account__login-image--"+e.loginProviderName.toLowerCase()}),React.createElement("div",null,React.createElement("div",null,React.createElement("h3",null,e.loginProviderName," ",e.emailFromProvider?"email":"username"),React.createElement("p",null,e.emailFromProvider||e.loginIdentifier," ",React.createElement("a",{onClick:function(){return a.props.onUnlinkClick(e)}},"Unlink »")))))},t.prototype.renderLogins=function(){var e=this;return React.createElement(s.ContentBox,{title:"My logins"},React.createElement("div",{className:"account__item"},React.createElement("h2",null,"Active logins"),this.props.logins.map(function(t,a){return"Kaggle"===t.loginProviderName?e.renderKaggleLogin(t,a):e.renderSocialLogin(t,a)})),React.createElement("div",{className:"account__item"},React.createElement("h2",null,"Add additional logins"),React.createElement("p",null,"Link your profile to one or more of the services below for faster login and automatic bio information. We'll never share anything to your networks without your permission."),this.getIdentityProviders().map(function(t,a){return React.createElement("div",{className:"account__login",key:a},React.createElement("div",{className:"account__login-image--"+t.toLowerCase()}),React.createElement("a",{href:"/"+e.props.userName+"/account/link/"+t,className:"account__login-link--"+t.toLowerCase()},"Link to your ",t," account"))})))},t.prototype.render=function(){return React.createElement("div",{className:"account"},this.renderAccountInfo(),this.renderLogins())},t}(React.Component);t.Account=l},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getStringValue=function(){var e=this.props.value;return e},t.prototype.render=function(){return React.createElement("div",{className:"account__item"},React.createElement("label",null,this.props.label),this.props.isEditing&&this.props.fieldName?React.createElement("p",null,React.createElement("input",{type:"text",name:this.props.fieldName,defaultValue:this.getStringValue()})):React.createElement("p",{className:"account__attribute-value"},this.props.value," "),this.props.children,this.props.validationMessage&&this.props.isEditing?React.createElement("p",{className:"account__attribute-description account__attribute-description--error"},this.props.validationMessage):React.createElement("p",{className:"account__attribute-description"},this.props.description))},t}(React.Component);t.AccountAttribute=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(225),r=function(e){function t(t){var a=e.call(this,t)||this;return a.state={onBioMarkdownChanged:a.onBioMarkdownChanged.bind(a),onBioEditToggled:a.onBioEditToggled.bind(a),onBioEditCancelled:a.onBioEditCancelled.bind(a)},a}return n(t,e),t.prototype.onBioMarkdownChanged=function(e){this.bio=e},t.prototype.onBioEditCancelled=function(){this.setState({isEditingBio:!1})},t.prototype.onBioEditToggled=function(e){var t=this;this.state.isEditingBio&&"undefined"!=typeof this.bio?s.ajax({url:this.props.userUrl+"/bio.json",type:"PUT",contentType:"application/json",data:JSON.stringify({bio:this.bio}),success:function(e){t.setState({isEditingBio:!1,bio:t.bio})}}):this.setState({isEditingBio:!this.state.isEditingBio})},t.prototype.render=function(){return React.createElement(i.Home,s.extend({},this.props,this.state))},t}(React.Component);t.HomeContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(5),r=a(42),o=a(215),l=a(29),c=a(130),p=a(76),u=a(126),d=(a(196)(),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderSummary=function(e){var t=!0;return t?React.createElement("div",{className:"profile__home__medal-summary"},React.createElement(o.AchievementSummary,s({},e,{onProfileTabChanged:this.props.onProfileTabChanged}))):null},t.prototype.renderEditToggleButton=function(){return this.props.canEdit?React.createElement(p.EditStateToggleButton,{isEditing:this.props.isEditingBio,sectionName:"Bio",cancelPropName:"cancel",cancelCallback:this.props.onBioEditCancelled,toggleCallback:this.props.onBioEditToggled}):null},t.prototype.render=function(){return React.createElement("div",{className:"profile__home"},React.createElement(l.MediaQuery,{minWidth:l.Breakpoints.desktopMin},React.createElement("div",{className:"profile__home__medals"},this.renderSummary(this.props.competitionsSummary),this.renderSummary(this.props.scriptsSummary),this.renderSummary(this.props.discussionsSummary))),this.props.canEdit||this.props.bio?React.createElement(i.ContentBox,{title:"Bio",titleBarRightSide:this.renderEditToggleButton()},React.createElement("div",{className:"profile__home__bio"},this.props.isEditingBio?React.createElement("div",{className:"profile__home__bio-editor"},React.createElement(c.MarkdownEditor,{defaultValue:this.props.bio,alwaysShowToolbar:!0,hidePreview:!0,shouldSanitizeHtml:!0,minRows:3,onChangeCallback:this.props.onBioMarkdownChanged})):React.createElement("div",{className:"profile__home__bio-text"},React.createElement(u.MarkdownConverter,{content:this.props.bio,insertNofollow:!0,mimeType:"text/markdown"})))):null,React.createElement(l.MediaQuery,{minWidth:0,maxWidth:l.Breakpoints.tabletMax},React.createElement("div",{className:"profile__home__medals"},this.renderSummary(this.props.competitionsSummary),this.renderSummary(this.props.scriptsSummary),this.renderSummary(this.props.discussionsSummary))),React.createElement(l.MediaQuery,{minWidth:l.Breakpoints.desktopMin},React.createElement(i.ContentBox,{title:"Activity"},React.createElement(r.ActivityCalendar,{dataUrl:this.props.activityUrl,tier:this.props.performanceTier}))))},t}(React.Component));t.Home=d},function(e,t){"use strict";function a(e){for(var a=0,n=t.CountryList;a<n.length;a++){var s=n[a];if(e==s.value)return s.label}return null}t.getCountryNameByCode=a,t.CountryList=[{label:"Afghanistan",value:"AF"},{label:"Albania",value:"AL"},{label:"Algeria",value:"DZ"},{label:"American Samoa",value:"AS"},{label:"Andorra",value:"AD"},{label:"Angola",value:"AO"},{label:"Anguilla",value:"AI"},{label:"Antarctica",value:"AQ"},{label:"Antigua & Barbuda",value:"AG"},{label:"Argentina",value:"AR"},{label:"Armenia",value:"AM"},{label:"Aruba",value:"AW"},{label:"Australia",value:"AU"},{label:"Austria",value:"AT"},{label:"Azerbaijan",value:"AZ"},{label:"Bahamas",value:"BS"},{label:"Bahrain",value:"BH"},{label:"Bangladesh",value:"BD"},{label:"Barbados",value:"BB"},{label:"Belarus",value:"BY"},{label:"Belgium",value:"BE"},{label:"Belize",value:"BZ"},{label:"Benin",value:"BJ"},{label:"Bermuda",value:"BM"},{label:"Bhutan",value:"BT"},{label:"Bolivia",value:"BO"},{label:"Bosnia",value:"BA"},{label:"Botswana",value:"BW"},{label:"Bouvet Island",value:"BV"},{label:"Brazil",value:"BR"},{label:"British Indian Ocean Territory",value:"IO"},{label:"British Virgin Islands",value:"VG"},{label:"Brunei",value:"BN"},{label:"Bulgaria",value:"BG"},{label:"Burkina Faso",value:"BF"},{label:"Burundi",value:"BI"},{label:"Cambodia",value:"KH"},{label:"Cameroon",value:"CM"},{label:"Canada",value:"CA"},{label:"Cape Verde",value:"CV"},{label:"Caribbean Netherlands",value:"BQ"},{label:"Cayman Islands",value:"KY"},{label:"Central African Republic",value:"CF"},{label:"Chad",value:"TD"},{label:"Chile",value:"CL"},{label:"China",value:"CN"},{label:"Christmas Island",value:"CX"},{label:"Cocos (Keeling) Islands",value:"CC"},{label:"Colombia",value:"CO"},{label:"Comoros",value:"KM"},{label:"Congo - Brazzaville",value:"CG"},{label:"Congo - Kinshasa",value:"CD"},{label:"Cook Islands",value:"CK"},{label:"Costa Rica",value:"CR"},{label:"Croatia",value:"HR"},{label:"Cuba",value:"CU"},{label:"Curaçao",value:"CW"},{label:"Cyprus",value:"CY"},{label:"Czech Republic",value:"CZ"},{label:"Côte d’Ivoire",value:"CI"},{label:"Denmark",value:"DK"},{label:"Djibouti",value:"DJ"},{label:"Dominica",value:"DM"},{label:"Dominican Republic",value:"DO"},{label:"Ecuador",value:"EC"},{label:"Egypt",value:"EG"},{label:"El Salvador",value:"SV"},{label:"Equatorial Guinea",value:"GQ"},{label:"Eritrea",value:"ER"},{label:"Estonia",value:"EE"},{label:"Ethiopia",value:"ET"},{label:"Falkland Islands",value:"FK"},{label:"Faroe Islands",value:"FO"},{label:"Fiji",value:"FJ"},{label:"Finland",value:"FI"},{label:"France",value:"FR"},{label:"French Guiana",value:"GF"},{label:"French Polynesia",value:"PF"},{label:"French Southern Territories",value:"TF"},{label:"Gabon",value:"GA"},{label:"Gambia",value:"GM"},{label:"Georgia",value:"GE"},{label:"Germany",value:"DE"},{label:"Ghana",value:"GH"},{label:"Gibraltar",value:"GI"},{label:"Greece",value:"GR"},{label:"Greenland",value:"GL"},{label:"Grenada",value:"GD"},{label:"Guadeloupe",value:"GP"},{label:"Guam",value:"GU"},{label:"Guatemala",value:"GT"},{label:"Guernsey",value:"GG"},{label:"Guinea",value:"GN"},{label:"Guinea-Bissau",value:"GW"},{label:"Guyana",value:"GY"},{label:"Haiti",value:"HT"},{label:"Heard & McDonald Islands",value:"HM"},{label:"Honduras",value:"HN"},{label:"Hong Kong",value:"HK"},{label:"Hungary",value:"HU"
},{label:"Iceland",value:"IS"},{label:"India",value:"IN"},{label:"Indonesia",value:"ID"},{label:"Iran",value:"IR"},{label:"Iraq",value:"IQ"},{label:"Ireland",value:"IE"},{label:"Isle of Man",value:"IM"},{label:"Israel",value:"IL"},{label:"Italy",value:"IT"},{label:"Jamaica",value:"JM"},{label:"Japan",value:"JP"},{label:"Jersey",value:"JE"},{label:"Jordan",value:"JO"},{label:"Kazakhstan",value:"KZ"},{label:"Kenya",value:"KE"},{label:"Kiribati",value:"KI"},{label:"Kuwait",value:"KW"},{label:"Kyrgyzstan",value:"KG"},{label:"Laos",value:"LA"},{label:"Latvia",value:"LV"},{label:"Lebanon",value:"LB"},{label:"Lesotho",value:"LS"},{label:"Liberia",value:"LR"},{label:"Libya",value:"LY"},{label:"Liechtenstein",value:"LI"},{label:"Lithuania",value:"LT"},{label:"Luxembourg",value:"LU"},{label:"Macau",value:"MO"},{label:"Macedonia",value:"MK"},{label:"Madagascar",value:"MG"},{label:"Malawi",value:"MW"},{label:"Malaysia",value:"MY"},{label:"Maldives",value:"MV"},{label:"Mali",value:"ML"},{label:"Malta",value:"MT"},{label:"Marshall Islands",value:"MH"},{label:"Martinique",value:"MQ"},{label:"Mauritania",value:"MR"},{label:"Mauritius",value:"MU"},{label:"Mayotte",value:"YT"},{label:"Mexico",value:"MX"},{label:"Micronesia",value:"FM"},{label:"Moldova",value:"MD"},{label:"Monaco",value:"MC"},{label:"Mongolia",value:"MN"},{label:"Montenegro",value:"ME"},{label:"Montserrat",value:"MS"},{label:"Morocco",value:"MA"},{label:"Mozambique",value:"MZ"},{label:"Myanmar",value:"MM"},{label:"Namibia",value:""},{label:"Nauru",value:"NR"},{label:"Nepal",value:"NP"},{label:"Netherlands",value:"NL"},{label:"New Caledonia",value:"NC"},{label:"New Zealand",value:"NZ"},{label:"Nicaragua",value:"NI"},{label:"Niger",value:"NE"},{label:"Nigeria",value:"NG"},{label:"Niue",value:"NU"},{label:"Norfolk Island",value:"NF"},{label:"North Korea",value:"KP"},{label:"Northern Mariana Islands",value:"MP"},{label:"Norway",value:"NO"},{label:"Oman",value:"OM"},{label:"Pakistan",value:"PK"},{label:"Palau",value:"PW"},{label:"Palestine",value:"PS"},{label:"Panama",value:"PA"},{label:"Papua New Guinea",value:"PG"},{label:"Paraguay",value:"PY"},{label:"Peru",value:"PE"},{label:"Philippines",value:"PH"},{label:"Pitcairn Islands",value:"PN"},{label:"Poland",value:"PL"},{label:"Portugal",value:"PT"},{label:"Puerto Rico",value:"PR"},{label:"Qatar",value:"QA"},{label:"Romania",value:"RO"},{label:"Russia",value:"RU"},{label:"Rwanda",value:"RW"},{label:"Réunion",value:"RE"},{label:"Samoa",value:"WS"},{label:"San Marino",value:"SM"},{label:"Saudi Arabia",value:"SA"},{label:"Senegal",value:"SN"},{label:"Serbia",value:"RS"},{label:"Seychelles",value:"SC"},{label:"Sierra Leone",value:"SL"},{label:"Singapore",value:"SG"},{label:"Sint Maarten",value:"SX"},{label:"Slovakia",value:"SK"},{label:"Slovenia",value:"SI"},{label:"Solomon Islands",value:"SB"},{label:"Somalia",value:"SO"},{label:"South Africa",value:"ZA"},{label:"South Georgia & South Sandwich Islands",value:"GS"},{label:"South Korea",value:"KR"},{label:"South Sudan",value:"SS"},{label:"Spain",value:"ES"},{label:"Sri Lanka",value:"LK"},{label:"St. Barthélemy",value:"BL"},{label:"St. Helena",value:"SH"},{label:"St. Kitts & Nevis",value:"KN"},{label:"St. Lucia",value:"LC"},{label:"St. Martin",value:"MF"},{label:"St. Pierre & Miquelon",value:"PM"},{label:"St. Vincent & Grenadines",value:"VC"},{label:"Sudan",value:"SD"},{label:"Suriname",value:"SR"},{label:"Svalbard & Jan Mayen",value:"SJ"},{label:"Swaziland",value:"SZ"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Syria",value:"SY"},{label:"São Tomé & Príncipe",value:"ST"},{label:"Taiwan",value:"TW"},{label:"Tajikistan",value:"TJ"},{label:"Tanzania",value:"TZ"},{label:"Thailand",value:"TH"},{label:"Timor-Leste",value:"TL"},{label:"Togo",value:"TG"},{label:"Tokelau",value:"TK"},{label:"Tonga",value:"TO"},{label:"Trinidad & Tobago",value:"TT"},{label:"Tunisia",value:"TN"},{label:"Turkey",value:"TR"},{label:"Turkmenistan",value:"TM"},{label:"Turks & Caicos Islands",value:"TC"},{label:"Tuvalu",value:"TV"},{label:"U.S. Outlying Islands",value:"UM"},{label:"U.S. Virgin Islands",value:"VI"},{label:"Uganda",value:"UG"},{label:"Ukraine",value:"UA"},{label:"United States",value:"US"},{label:"United Kingdom",value:"GB"},{label:"United Arab Emirates",value:"AE"},{label:"Uruguay",value:"UY"},{label:"Uzbekistan",value:"UZ"},{label:"Vanuatu",value:"VU"},{label:"Vatican City",value:"VA"},{label:"Venezuela",value:"VE"},{label:"Vietnam",value:"VN"},{label:"Wallis & Futuna",value:"WF"},{label:"Western Sahara",value:"EH"},{label:"Yemen",value:"YE"},{label:"Zambia",value:"ZM"},{label:"Zimbabwe",value:"ZW"}]},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(3),i=a(73),r=a(161),o=a(32),l=a(7),c=a(6),p=a(11),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectionGroups=[{label:"Competitions",value:"competitions"},{label:"Kernels",value:"kernels"},{label:"Discussion",value:"discussion"}],t}return n(t,e),t.prototype.getRankText=function(e){return e.currentRanking?e.currentRanking:React.createElement("span",{className:"leaderboards__rank-text"},"unranked")},t.prototype.getCurrentCategory=function(){return this.category||this.props.group||this.selectionGroups[0].value},t.prototype.onSelectionsChanged=function(e,t){this.category=t},t.prototype.renderListHeaderCount=function(e,t){return React.createElement("div",{key:t,className:"leaderboards__list-header-count leaderboards__list-header-count--"+e.tier},React.createElement("img",{src:"/static/images/tiers/"+e.tier+"@96.png"}),React.createElement("div",null,React.createElement("div",null,i.numberWithCommas(e.count)),React.createElement("div",null,s(e.tier,e.count))))},t.prototype.renderListHeader=function(e,t){var a=t.data;return React.createElement("div",null,React.createElement("div",{className:"leaderboards__list-header"},a.counts.map(this.renderListHeaderCount)),React.createElement("div",{className:"leaderboards__item-wrapper leaderboards__item-wrapper--header"},React.createElement("div",{className:"leaderboards__rank"},"Rank"),React.createElement("div",{className:"leaderboards__tier"},"Tier"),React.createElement("div",{className:"leaderboards__avatar"},React.createElement("div",{className:"leaderboards__user-label"},"User")),React.createElement("div",{className:"leaderboards__name"}),React.createElement("div",{className:"leaderboards__medals"},React.createElement("div",{className:"leaderboards__medals-label"},"Medals")),React.createElement("div",{className:"leaderboards__points"},"Points")),a.userRanking&&(a.userRanking.currentRanking>5||!a.userRanking.currentRanking)?this.renderItem(a.userRanking,-1):null)},t.prototype.renderListFooter=function(e,t){var a=t.data,n=a.counts.filter(function(e){return["contributor","novice"].indexOf(e.tier)>=0}).reduce(function(e,t){return e.count+t.count});return React.createElement("div",null,React.createElement("div",{className:"leaderboards__list-footer"},i.numberWithCommas(n)," unranked Contributors and Novices"))},t.prototype.renderItem=function(e,t){return React.createElement(o.BlockLink,{key:t,href:e.userUrl},React.createElement("div",{className:"leaderboards__item-wrapper "+(e.userId===c.Current.userId?"leaderboards__item-wrapper--you":null)},React.createElement("div",{className:"leaderboards__rank"},this.getRankText(e)),React.createElement("div",{className:"leaderboards__tier"},React.createElement("img",{src:"/static/images/tiers/"+e.tier+"@96.png",title:e.tier})),React.createElement("div",{className:"leaderboards__avatar"},React.createElement("a",{href:e.userUrl},React.createElement("img",{src:e.thumbnailUrl}))),React.createElement("div",{className:"leaderboards__name"},React.createElement("p",null,React.createElement("a",{href:e.userUrl},e.displayName)),React.createElement("p",{className:"leaderboards__name-joined"},"joined ",React.createElement(l.TimeAgo,{time:e.joined}))),React.createElement("div",{className:"leaderboards__medals"},React.createElement("div",{className:"leaderboards__medal--gold"},React.createElement("div",{className:"leaderboards__medals-item"},React.createElement("img",{src:"/static/images/medals/"+this.getCurrentCategory()+"/GoldL@1x.png"})),React.createElement("div",{className:"leaderboards__medals-item"},React.createElement("span",null,e.totalGoldMedals))),React.createElement("div",{className:"leaderboards__medal--silver"},React.createElement("div",{className:"leaderboards__medals-item"},React.createElement("img",{src:"/static/images/medals/"+this.getCurrentCategory()+"/SilverL@1x.png"})),React.createElement("div",{className:"leaderboards__medals-item"},React.createElement("span",null,e.totalSilverMedals))),React.createElement("div",{className:"leaderboards__medal--bronze"},React.createElement("div",{className:"leaderboards__medals-item"},React.createElement("img",{src:"/static/images/medals/"+this.getCurrentCategory()+"/BronzeL@1x.png"})),React.createElement("div",{className:"leaderboards__medals-item"},React.createElement("span",null,e.totalBronzeMedals)))),React.createElement("div",{className:"leaderboards__points"},i.numberWithCommas(Math.round(e.points)))))},t.prototype.renderProgressionLink=function(){return React.createElement("a",{className:"leaderboards__learn-more-link",href:"/progression"},"Learn more about rankings ›")},t.prototype.render=function(){return React.createElement("div",{className:"leaderboards"},React.createElement(p.Banner,{title:"Kaggle Rankings",bannerImageClassName:"leaderboards__banner-image"}),React.createElement("div",{className:"leaderboards__wrapper"},React.createElement(r.SmartListContainer,{titleResolver:function(e,t){return i.numberWithCommas(t.data.totalUsers)+" users"},pluralItemDescription:"users",groups:this.selectionGroups,dataUrl:"/rankings.json",dataPathToList:"list",data:this.props,itemRenderer:this.renderItem.bind(this),listHeaderRenderer:this.renderListHeader.bind(this),listFooterRenderer:this.renderListFooter.bind(this),onSelectionsChanged:this.onSelectionsChanged.bind(this),titleBarRightSide:this.renderProgressionLink(),selectionGroupInTitle:!0,values:{group:this.props.group}})))},t}(React.Component);t.Leaderboards=u},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(2),i=a(40),r=a(229),o=a(160),l=function(e){function t(t){var a=e.call(this,t)||this;a.onProfileEditingStateChanged=function(e){if(!a.state.isSaving){var t={isSaving:!1},n=!a.state["isEditing"+e];if(t["isEditing"+e]=n,n)return void a.setState(t);var i=a.getValidationPageMessages();if(o.PageMessages.clear(),o.PageMessages.add(i),!(i.length>0)){var r={city:a.state.city,country:a.state.country,displayName:a.state.displayName,gitHubUserName:a.state.gitHubUserName,linkedInUrl:a.state.linkedInUrl,region:a.state.region,slug:a.state.slug,thumbnailImageUrl:a.state.thumbnailImageUrl,twitterUserName:a.state.twitterUserName,websiteUrl:a.state.websiteUrl,datasetMaxFileSizeMegabytes:a.state.datasetMaxFileSizeMegabytes};a.setState({isSaving:!0},function(){o.PageMessages.clear(),a.props.isNew?(r.overview=a.state.overview,s.ajax({url:"/organizations",type:"POST",contentType:"application/json",data:JSON.stringify(r),success:function(e){a.setState({twitterUserName:e.twitterUserName,gitHubUserName:e.gitHubUserName,isSaving:!1}),window.location.replace("/"+a.state.slug)},error:function(e){a.setState({isSaving:!1}),o.PageMessages.error({htmlMessage:'There was a problem saving your profile changes. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.',type:"error"});for(var t=0,n=JSON.parse(e.responseText);t<n.length;t++){var s=n[t];o.PageMessages.error(s.error)}}})):s.ajax({url:a.props.slug+".json",type:"PUT",contentType:"application/json",data:JSON.stringify(r),success:function(e){t.twitterUserName=e.twitterUserName,t.gitHubUserName=e.gitHubUserName,a.setState(t);var n="/"+a.state.slug;n!=window.location.pathname&&window.location.replace(n),o.PageMessages.success("Changes to your profile have been saved.")},error:function(e){a.setState(t),o.PageMessages.error({htmlMessage:'There was a problem saving your profile changes. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.',type:"error"});for(var n=0,s=JSON.parse(e.responseText);n<s.length;n++){var i=s[n];o.PageMessages.error(i.error)}}})})}}},a.onProfileEditingStateCancelled=function(e,t){var n={},i={};n["isEditing"+e]=!1;for(var r=0,l=t;r<l.length;r++){var c=l[r];i[c]=a.props[c]}a.setState(s.extend({},n,i),function(){o.PageMessages.clear()})},a.onProfilePropChanged=function(e,t){var n={};n[e]=t,a.setState(n)},a.onTabClicked=function(e){a.setState({activeTab:e},function(){return a.updateUrlForTab(e)})},a.onOverviewSaveClicked=function(e){return s.ajax({type:"PUT",url:a.props.slug+"/overview",contentType:"application/json",processData:!1,data:JSON.stringify({overview:e})})},a.onUserAddClicked=function(){s.ajax({contentType:"application/json",data:JSON.stringify({userName:a.state.userInput.value}),type:"POST",url:"/"+a.props.slug+"/users"}).fail(function(e){404==e.status&&(o.PageMessages.clear(),o.PageMessages.error("We had trouble locating the requested username or organization."))}).done(function(e){o.PageMessages.clear(),a.setState({users:e.users}),a.state.userInput.value=""})},a.onUserInputElementMounted=function(e){a.setState({userInput:e})},a.onUserRemoveClicked=function(e){s.ajax({url:"/"+a.props.slug+"/users/"+e,type:"DELETE"}).done(function(e){a.setState({activeTab:e.activeTab,canEdit:e.canEdit,users:e.users}),a.setState({menuLinks:a.getMenuLinks()})})},a.getMenuLinks=function(){var e=[],t=function(e){return{href:"/"+("Home"==e?a.props.slug:a.props.slug)+"/"+e.toLowerCase(),title:e,text:e,tab:e.toLowerCase()}};if(e.push(t("Home")),!a.props.isNew){var n=a.state.canEdit;(n||a.props.competitions.length>0)&&e.push(t("Competitions")),(n||a.props.datasets.length>0)&&e.push(t("Datasets")),(n||a.state.users.length>0)&&e.push(t("People"))}return e},a.replaceUrlForTab=function(e){if(!a.props.isNew){var t=window.history.state||{},n="/"+a.props.slug;"home"!=e.toLowerCase()&&(n+="/"+e.toLowerCase()),history.replaceState(t,"",n)}},a.updateUrlForTab=function(e){if(!a.props.isNew){var t={};t.profileTabState={activeTab:e};var n="/"+a.props.slug;"home"!=e.toLowerCase()&&(n+="/"+e.toLowerCase()),history.pushState(t,"",n)}},a.onWindowPopState=function(e){e.state&&e.state.profileTabState&&a.setState(e.state.profileTabState)},a.validationRules=[{isValid:function(){return a.state.displayName&&a.state.displayName.trim()},id:"organization-profile-no-name",message:function(){return"Please enter a display name."}},{isValid:function(){return a.state.displayName&&a.state.displayName.trim().length>=2&&a.state.displayName.trim().length<=50},id:"organization-profile-display-name-length",message:function(){return"Your display name must be between 2 and 50 characters in length."}},{isValid:function(){return!a.state.websiteUrl||i.isValidUrl(a.state.websiteUrl)},id:"organization-profile-website-format",message:function(){return"Please enter a valid website URL."}},{isValid:function(){return!a.state.linkedInUrl||i.isValidUrl(a.state.linkedInUrl)},id:"organization-profile-linkedin-format",message:function(){return"Please enter a valid LinkedIn URL."}},{isValid:function(){return a.state.thumbnailImageUrl&&a.state.thumbnailImageUrl.trim()},id:"organization-profile-no-thumbnail",message:function(){return"Please select a profile photo."}},{isValid:function(){return a.state.slug===a.props.slug||a.state.slug&&a.state.slug.trim()&&(a.props.isAdmin||a.state.slug.length>=6&&a.state.slug.length<=20)},id:"organization-profile-no-slug",message:function(){return"Please enter a permanent URL between 6 and 20 characters."}}],a.onOpenImageUploader=function(){a.setState({isEditingImage:!0})},a.onCloseImageUploader=function(){a.setState({isEditingImage:!1})},a.onUpdateImages=function(e,t){e.append("imageLeft",t[0].left),e.append("imageTop",t[0].top),e.append("imageWidth",t[0].width),e.append("imageHeight",t[0].height);var n=a.props.isNew?"/organizations/images":"/"+a.props.slug+"/image";return s.ajax({url:n,type:"POST",dataType:"json",contentType:!1,processData:!1,data:e,success:function(e){a.setState({isEditingImage:!1,thumbnailImageUrl:e.thumbnailImageUrl+"?r="+(new Date).getMilliseconds()}),o.PageMessages.success("The organization's profile image has been updated.")}})};var n,r=t.canEdit;switch(null==t.activeTab?"home":t.activeTab.toLowerCase()){case"competitions":n=r||t.competitions.length>0?"competitions":"home";break;case"datasets":n=r||t.datasets.length>0?"datasets":"home";break;case"people":n=r||t.users.length>0?"people":"home";break;default:n="home"}return a.replaceUrlForTab(n),a.state=s.extend({},a.props,{activeTab:n,canEdit:a.props.canEdit,isSaving:!1,users:a.props.users}),a.state=s.extend({},a.state,{menuLinks:a.getMenuLinks()}),a.helpers={onCloseImageUploader:a.onCloseImageUploader,onOpenImageUploader:a.onOpenImageUploader,onOverviewSaveClicked:a.onOverviewSaveClicked,onProfileEditingStateCancelled:a.onProfileEditingStateCancelled,onProfileEditingStateChanged:a.onProfileEditingStateChanged,onProfilePropChanged:a.onProfilePropChanged,onTabClicked:a.onTabClicked,onUpdateImages:a.onUpdateImages,onUserAddClicked:a.onUserAddClicked,onUserInputElementMounted:a.onUserInputElementMounted,onUserRemoveClicked:a.onUserRemoveClicked},a}return n(t,e),t.prototype.componentWillMount=function(){window.addEventListener("popstate",this.onWindowPopState,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("popstate",this.onWindowPopState,!1)},t.prototype.getValidationPageMessages=function(e){var t=[];return this.validationRules.forEach(function(a){var n=t.filter(function(e){return e.id==a.id}).length>0;(a.isValid()&&n||!a.isValid()&&n&&!e)&&(t=t.filter(function(e){return e.id!=a.id})),a.isValid()||e||t.push({type:"error",id:a.id,message:a.message()})}),t},t.prototype.render=function(){return React.createElement(r.OrganizationProfile,s.extend({},this.props,this.state,this.helpers))},t}(React.Component);t.OrganizationProfileContainer=l},function(e,t,a){"use strict";function n(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(t)?t:null}var s=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},i=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},r=a(32),o=a(12),l=a(49),c=a(71),p=a(5),u=a(226),d=a(190),m=a(76),h=a(153),g=a(230),f=a(72),v=a(231),y=a(178),_=a(7),b=a(232),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderCompetitionTeaserItem=function(e,a){return t.renderTeaserItem(e.competitionUrl,e.thumbnailImageUrl,e.competitionTitle,e.deadline,a)},t.renderDatasetTeaserItem=function(e,a){return t.renderTeaserItem(e.datasetUrl,e.cardImageUrl,e.title,e.dateUpdated,a)},t.renderPersonTeaserItem=function(e,a){return t.renderTeaserItem("."+e.slug,e.imageUrl,e.name,e.joinDate,a)},t}return s(t,e),t.prototype.getCityDescription=function(){var e=u.getCountryNameByCode(this.props.country)||this.props.country;return[this.props.city,this.props.region,e].filter(Boolean).join(", ")},t.prototype.renderActiveTab=function(){switch(this.props.activeTab.toLowerCase()){case"home":return this.renderHome();case"competitions":return this.renderCompetitions();case"datasets":return this.renderDatasets();case"people":return this.renderPeople();default:return null}},t.prototype.renderTeaserItem=function(e,t,a,n,s){return React.createElement(r.BlockLink,{href:e,key:s},React.createElement("div",{className:"organization-profile__home-teaser-item"},React.createElement("div",null,React.createElement("img",{src:t,title:a,className:"organization-profile__home-teaser-thumbnail"})),React.createElement("div",{className:"organization-profile__home-teaser-title"},React.createElement("div",null,React.createElement("a",{href:e},a)),React.createElement("div",{className:"organization-profile__home-teaser-time"},React.createElement(_.TimeAgo,{time:n,futureDateMessage:"In progress"})))))},t.prototype.renderHome=function(){var e=this;return React.createElement("div",{className:"organization-profile__profile-wrapper"},React.createElement("div",{className:"organization-profile__profile-row"},this.props.canEditSlug?React.createElement("div",{className:"organization-profile__power-settings"},React.createElement(p.ContentBox,{title:this.props.isNew?"Choose a Permanent URL":"Power settings",titleBarRightSide:React.createElement(m.EditStateToggleButton,{sectionName:"Description",cancelPropName:"description",isEditing:this.props.isEditingHeader,toggleCallback:function(){return e.props.onProfileEditingStateChanged("Header")},cancelCallback:function(){return e.props.onProfileEditingStateCancelled("Header",[])}})},React.createElement("section",{className:"organization-profile__section"},"https://www.kaggle.com/",this.props.isEditingHeader?React.createElement(h.InlineTextEditor,{className:"organization-profile__inline-slug-editor",value:this.props.slug,rejectedCharacterRegExp:/[^A-Za-z0-9-]+/g,onChangeCallback:function(t){return e.props.onProfilePropChanged("slug",t)}}):this.props.slug),this.props.isAdmin?React.createElement("section",{className:"organization-profile__section"},"Maximum dataset size (Mb): ",this.props.isEditingHeader?React.createElement(h.InlineTextEditor,{className:"organization-profile__inline-slug-editor",value:(this.props.datasetMaxFileSizeMegabytes||"").toString(),rejectedCharacterRegExp:/[^0-9]+/g,onChangeCallback:function(t){return e.props.onProfilePropChanged("datasetMaxFileSizeMegabytes",n(t))}}):this.props.datasetMaxFileSizeMegabytes||"Default"):null)):null,React.createElement("div",{className:"organization-profile__description"},React.createElement(g.MarkdownContentBox,{content:this.props.overview,canEdit:this.props.canEdit&&!this.props.isNew,contentBoxTitle:"About "+(this.props.isNew?"your organization":this.props.displayName),contentClassName:"organization-profile__description-content",isEditing:this.props.isNew,mimeType:"text/markdown",onChangeCallback:this.props.isNew?function(t){return e.props.onProfilePropChanged("overview",t)}:null,onSaveClicked:this.props.isNew?null:this.props.onOverviewSaveClicked})),this.props.users&&this.props.users.length>0?React.createElement("div",{className:"organization-profile__home-teaser organization-profile__home-teaser--people"},React.createElement(p.ContentBox,{title:React.createElement(f.Pluralize,{count:this.props.users.length,word:"people"}),onTitleClick:function(){return e.props.onTabClicked("people")},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement("div",{className:"organization-profile__home-teaser-wrapper"},React.createElement(y.TeaserList,{minItemHeight:1,listItems:this.props.users.slice(0,3),emptyListMessage:"",listItemRenderer:this.renderPersonTeaserItem})))):null),React.createElement("div",{className:"organization-profile__profile-row"},this.props.competitions&&this.props.competitions.length>0?React.createElement("div",{className:"organization-profile__home-teaser organization-profile__home-teaser--competitions"},React.createElement(p.ContentBox,{title:React.createElement(f.Pluralize,{count:this.props.competitions.length,word:"competition"}),onTitleClick:function(){return e.props.onTabClicked("competitions")},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement("div",{className:"organization-profile__home-teaser-wrapper"},React.createElement(y.TeaserList,{minItemHeight:1,listItems:this.props.competitions.slice(0,3),emptyListMessage:"",listItemRenderer:this.renderCompetitionTeaserItem})))):null,this.props.datasets&&this.props.datasets.length>0?React.createElement("div",{className:"organization-profile__home-teaser organization-profile__home-teaser--datasets"},React.createElement(p.ContentBox,{title:React.createElement(f.Pluralize,{count:this.props.datasets.length,word:"dataset"}),onTitleClick:function(){return e.props.onTabClicked("datasets")},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement("div",{className:"organization-profile__home-teaser-wrapper"},React.createElement(y.TeaserList,{minItemHeight:1,listItems:this.props.datasets.slice(0,3),emptyListMessage:"",listItemRenderer:this.renderDatasetTeaserItem})))):null))},t.prototype.renderCompetitions=function(){return React.createElement(p.ContentBox,{title:React.createElement(f.Pluralize,{count:this.props.competitions.length,word:"competition"})},this.props.competitions.map(function(e,t){return React.createElement(c.CompetitionCard,{key:t,competition:e})}))},t.prototype.renderDatasets=function(){return React.createElement(p.ContentBox,{title:React.createElement(f.Pluralize,{count:this.props.datasets.length,word:"dataset"})},this.props.datasets.map(function(e,t){return React.createElement(d.DatasetListItem,{key:t,dataset:e,hideOwnerAvatar:!0})}),this.props.canEdit?React.createElement("div",{className:"dataset-list-item organization-profile__new-dataset-container"},React.createElement(o.Button,{href:"/datasets/new?owner="+this.props.slug,text:"Create new dataset"})):null)},t.prototype.renderPeople=function(){var e=this;return React.createElement(p.ContentBox,{title:React.createElement(f.Pluralize,{count:this.props.users.length,word:"person"})},React.createElement("div",{className:"organization-profile__user-cards"},this.props.users.map(function(t){return React.createElement(b.UserCard,i({},t,{canEdit:e.props.canEdit,onRemoveClicked:e.props.onUserRemoveClicked,key:t.slug}))}),this.props.canEdit?React.createElement("div",{className:"organization-profile__user-editor"},React.createElement("i",{className:"organization-profile__user-editor-image fa fa-user"}),React.createElement("div",{className:"organization-profile__user-editor-info"},React.createElement("span",{className:"organization-profile__user-editor-header"},"Add a person to this organization"),React.createElement("input",{className:"organization-profile__user-editor-input",placeholder:"Enter username",ref:this.props.onUserInputElementMounted,type:"text"}),React.createElement("span",{className:"organization-profile__user-editor-button"},React.createElement(o.Button,{isSmall:!0,onClick:this.props.onUserAddClicked,text:"Add person"})))):null))},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"organization-profile"},React.createElement(v.ProfileHeader,{modifier:"organization",displayName:this.props.displayName,avatarUrl:this.props.thumbnailImageUrl?this.props.thumbnailImageUrl:"https://i0.wp.com/kaggle2.blob.core.windows.net/avatars/thumbnails/default-thumb.png?ssl=1",twitterUserName:this.props.twitterUserName,gitHubUserName:this.props.gitHubUserName,linkedInUrl:this.props.linkedInUrl,websiteUrl:this.props.websiteUrl,activeTab:this.props.activeTab,menuLinks:this.props.menuLinks,onProfilePropChanged:this.props.onProfilePropChanged,onProfileTabChanged:function(t){return e.props.onTabClicked(t)},rightThumbnailUrl:"/static/images/profile-organization.svg",rightThumbnailLabel:"Organization",hideWebsiteUrl:!0,canEdit:this.props.canEdit,isEditingHeader:this.props.isEditingHeader,isEditingImage:this.props.isEditingImage,onOpenImageUploader:this.props.onOpenImageUploader,onCloseImageUploader:this.props.onCloseImageUploader,onUpdateImages:this.props.onUpdateImages,renderAdminCallToAction:function(){return e.props.isEditingHeader?React.createElement("div",{className:"organization-profile__cta-area"},e.props.isNew||e.props.isSaving?null:React.createElement("a",{className:"organization-profile__editing-cancel",onClick:function(){return e.props.onProfileEditingStateCancelled("Header",["city","country","displayName","gitHubUserName","linkedInUrl","region","thumbnailImageUrl","twitterUserName","websiteUrl"])}},"cancel"),React.createElement("a",{className:e.props.isSaving?"organization-profile__save-button pageheader__calltoaction--muted":"pageheader__calltoaction--active",onClick:function(){return e.props.onProfileEditingStateChanged("Header")},title:"Save Profile"},"Save Profile")):React.createElement("div",{className:"organization-profile__cta-area"},React.createElement("a",{className:"pageheader__calltoaction",onClick:function(){return e.props.onProfileEditingStateChanged("Header")},title:"Edit Profile"},"Edit Profile"))}},this.props.canEdit&&this.props.isEditingHeader?React.createElement("div",null,React.createElement("div",{className:"organization-profile__country-select"},React.createElement(l.CityLookup,{city:this.props.city,region:this.props.region,country:this.props.country,onChange:function(t,a,n){e.props.onProfilePropChanged("city",t),e.props.onProfilePropChanged("region",a),e.props.onProfilePropChanged("country",n)}}))):React.createElement("div",null,this.getCityDescription().length>0?React.createElement("span",{className:"organization-profile__info"},this.getCityDescription()):null,React.createElement("span",{className:"organization-profile__info"},"Joined ",React.createElement(_.TimeAgo,{time:this.props.joinDate})),React.createElement("span",{className:"organization-profile__info"},React.createElement("a",{href:this.props.websiteUrl,rel:"nofollow",className:"organization-profile__website-url"},this.props.websiteUrl)))),React.createElement("div",{className:"organization-profile__wrapper"},this.renderActiveTab()))},t}(React.Component);t.OrganizationProfile=E},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(76),r=a(130),o=a(126),l=function(e){function t(t){var a=e.call(this,t)||this;return a.onContentChanged=function(e){a.editingContent=e,a.props.onChangeCallback&&a.props.onChangeCallback(e)},a.onToggleClicked=function(){var e=a.state.isEditing;e&&a.props.onSaveClicked?a.props.onSaveClicked(a.editingContent).then(function(){a.setState({isEditing:!1,content:a.editingContent})}):a.setState({isEditing:!0})},a.onCancelClicked=function(){a.setState({isEditing:!1})},a.renderEditButton=function(){return a.props.canEdit?React.createElement(i.EditStateToggleButton,{sectionName:"Description",cancelPropName:"description",isEditing:a.state.isEditing,toggleCallback:a.onToggleClicked,cancelCallback:a.onCancelClicked}):null},a.renderMarkdownEditor=function(){return React.createElement("div",{className:"markdown-content-box__editor"},React.createElement(r.MarkdownEditor,{defaultValue:a.state.content,alwaysShowToolbar:!0,hidePreview:!0,shouldSanitizeHtml:!0,minRows:3,onChangeCallback:a.onContentChanged}))},a.renderMarkdownConverter=function(){return React.createElement("div",{className:"markdown-content-box__converter"},React.createElement(o.MarkdownConverter,{content:a.state.content,mimeType:a.props.mimeType,insertNofollow:!0,contentClassName:a.props.contentClassName}))},a.renderContentBody=function(){return a.state.isEditing?a.renderMarkdownEditor():a.renderMarkdownConverter()},a.state={isEditing:a.props.isEditing,content:a.props.content},a}return n(t,e),t.prototype.render=function(){return React.createElement(s.ContentBox,{title:this.props.contentBoxTitle,titleBarRightSide:this.renderEditButton()},this.renderContentBody())},t}(React.Component);t.MarkdownContentBox=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){
function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(158),i=a(153),r=a(28),o=a(29),l=a(174),c=a(155),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderDisplayName=function(){var e=this;return this.props.isEditingHeader&&this.props.canEdit?React.createElement(i.InlineTextEditor,{className:"profile-header__display-name--input",value:this.props.displayName,placeholder:"Enter display name",onChangeCallback:function(t){return e.props.onProfilePropChanged("displayName",t)}}):React.createElement("span",null,this.props.displayName," ",this.props.genieUrl?React.createElement("a",{href:this.props.genieUrl,className:"profile__genie-link"},"Genie!"):null)},t.prototype.renderSocialLinks=function(){var e=this;return this.props.isEditingHeader?React.createElement("ul",{className:"profile__social-links--editing"},React.createElement("li",{className:"profile__social-link--editing"},React.createElement("span",{className:"fa fa-github"}),React.createElement(i.InlineTextEditor,{className:"profile__social-link--input",value:this.props.gitHubUserName,placeholder:"GitHub Username",onChangeCallback:function(t){return e.props.onProfilePropChanged("gitHubUserName",t)}})),React.createElement("li",{className:"profile__social-link--editing"},React.createElement("span",{className:"fa fa-twitter"}),React.createElement(i.InlineTextEditor,{className:"profile__social-link--input",value:this.props.twitterUserName,placeholder:"Twitter Username",onChangeCallback:function(t){return e.props.onProfilePropChanged("twitterUserName",t)}})),React.createElement("li",{className:"profile__social-link--editing"},React.createElement("span",{className:"fa fa-linkedin"}),React.createElement(i.InlineTextEditor,{className:"profile__social-link--input",value:this.props.linkedInUrl,placeholder:"LinkedIn URL",onChangeCallback:function(t){return e.props.onProfilePropChanged("linkedInUrl",t)}})),React.createElement("li",{className:"profile__social-link--editing"},React.createElement("span",{className:"fa fa-globe"}),React.createElement(i.InlineTextEditor,{className:"profile__social-link--input",value:this.props.websiteUrl,placeholder:"Website URL",onChangeCallback:function(t){return e.props.onProfilePropChanged("websiteUrl",t)}}))):React.createElement("ul",{className:"profile__social-links"},this.props.gitHubUserName&&this.props.gitHubUserName.length?React.createElement("li",{className:"profile__social-link"},React.createElement("a",{href:"https://github.com/"+this.props.gitHubUserName,rel:"nofollow"},React.createElement("span",{className:"fa fa-github"}))):null,this.props.twitterUserName&&this.props.twitterUserName.length?React.createElement("li",{className:"profile__social-link"},React.createElement("a",{href:"https://twitter.com/"+this.props.twitterUserName,rel:"nofollow"},React.createElement("span",{className:"fa fa-twitter"}))):null,this.props.linkedInUrl&&this.props.linkedInUrl.length?React.createElement("li",{className:"profile__social-link"},React.createElement("a",{href:this.props.linkedInUrl,rel:"nofollow"},React.createElement("span",{className:"fa fa-linkedin"}))):null,this.props.websiteUrl&&this.props.websiteUrl.length&&!this.props.hideWebsiteUrl?React.createElement("li",{className:"profile__social-link"},React.createElement("a",{href:this.props.websiteUrl,className:"profile__social-link--url",rel:"nofollow"},this.props.websiteUrl)):null)},t.prototype.renderAvatarOverlay=function(){var e=React.createElement(l.ImageUploader,{title:"Upload Organization Profile Image",imageSettings:[new l.ImageSetting("profile image","Select an area of the image to use for this organization's profile",new l.Size(200,200),new l.Rectangle(new l.Point(0,0),new l.Size(0,0)))],originalImageUrl:null,containerSize:new l.Size(500,300),selectorBorderWidth:1,onCancel:this.props.onCloseImageUploader,onUpdateImages:this.props.onUpdateImages,hiResScale:2}),t=React.createElement(c.Modal,{buttonClassName:"pageheader__imageuploaderbutton",modalClassName:"pageheader__imageuploadermodal",modalContent:e,modalIsShown:this.props.isEditingImage,onShow:this.props.onOpenImageUploader,onClose:this.props.onCloseImageUploader});return React.createElement("div",{className:"profile__avatar-overlay"},t,React.createElement("p",{className:"profile__avatar-text",onClick:this.props.onOpenImageUploader},"Change Organization Profile Photo"))},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"profile-header"},React.createElement("div",{className:"profile-header__header--"+this.props.modifier},React.createElement(s.PageHeader,null,React.createElement(s.PageHeaderTopRow,{modifier:"profile",title:this.renderDisplayName(),subtitle:"",isEditingHeaderInfo:this.props.isEditingHeader,canEdit:this.props.canEdit,titleUrl:null},React.createElement(s.PageHeaderThumbnail,{classNameElement:"avatar",classNameModifier:"profile",imageUrl:this.props.avatarUrl,targetUrl:"",thumbnailOverlay:this.props.isEditingHeader?this.renderAvatarOverlay():null}),React.createElement(o.MediaQuery,{minWidth:o.Breakpoints.tabletMax},React.createElement("div",{className:"profile-header__right-thumbnail profile-header__right-thumbnail--"+this.props.modifier},React.createElement("a",{href:this.props.rightThumbnailLinkUrl},React.createElement("p",null,React.createElement("img",{src:this.props.rightThumbnailUrl,height:"92px",width:"92px"})),React.createElement("p",null,this.props.rightThumbnailLabel)))),React.createElement("div",{className:"profile-header__metadata"},this.props.children),this.renderSocialLinks()))),React.createElement("div",{className:"profile__wrapper"},React.createElement(s.PageHeaderBottomRow,null,React.createElement(r.OverflowX,null,React.createElement(s.PageHeaderNav,{activeTab:this.props.activeTab,classNameModifier:"profile",menuLinks:this.props.menuLinks,changeActiveTab:function(t){return e.props.onProfileTabChanged(t)}}),React.createElement(o.MediaQuery,{minWidth:o.Breakpoints.desktopMin},this.props.canEdit?this.props.renderAdminCallToAction():null)))))},t}(React.Component);t.ProfileHeader=p},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(32),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement(s.BlockLink,{className:"organization-user-card",href:this.props.slug},React.createElement("img",{className:"organization-user-card__image",src:this.props.imageUrl,alt:this.props.name}),React.createElement("div",{className:"organization-user-card__info"},React.createElement("span",{className:"organization-user-card__name"},this.props.name,this.props.canEdit?React.createElement("a",{className:"organization-user-card__remove-link",onClick:function(){return e.props.onRemoveClicked(e.props.id)}},React.createElement("i",{className:"fa fa-remove"}),"  Remove"):null),React.createElement("span",{className:"organization-user-card__title"},this.props.occupation?this.props.organization?this.props.occupation+" at "+this.props.organization:this.props.occupation:""),React.createElement("span",{className:"organization-user-card__location"},this.props.location?this.props.location:"")))},t}(React.Component);t.UserCard=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(234),i=function(e){function t(t){var a=e.call(this,t)||this;return a.state=a.props,a}return n(t,e),t.prototype.render=function(){return React.createElement(s.Newsfeed,this.state)},t}(React.Component);t.NewsfeedContainer=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(161),r=a(5),o=a(235),l=a(32),c=a(7),p=a(34),u=a(236),d=a(237),m=a(238),h=a(239),g=a(240),f=a(241),v=a(242),y=a(243),_=a(244),b=a(245),E=a(246),R=a(247),w=(a(4),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderStoryContent=function(e){switch(e.storyType){case"blogPost":return React.createElement(d.NewsfeedBlog,s({},e));case"forumMessage":case"datasetMessage":case"competitionMessage":case"kernelMessage":case"forumTopic":case"datasetTopic":case"competitionTopic":return React.createElement(f.NewsfeedMessage,s({},e));case"kernel":case"kernelRun":return React.createElement(g.NewsfeedKernel,s({},e));case"competitionStarted":case"competitionEnded":case"competitionFinalized":return React.createElement(m.NewsfeedCompetition,s({},e));case"dataset":case"datasetVersion":return React.createElement(h.NewsfeedDataset,s({},e));case"blogPost":return React.createElement(d.NewsfeedBlog,s({},e));default:return null}},t.renderStory=function(e){return React.createElement("div",{className:"newsfeed__story-container",key:e.storyType+"-"+e.storyItemId},"kernel"!=e.storyType&&"kernelRun"!=e.storyType||e.kernel.kernelVisualizationUrl?React.createElement("div",{className:"newsfeed__story"},React.createElement(u.NewsfeedStoryHeader,s({},e)),React.createElement("div",{className:"newsfeed__story-content"},t.renderStoryContent(e))):React.createElement(u.NewsfeedStoryHeader,s({},e,{borderless:!0})))},t}return n(t,e),t.prototype.getStoryLink=function(e){switch(e.storyType){case"forumMessage":case"competitionMessage":case"datasetMessage":case"forumTopic":case"datasetTopic":case"competitionTopic":return e.discussion.topicUrl;case"kernelMessage":case"kernel":case"kernelRun":return e.kernel.kernelUrl;case"competitionStarted":case"competitionEnded":case"competitionFinalized":return e.competition.competitionUrl;case"dataset":case"datasetVersion":return e.dataset.datasetUrl;case"blogPost":return e.blog.blogUrl;default:return null}},t.prototype.render=function(){return React.createElement("div",{className:"newsfeed"},React.createElement("div",{className:"newsfeed__main-content"},React.createElement("div",{className:"newsfeed__story-list"},React.createElement(i.SmartListContainer,{dataUrl:"/newsfeed.json",data:this.props,dataPathToList:"stories",pluralItemDescription:"stories",itemRenderer:this.renderStory,isUnstyled:!0,pageSize:10})),React.createElement("div",{className:"newsfeed__sidebar-list"},React.createElement(r.ContentBox,null,React.createElement(l.BlockLink,{href:this.props.userUrl,className:"newsfeed__profile"},React.createElement(p.Avatar,{tier:this.props.userTier,width:50,thumbnailUrl:this.props.avatarUrl,displayName:this.props.userName,userUrl:this.props.userUrl}),React.createElement("div",{className:"newsfeed__profile-info"},React.createElement("div",{className:"newsfeed__profile-name"},React.createElement("a",{href:this.props.userUrl},this.props.userName)),React.createElement("div",{className:"newsfeed__profile-label"},"Joined ",React.createElement(c.TimeAgo,{time:this.props.userJoinDate})))),React.createElement("div",{className:"newsfeed__progression"},React.createElement(v.NewsfeedProgression,s({},this.props.progression)))),null!=this.props.banneredJob?React.createElement(r.ContentBox,null,React.createElement(l.BlockLink,{href:this.props.banneredJob.postUrl,className:"newsfeed__bannered-job",borderless:!0},React.createElement("div",null,React.createElement("img",{src:this.props.banneredJob.imageUrl,className:"newsfeed__bannered-job-image"})),React.createElement("div",{className:"newsfeed__bannered-job-text"},React.createElement("div",{className:"newsfeed__bannered-job-company"},this.props.banneredJob.company," is hiring"),React.createElement("div",{className:"newsfeed__bannered-job-position"},this.props.banneredJob.position),React.createElement("div",{className:"newsfeed__bannered-job-location"},React.createElement("span",{className:"fa fa-map-marker"})," ",this.props.banneredJob.location)))):null,React.createElement(o.SidebarContent,{title:"my"==this.props.competitionSidebarType?"My Competitions":"Recommended Competitions"},React.createElement("div",{className:"newsfeed__competitions-sidebar"},this.props.competitionSidebarList.map(function(e,t){return React.createElement(y.NewsfeedCompetitionSidebar,s({},e,{key:t}))}))),React.createElement(o.SidebarContent,{title:"recent"==this.props.datasetSidebarType?"Recent Datasets":"Recommended Datasets"},React.createElement("div",{className:"newsfeed__datasets-sidebar"},this.props.datasetSidebarList.map(function(e,t){return React.createElement(_.NewsfeedDatasetSidebar,s({},e,{key:t}))}))),React.createElement(o.SidebarContent,{title:"my"==this.props.kernelSidebarType?"My Kernels":"Recommended Kernels"},React.createElement("div",{className:"newsfeed__datasets-sidebar"},this.props.kernelSidebarList.map(function(e,t){return React.createElement(b.NewsfeedKernelSidebar,s({},e,{key:t}))}))),React.createElement(o.SidebarContent,{title:"recent"==this.props.topicSidebarType?"Recent Topics":"Recommended Topics"},React.createElement("div",{className:"newsfeed__discuttions-sidebar"},this.props.topicSidebarList.map(function(e,t){return React.createElement(R.NewsfeedTopicSidebar,s({},e,{key:t}))}))),React.createElement(o.SidebarContent,{title:"Recent Jobs",titleRightText:"See all jobs",titleRightHref:"/jobs"},React.createElement("div",{className:"newsfeed__jobs-sidebar"},this.props.jobsBoardSidebarList.map(function(e,t){return React.createElement(E.NewsfeedJobSidebar,s({},e,{key:t}))}))))))},t}(React.Component));t.Newsfeed=w},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("div",{className:"sidebar-content"},this.props.title?React.createElement("div",{className:"sidebar-content__title-container"},React.createElement("div",{className:"sidebar-content__title"},this.props.title),this.props.titleRightText?React.createElement("div",{className:"sidebar-content__title-right"},this.props.titleRightHref?React.createElement("a",{href:this.props.titleRightHref},this.props.titleRightText):this.props.titleRightText):null):null,React.createElement("div",{className:"sidebar-content__content"},this.props.children),this.props.footerText?React.createElement("div",{className:"sidebar-content__footer"},this.props.footerHref?React.createElement("a",{href:this.props.footerHref},this.props.footerText):this.props.footerText):null)},t}(React.Component);t.SidebarContent=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(7),i=a(34),r=a(23),o=a(72),l=a(4),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderLink=function(e,t){return React.createElement("a",{href:e},t)},t.prototype.renderActionText=function(){switch(this.props.storyType){case"forumMessage":case"competitionMessage":case"datasetMessage":return React.createElement("span",null," replied to ",this.renderLink(this.props.discussion.messageUrl,this.props.discussion.topicName));case"forumTopic":case"datasetTopic":case"competitionTopic":return React.createElement("span",null," created topic ",this.renderLink(this.props.discussion.topicUrl,this.props.discussion.topicName));case"kernelMessage":return React.createElement("span",null," commented on kernel ",this.renderLink(this.props.discussion.messageUrl,this.props.kernel.kernelName));case"competitionStarted":return React.createElement("span",null," launched competition ",this.renderLink(this.props.competition.competitionUrl,this.props.competition.competitionName));case"competitionEnded":return React.createElement("span",null,"'s competition concluded ",this.renderLink(this.props.competition.competitionUrl,this.props.competition.competitionName));case"competitionFinalized":return React.createElement("span",null,"'s competition finalized ",this.renderLink(this.props.competition.competitionUrl,this.props.competition.competitionName));case"kernel":case"kernelRun":return React.createElement("span",null," ran kernel ",this.renderLink(this.props.kernel.kernelUrl,this.props.kernel.kernelName));case"dataset":return React.createElement("span",null," posted new dataset ",this.renderLink(this.props.dataset.datasetUrl,this.props.dataset.datasetTitle));case"datasetVersion":return React.createElement("span",null," updated dataset ",this.renderLink(this.props.dataset.datasetUrl,this.props.dataset.datasetTitle));case"blogPost":return React.createElement("span",null," posted blog ",this.renderLink(this.props.blog.blogUrl,this.props.blog.blogTitle));default:return null}},t.prototype.renderGrandParentText=function(){switch(this.props.storyType){case"forumMessage":case"competitionMessage":case"datasetMessage":case"forumTopic":case"datasetTopic":case"competitionTopic":return React.createElement("span",null," in ",this.renderLink(this.props.discussion.forumUrl,this.props.discussion.forumName),React.createElement("span",null," ∙ "),this.renderLink(this.props.comments.commentsUrl,React.createElement(o.Pluralize,{count:this.props.comments.commentCount,word:"comments"})));case"kernel":case"kernelRun":return React.createElement("span",null," on ",this.props.competition.competitionName?React.createElement("span",null,"competition ",this.renderLink(this.props.competition.competitionUrl,this.props.competition.competitionName)):React.createElement("span",null,"dataset ",this.renderLink(this.props.dataset.datasetUrl,this.props.dataset.datasetTitle)),React.createElement("span",null," ∙ "),this.renderLink(this.props.comments.commentsUrl,React.createElement(o.Pluralize,{count:this.props.comments.commentCount,word:"comments"})));default:return null}},t.prototype.render=function(){return React.createElement("div",{className:l("newsfeed-story-header",this.props.borderless?"newsfeed-story-header--borderless":"newsfeed-story-header--bordered")},this.props.vote?React.createElement("div",{className:"newsfeed-story-header__vote-button-container"},React.createElement(r.VoteButton,{voteUpUrl:this.props.vote.upvoteUrl,canDownvote:this.props.vote.canDownvote,canUpvote:this.props.vote.canUpvote,hasAlreadyVotedUp:this.props.vote.hasAlreadyUpvoted,hasAlreadyVotedDown:this.props.vote.hasAlreadyDownvoted,totalVotes:this.props.vote.voteCount,voteDownUrl:this.props.vote.downvoteUrl})):null,React.createElement("div",{className:l("newsfeed-story-header__avatar-container",this.props.vote?null:"newsfeed-story-header__avatar-container--no-voting")},React.createElement(i.Avatar,{tier:this.props.user.userTier,displayName:this.props.user.userDisplayName,thumbnailUrl:this.props.user.userAvatarUrl,userUrl:this.props.user.userUrl})),React.createElement("div",{className:"newsfeed-story-header__text-container"},React.createElement("div",{className:"newsfeed-story-header__label"},React.createElement("a",{href:this.props.user.userUrl},this.props.user.userDisplayName),this.renderActionText()),React.createElement("div",{className:"newsfeed-story-header__sublabel"},React.createElement(s.TimeAgo,{time:this.props.date}),this.renderGrandParentText())))},t}(React.Component);t.NewsfeedStoryHeader=c},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-blog"},React.createElement("img",{className:"newsfeed-blog__image",src:this.props.blog.blogImageUrl}),React.createElement("div",{className:"newsfeed-blog__summary",dangerouslySetInnerHTML:{__html:this.props.blog.blogSummary}}))},t}(React.Component);t.NewsfeedBlog=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(216),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-competition"},React.createElement("div",{className:"newsfeed-competition__content"},React.createElement("img",{src:this.props.competition.competitionImageUrl,className:"newsfeed-competition__image"}),React.createElement("div",{className:"newsfeed-competition__content-text-container"},React.createElement("a",{className:"newsfeed-competition__content-title",href:this.props.competition.competitionUrl},this.props.competition.competitionName),React.createElement("div",{className:"newsfeed-competition__content-overview"},this.props.competition.competitionOverview))),"competitionStarted"!=this.props.storyType?React.createElement("div",{className:"newsfeed-competition__results-container"},React.createElement("div",{className:"newsfeed-competition__results-label"},"competitionEnded"==this.props.storyType?"Preliminary Results":"Final Results"),this.props.competition.teams.map(function(e){return React.createElement("div",{className:"newsfeed-competition__results-team-container"},React.createElement("div",{className:"newsfeed-competition__results-team-rank"},React.createElement(s.FormatPlace,{number:e.rank})),1==e.users.length?React.createElement("a",{className:"newsfeed-competition__results-team-link",href:e.users[0].url},e.users[0].name):React.createElement("div",{className:"newsfeed-competition__results-team-group"},e.name," ",React.createElement("span",{className:"newsfeed-competition__results-team-user-list"},"(",e.users.map(function(t,a){return React.createElement("span",null,React.createElement("a",{className:"newsfeed-competition__results-team-user",href:t.url},t.name),a<e.users.length-1?", ":"")}),")")))}),"competitionEnded"==this.props.storyType?React.createElement("div",{className:"newsfeed-competition__preliminary-label"},"This reflects the preliminary standings - results will become final after the competition organizers verify the results."):null):null)},t}(React.Component);t.NewsfeedCompetition=i},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-dataset"},React.createElement("div",{className:"newsfeed-dataset__content"},React.createElement("img",{src:this.props.dataset.datasetImageUrl,className:"newsfeed-dataset__image"}),React.createElement("div",{className:"newsfeed-dataset__content-text-container"},React.createElement("a",{className:"newsfeed-dataset__content-title",href:this.props.dataset.datasetUrl},this.props.dataset.datasetTitle),React.createElement("div",{className:"newsfeed-dataset__content-overview"},this.props.dataset.datasetOverview))),"datasetVersion"==this.props.storyType?React.createElement("div",{className:"newsfeed-dataset__version-notes-container"},React.createElement("div",{className:"newsfeed-dataset__version-notes-label"},"Version notes"),React.createElement("div",{className:"newsfeed-dataset__version-notes-text"},this.props.dataset.datasetVersionNotes)):null)},t}(React.Component);t.NewsfeedDataset=n},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-kernel"},this.props.kernel.kernelVisualizationUrl?React.createElement("div",{className:"newsfeed-kernel__image-container"},React.createElement("a",{href:this.props.kernel.kernelUrl},React.createElement("img",{className:"newsfeed-kernel__image",src:this.props.kernel.kernelVisualizationUrl}))):null)},t}(React.Component);t.NewsfeedKernel=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(69),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-message"},React.createElement("div",{className:"newsfeed-message__content"},React.createElement(s.ForumMessageContent,{rawMarkdown:this.props.discussion.messageRawMarkdown,rawHtml:this.props.discussion.messageRawHtml})))},t}(React.Component);t.NewsfeedMessage=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(216),i=a(4),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderChecklistItem=function(e,t,a){return React.createElement("div",{className:i("newsfeed-progression__item","newsfeed-progression__item--"+(e.isComplete?"checked":"unchecked"),"newsfeed-progression__item--"+t),key:a},e.name)},t}return n(t,e),t.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},t.prototype.renderTierList=function(e,t,a,n,r,o){var l=this;return React.createElement("div",{className:"newsfeed-progression"},React.createElement("a",{href:"grandmaster"==t?"/rankings?group="+e.toLowerCase():"/progression#"+r,className:i("newsfeed-progression__header","newsfeed-progression__header--"+t)},e," ",this.toTitleCase(t)),React.createElement("div",{className:"newsfeed-progression__list-container"},"grandmaster"==t?React.createElement("div",{className:"newsfeed-progression__ranking"},n?React.createElement("span",null,"Ranked ",React.createElement(s.FormatPlace,{number:n})):"Unranked"):o.map(function(e,a){return l.renderChecklistItem(e,t,a)})))},t.prototype.render=function(){var e=this;return this.props.isContributorOrHigher?React.createElement("div",null,this.renderTierList("Competitions",this.props.currentCompetitionTier,"competition",this.props.currentCompetitionRanking,this.props.nextCompetitionTier,this.props.competitionChecklist),this.renderTierList("Kernels",this.props.currentKernelTier,"scripts",this.props.currentKernelRanking,this.props.nextKernelTier,this.props.kernelChecklist),this.renderTierList("Discussion",this.props.currentDiscussionTier,"discussions",this.props.currentDiscussionRanking,this.props.nextDiscussionTier,this.props.discussionChecklist)):React.createElement("div",{className:"newsfeed-progression"},React.createElement("div",{className:"newsfeed-progression__header newsfeed-progression__header--novice"},"Novice"),React.createElement("div",null,this.props.contributorChecklist.map(function(t,a){return e.renderChecklistItem(t,"novice",a)})))},t}(React.Component);t.NewsfeedProgression=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(7),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-competition-sidebar"},React.createElement("div",{className:"newsfeed-competition-sidebar__container"},React.createElement("img",{src:this.props.imageUrl,className:"newsfeed-competition-sidebar__image"}),React.createElement("div",{className:"newsfeed-competition-sidebar__text-container"},React.createElement("div",{className:"newsfeed-competition-sidebar__title"},React.createElement("a",{href:this.props.competitionUrl},this.props.title)),React.createElement("div",{className:"newsfeed-competition-sidebar__sub-content"},React.createElement("div",{className:"newsfeed-competition-sidebar__hover-links"},React.createElement("ul",null,React.createElement("li",null,React.createElement("a",{href:this.props.leaderboardUrl},"Leaderboard")),React.createElement("li",null,React.createElement("a",{href:this.props.forumUrl},"Forum")),React.createElement("li",null,React.createElement("a",{href:this.props.submissionsUrl},"Submissions")))),React.createElement("div",{className:"newsfeed-competition-sidebar__remaining"},React.createElement("ul",null,this.props.ranking?React.createElement("li",null,this.props.ranking," of ",this.props.totalTeams):null,React.createElement("li",null,React.createElement(s.TimeAgo,{time:this.props.deadline,toGoOverride:"remaining"}))))))))},t}(React.Component);t.NewsfeedCompetitionSidebar=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(72),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-dataset-sidebar"},React.createElement("div",{className:"newsfeed-dataset-sidebar__container"},React.createElement("img",{src:this.props.imageUrl,className:"newsfeed-dataset-sidebar__image"}),React.createElement("div",{className:"newsfeed-dataset-sidebar__text-container"},React.createElement("div",{className:"newsfeed-dataset-sidebar__title"},React.createElement("a",{href:this.props.datasetUrl},this.props.title)),React.createElement("div",{className:"newsfeed-dataset-sidebar__sub-content"},this.props.kernelCount>0?React.createElement("a",{href:this.props.kernelsUrl},React.createElement(s.Pluralize,{count:this.props.kernelCount,word:"kernels"})):null,this.props.kernelCount>0&&this.props.topicCount>0?React.createElement("span",null," ∙ "):null,this.props.topicCount>0?React.createElement("a",{href:this.props.forumUrl},React.createElement(s.Pluralize,{count:this.props.topicCount,word:"topics"})):null))))},t}(React.Component);t.NewsfeedDatasetSidebar=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(7),i=a(72),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-kernel-sidebar"},React.createElement("div",{className:"newsfeed-kernel-sidebar__container"},React.createElement("img",{src:this.props.imageUrl,className:"newsfeed-kernel-sidebar__image"}),React.createElement("div",{className:"newsfeed-kernel-sidebar__text-container"},React.createElement("div",{className:"newsfeed-kernel-sidebar__title"},React.createElement("a",{href:this.props.kernelUrl},this.props.title)),React.createElement("div",{className:"newsfeed-kernel-sidebar__sub-content"},React.createElement("ul",null,React.createElement("li",null,React.createElement(s.TimeAgo,{time:this.props.lastRunDate})),React.createElement("li",null,React.createElement(i.Pluralize,{
count:this.props.voteCount,word:"votes"})),React.createElement("li",null,React.createElement("a",{href:this.props.commentsUrl},React.createElement(i.Pluralize,{count:this.props.commentCount,word:"comments"}))))))))},t}(React.Component);t.NewsfeedKernelSidebar=r},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-job-sidebar"},React.createElement("div",{className:"newsfeed-job-sidebar__container"},React.createElement("img",{src:this.props.imageUrl,className:"newsfeed-job-sidebar__image"}),React.createElement("div",{className:"newsfeed-job-sidebar__text-container"},React.createElement("div",{className:"newsfeed-job-sidebar__title"},React.createElement("a",{href:this.props.postUrl},this.props.position)),React.createElement("div",{className:"newsfeed-job-sidebar__sub-content"},this.props.company," ",React.createElement("span",null," ∙ "),React.createElement("span",{className:"fa fa-map-marker"})," ",this.props.location))))},t}(React.Component);t.NewsfeedJobSidebar=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(7),i=a(72),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"newsfeed-topic-sidebar"},React.createElement("div",{className:"newsfeed-topic-sidebar__container"},React.createElement("img",{src:this.props.avatarUrl,className:"newsfeed-topic-sidebar__image"}),React.createElement("div",{className:"newsfeed-topic-sidebar__text-container"},React.createElement("div",{className:"newsfeed-topic-sidebar__title"},React.createElement("a",{href:this.props.topicUrl},this.props.topicName)),React.createElement("div",{className:"newsfeed-topic-sidebar__sub-content"},React.createElement("ul",null,React.createElement("li",null,React.createElement(s.TimeAgo,{time:this.props.lastUserMessageDate})),React.createElement("li",null,React.createElement("a",{href:this.props.topicUrl},React.createElement(i.Pluralize,{count:this.props.totalPosts,word:"comments"}))))))))},t}(React.Component);t.NewsfeedTopicSidebar=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(40),i=function(e){function t(t){var a=e.call(this,t)||this;return a.renderTitle=function(e,t){if(t.isLoadingMoreData)return" ";var n="competition",i="";switch(t.values.group){case"active":n="active competition";break;case"entered":i="you've entered";break;case"hosted":i="you've hosted"}var r=t.data?t.data.totalCompetitions:a.props.totalCompetitions;return t.data?React.createElement("span",null,React.createElement(s.Pluralize,{count:r,word:n,formatNumber:!0})," ",i):" "},a.renderCompetition=function(e,t,a){return React.createElement(s.CompetitionCard,{key:e.competitionId,competition:e,onClick:a})},a.filters=[{placeholder:"Segment",parameter:"segment",options:a.props.hostSegmentOptions}],a}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"view-competition-list"},React.createElement(s.Banner,{title:"Competitions",infoTitle:"Welcome to Kaggle Competitions",infoSubtitle:"Challenge yourself with real-world machine learning problems",infoBanner:this.props.banner,bannerImageClassName:"view-competition-list__banner-image",panels:[{imageSrc:"/static/images/comps-1-new.png",title:"New to Data Science?",description:React.createElement("span",null,"Get started with a tutorial on our most popular competition for beginners,",React.createElement("span",null," "),React.createElement("a",{href:"/c/titanic",className:"view-competition-list__banner_link"},"Titanic: Machine Learning from Disaster"),".")},{imageSrc:"/static/images/comps-2-build.png",title:"Build a Model",description:"Get the data & use whatever tools or methods you prefer to make predictions."},{imageSrc:"/static/images/comps-3-submit.png",title:"Make a Submission",description:"Upload your prediction file for real-time scoring & a spot on the leaderboard."}]}),React.createElement("div",{className:"view-competition-list__wrapper"},React.createElement(s.SmartListContainer,{titleResolver:this.renderTitle,data:this.props,dataUrl:"/competitions.json",dataPathToList:"competitions",groups:this.props.selectionGroupOptions,sortOptions:this.props.sortByOptions,itemRenderer:this.renderCompetition,pluralItemDescription:"competitions",mobileSortUpperBound:s.Breakpoints.tabletMax,filtersOptions:this.filters,searchIndex:"competitions",values:this.props.values,groupDefaultSortBys:[{group:"active",sortBy:"prize"},{group:"all",sortBy:"deadline"}],searchableGroups:["active","all"],groupSearchRedirects:[{searchedGroup:"active",redirectToGroup:"all"}]})))},t}(React.Component);t.ViewCompetitionList=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(24),i=a(250),r=a(40),o=500,l=function(e){function t(t){var a=e.call(this,t)||this;return a.queuedTimer=new r.Timer,a.runningTimer=new r.Timer,a.onError=function(){a.runningTimer.setToZero(),a.queuedTimer.setToZero(),r.PageMessages.error("An error has occurred. Please try rerunning the script.",{clear:!0})},a.updateInputFileMetadata=function(e,t,n){if(!a.props.urls.submitToCompUrl&&-1===a.props.urls.scriptProject.indexOf("/c/")){var s={fileName:e,columns:[{fileName:e,columnIndex:t,description:n.description,dataType:n.harmonizedDataType}]},i=a.props.urls.scriptProject+"/datadictionary.json";$.ajax({url:i,type:"PATCH",processData:!1,contentType:"application/json",dataType:"text",data:JSON.stringify(s),success:function(e){e&&r.PageMessages.error("Your description could not be saved: "+e,{clear:!0})},error:function(){r.PageMessages.error("Sorry, there was a problem saving your update.",{clear:!0})}})}},a.initState(),a.initTimerCallbacks(),a}return n(t,e),t.prototype.initState=function(){var e=this.props.scriptProject.allowPrivateKernels&&(this.props.script.id||this.props.script.scriptId)<=0;this.state={script:{projectId:this.props.scriptProject.projectId,forkParentScriptVersionId:this.props.script.forkParentScriptVersionId,newText:this.props.scriptVersion.text,newTitle:this.props.scriptVersion.title,scriptId:this.props.script.id,scriptLanguageName:this.props.scriptVersion.languageName.toLowerCase(),isLanguageTemplate:this.props.script.isLanguageTemplate,isPrivate:this.props.script.isPrivate||e},scriptUrl:this.props.urls.script,isUnsavedPrivateKernel:e,tab:null,scriptVersionId:null,status:null,outputLog:[],outputFiles:null,runInfo:{},isEditingTitle:!1,versionNumber:this.props.scriptVersion.thisScriptVersionNumber,onLanguageChange:this.onLanguageChange.bind(this),onRunStart:s.debounce(this.onRunStart.bind(this),500),onRunEnd:this.onRunEnd.bind(this),onRunCancel:this.onRunCancel.bind(this),onScriptChange:this.onScriptChange.bind(this),onTabChange:this.onTabChange.bind(this),onTitleFocus:this.onTitleFocus.bind(this),onTitleBlur:this.onTitleBlur.bind(this),onTitleChange:this.onTitleChange.bind(this),onToggleOutputPreview:this.onToggleOutputPreview.bind(this),onUploadScriptClick:this.onUploadScriptClick.bind(this),onDownloadScriptClick:this.onDownloadScriptClick.bind(this),onSubmitCode:this.onSubmitCode.bind(this),onMetadataChange:this.props.urls.submitToCompUrl||-1!==this.props.urls.scriptProject.indexOf("/c/")?null:this.updateInputFileMetadata}},t.prototype.initTimerCallbacks=function(){this.queuedTimer.setDisplayCallback(function(e){r.PageMessages.info("Queued - Queue Time: "+e,{clear:!0,faIcon:"fa-cog fa-spin"})}),this.runningTimer.setDisplayCallback(function(e){r.PageMessages.info("Running - Run Time: "+e,{clear:!0,faIcon:"fa-refresh fa-spin"})})},t.prototype.setScriptState=function(e){this.setState({script:$.extend(this.state.script,e)})},t.prototype.fetchStatus=function(){var e=this;return $.get(this.props.urls.versionStatus+"?id="+this.state.scriptVersionId+"&existingStatus="+this.state.status).done(function(t){var a=t.status;switch(a){case"complete":case"error":e.onRunEnd(t);break;case"running":e.queuedTimer.stopTimer(),e.runningTimer.isRunning()||e.runningTimer.startTimer()}var n={status:a};t.thisScriptVersionNumber&&(n.versionNumber=t.thisScriptVersionNumber),e.setState(n)}).fail(this.onError)},t.prototype.fetchOutput=function(){var e=this,t={scriptRun:{id:this.state.scriptVersionId,status:this.subs.status,streams:{stdout:this.subs.stdout,stderr:this.subs.stderr}}};return $.ajax({url:"/redis/sub",type:"POST",data:JSON.stringify(t),processData:!1,contentType:"application/json",dataType:"json"}).done(function(t){function a(e){var a=this;this.subs[e]=n;var s=this.state.outputLog.concat(t.Result.map(function(t,n){return{stream_name:e,data:t.Value,time:t.Position.toFixed(1),lineNo:a.state.outputLog.length+n+1}}));this.setState({outputLog:s})}var n=s.chain(t.Result).pluck("Position").max().value();switch(t.Key){case"streams:stdout":a.bind(e)("stdout");break;case"streams:stderr":a.bind(e)("stderr");break;case"status":e.subs.status=n}}).fail(this.onError)},t.prototype.startPolling=function(){this.poll(this.fetchStatus.bind(this)),this.poll(this.fetchOutput.bind(this))},t.prototype.poll=function(e){var t=this;this.shouldPoll&&e().then(function(){window.setTimeout(function(){return t.poll(e)},o)})},t.prototype.mapOutputFiles=function(e){var t=e.slice();return t.forEach(function(e){e.fileName===i.RMARKDOWN_OUTPUT_FILE_NAME&&(e.filePreviewUrl=e.fileUrl)}),t},t.prototype.componentDidMount=function(){document.addEventListener("keydown",this.onKeyDown.bind(this),!1)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.onKeyDown.bind(this),!1)},t.prototype.downloadFile=function(e,t){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(new Blob([e],{type:"text/plain"})),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)},t.prototype.onKeyDown=function(e){e.shiftKey&&13==e.keyCode&&(this.onRunStart(),e.preventDefault())},t.prototype.onUploadScriptClick=function(e){var t=this,a=e.target.files[0],n=new FileReader;n.onload=function(e){t.setScriptState({newText:n.result})},n.readAsText(a)},t.prototype.onDownloadScriptClick=function(){var e=this,t=this.props.scriptProject.availableLanguagesWithTemplates.filter(function(t){return t.languageName.toLowerCase()===e.state.script.scriptLanguageName})[0].defaultFileName;this.downloadFile(this.state.script.newText,t)},t.prototype.onTitleFocus=function(){this.setState({isEditingTitle:!0})},t.prototype.onTitleBlur=function(e){if(this.state.script.newTitle)r.PageMessages.clear(),this.setState({isEditingTitle:!1});else{var t=e.target;r.PageMessages.error("Script title cannot be empty",{clear:!0}),t.focus()}},t.prototype.onTitleChange=function(e){this.setScriptState({newTitle:e.target.value})},t.prototype.onLanguageChange=function(e){var t=this,a=this.props.scriptProject.availableLanguagesWithTemplates,n=a.some(function(e){return e.template===t.state.script.newText}),s=n?a.filter(function(t){return t.languageName.toLowerCase()===e})[0].template:this.state.script.newText;this.setScriptState({scriptLanguageName:e,newText:s})},t.prototype.onScriptChange=function(e){this.setScriptState({newText:e})},t.prototype.onTabChange=function(e){this.setState({tab:e})},t.prototype.onToggleOutputPreview=function(e){e.expanded=!e.expanded,this.setState({outputFiles:this.state.outputFiles})},t.prototype.onRunStart=function(){var e=this;this.runningTimer.setToZero(),this.queuedTimer.setToZero(),this.queuedTimer.startTimer(),$.post(this.props.urls.saveVersion,this.state.script,null,"json").then(function(t){var a=t.versionId,n=t.status,s=t.scriptId;"error"===n?(e.queuedTimer.stopTimer(),r.PageMessages.error(t.message,{clear:!0})):(t.newUrl&&history.replaceState({},null,t.newUrl+"/edit"),e.subs={stdout:-1,stderr:-1,status:0},e.shouldPoll=!0,e.setScriptState({scriptId:s}),e.setState({outputLog:[],tab:"log",runInfo:{},outputFiles:[],isUnsavedPrivateKernel:!1,scriptUrl:t.newUrl||e.state.scriptUrl}),e.setState({scriptVersionId:a,status:n},function(){return e.startPolling()}),window.Intercom("trackEvent","run_script",{script_id:s}),e.props.isDataset?window.Intercom("trackEvent","run_dataset_script",{script_id:s}):window.Intercom("trackEvent","run_comp_script",{script_id:s}))})},t.prototype.onRunError=function(){r.PageMessages.error({htmlMessage:'<span class="script-editor__page-message">Run Failed - Run Time: '+this.runningTimer.getElapsedTimeString()+'<a href="'+this.state.scriptUrl+'">View Completed Script (Exit Editor) <i class="fa fa-angle-double-right" /></a></span>'},{clear:!0})},t.prototype.onRunComplete=function(e){var t="rmarkdown"===this.state.script.scriptLanguageName;t?this.setState({tab:"html"}):e.length>0&&this.setState({tab:"output"}),r.PageMessages.success({htmlMessage:'<span class="script-editor__page-message">Run Successful - Run Time: '+this.runningTimer.getElapsedTimeString()+' <a href="'+this.state.scriptUrl+'">View Completed Script (Exit Editor) <i class="fa fa-angle-double-right" /></a></span>'},{clear:!0})},t.prototype.onRunEnd=function(e){var t=this;this.queuedTimer.stopTimer(),this.runningTimer.stopTimer(),this.shouldPoll=!1;var a=JSON.parse(e.consoleOutput),n=this.mapOutputFiles(e.outputFiles);this.setState({runInfo:e.runInfo,outputLog:a,outputFiles:n},function(){switch(e.status){case"complete":t.onRunComplete(n);break;case"error":t.onRunError()}})},t.prototype.onRunCancel=function(){var e=this;this.queuedTimer.stopTimer(),this.runningTimer.stopTimer(),r.PageMessages.clear(),$.ajax({url:this.props.urls.cancel,type:"POST",data:{scriptVersionId:this.state.scriptVersionId}}).then(function(){e.shouldPoll=!1,e.setState({status:"cancelled"})})},t.prototype.onSubmitCode=function(){var e=this,t=$.extend({isCodeSubmission:!0},this.state.script);$.post(this.props.urls.saveVersion,t,null,"json").then(function(e){e.message?r.PageMessages.error(e.message,{clear:!0}):window.location.href=e.submitRedirectUrl}).fail(function(t){var a=$.parseJSON(t.responseText);a&&a.details?r.PageMessages.error(a.details,{clear:!0}):e.onError()})},t.prototype.render=function(){return React.createElement(i.ScriptEditor,$.extend({},this.props,this.state))},t}(React.Component);t.ScriptEditorContainer=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(251)["default"];a(255),a(256),a(257),a(258),a(259),a(264),a(265);var r=a(40),o=a(169),l=a(37),c=a(5),p=a(6),u=a(202);t.RMARKDOWN_OUTPUT_FILE_NAME="__results__.html";var d=function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t.noOutputLines=0,t.allTabs=[{title:"Code",text:"Code",actionCallback:function(){return t.props.onTabChange("code")}},{title:"Input",text:"Input",actionCallback:function(){return t.props.onTabChange("input")}},{title:"Log",text:"Log",actionCallback:function(){return t.props.onTabChange("log")}},{title:"Output",text:"Output",actionCallback:function(){return t.props.onTabChange("output")}},{title:"HTML",text:"HTML",actionCallback:function(){return t.props.onTabChange("html")}},{title:"Info",text:"Info",actionCallback:function(){return t.props.onTabChange("info")}}],t.onDataSourceChanged=function(e,t){},t}return n(a,e),a.prototype.componentDidMount=function(){this.fixHorizontalScrollbar()},a.prototype.componentDidUpdate=function(){this.tailLog()},a.prototype.fixHorizontalScrollbar=function(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)},a.prototype.tailLog=function(){this.props.outputLog&&this.props.outputLog.length!==this.noOutputLines&&this.logContainer&&(this.logContainer.scrollTop=this.logContainer.scrollHeight,this.noOutputLines=this.props.outputLog.length)},a.prototype.getLanguageMode=function(){return"rmarkdown"===this.props.script.scriptLanguageName?"markdown":this.props.script.scriptLanguageName},a.prototype.getLanguageOptions=function(){var e=this.props.scriptProject.availableLanguagesWithTemplates;return e.filter(function(e){return-1===e.languageName.indexOf("Notebook")}).map(function(e){return{label:e.languageName,value:e.languageName.toLowerCase(),aceMode:e.aceLanguageName}})},a.prototype.getTabs=function(e){var t=this.allTabs;return e||(t=t.filter(function(e){return"Code"!==e.title})),this.props.outputFiles&&this.getHtmlOutputFile()||(t=t.filter(function(e){return"HTML"!==e.title})),t},a.prototype.getHtmlOutputFile=function(){return this.props.outputFiles.filter(function(e){return e.fileName===t.RMARKDOWN_OUTPUT_FILE_NAME})[0]},a.prototype.getActiveTab=function(e){return this.props.tab?this.props.tab:"desktop"===e?"input":"code"},a.prototype.getTabSelectOptions=function(){return this.getTabs(!0).map(function(e){return{label:e.title,value:e.title.toLowerCase()}})},a.prototype.getVisualizationFiles=function(){return this.props.outputFiles?this.props.outputFiles.filter(function(e){return[".png",".jpg",".gif",".svg"].indexOf(e.fileType)>-1}):null},a.prototype.getNonVisualizationFiles=function(){return this.props.outputFiles?this.props.outputFiles.filter(function(e){return-1==[".png",".jpg",".gif",".svg"].indexOf(e.fileType)}):null},a.prototype.shouldShowOutputPreviewList=function(){return this.props.outputFiles&&this.getNonVisualizationFiles().length>0||!this.shouldShowVisualizationsBox()},a.prototype.shouldShowVisualizationsBox=function(){return this.props.outputFiles&&this.getVisualizationFiles().length>0},a.prototype.renderVisualizationsBox=function(){return React.createElement("div",null,(this.getVisualizationFiles()||[]).length>0?this.getVisualizationFiles().map(function(e){return React.createElement("img",{className:"script-editor__visualization",src:e.fileUrl})}):this.renderNoOutputMessage())},a.prototype.renderNoOutputMessage=function(){return React.createElement("div",{className:"script-editor__no-output"},React.createElement(c.ContentBox,null,"No output"))},a.prototype.renderTabbedContent=function(e){var t=this;switch(this.getActiveTab(e)){case"code":return this.renderEditor(e);case"log":return React.createElement("div",{className:"script-editor__log",ref:function(e){return t.logContainer=e}},React.createElement(l.ScriptLogSection,{logLineData:this.props.outputLog,withContentBox:!1}));case"input":if(this.props.hasMultipleDataSourcesFlag&&this.props.dataSources&&0===this.props.dataSources.length)return React.createElement("div",{className:"script-editor__add-data-source-banner"},React.createElement(u.AddDataSourceBanner,{scriptVersionId:this.props.scriptVersion.id,onDataSourceAdded:this.onDataSourceChanged}));if(this.props.inputFiles&&this.props.inputFiles.length>0)return React.createElement(r.FilePreviewList,{files:this.props.inputFiles,dataSources:this.props.dataSources||null,userCanEditMetadata:!p.Current.isAnonymous&&this.props.onMetadataChange,onMetadataChange:this.props.onMetadataChange});case"output":return React.createElement("div",{className:"script-editor__output"},this.shouldShowVisualizationsBox()&&this.renderVisualizationsBox(),this.shouldShowOutputPreviewList()&&(this.getNonVisualizationFiles()||[]).length>0?React.createElement(r.FilePreviewList,{files:this.getNonVisualizationFiles(),scriptVersionId:this.props.scriptVersionId,showSubmitToCompButtons:"code"!==this.props.scriptProject.competitionType,submitToCompUrl:this.props.urls.submitToCompUrl,competitionName:this.props.scriptProject.displayName}):this.renderNoOutputMessage());case"html":var a=this.getHtmlOutputFile().filePreviewUrl;return a&&React.createElement("iframe",{className:"script-editor__html_iframe",src:a});case"info":return React.createElement(l.ScriptRunInfoSection,s({},this.props.runInfo,{withContentBox:!1}));default:return null}},a.prototype.renderEditor=function(e){var t=this;return window.setTimeout(function(){return t.fixHorizontalScrollbar()}),React.createElement(i,{name:"script-editor",mode:this.getLanguageMode(),value:this.props.script.newText,onChange:this.props.onScriptChange,theme:"monokai",enableBasicAutocompletion:!0,editorProps:{$blockScrolling:!0},className:"script-editor__ace-editor",showPrintMargin:!1,setOptions:{maxLines:"Infinity",fontSize:"14px"},height:"auto",width:"auto",tabSize:4})},a.prototype.renderTitle=function(){return React.createElement("div",{className:"script-editor__title-area"},React.createElement("input",{className:"script-editor__title-input script-editor__title-input--"+(this.props.isEditingTitle?"focused":"unfocused"),placeholder:"Title",value:this.props.script.newTitle,onChange:this.props.onTitleChange,onFocus:this.props.onTitleFocus,onBlur:this.props.onTitleBlur,autoFocus:!this.props.script.newTitle}))},a.prototype.renderTabs=function(e,t){return React.createElement("div",{className:"script-editor__tabs"},React.createElement(r.PageHeaderNav,{classNameModifier:"script-editor",menuLinks:this.getTabs(t),activeTab:this.getActiveTab(e)}))},a.prototype.renderRunButton=function(e){return React.createElement("div",{className:"script-editor__call-to-action-area"},"running"!==this.props.status?React.createElement("div",{onClick:this.props.onRunStart,title:"Run Script",className:"pageheader__calltoaction pageheader__calltoaction"},"Run"):React.createElement("div",{onClick:this.props.onRunCancel,title:"Cancel Run",className:"pageheader__calltoaction pageheader__calltoaction--muted pageheader__calltoaction"},"Cancel"))},a.prototype.renderConvertButton=function(e,t){return null},a.prototype.renderLanguageSelectBox=function(e){return React.createElement("div",{className:"script-editor__language-area"},React.createElement(r.SelectBox,{className:"script-editor__language-select-box "+("phone"===e&&"KaggleBoxlessSelect"),options:this.getLanguageOptions(),onChange:this.props.onLanguageChange,value:this.props.script.scriptLanguageName,searchable:!1}))},a.prototype.renderScriptProjectThumbnail=function(){return React.createElement("div",{className:"script-editor__project-thumbnail"},React.createElement("a",{href:this.props.urls.scriptProject,title:this.props.scriptProject.displayName},React.createElement("img",{src:this.props.urls.scriptProjectThumbnail})))},a.prototype.renderPrivacyToggle=function(){return React.createElement(o.PrivacyToggle,{kernelType:"Script",displayMode:"SelectBox",isPrivate:this.props.script.isPrivate,disabled:this.props.isUnsavedPrivateKernel,scriptId:this.props.script.scriptId})},a.prototype.renderSubmitButton=function(){return"code"===this.props.scriptProject.competitionType&&"python"===this.props.script.scriptLanguageName&&React.createElement("div",{onClick:this.props.onSubmitCode,title:"Submit",className:"pageheader__calltoaction pageheader__calltoaction--secondary"},"Submit")},a.prototype.renderDesktopEditor=function(){return React.createElement("div",{className:"script-editor"},React.createElement("div",{className:"script-editor__left-pane"},React.createElement("div",{className:"script-editor__left-pane-header script-editor__full-pane-header"},this.renderScriptProjectThumbnail(),this.renderTitle(),React.createElement("div",{className:"script-editor__upload-button"},React.createElement("label",{htmlFor:"script-file-upload"},React.createElement("i",{className:"fa fa-cloud-upload",title:"Upload script"})),React.createElement("input",{type:"file",id:"script-file-upload",style:{display:"none"},onChange:this.props.onUploadScriptClick})),React.createElement("div",{className:"script-editor__download-button"},React.createElement("i",{className:"fa fa-cloud-download",title:"Download script",onClick:this.props.onDownloadScriptClick})),this.renderLanguageSelectBox("desktop"),this.renderPrivacyToggle(),this.renderConvertButton(!1,"script-editor__convert-to-notebook"),this.renderRunButton("desktop"),this.renderSubmitButton()),React.createElement("div",{className:"script-editor__left-pane-container"},React.createElement("div",{className:"script-editor__page-messages"},React.createElement(r.PageHeaderBottomRow,null)),this.renderEditor("desktop"))),React.createElement("div",{className:"script-editor__right-pane script-editor__right-pane--"+this.props.tab},React.createElement("div",{className:"script-editor__right-pane-header"},this.renderTabs("desktop",!1),React.createElement("div",{className:"script-editor__version-number"},"Version ",this.props.versionNumber),this.props.script.isPrivate?null:React.createElement("div",{className:"script-editor__license-info"},"This script ",this.props.script.scriptId>0?"has been":"will be"," released under the ",React.createElement("a",{target:"_blank",href:"http://www.apache.org/licenses/LICENSE-2.0"},"Apache 2.0")," open source license.")),React.createElement("div",{className:"script-editor__right-pane-content script-editor__right-pane-content--"+this.props.tab},this.renderTabbedContent("desktop"))))},a.prototype.renderTabletEditor=function(){return React.createElement("div",{className:"script-editor"},React.createElement("div",{className:"script-editor__full-pane"},React.createElement("div",{className:"script-editor__full-pane-header script-editor__full-pane-header"},this.renderScriptProjectThumbnail(),this.renderTitle(),this.renderTabs("tablet",!0),this.renderLanguageSelectBox("tablet"),this.renderConvertButton(!0,"script-editor__convert-to-notebook"),this.renderRunButton("tablet"),this.renderSubmitButton()),React.createElement("div",{className:"script-editor__full-pane-container"},React.createElement("div",{className:"script-editor__page-messages"},React.createElement(r.PageHeaderBottomRow,null)),this.renderTabbedContent("tablet"))))},a.prototype.renderPhoneEditor=function(){var e=this;return React.createElement("div",{className:"script-editor"},React.createElement("div",{className:"script-editor__full-pane"},React.createElement("div",{className:"script-editor__full-pane-header script-editor__full-pane-header"},this.renderTitle(),React.createElement(r.SelectBox,{options:this.getTabSelectOptions(),onChange:function(t){return e.props.onTabChange(t)},value:this.getActiveTab("phone"),className:"script-editor__tab-select-box KaggleBoxlessSelect",searchable:!1}),this.renderLanguageSelectBox("phone"),this.renderConvertButton(!0,"script-editor--options"),this.renderRunButton("phone"),this.renderSubmitButton()),React.createElement("div",{className:"script-editor__full-pane-container"},React.createElement("div",{className:"script-editor__page-messages"},React.createElement(r.PageHeaderBottomRow,null)),this.renderTabbedContent("phone"))))},a.prototype.render=function(){return React.createElement("div",null,React.createElement(r.MediaQuery,{minWidth:1381},this.renderDesktopEditor()),React.createElement(r.MediaQuery,{minWidth:831,maxWidth:1380},this.renderTabletEditor()),React.createElement(r.MediaQuery,{minWidth:0,maxWidth:830},this.renderPhoneEditor()))},a}(React.Component);t.ScriptEditor=d},,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(6),i=a(267),r=a(160),o=a(301),l=function(e){function t(t){var a=e.call(this,t)||this;a.getUiState=function(e){void 0===e&&(e=a.state.activeTab);var t=e.toLowerCase(),n=a.state,s=n.isNewTopic,i=n.topicId,r={activePane:t,activeTab:e,isNewTopic:s,topicId:i};return{competitionTabState:r}},a.onWindowPopState=function(e){e.state&&e.state.competitionTabState&&a.setState(e.state.competitionTabState)},a.onCompetitionTabChanged=function(e){r.PageMessages.clear();var t=$.Deferred();return a.setState({activePane:e.toLowerCase(),activeTab:e,isNewTopic:!1,topicId:null},function(){a.updateUrlForTab(e),t.resolve()}),t},a.updateUrlForTab=function(e,t){void 0===t&&(t=!1);var n=a.getUiState(e),s=a.competitionUrl,i=e.toLowerCase();if("overview"!==i){s+="/"+i;var r=a.state,o=r.isNewTopic,l=r.topicId,c=l||(o?"new":null);c&&"discussion"===i&&(s+="/"+c)}var p="discussion"===i||"overview"===i?window.location.hash:null;t?history.replaceState(n,"",s):history.pushState(n,"",s),p&&(window.location.hash=p)},a.onCompetitionEditingStateCancelled=function(e,t){for(var n=(l={},l["isEditing"+e]=!1,l),s={},i=0,r=t;i<r.length;i++){var o=r[i];s[o]=a.state.lastSavedState[o]}a.setState($.extend({},n,s));var l},a.onCompetitionEditingStateChanged=function(e){var t="isEditing"+e,n=a.state[t],s=(i={},i[t]=!n,i);a.setState(s,function(){});var i},a.onSubmissionStatusChanged=function(){$.get(a.props.dataRefreshUrl).then(function(e){a.setState({submissions:e.submissions,remainingDailySubmissions:e.remainingDailySubmissions})})},a.onCompetitionStateChanged=function(e,t){if("showRulesModal"!=e||1!=t||a.checkForPhoneVerificationAndUserName()){a.setState((n={},n[e]=t,n));var n}},a.onSetImages=function(e,t){var n=t[0];e.append("coverImage.Left",Math.floor(n.left)),e.append("coverImage.Top",Math.floor(n.top)),e.append("coverImage.Width",Math.floor(n.width)),e.append("coverImage.Height",Math.floor(n.height));var s=t[1];return e.append("cardImage.Left",Math.floor(s.left)),e.append("cardImage.Top",Math.floor(s.top)),e.append("cardImage.Width",Math.floor(s.width)),e.append("cardImage.Height",Math.floor(s.height)),$.ajax({url:a.props.addImageUrl,type:"POST",dataType:"json",contentType:!1,processData:!1,data:e})};var n=a.props,s=n.activeTab,i=n.canEdit,l=n.isCreatingCompetition,c=n.dateEnabled,p=n.mergerDeadline,u=n.deadline,d=n.competitionSlug,m=s.toLowerCase();"admin"!==m||i||(s="overview",m="overview");var h=$.extend({},a.props,{activeTab:s,activePane:m,isEditingOverviewPages:!1,isEditingFiles:!1,showRulesModal:!1,isProcessingRulesAcceptance:!1});h.lastSavedState=h,a.state=h;var g=(new Date).getTime(),f=o["default"](c),v=o["default"](p),y=o["default"](u);return l?(a.hasMergerDeadline=!1,a.competitionUrl="",a.isCompetitionPending=!1):(a.hasMergerDeadline=y!=v,a.competitionUrl="/c/"+d,a.isCompetitionPending=!f||f>g),a.updateUrlForTab(s,!0),a.competitionHasEnded=g>y,a}return n(t,e),t.prototype.componentDidMount=function(){-1!==window.location.hash.indexOf("#latest-")&&history.replaceState(this.getUiState(),document.title,window.location.pathname+window.location.search),this.isCompetitionPending&&r.PageMessages.info("This competition hasn't been launched. Only hosts and Kaggle admins can see it.")},t.prototype.componentWillMount=function(){window.addEventListener("popstate",this.onWindowPopState,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("popstate",this.onWindowPopState,!1)},t.prototype.onTopicClicked=function(e){var t=this;this.setState({topicId:e.id},function(){var a=t.getUiState();history.pushState(a,e.title,e.topicUrl),history.replaceState(a,document.title,window.location.pathname+window.location.search)})},t.prototype.onTopicSubmitted=function(e){var t=this;this.setState({isNewTopic:!1,topicId:e},function(){return t.updateUrlForTab("discussion")})},t.prototype.checkForPhoneVerificationAndUserName=function(){return this.props.needsPhoneVerification?(window.location.href="/account/phone/number?returnUrl="+this.competitionUrl,!1):s.Current.userName?!0:(window.location.href="/account/set-username?returnUrl="+this.competitionUrl,!1)},t.prototype.onCreateTopic=function(){
var e=this,t={isNewTopic:!0,topicId:null};this.setState(t,function(){return e.updateUrlForTab("discussion")})},t.prototype.onAcceptCompetitionRules=function(){var e=this;if(this.checkForPhoneVerificationAndUserName())return this.state.hasAcceptedRules?(r.PageMessages.clear(),void r.PageMessages.info("You have already accepted the rules, no need to do it again!")):void this.setState({isProcessingRulesAcceptance:!0},function(){return s.Current.userId?void $.ajax({type:"POST",url:e.props.acceptRulesUrl,success:function(t){return t.redirect?void window.location.assign(t.redirect):void e.setState({hasAcceptedRules:!0,showRulesModal:!1,isProcessingRulesAcceptance:!1,team:t.data},function(){r.PageMessages.clear(),r.PageMessages.success("You have accepted the rules for this competition.")})},error:function(){e.setState({isProcessingRulesAcceptance:!1},function(){r.PageMessages.clear(),r.PageMessages.error({htmlMessage:'There was a problem accepting the rules for this competition. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'})})}}):void(window.location.href="/account/login")})},t.prototype.onCompetitionSubmission=function(){var e=this;this.onCompetitionTabChanged("leaderboard").then(function(){e.competitionRef.refreshPublicLeaderboard()})},t.prototype.updateSelectedSubmission=function(e){var t=$.extend(!0,[],this.state.submissions);t[e].isSelected=!t[e].isSelected,this.setState({submissions:t})},t.prototype.updateTeamName=function(e){var t=$.extend(!0,{},this.state.team,{name:e});this.setState({team:t})},t.prototype.render=function(){var e=this,t={onTopicClicked:this.onTopicClicked.bind(this),onTopicSubmitted:this.onTopicSubmitted.bind(this),onCompetitionEditingStateCancelled:this.onCompetitionEditingStateCancelled,onCompetitionEditingStateChanged:this.onCompetitionEditingStateChanged,onCompetitionStateChanged:this.onCompetitionStateChanged,onCompetitionTabChanged:this.onCompetitionTabChanged,onCompetitionSubmission:this.onCompetitionSubmission.bind(this),onAcceptCompetitionRules:this.onAcceptCompetitionRules.bind(this),onSetImages:this.onSetImages.bind(this),onSubmissionStatusChanged:this.onSubmissionStatusChanged.bind(this),updateSelectedSubmission:this.updateSelectedSubmission.bind(this),updateTeamName:this.updateTeamName.bind(this),onCreateTopic:this.onCreateTopic.bind(this),hasMergerDeadline:this.hasMergerDeadline,competitionUrl:this.competitionUrl,competitionHasEnded:this.competitionHasEnded,isCompetitionPending:this.isCompetitionPending,ref:function(t){return e.competitionRef=t}};return React.createElement(i.Competition,$.extend({},this.props,t,this.state))},t}(React.Component);t.CompetitionContainer=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(268),r=a(273),o=a(274),l=a(280),c=a(282),p=a(284),u=a(285),d=a(286),m=a(287),h=a(291),g=a(294),f=a(296),v=a(299),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.refreshPublicLeaderboard=function(){this.leaderboardRef.triggerPublicLeaderboardReload()},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"competition"},React.createElement(r.CompetitionHeader,s({},this.props)),this.props.isCreatingCompetition?React.createElement(v.CompetitionCreatorContainer,s({},this.props)):"overview"==this.props.activePane?React.createElement(o.CompetitionOverviewContainer,s({},this.props)):"data"==this.props.activePane?React.createElement(l.CompetitionDataContainer,s({},this.props)):"rules"==this.props.activePane?React.createElement(c.CompetitionRulesContainer,s({},this.props)):"discussion"==this.props.activePane?React.createElement(u.CompetitionDiscussion,s({},this.props)):"leaderboard"==this.props.activePane?React.createElement(m.CompetitionLeaderboardContainer,s({},this.props,{ref:function(t){return e.leaderboardRef=t}})):"kernels"==this.props.activePane?React.createElement(d.CompetitionKernels,s({},this.props)):"team"==this.props.activePane?React.createElement(f.CompetitionTeamContainer,s({},this.props)):"submissions"==this.props.activePane?React.createElement(g.CompetitionSubmissionsContainer,s({},this.props)):"admin"==this.props.activePane&&this.props.canEdit?React.createElement(i.CompetitionAdminContainer,s({},this.props)):"submit"==this.props.activePane?React.createElement(h.CompetitionSubmissionContainer,s({},this.props)):null,React.createElement(p.CompetitionRulesModal,s({},this.props)))},t}(React.Component);t.Competition=y},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(269),i=function(e){function t(t){var a=e.call(this,t)||this;return a.hideImageUploaderModal=function(){a.setState({isAddingImages:!1})},a.onUpdateImageUploader=function(e,t){return a.props.onSetImages(e,t).then(function(){location.reload()})},a.onAddImages=function(){a.setState({isAddingImages:!0})},a.state={isAddingImages:!1},a.helperProps={hideImageUploaderModal:a.hideImageUploaderModal,onUpdateImageUploader:a.onUpdateImageUploader,onAddImages:a.onAddImages},a}return n(t,e),t.prototype.render=function(){return React.createElement(s.CompetitionAdmin,Object.assign({},this.props,this.helperProps,this.state))},t}(React.Component);t.CompetitionAdminContainer=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(5),r=a(270),o=a(272),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"competition-admin"},React.createElement(i.ContentBox,{title:"Competition Setup"},React.createElement(r.CompetitionAdminNav,s({},this.props)),React.createElement(o.CompetitionAdminBasics,s({},this.props))))},t}(React.Component);t.CompetitionAdmin=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(271),i=a(158),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adminPageNames=["basics","attributes","scoring","email participants","clone"],t}return n(t,e),t.prototype.render=function(){for(var e=[],t=0,a=this.adminPageNames;t<a.length;t++){var n=a[t],r="/c/"+this.props.competitionSlug+"/admin"+("basics"!=n?"#"+n:"");e.push(i.buildLink(n,s.deslugify(n),r))}return React.createElement("div",{className:"competition-admin__nav-wrapper"},React.createElement("nav",{className:"competition-admin__nav"},e.map(function(e,t){return React.createElement("a",{className:"competition-admin__nav-item",href:e.href,key:"competition-admin-nav-"+t,onClick:function(e){return console.log(e)},title:e.title},e.text)})))},t}(React.Component);t.CompetitionAdminNav=r},function(e,t){"use strict";function a(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-")}function n(e){return e.replace(/-+/g," ")}t.slugify=a,t.deslugify=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(174),i=a(155),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderImageUploader=function(){var e=this.props,t=e.hideImageUploaderModal,a=e.onUpdateImageUploader,n=(e.onAddImages,e.isAddingImages),r=e.canEdit;if(r){var o=React.createElement(s.ImageUploader,{title:"Upload a Competition Image",imageSettings:[new s.ImageSetting("cover image","Select an area of the image to use as the cover image for this competitions’s homepage",new s.Size(950,200),new s.Rectangle(new s.Point(0,0),new s.Size(100,100))),new s.ImageSetting("thumbnail","Select an area of the image to use as a thumbnail on the overall Competition listing page",new s.Size(200,200),new s.Rectangle(new s.Point(0,0),new s.Size(100,100)))],originalImageUrl:null,containerSize:new s.Size(500,300),selectorBorderWidth:1,onCancel:t,onUpdateImages:a,hiResScale:2,step1Html:"Upload an image by clicking the button below. If you need inspiration, <a href='http://www.unsplash.com' target='_blank'>unsplash.com</a> has a great library of public domain images. Or you can use the random image below."});return React.createElement(i.Modal,{buttonClassName:"dataset-header__upload-image-button",modalContent:o,modalIsShown:n,onShow:null,onClose:t})}return null},t.prototype.render=function(){return React.createElement("div",{className:"competition-admin__setup"},React.createElement("div",{className:"competition-admin__attribute"},React.createElement("label",{className:"competition-admin__attribute-name",htmlFor:"competition-url"},"Competition URL"),React.createElement("div",{className:"competition-admin__attribute-value"},React.createElement("p",null,"https://www.kaggle.com/c/"),React.createElement("input",{className:"competition-admin__attribute-input",id:"competition-url",name:"competition-url",value:this.props.competitionSlug}))),React.createElement("div",{className:"competition-admin__attribute"},React.createElement("label",{className:"competition-admin__attribute-name"},"Competition Type"),React.createElement("div",{className:"competition-admin__attribute-value"},React.createElement("p",null,this.props.hostSegment))),React.createElement("div",{className:"competition-admin__attribute"},React.createElement("label",{className:"competition-admin__attribute-name"},"Submission Format"),React.createElement("div",{className:"competition-admin__attribute-value"},React.createElement("p",null,this.props.competitionType))),React.createElement("div",{className:"competition-admin__attribute"},React.createElement("label",{className:"competition-admin__attribute-name"},"Use Kernels"),React.createElement("div",{className:"competition-admin__attribute-value"},React.createElement("p",null,"Maybe"))),React.createElement("div",{className:"competition-admin__attribute"},React.createElement("label",{className:"competition-admin__attribute-name",htmlFor:"competition-images"},"Images"),React.createElement("div",{className:"competition-admin__attribute-value"},React.createElement("span",{onClick:this.props.onAddImages,className:"competition-admin__add-image-link"},"Add images"),this.renderImageUploader())))},t}(React.Component);t.CompetitionAdminBasics=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(6),i=a(158),r=a(28),o=a(7),l=a(73),c=a(29),p=function(e){function t(t){var a=e.call(this,t)||this;return a.buildLink=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var i="/c/"+a.props.competitionSlug+"/"+e.toLowerCase(),r=e.toLowerCase();"Team"==e&&(a.props.needsPhoneVerification&&(i="/account/phone/number?returnUrl="+a.props.competitionUrl,r=null),s.Current.userName||(i="/account/set-username?returnUrl="+a.props.competitionUrl,r=null));var o={count:null==n?null:l.numberWithCommas(n),href:i,title:e.toLowerCase(),text:t||e,tab:r};return o},a.competitionMenuLinks=[a.buildLink("Overview"),a.buildLink("Data")],a.competitionOverflowMenuLinks=[a.buildLink("Rules"),a.buildLink("Team")],a.competitionMenuLinksRight=[],a.props.hasKernelsEnabled&&a.competitionMenuLinks.push(a.buildLink("Kernels")),a.props.discussion&&a.competitionMenuLinks.push(a.buildLink("Discussion")),a.props.hasLeaderboard&&a.competitionMenuLinks.push(a.buildLink("Leaderboard")),a.props.canEdit&&a.competitionOverflowMenuLinks.push(a.buildLink("Admin")),a.props.team&&!a.props.needsPhoneVerification&&s.Current.userName&&a.competitionMenuLinksRight.push(a.buildLink("Submissions","My Submissions")),a.isMonetaryReward=["USD","AUD","EUR"].indexOf(a.props.rewardTypeName)>=0,a}return n(t,e),t.prototype.renderHostSegmentIconKey=function(){var e;switch(this.props.hostSegment){case"featured":e=React.createElement("span",{className:"fa fa-trophy"});break;case"research":e=React.createElement("span",{className:"fa fa-flask"});break;case"recruitment":e=React.createElement("span",{className:"fa fa-trophy"});break;case"prospect":e=React.createElement("span",{className:"fa fa-trophy"});break;case"getting started":e=React.createElement("span",{className:"fa fa-university"});break;case"masters":e=React.createElement("span",{className:"fa fa-trophy"});break;case"playground":e=React.createElement("span",{className:"fa fa-bicycle"});break;default:e=React.createElement("span",{className:"fa fa-trophy"})}return React.createElement("div",{className:"competition-header__classification-icon-wrapper"},React.createElement("div",{className:"competition-header__classification-icon"},e))},t.prototype.renderDeadlineInfo=function(){var e=new Date(this.props.mergerDeadline.toString()).getTime()<(new Date).getTime();return this.props.hasMergerDeadline&&!e?React.createElement("span",null,React.createElement(o.TimeAgo,{time:this.props.deadline})," (",React.createElement(o.TimeAgo,{time:this.props.mergerDeadline})," until merger deadline)"):React.createElement(o.TimeAgo,{time:this.props.deadline})},t.prototype.renderTop=function(){return React.createElement("div",{className:"competition-header__top"},React.createElement("div",{className:"competition-header__top-image",style:{backgroundImage:"url("+this.props.competitionHeaderImageUrl+")"}}),React.createElement(i.PageHeaderTopRowSafe,null,React.createElement("div",{className:"competition-header__classification"},this.renderHostSegmentIconKey(),React.createElement("p",{className:"competition-header__classification-text"},this.props.hostSegment," ",this.props.competitionType," Competition",this.props.isPrivate?React.createElement("span",null," · ",React.createElement("span",{className:"fa fa-eye-slash"})," Private"):null)),React.createElement("div",{className:"competition-header__meta"},React.createElement("div",{className:"competition-header__info"},React.createElement("h1",{className:"competition-header__title"},this.props.competitionTitle),React.createElement("h2",{className:"competition-header__subtitle"},this.props.briefDescription),React.createElement("div",{className:"competition-header__details"},React.createElement("span",null,this.props.organizationId?React.createElement("span",{className:"competition-header__organization-name"},React.createElement("a",{href:"/"+this.props.organizationSlug},this.props.organizationName)," · "):null,React.createElement("span",null,l.numberWithCommas(this.props.totalTeams)+" teams")),React.createElement(c.MediaQuery,{minWidth:c.Breakpoints.desktopMin},React.createElement("span",null," · ")),this.renderDeadlineInfo())),this.props.rewardQuantity>0&&this.isMonetaryReward?React.createElement("div",{className:"competition-header__prize"},React.createElement("span",{className:"competition-header__prize-value"},"$"+l.numberWithCommas(this.props.rewardQuantity)),React.createElement("span",{className:"competition-header__prize-text"},"Prize Money")):null)))},t.prototype.renderAlternateTop=function(){return React.createElement(i.PageHeaderTopRowSafe,null,React.createElement("div",{className:"competition-header__top--alt"},React.createElement("div",{className:"competition-header__top-image-wrapper--alt"},React.createElement("a",{href:""+this.props.competitionUrl},React.createElement("img",{className:"competition-header__top-image--alt",src:this.props.competitionFrontPageImageUrl}))),React.createElement("div",{className:"competition-header__meta--alt"},React.createElement("h1",{className:"competition-header__title--alt"},this.props.competitionTitle),React.createElement("h2",{className:"competition-header__subtitle--alt"},this.props.briefDescription),React.createElement("div",{className:"competition-header__details--alt"},this.props.rewardQuantity>0&&this.isMonetaryReward?"$"+l.numberWithCommas(this.props.rewardQuantity)+" · ":null,this.props.totalTeams?l.numberWithCommas(this.props.totalTeams)+" teams · ":null,this.renderDeadlineInfo(),this.props.isPrivate?React.createElement("span",null," · ",React.createElement("span",{className:"fa fa-eye-slash"})," Private"):null))))},t.prototype.render=function(){var e=this,t=this.competitionMenuLinksRight.slice(0);return"submit"==this.props.activePane&&t.push(this.buildLink("Submit","Submit "+("code"==this.props.competitionType.toLowerCase()?"Model":"Predictions"))),this.props.isCreatingCompetition?null:React.createElement("div",{className:"competition-header__container"},React.createElement(i.PageHeader,{backgroundClass:"competition-header"},this.props.hasHeaderImage?this.renderTop():this.renderAlternateTop(),this.props.isCreatingCompetition?null:React.createElement(i.PageHeaderBottomRow,{pageMessages:this.props.pageMessages},this.props.organizationId&&this.props.hasHeaderImage?React.createElement("div",{className:"competition-header__thumbnail-placeholder"},React.createElement(i.PageHeaderThumbnail,{classNameElement:"thumbnail",targetUrl:"/c/"+this.props.competitionSlug,imageUrl:this.props.competitionThumbnailImageUrl}),React.createElement(i.PageHeaderThumbnail,{classNameElement:"author",targetUrl:"/"+this.props.organizationSlug,imageUrl:this.props.organizationThumbnailUrl})):null,React.createElement(c.MediaQuery,{minWidth:0,maxWidth:c.Breakpoints.tabletMax},React.createElement(r.OverflowX,null,React.createElement("div",{className:"competition-header__nav-wrapper"},React.createElement(i.PageHeaderNav,{activeTab:this.props.activeTab,classNameModifier:"competition",changeActiveTab:function(t){return e.props.onCompetitionTabChanged(t)},menuLinks:this.competitionMenuLinks,overflowMenuLinks:this.props.team?this.competitionOverflowMenuLinks:this.competitionOverflowMenuLinks.filter(function(e){return"Team"!==e.text}),rightMenuLinks:t.length?t:null}),"discussion"==this.props.activePane?React.createElement(i.PageHeaderCallToAction,{onClick:this.props.onCreateTopic,text:"New Topic"}):"submit"==this.props.activePane||this.props.submissionsAreDisabled?null:React.createElement(i.PageHeaderCallToAction,{href:"code"==this.props.competitionType.toLowerCase()&&this.props.hasAcceptedRules?this.props.newScriptUrl:null,onClick:this.props.hasAcceptedRules?"code"!=this.props.competitionType.toLowerCase()?function(){return e.props.onCompetitionTabChanged("submit")}:function(){}:function(){return e.props.onCompetitionStateChanged("showRulesModal",!0)},text:"Submit "+("prediction"==this.props.competitionType.toLowerCase()?"Predictions":"Model")})))),React.createElement(c.MediaQuery,{minWidth:c.Breakpoints.desktopMin},React.createElement("div",{className:"competition-header__nav-wrapper"},React.createElement(i.PageHeaderNav,{activeTab:this.props.activeTab,classNameModifier:"competition",changeActiveTab:function(t){return e.props.onCompetitionTabChanged(t)},menuLinks:this.competitionMenuLinks,overflowMenuLinks:this.props.team?this.competitionOverflowMenuLinks:this.competitionOverflowMenuLinks.filter(function(e){return"Team"!==e.text}),rightMenuLinks:t.length?t:null}),"discussion"==this.props.activePane?React.createElement(i.PageHeaderCallToAction,{onClick:this.props.onCreateTopic,text:"New Topic"}):"submit"==this.props.activePane||this.props.submissionsAreDisabled?null:React.createElement(i.PageHeaderCallToAction,{href:"code"==this.props.competitionType.toLowerCase()&&this.props.hasAcceptedRules?this.props.newScriptUrl:null,onClick:this.props.hasAcceptedRules?"code"!=this.props.competitionType.toLowerCase()?function(){return e.props.onCompetitionTabChanged("submit")}:function(){}:function(){return e.props.onCompetitionStateChanged("showRulesModal",!0)},text:"Submit "+("prediction"==this.props.competitionType.toLowerCase()?"Predictions":"Model")}))))))},t}(React.Component);t.CompetitionHeader=p},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(s,i){function r(e){try{l(n.next(e))}catch(t){i(t)}}function o(e){try{l(n["throw"](e))}catch(t){i(t)}}function l(e){e.done?s(e.value):new a(function(t){t(e.value)}).then(r,o)}l((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function a(e){return function(t){return n([e,t])}}function n(a){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,i&&(r=i[2&a[0]?"return":a[0]?"throw":"next"])&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[0,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(n){a=[6,n],i=0}finally{s=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var s,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return{next:a(0),"throw":a(1),"return":a(2)}},r=a(160),o=a(275),l=function(e){function t(t){var a=e.call(this,t)||this;return a.onWindowPopState=function(e){e.state&&e.state.competitionOverviewTabState&&a.setState(e.state.competitionOverviewTabState)},a.updateUrlForTab=function(e,t){void 0===t&&(t=!1);var n={},s=e.toLowerCase().replace(/\s+/g,"-")||a.props.pages[0].name.replace("#",""),i=a.props.competitionUrl;n.competitionTabState={activePane:"overview",activeTab:"overview"},n.competitionOverviewTabState={activeOverviewTab:s},s!=a.props.pages[0].name.replace("#","")&&(i+="#"+s),t?history.replaceState(n,"",i):history.pushState(n,"",i)},a.saveOverview=function(e){return s(a,void 0,void 0,function(){var t,a,n,s;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,fetch(this.props.saveOverviewUrl,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})];case 1:return t=i.sent(),[4,t.json()];case 2:return a=i.sent(),"CONCURRENT_EDIT"===a.message?(n="Changes can't be saved. "+(a.userDisplayName||"Unknown user")+" has saved an update to this page. Refresh the page to get the latest version before editing.",r.PageMessages.clear(),r.PageMessages.error(n)):a.pageMessages&&a.pageMessages.length>0?r.PageMessages.set(a.pageMessages):(a.pages&&this.setState({localPages:a.pages}),r.PageMessages.clear(),r.PageMessages.success("Save successful.")),[3,4];case 3:return s=i.sent(),s.pageMessages&&r.PageMessages.set(s.pageMessages),[3,4];case 4:return[2]}})})},a.onOverviewEditingStateChanged=function(e){a.setState({isEditingOverview:!a.state.isEditingOverview},function(){if(e){var t={rewardQuantity:a.props.rewardQuantity,numPrizes:a.props.numPrizes,dateEnabled:a.props.dateEnabled,deadline:a.props.deadline,enablePreDeadline:!1,overviewPages:a.state.localPages};a.saveOverview(t)}})},a.newPageCounter=0,a.activeOverviewTab=(window.location.hash||a.props.pages[0].name).replace("#",""),a.state={activeOverviewTab:a.activeOverviewTab,isEditingOverview:!1,localPages:a.props.pages},a.updateUrlForTab(a.activeOverviewTab,!0),a}return n(t,e),t.prototype.componentWillMount=function(){window.addEventListener("popstate",this.onWindowPopState,!1)},t.prototype.componentWillUnmount=function(){window.removeEventListener("popstate",this.onWindowPopState,!1)},t.prototype.onOverviewTabChanged=function(e,t){var a=this;t.ctrlKey||t.shiftKey||t.metaKey||t.button&&1==t.button||this.setState({activeOverviewTab:e},function(){return a.updateUrlForTab(e)})},t.prototype.onOverviewEditingStateCancelled=function(){this.setState({activeOverviewTab:this.props.pages[0].name,isEditingOverview:!1,localPages:this.props.pages})},t.prototype.onAddOverviewPage=function(){var e=$.extend(!0,[],this.state);this.newPageCounter+=1;var t="Untitled "+this.newPageCounter,a={name:t,mimeType:"text/markdown",content:"Insert text here. Please use markdown."};e.localPages.push(a),e.activeOverviewTab=t,this.setState(e)},t.prototype.onPublishOverviewPage=function(e){var t=$.extend(!0,{},this.state),a=t.localPages[e];a.isPublished=!a.isPublished,this.setState(t)},t.prototype.onRemoveOverviewPage=function(e){var t=$.extend(!0,{},this.state);return t.localPages.length<=1?(r.PageMessages.clear(),void r.PageMessages.error("You must keep a minimum of one page in this section.")):(t.localPages.splice(e,1),t.activeOverviewTab=t.localPages[0].name,void this.setState(t))},t.prototype.onChangeOverviewPage=function(e,t,a){var n=$.extend(!0,{},this.state);n.localPages[e][t]=a,n.activeOverviewTab=n.localPages[e].name,this.setState(n)},t.prototype.render=function(){var e={onOverviewTabChanged:this.onOverviewTabChanged.bind(this),onOverviewEditingStateCancelled:this.onOverviewEditingStateCancelled.bind(this),onOverviewEditingStateChanged:this.onOverviewEditingStateChanged.bind(this),onAddOverviewPage:this.onAddOverviewPage.bind(this),onPublishOverviewPage:this.onPublishOverviewPage.bind(this),onRemoveOverviewPage:this.onRemoveOverviewPage.bind(this),onChangeOverviewPage:this.onChangeOverviewPage.bind(this)};return React.createElement(o.CompetitionOverview,$.extend({},this.props,e,this.state))},t}(React.Component);t.CompetitionOverviewContainer=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(76),r=a(276),o=a(158),l=a(126),c=a(130),p=a(153),u=a(73),d=a(277),m=a(278),h=a(279),g=a(72),f=a(28),v=a(13),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderOverviewNav=function(){for(var e=this,t=[],a=this.props.activeOverviewTab.toLowerCase(),n=this.props.localPages.map(function(e){return e.name}),s=0,i=n;s<i.length;s++){var r=i[s],l=r.replace(/-+/g," "),c="/c/"+this.props.competitionSlug+("overview"!=r?"#"+r:"");t.push(o.buildLink(r,l,c))}return React.createElement(f.OverflowX,null,React.createElement("div",{className:"competition-overview__nav-wrapper"},React.createElement("nav",{className:"competition-overview__nav"},t.map(function(t,n){return React.createElement("a",{className:a==t.tab.toLowerCase()?"competition-overview__nav-item--selected":"competition-overview__nav-item",href:t.href,key:"overview-nav-"+n,onClick:function(a){return e.props.onOverviewTabChanged(t.tab,a)},title:t.title},t.text)}),this.props.isEditingOverview?React.createElement("a",{className:"competition-overview__nav-add",onClick:function(){return e.props.onAddOverviewPage()}},React.createElement("span",{className:"fa fa-plus"})," Add Page"):null)))},t.prototype.renderCompetitionPage=function(e,t){var a=this,n=[{label:"HTML",value:l.assignMimeType(l.MarkdownConverterMimeTypes.Html)},{label:"Markdown",value:l.assignMimeType(l.MarkdownConverterMimeTypes.Markdown)}],s=l.translateMimeType(e.mimeType);return this.props.isEditingOverview?React.createElement("div",{key:"competition-overview-page-"+t},React.createElement("div",{className:"competition-overview__section-top"},React.createElement("div",{className:"competition-overview__section-meta"},React.createElement(p.InlineTextEditor,{className:"competition-overview__section-header-input",onChangeCallback:function(e){return a.props.onChangeOverviewPage(t,"name",e)},value:e.name}),React.createElement(v.SelectBox,{options:n,onChange:function(e){return a.props.onChangeOverviewPage(t,"mimeType",e.toString())},value:s,searchable:!1}),React.createElement("a",{className:"competition-overview__section-publish",onClick:function(){return a.props.onPublishOverviewPage(t)}},React.createElement("span",{className:"competition-overview__publish-checkbox fa "+(e.isPublished?"fa-check-square-o":"fa-square-o")})," Published?"),React.createElement("a",{className:"competition-overview__section-delete",onClick:function(){return a.props.onRemoveOverviewPage(t)}},React.createElement("span",{className:"fa fa-trash"})," Delete Page"))),React.createElement(c.MarkdownEditor,{shouldSanitizeHtml:!0,hidePreview:!0,hideToolbar:!0,defaultValue:e.content?e.content:null,suffix:"-"+e.name,onChangeCallback:function(e){return a.props.onChangeOverviewPage(t,"content",e)},minRows:5,maxRows:15})):React.createElement("div",{key:"competition-overview-page-"+t},React.createElement(l.MarkdownConverter,{content:e.content?e.content:null,mimeType:e.mimeType?e.mimeType:null,insertNofollow:!0}))},t.prototype.renderLeaderboardTeaser=function(e,t){},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"competition-overview"},React.createElement(s.ContentBox,{title:"Overview",titleBarRightSide:this.props.canEdit?React.createElement(i.EditStateToggleButton,{isEditing:this.props.isEditingOverview,cancelCallback:function(){return e.props.onOverviewEditingStateCancelled()},cancelPropName:"overview",toggleCallback:function(){return e.props.onOverviewEditingStateChanged(e.props.isEditingOverview)},sectionName:"Overview"}):null},this.renderOverviewNav(),React.createElement("div",{className:"competition-overview__content"},this.props.localPages.map(function(t,a){return e.props.activeOverviewTab.toLowerCase()==t.name.toLowerCase()?e.renderCompetitionPage(t,a):null}))),React.createElement("div",{className:"competition-overview__teasers"},React.createElement("div",{className:"competition-overview__teaser"},React.createElement(d.LeaderboardTeaser,{emptyListCreateNewUrl:this.props.newScriptUrl,emptyListMessage:"There are no competitors yet.",emptyListCreateNewText:"Be the first",listItems:this.props.leaderboardTeaser,listTitle:"Leaderboard",numItemsToShow:8,numPrizes:this.props.disablePrizeIndicator?0:this.props.numPrizes,onTitleClick:function(){return e.props.onCompetitionTabChanged("leaderboard")},rewardQuantity:this.props.rewardQuantity})),this.props.hasKernelsEnabled?React.createElement("div",{className:"competition-overview__teaser"},React.createElement(h.KernelsTeaser,{emptyListCreateNewUrl:this.props.newScriptUrl,emptyListMessage:"There are no kernels yet.",emptyListCreateNewText:"Be the first",listItems:this.props.kernelTeaser,listTitle:React.createElement(g.Pluralize,{word:"kernel",count:this.props.totalKernels,formatNumber:!0}),onTitleClick:function(){return e.props.onCompetitionTabChanged("kernels")}})):null,React.createElement("div",{className:"competition-overview__teaser"},React.createElement(m.DiscussionTeaser,{emptyListCreateNewAction:function(){return e.props.onCreateTopic()},emptyListMessage:"There are no topics yet.",emptyListCreateNewText:"Start one",listItems:this.props.discussionTeaser,listTitle:React.createElement(g.Pluralize,{word:"discussion topic",count:this.props.totalDiscussions,formatNumber:!0}),onTitleClick:function(){return e.props.onCompetitionTabChanged("discussion")}}))),React.createElement(s.ContentBox,null,this.props.dateEnabled&&this.props.deadline?React.createElement(r.HorizontalTimeline,{
startDate:this.props.dateEnabled,startLabel:React.createElement("span",{className:"competition-overview__milestone-title"},"Launch"),endDate:this.props.deadline,endLabel:React.createElement("span",{className:"competition-overview__milestone-title"},"Close"),milestoneDates:[{details:React.createElement("p",{className:"competition-overview__milestone-name"},"Rules Acceptance Deadline"),date:this.props.mergerDeadline}]}):React.createElement("p",null,"The timeline for this competition will appear once there is a valid start date and deadline.")),React.createElement("div",{className:"competition-overview__stats-section"},this.props.totalTeams?React.createElement("div",{className:"competition-overview__stats"},React.createElement("div",{className:"competition-overview__stat"},React.createElement("p",{className:"competition-overview__stat-number"},React.createElement(u.FormatNumber,{number:this.props.totalTeams})),React.createElement("p",{className:"competition-overview__stat-label"},"Teams")),React.createElement("div",{className:"competition-overview__stat"},React.createElement("p",{className:"competition-overview__stat-number"},React.createElement(u.FormatNumber,{number:this.props.totalCompetitors})),React.createElement("p",{className:"competition-overview__stat-label"},"Competitors")),this.props.totalEntries?React.createElement("div",{className:"competition-overview__stat"},React.createElement("p",{className:"competition-overview__stat-number"},React.createElement(u.FormatNumber,{number:this.props.totalEntries})),React.createElement("p",{className:"competition-overview__stat-label"},"Entries")):null):null,React.createElement("div",{className:"competition-overview__progression-info"},React.createElement("div",{className:"competition-overview__progression-info-item"},React.createElement("p",{className:"competition-overview__progression-info-label"},"Points"),React.createElement("p",{className:"competition-overview__progression-info-text"},"This competition ",this.props.countsTowardsRanking?(this.props.competitionHasEnded?"awarded":"awards")+" "+(this.props.userRankMultiplier<1?this.props.userRankMultiplier+"X":""):""+(this.props.competitionHasEnded?"did not award ":"does not award ")," standard ",React.createElement("a",{href:"https://www.kaggle.com/progression"},"ranking points"))),React.createElement("div",{className:"competition-overview__progression-info-item"},React.createElement("p",{className:"competition-overview__progression-info-label"},"Tiers"),React.createElement("p",{className:"competition-overview__progression-info-text"},"This competition ",this.props.countsTowardsTiers?""+(this.props.competitionHasEnded?"counted ":"counts "):""+(this.props.competitionHasEnded?"did not count ":"does not count ")," towards ",React.createElement("a",{href:"https://www.kaggle.com/progression"},"tiers"))))))},t}(React.Component);t.CompetitionOverview=y},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(7),i=a(33),r=a(8),o=function(e){function t(t){var a=e.call(this,t)||this;return a.startMS=new Date(a.props.startDate.toString()).getTime(),a.endMS=new Date(a.props.endDate.toString()).getTime(),a.nowMS=(new Date).getTime(),a.startTillEnd=a.endMS-a.startMS,a.startTillNow=a.nowMS-a.startMS,a}return n(t,e),t.prototype.renderMilestone=function(e,t){var a=new Date(e.date.toString()).getTime()-this.startMS,n=a/this.startTillEnd,o=(100*n).toString()+"%",l=n>0&&1>n?!0:!1;return l?React.createElement("div",{className:"horizontal-timeline__milestone-placeholder",key:"timeline-point-"+t},React.createElement("div",{className:a>this.startTillNow?"horizontal-timeline__point--future":"horizontal-timeline__point",style:{left:o}},React.createElement("div",{className:"horizontal-timeline__point-details",style:{left:o}},React.createElement("p",{className:"horizontal-timeline__milestone-date"},React.createElement(s.TimeAgo,{time:e.date,hideToGo:!0})),e.details),React.createElement("div",{className:"horizontal-timeline__point-tooltip-wrapper"},React.createElement(i.ToolTip,{className:"horizontal-timeline__point-tooltip-wrapper",alignLeft:.5>n?!0:!1,tipText:r(e.date).format("ll")})))):null},t.prototype.render=function(){var e=this,t=this.startTillNow/this.startTillEnd,a=t>0&&1>t?(this.startTillNow/this.startTillEnd*100).toString()+"%":"100%";return React.createElement("div",{className:"horizontal-timeline__wrapper"},React.createElement("div",{className:"horizontal-timeline"},React.createElement("div",{className:"horizontal-timeline__line"}),React.createElement("div",{className:"horizontal-timeline__progress-bar",style:{width:a}}),React.createElement("div",{className:this.startTillNow>0?"horizontal-timeline__point":"horizontal-timeline__point--future"},React.createElement("div",{className:"horizontal-timeline__point-label--start",style:{left:0}},this.props.startLabel?this.props.startLabel:null,React.createElement(s.TimeAgo,{time:this.props.startDate,hideToGo:!0})),React.createElement("div",{className:"horizontal-timeline__point-tooltip-wrapper"},React.createElement(i.ToolTip,{className:"horizontal-timeline__point-tooltip-wrapper",alignLeft:!0,tipText:r(this.props.startDate).format("ll")}))),this.props.milestoneDates.map(function(t,a){return e.renderMilestone(t,a)}),React.createElement("div",{className:this.startTillEnd>this.startTillNow?"horizontal-timeline__point--future":"horizontal-timeline__point",style:{left:"100%"}},React.createElement("div",{className:"horizontal-timeline__point-label--end",style:{right:0}},this.props.endLabel?this.props.endLabel:null,React.createElement(s.TimeAgo,{time:this.props.endDate,hideToGo:!0})),React.createElement("div",{className:"horizontal-timeline__point-tooltip-wrapper"},React.createElement(i.ToolTip,{className:"horizontal-timeline__point-tooltip-wrapper",tipText:r(this.props.endDate).format("ll")})))))},t}(React.Component);t.HorizontalTimeline=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(178),r=function(e){function t(t){var a=e.call(this,t)||this;a.placeholders=[];var n=a.props.listItems.length;if(n<a.props.numItemsToShow)for(var s=1;s<=a.props.numItemsToShow-n;s++)a.placeholders.push({rank:s+n,teamName:"-"});return a}return n(t,e),t.prototype.renderLeaderboardTeaserItem=function(e,t){return React.createElement("div",{className:"leaderboard-teaser__item",key:"leaderboard-teaser-item-"+t},e.rank<=this.props.numPrizes&&this.props.rewardQuantity>0?React.createElement("div",{className:"leaderboard-teaser__item-rank--reward"},e.rank):React.createElement("div",{className:"leaderboard-teaser__item-rank"},e.rank),React.createElement("p",{className:"leaderboard-teaser__item-name",title:e.teamName},e.teamName))},t.prototype.render=function(){var e=this,t=this.props.listItems.concat(this.placeholders);return React.createElement(s.ContentBox,{contentClassName:"leaderboard-teaser__items",growVertically:this.props.growVertically||!0,title:this.props.listTitle,onTitleClick:function(){return e.props.onTitleClick()},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement("div",{className:"leaderboard-teaser__content"},React.createElement(i.TeaserList,{minItemHeight:this.props.numItemsToShow,listItems:t,listItemRenderer:function(t,a){return e.renderLeaderboardTeaserItem(t,a)},emptyListCreateNewUrl:this.props.emptyListCreateNewUrl,emptyListMessage:this.props.emptyListMessage,emptyListCreateNewText:this.props.emptyListCreateNewText})))},t}(React.Component);t.LeaderboardTeaser=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(178),r=a(72),o=a(7),l=a(32),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderDiscussionTeaserItem=function(e,t){return React.createElement(l.BlockLink,{key:"competition-discussion-teaser-item-"+t,href:e.itemUrl},React.createElement("div",{className:"discussion-teaser__item"},React.createElement("div",{className:"discussion-teaser__item-title"},React.createElement("a",{href:e.itemUrl,title:e.title},e.title)),React.createElement("div",{className:"discussion-teaser__item-details"},React.createElement(r.Pluralize,{word:"reply",count:e.totalReplies})," · ",React.createElement(o.TimeAgo,{time:e.date}))))},t.prototype.render=function(){var e=this;return React.createElement(s.ContentBox,{contentClassName:"discussion-teaser__items",growVertically:this.props.growVertically||!0,title:this.props.listTitle,onTitleClick:function(){return e.props.onTitleClick()},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement(i.TeaserList,{minItemHeight:this.props.minItemHeight||4,listItems:this.props.listItems,listItemRenderer:function(t,a){return e.renderDiscussionTeaserItem(t,a)},emptyListCreateNewAction:this.props.emptyListCreateNewAction,emptyListMessage:this.props.emptyListMessage,emptyListCreateNewText:this.props.emptyListCreateNewText}))},t}(React.Component);t.DiscussionTeaser=c},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(178),r=a(72),o=a(7),l=a(32),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderKernelsTeaserItem=function(e,t){return React.createElement(l.BlockLink,{key:"kernels-teaser-item-"+t,href:e.itemUrl},React.createElement("div",{className:"kernels-teaser__item"},React.createElement("div",{className:"kernels-teaser__item-title"},React.createElement("a",{href:e.itemUrl,title:e.title},e.title)),React.createElement("div",{className:"kernels-teaser__item-details"},React.createElement(r.Pluralize,{word:"vote",count:e.totalVotes})," · ",React.createElement(o.TimeAgo,{time:e.date}))))},t.prototype.render=function(){var e=this;return React.createElement(s.ContentBox,{contentClassName:"kernels-teaser__items",growVertically:this.props.growVertically||!0,title:this.props.listTitle,onTitleClick:function(){return e.props.onTitleClick()},titleBarRightSide:React.createElement("span",{className:"fa fa-chevron-right"})},React.createElement(i.TeaserList,{minItemHeight:this.props.minItemHeight||4,listItems:this.props.listItems,listItemRenderer:function(t,a){return e.renderKernelsTeaserItem(t,a)},emptyListCreateNewUrl:this.props.emptyListCreateNewUrl,emptyListMessage:this.props.emptyListMessage,emptyListCreateNewText:this.props.emptyListCreateNewText}))},t}(React.Component);t.KernelsTeaser=c},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(160),i=a(281),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onCompetitionDataIntroSaved=function(e){var t={page:{content:e,name:"Data"}};return $.ajax({type:"POST",url:this.props.saveDataUrl,contentType:"application/json",dataType:"json",data:JSON.stringify(t),success:function(e){e.pageMessages&&e.pageMessages.length>0?s.PageMessages.set(e.pageMessages):(s.PageMessages.clear(),s.PageMessages.success("Save successful."))},error:function(e){e.pageMessages&&e.pageMessages.length>0?s.PageMessages.set(e.pageMessages):(s.PageMessages.clear(),s.PageMessages.error("Save unsuccessful."))}})},t.prototype.render=function(){var e={onCompetitionDataIntroSaved:this.onCompetitionDataIntroSaved.bind(this)};return React.createElement(i.CompetitionData,$.extend({},this.props,e))},t}(React.Component);t.CompetitionDataContainer=r},function(e,t,a){"use strict";var n,s=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},i=a(5),r=a(124),o=a(126),l=a(230),c=a(183);!function(e){e[e.CurrentFiles=0]="CurrentFiles",e[e.NewFiles=1]="NewFiles"}(n=t.FileListIndex||(t.FileListIndex={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.renderVersionNotes=function(e,t,a){return React.createElement(o.MarkdownConverter,{key:"version-"+t,contentClassName:"dataset-home__version-notes",content:e,insertNofollow:!0})},t.prototype.mapFilePreviews=function(e,t){return e.map(function(e,t){return{showSubmitToCompButton:!1,submitToCompUrl:null,description:e.description,fileName:e.name,filePreviewUrl:e.previewUrl,fileType:e.fileType||e.name.split(".")[e.name.split(".").length-1],fileUrl:e.url,size:e.totalBytes,fullPath:e.relativePath,canDelete:!1,onDelete:null,hideFilePreview:!0}})},t.prototype.render=function(){var e=this,t=this.mapFilePreviews(this.props.files,this.props.isEditingFiles);return React.createElement("div",{className:"competition-data"},React.createElement(i.ContentBox,{title:"Files"},React.createElement(r.FilePreviewList,{files:t})),React.createElement(l.MarkdownContentBox,{canEdit:this.props.canEdit,content:this.props.dataIntro?this.props.dataIntro.content:null,mimeType:this.props.dataIntro?this.props.dataIntro.mimeType:null,contentBoxTitle:"Data Introduction",contentClassName:"competition-data__content",onSaveClicked:function(t){return e.props.onCompetitionDataIntroSaved(t)}}),this.props.datasetVersions.length>0?React.createElement(i.ContentBox,{title:"Versions"},React.createElement(c.DatasetVersionList,{activeVersionId:0,datasetVersionListItems:this.props.datasetVersions,datasetVersionListKeyBaseName:"dataset-version-key-",datasetVersionNotesRenderer:this.renderVersionNotes.bind(this),isEditing:!1,textareaPlaceholder:"Enter a description of the updates made on this version.",hideVersionStatuses:!1})):null)},t}(React.Component);t.CompetitionData=p},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(160),i=a(283),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onCompetitionRulesSaved=function(e){var t={page:{content:e,name:"Rules"}};return $.ajax({type:"POST",url:this.props.saveRulesUrl,contentType:"application/json",dataType:"json",data:JSON.stringify(t),success:function(e){e.pageMessages&&e.pageMessages.length>0?s.PageMessages.set(e.pageMessages):(s.PageMessages.clear(),s.PageMessages.success("Save successful."))},error:function(e){e.pageMessages&&e.pageMessages.length>0?s.PageMessages.set(e.pageMessages):(s.PageMessages.clear(),s.PageMessages.error("Save unsuccessful."))}})},t.prototype.render=function(){var e={onCompetitionRulesSaved:this.onCompetitionRulesSaved.bind(this)};return React.createElement(i.CompetitionRules,$.extend({},this.props,e))},t}(React.Component);t.CompetitionRulesContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(46),i=a(5),r=a(230),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement("div",{className:"competition-rules"},React.createElement(r.MarkdownContentBox,{canEdit:this.props.canEdit,content:this.props.rules?this.props.rules.content:null,mimeType:this.props.rules?this.props.rules.mimeType:null,contentBoxTitle:"Rules",contentClassName:"competition-rules__content",onSaveClicked:function(t){return e.props.onCompetitionRulesSaved(t)}}),React.createElement(i.ContentBox,{title:"Rules acceptance"},this.props.hasAcceptedRules?React.createElement("div",{className:"competition-rules__acceptance"},React.createElement("p",{className:"competition-rules__accepted-text"},React.createElement("span",{className:"competition-rules__acceptance-icon"},React.createElement("span",{className:"fa fa-check-circle-o"})),"You have accepted the rules for this competition. Good luck!")):React.createElement("div",{className:"competition-rules__acceptance"},React.createElement("p",{className:"competition-rules__acceptance-text"},'By clicking on the "I understand and accept" button below, you are indicating that you agree to be bound with the above rules.'),React.createElement("div",{className:"competition-rules__acceptance-actions"},React.createElement("a",{className:"competition-rules__decline"},"I Do Not Accept"),React.createElement(s.ButtonAutoWidth,{classNames:"competition-rules__accept",onClick:function(){return e.props.onAcceptCompetitionRules()},text:"I Understand and Accept"}),this.props.isProcessingRulesAcceptance?React.createElement("div",{className:"competition-rules__is-processing"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null))))},t}(React.Component);t.CompetitionRules=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(46),i=a(155),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement(i.Modal,{onClose:function(){return e.props.onCompetitionStateChanged("showRulesModal",!1)},onShow:function(){},modalIsShown:this.props.showRulesModal&&!this.props.hasAcceptedRules},React.createElement("div",{className:"competition-rules__acceptance"},React.createElement("p",{className:"competition-rules__acceptance-text"},'By clicking on the "I understand and accept" button below, you are indicating that you agree to be bound to the ',React.createElement("a",{href:this.props.competitionUrl+"/rules"},"competition rules"),"."),React.createElement("div",{className:"competition-rules__acceptance-actions"},React.createElement("a",{className:"competition-rules__decline",onClick:function(){return e.props.onCompetitionStateChanged("showRulesModal",!1)}},"I Do Not Accept"),React.createElement(s.ButtonAutoWidth,{classNames:"competition-rules__accept",onClick:function(){return e.props.onAcceptCompetitionRules()},text:"I Understand and Accept"}),this.props.isProcessingRulesAcceptance?React.createElement("div",{className:"competition-rules__is-processing"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null)))},t}(React.Component);t.CompetitionRulesModal=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(40),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement(i.Forum,s({},$.extend(!0,{},this.props.discussion,this.props.newTopic),{isNew:this.props.isNewTopic,onTopicClicked:this.props.onTopicClicked,topicSubmitted:this.props.onTopicSubmitted,topicId:this.props.topicId}))},t}(React.Component);t.CompetitionDiscussion=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(46),i=a(155),r=a(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this;return React.createElement("div",{className:"competition-kernels"},this.props.hasKernelsEnabled?React.createElement("div",{className:"competition-kernels__actions"},React.createElement("p",{className:"competition-kernels__action-text"},"Create kernels to experiment with this competition's data and share your techniques."),React.createElement("div",{className:"competition-kernels__calls-to-action"},React.createElement("a",{className:"competition-kernels__call-to-action",onClick:this.props.hasAcceptedRules?function(){}:function(){return e.props.onCompetitionStateChanged("showRulesModal",!0)},href:this.props.hasAcceptedRules?this.props.competitionUrl+"/kernels/notebooks/new":null},"New Notebook"),React.createElement("a",{className:"competition-kernels__call-to-action",onClick:this.props.hasAcceptedRules?function(){}:function(){return e.props.onCompetitionStateChanged("showRulesModal",!0)},href:this.props.hasAcceptedRules?this.props.competitionUrl+"/kernels/scripts/new":null},"New Script"))):null,React.createElement(r.ScriptList,{listTitle:"Kernels",banner:!1,showFilters:!0,sourceBaseUrl:"/kernels/c/"+this.props.competitionId+"/",languagesMetadataUrl:"/kernels/alllang",outputTypesMetadataUrl:"/kernels/allouttypes",loginAndReturnUrl:"/account/login",newNotebookUrl:null,newScriptUrl:null,showScriptProjectName:!1,showHiddenSelectionGroup:this.props.canEdit}),React.createElement(i.Modal,{onClose:function(){return e.props.onCompetitionStateChanged("showRulesModal",!1)},onShow:function(){},modalIsShown:this.props.showRulesModal&&!this.props.hasAcceptedRules},React.createElement("div",{className:"competition-rules__acceptance"},React.createElement("p",{className:"competition-rules__acceptance-text"},'By clicking on the "I understand and accept" button below, you are indicating that you agree to be bound with the above rules.'),React.createElement("div",{className:"competition-rules__acceptance-actions"},React.createElement("a",{className:"competition-rules__decline",onClick:function(){return e.props.onCompetitionStateChanged("showRulesModal",!1)}},"I Do Not Accept"),React.createElement(s.ButtonAutoWidth,{classNames:"competition-rules__accept",onClick:function(){return e.props.onAcceptCompetitionRules()},text:"I Understand and Accept"})))))},t}(React.Component);t.CompetitionKernels=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(288),i=function(e){function t(t){var a=e.call(this,t)||this;a.getUserScore=function(e){var t=e.nearUser&&e.nearUser.filter(function(t){return t.rank===e.userRanking})[0];return t&&t.score},a.triggerPublicLeaderboardReload=function(){a.setState({isLoadingPublicData:!0},function(){return a.fetchPublicLeaderboard()})},a.triggerPrivateLeaderboardReload=function(){a.setState({isLoadingPrivateData:!0},function(){return a.fetchPrivateLeaderboard()})},a.fetchPublicLeaderboard=function(){var e=a.state,t=e.includeBeforeUserPublic,n=e.includeAfterUserPublic,s=jQuery.Deferred();return $.ajax({url:"/c/"+a.props.competitionId+"/leaderboard.json?includeBeforeUser="+t+"&includeAfterUser="+n,method:"GET",success:function(e){a.setState({publicData:e,isLoadingPublicData:!1,isLoadingBeforeUserPublic:!1,isLoadingAfterUserPublic:!1,previousBestPublicScore:a.state.previousBestPublicScore||e.isScoring&&a.getUserScore(e)},function(){e.isScoring&&a.startPollingScoringStatus(),s.resolve()})},error:function(){return a.setState({publicData:{submissions:[]},isLoadingPublicData:!1,isLoadingBeforeUserPublic:!1,isLoadingAfterUserPublic:!1})}}),s},a.fetchPrivateLeaderboard=function(){var e=a.state,t=e.includeBeforeUserPrivate,n=e.includeAfterUserPrivate,s=jQuery.Deferred();return $.ajax({url:"/c/"+a.props.competitionId+"/leaderboard.json?includeBeforeUser="+t+"&includeAfterUser="+n+"&type=private",method:"GET",success:function(e){a.setState({privateData:e,isLoadingPrivateData:!1,isLoadingBeforeUserPrivate:!1,isLoadingAfterUserPrivate:!1},function(){s.resolve()})},error:function(){return a.setState({privateData:{submissions:[]},isLoadingPrivateData:!1,isLoadingBeforeUserPrivate:!1,isLoadingAfterUserPrivate:!1})}}),s},a.onChangeTab=function(e){a.setState({activeLeaderboardTab:e})},a.onLoadBeforeUser=function(e){"Private"==e?a.setState({includeBeforeUserPrivate:!0,isLoadingBeforeUserPrivate:!0},a.fetchPrivateLeaderboard):a.setState({includeBeforeUserPublic:!0,isLoadingBeforeUserPublic:!0},a.fetchPublicLeaderboard)},a.onLoadAfterUser=function(e){"Private"==e?a.setState({includeAfterUserPrivate:!0,isLoadingAfterUserPrivate:!0},a.fetchPrivateLeaderboard):a.setState({includeAfterUserPublic:!0,isLoadingAfterUserPublic:!0},a.fetchPublicLeaderboard)};var n="Public";return a.props.competitionHasEnded&&(n="Private"),a.state={activeLeaderboardTab:n,isLoadingPublicData:!0,isLoadingPrivateData:!0,includeBeforeUserPublic:!1,includeBeforeUserPrivate:!1,includeAfterUserPublic:!1,includeAfterUserPrivate:!1,previousBestPublicScore:null,publicScoringStatus:{}},a}return n(t,e),t.prototype.componentDidMount=function(){this.fetchPublicLeaderboard(),this.fetchPrivateLeaderboard()},t.prototype.componentWillUnmount=function(){clearInterval(this.scorePollHandle)},t.prototype.startPollingScoringStatus=function(){var e=this;if(this.state.publicData.isScoring){var t=function(){$.get(e.props.submissionStatusUrl).then(function(t){e.setState({publicScoringStatus:t},function(){var a="Complete"===t.submissionStatus,n="Error"===t.submissionStatus;(a||n)&&(clearInterval(e.scorePollHandle),e.setState({publicScoringStatus:t},function(){e.fetchPublicLeaderboard().then(function(e){if(a){var t=$("#score").offset();t&&$("html,body").animate({scrollTop:t.top-100},"slow")}}),e.props.onSubmissionStatusChanged()}))})})};t(),this.scorePollHandle&&clearInterval(this.scorePollHandle),this.scorePollHandle=window.setInterval(t,5e3)}},t.prototype.render=function(){var e={onLeaderboardTabChanged:this.onChangeTab,onLoadBeforeUser:this.onLoadBeforeUser,onLoadAfterUser:this.onLoadAfterUser,getUserScore:this.getUserScore,triggerPublicLeaderboardReload:this.triggerPublicLeaderboardReload,triggerPrivateLeaderboardReload:this.triggerPrivateLeaderboardReload};return React.createElement(s.CompetitionLeaderboard,$.extend({},this.props,e,this.state))},t}(React.Component);t.CompetitionLeaderboardContainer=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(34),i=a(46),r=a(5),o=a(7),l=a(33),c=a(160),p=a(289),u=a(163),d=a(290),m=a(8),h=["Discovering your KGI (Kaggle Greatness Index)...","Taking your entry for a test drive...","Coming to terms with your brilliance...","Teaching your submission to our robots...","Planning for your ascendency...","Adding more hamsters to the evaluation servers...","You call ::this:: big data? ...","Wiring more money to our cloud provider...","First-in-first-out? This could take a while...","Data mining? They should call it data youring!","Something tells me this isn't your first csv file ;)","You take the artificial out of AI...","All models are wrong. Yours are just useful...","Checking that Bayes' theorem is still true...","Making a call to Watson to check this for you...","We are going to need more mechanical turks...","No free lunch? Not after you win this thing...","Deep learning is shallow next to the depths of your greatness...","Reserving the local university teraflop cluster...","Is this Bayesian? You know I'm a strict Bayesian, right?","What has 64 cores and 128GB RAM? Not me! Hold tight...","Entering these into the TI-89 as fast as we can...","No whammies no whammies no whammies...","I can feel it. This one is worth lots of points..."],g=function(e){function t(t){var a=e.call(this,t)||this;return a.runTimer=new u.Timer,a.renderLeaderboardItem=function(e,t,n,i,r){var c=e.rank&&n===e.rank,u=4,d=[],m=e.teamMembers.length-u>1,h=[];return m?(d=e.teamMembers.slice(0,u-1),h=e.teamMembers.slice(u-1)):d=e.teamMembers,React.createElement("tr",{className:(e.rank?"competition-leaderboard__row":"competition-leaderboard__benchmark-row")+" "+(c&&a.isScoredOverlay()&&"competition-leaderboard__row--user-scored"),key:"leaderboard-row-"+t},c&&a.renderUserOverlay(e,r),c&&React.createElement("td",null,React.createElement("a",{href:"#score",id:"score"})),React.createElement("td",{className:"competition-leaderboard__td-rank","data-th":"Rank"},e.rank?e.rank:React.createElement("span",{className:"fa fa-map-marker"})),React.createElement("td",{className:"competition-leaderboard__td-change","data-th":"Change"},e.rank?React.createElement(p.PositionChange,{change:e.change}):null),React.createElement("td",{className:e.medal?"competition-leaderboard__td-team--"+e.medal:"competition-leaderboard__td-team","data-th":"Team Name",title:e.teamName},React.createElement("span",null,e.rank&&!a.props.disablePrizeIndicator&&e.rank<=a.props.numPrizes&&a.props.rewardQuantity>0?React.createElement("span",{className:"competition-leaderboard__asterisk"},React.createElement("span",{className:"fa fa-asterisk"})):null,e.teamName)),React.createElement("td",{className:"competition-leaderboard__td-kernel","data-th":"Kernel"},e.sourceKernelUrl&&e.sourceKernelName?React.createElement("a",{className:""+(e.rank?"competition-leaderboard__td-kernel-link":"competition-leaderboard__td-benchmark-kernel-link"),href:e.sourceKernelUrl,title:e.sourceKernelName},React.createElement("span",{className:"fa fa-code"}),e.sourceKernelName):null),React.createElement("td",{className:"competition-leaderboard__td-members","data-th":"Team Members"},d.map(function(e,t){return React.createElement("span",{className:"competition-leaderboard__team-member",key:"team-member-"+t},React.createElement(s.Avatar,{displayName:e.displayName,tier:e.tier,thumbnailUrl:e.thumbnailUrl,userUrl:e.profileUrl,width:25}))}),m?React.createElement(l.ToolTip,{tipText:""+h.map(function(e){return e.displayName}).join(", ")},React.createElement("a",{className:"competition-leaderboard__team-more-button"},"+",h.length)):null),React.createElement("td",{className:"competition-leaderboard__td-score","data-th":"Score"},c&&i?"Processing":e.score),React.createElement("td",{className:"competition-leaderboard__td-entries","data-th":"Number of Entries"},e.rank?e.entries:null),React.createElement("td",{className:"competition-leaderboard__td-last","data-th":"Last Entry"},e.rank?React.createElement(o.TimeAgo,{time:e.lastSubmission,condense:!0,hideAgo:!0}):null))},a.leaderboardNavItems=[{title:"Public",text:"Public Leaderboard",tab:"Public"},{title:"Private",text:"Private Leaderboard",tab:"Private"}],a.state={runTime:null,scoringMessage:h[Math.floor(Math.random()*h.length)]},a}return n(t,e),t.prototype.componentWillMount=function(){this.props.competitionHasEnded&&!this.props.finalLeaderboardHasBeenVerified&&(c.PageMessages.clear(),c.PageMessages.warning("This competition has completed. This leaderboard reflects preliminary final standings. The result will become final after the competition organizers verify the results."))},t.prototype.componentWillReceiveProps=function(e){var t=this,a=e.publicScoringStatus.runTimeInSeconds;if("Pending"!==e.publicScoringStatus.submissionStatus)this.runTimer.isRunning()&&this.runTimer.stopTimer();else if(a){var n=new Date;n.setSeconds(n.getSeconds()-a),this.runTimer.startTimerFrom(n),this.runTimer.setDisplayCallback(function(e){t.setState({runTime:e})})}},t.prototype.areContiguous=function(e,t,a){return e.length>0&&t.length>0&&e.slice(-1)[0].rank+1===t[0].rank||a&&a.length>0&&e.slice(-1)[0].rank+1===a[0].rank},t.prototype.renderLeaderboardHeader=function(){var e=this,t=this.props.activeLeaderboardTab;
return React.createElement("nav",{className:"competition-leaderboard__nav"},this.leaderboardNavItems.map(function(a,n){return React.createElement("a",{className:t==a.tab?"competition-leaderboard__nav-item--selected":"competition-leaderboard__nav-item",key:"leaderboard-nav-"+n,onClick:function(){return e.props.onLeaderboardTabChanged(a.tab)},title:a.title+" Leaderboard"},a.text)}))},t.prototype.isScoredOverlay=function(){var e=this.props,t=e.previousBestPublicScore,a=e.publicData,n=e.publicScoringStatus;return t&&!a.isScoring&&"Error"!==n.submissionStatus},t.prototype.renderUserOverlay=function(e,t){var a=this.props,n=a.previousBestPublicScore,s=a.publicScoringStatus,i=a.publicData,r=a.scoringIsMax,o=this.props.getUserScore(i),l=!r&&n>o||r&&o>n;return this.isScoredOverlay()&&"Private"!=t?l?React.createElement("td",{className:"competition-leaderboard__row-user-overlay competition-leaderboard__row-user-overlay--better"},React.createElement("div",{className:"competition-leaderboard__row-user-overlay-description"},React.createElement("div",{className:"competition-leaderboard__row-user-overlay-title"},"Your Best Entry ",React.createElement("i",{className:"fa fa-arrow-up"})),React.createElement("div",null,"Your submission scored ",s.score,", which is an improvement of your previous score of ",n," score. Great job!",React.createElement(d.LeaderboardTweet,{competitionUrl:"https://kaggle.com"+this.props.competitionUrl,positionChange:e.change,userRank:e.rank})))):React.createElement("td",{className:"competition-leaderboard__row-user-overlay competition-leaderboard__row-user-overlay--worse"},React.createElement("div",{className:"competition-leaderboard__row-user-overlay-description"},React.createElement("div",{className:"competition-leaderboard__row-user-overlay-title"},"Your Best Entry ",React.createElement("i",{className:"fa fa-arrow-up"})),React.createElement("div",null,"Your submission scored ",s.score,", which is not an improvement of your best score. Keep trying!"))):React.createElement("td",{className:"competition-leaderboard__row-user-overlay"})},t.prototype.renderLoadMoreButton=function(e,t,a,n){var s=t-e;return s>0&&React.createElement("tr",{className:"competition-leaderboard__load-more-wrapper"},React.createElement("td",{onClick:a,className:"competition-leaderboard__load-more-button"},React.createElement("span",{className:"competition-leaderboard__load-more-numbers"},e,"-",t),React.createElement("span",{className:"competition-leaderboard__load-more-count"},React.createElement("i",{className:"fa fa-plus-square"})," Load ",s+1," More"),n?React.createElement("span",{className:"competition-leaderboard__loading-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null))},t.prototype.renderLeaderboardItems=function(e,t){var a=this,n=e.beforeUser,s=e.nearUser,i=e.afterUser,r=e.userRanking,o=e.isScoring;return r?React.createElement("tbody",null,n.map(function(e,n){return a.renderLeaderboardItem(e,n,r,o,t)}),n.length>0&&!this.areContiguous(n,s,i)&&this.renderLoadMoreButton(n.length+1,s[0].rank-1,function(){return a.props.onLoadBeforeUser(t)},"Private"==t?this.props.isLoadingBeforeUserPrivate:this.props.isLoadingBeforeUserPublic),s.map(function(e,n){return a.renderLeaderboardItem(e,n,r,o,t)}),s.length>0&&!this.areContiguous(s,i,null)&&this.renderLoadMoreButton(s.slice(-1)[0].rank+1,e.totalRankings,function(){return a.props.onLoadAfterUser(t)},"Private"==t?this.props.isLoadingAfterUserPrivate:this.props.isLoadingAfterUserPublic),i.map(function(e,n){return a.renderLeaderboardItem(e,n,r,o,t)})):React.createElement("tbody",null,n.map(function(e,n){return a.renderLeaderboardItem(e,n,r,o,t)}),n.length>0&&!this.areContiguous(n,s,i)&&this.renderLoadMoreButton(n.length+1,e.totalRankings,function(){return a.props.onLoadBeforeUser(t)},"Private"==t?this.props.isLoadingBeforeUserPrivate:this.props.isLoadingBeforeUserPublic),i.map(function(e,n){return a.renderLeaderboardItem(e,n,r,o,t)}))},t.prototype.renderLeaderboard=function(e,t,a){return React.createElement("table",{className:"competition-leaderboard__table"},React.createElement("thead",null,React.createElement("tr",{className:"competition-leaderboard__header-row"},React.createElement("th",{className:"competition-leaderboard__th-rank",title:"Rank"},"#"),React.createElement("th",{className:"competition-leaderboard__th-change",title:"Recent Change"},"△1w"),React.createElement("th",{className:"competition-leaderboard__th-team",title:"Team Name"},"Team Name",!this.props.disablePrizeIndicator&&this.props.rewardQuantity>0?React.createElement("span",{className:"competition-leaderboard__asterisk-def"},React.createElement("span",{className:"fa fa-asterisk"})," in the money"):null),React.createElement("th",{className:"competition-leaderboard__th-kernel",title:"Kernel"},"Kernel"),React.createElement("th",{className:"competition-leaderboard__th-members",title:"Team Members"},"Team Members"),React.createElement("th",{className:"competition-leaderboard__th-score",title:"Score"},React.createElement(l.ToolTip,{tipText:this.props.evaluationAlgorithm},React.createElement("span",null,"Score",React.createElement("span",{className:"competition-leaderboard__th-score-q"},React.createElement("span",{className:"fa fa-question-circle"}))))),React.createElement("th",{className:"competition-leaderboard__th-entries",title:"Number of Entries"},"Entries"),React.createElement("th",{className:"competition-leaderboard__th-last",title:"Last Submission"},"Last"))),t?React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"competition-leaderboard__loading-text"},React.createElement("span",{className:"competition-leaderboard__loading-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})),"Fetching the latest data. Hold tight!"))):e.submissions.length?this.renderLeaderboardItems(e,a):React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{className:"competition-leaderboard__loading-text"},"There are currently no entries for this competition ¯\\_(ツ) _/¯"))))},t.prototype.renderSubmissionBanner=function(e,t){var a=this.props.publicScoringStatus,n=a.runStatus,s=a.submissionStatus,i=a.runTimeMaxInSeconds,r="Pending"!==s?s:n;return this.maxRunTime=this.maxRunTime||i&&m().startOf("day").seconds(i).format("H:mm:ss"),React.createElement("div",{className:"competition-leaderboard__scoring-banner competition-leaderboard__scoring-banner--"+s},React.createElement("h2",{className:"competition-leaderboard__scoring-banner-title"},e),React.createElement("div",null,t,n&&React.createElement("div",{className:"competition-leaderboard__scoring-status"},"Pending"===s&&React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})," ",React.createElement("span",{className:"competition-leaderboard__scoring-status--"+r},r)," ",this.state.runTime," of ",this.maxRunTime," max")))},t.prototype.renderSubmissionStatus=function(){var e=this.props.publicScoringStatus,t=(e.runStatus,e.runTimeInSeconds,e.submissionStatus),a=e.error,n=this.props.publicData&&this.props.publicData.isScoring;if(n||this.props.publicScoringStatus.submissionStatus){if(n){var s=React.createElement("div",null,"Processing and scoring your most recent entry — this may take some time.",React.createElement("br",null),"Feel free to return to the leaderboard later to check your position.");return this.renderSubmissionBanner(this.state.scoringMessage,s)}return"Complete"===t?this.renderSubmissionBanner("Complete",React.createElement("div",null,"Your submission scored ",this.props.publicScoringStatus.score,".")):this.renderSubmissionBanner("Error",React.createElement("div",null,a))}return null},t.prototype.render=function(){var e=this,t=100-this.props.leaderboardPercentage+"%",a=this.props.leaderboardPercentage+"%";new Date(this.props.deadline.toString()).getTime()<(new Date).getTime();return React.createElement("div",{className:"competition-leaderboard"},this.renderSubmissionStatus(),React.createElement(r.ContentBox,{title:this.renderLeaderboardHeader()},"Private"==this.props.activeLeaderboardTab?React.createElement("div",null,React.createElement("div",{className:"competition-leaderboard__message"},React.createElement("div",{className:"competition-leaderboard__note"},this.props.privateLeaderboardMessage?this.props.privateLeaderboardMessage:100-this.props.leaderboardPercentage==0?React.createElement("p",null,"The private leaderboard is identical to the public leaderboard in this competition."):100-this.props.leaderboardPercentage==100?React.createElement("p",null,"The private leaderboard is calculated with all of the test data"):React.createElement("p",null,"The private leaderboard is calculated with approximately ",t," of the test data."),this.props.finalLeaderboardHasBeenVerified?React.createElement("p",null,"This competition has completed. This leaderboard reflects the final standings."):null),this.props.allowPrivateLeaderboardDisplay?React.createElement("a",{className:"competition-leaderboard__refresh",onClick:function(){return e.props.triggerPrivateLeaderboardReload()}},React.createElement("span",{className:"competition-leaderboard__refresh-icon"},React.createElement("span",{className:"fa fa-refresh"})),React.createElement("span",null,"Refresh")):null),this.props.allowPrivateLeaderboardDisplay?this.renderLeaderboard(this.props.privateData,this.props.isLoadingPrivateData,"Private"):React.createElement("div",{className:"competition-leaderboard__private-message"},React.createElement("div",{className:"competition-leaderboard__private-image"},React.createElement("span",{className:"fa fa-trophy"})),React.createElement("h3",{className:"competition-leaderboard__private-header"},"Not so fast! The private leaderboard will be available after the competition ends."),React.createElement("div",{className:"competition-leaderboard__private-text"},"Your team, rank, and medal will display here after the competition closes. Compete to build your reputation, complement your resume, and explore your data science future."),React.createElement(i.ButtonAutoWidth,{href:this.props.newScriptUrl,text:"Make a submission"}))):React.createElement("div",null,React.createElement("div",{className:"competition-leaderboard__message"},React.createElement("div",{className:"competition-leaderboard__note"},this.props.publicLeaderboardMessage?this.props.publicLeaderboardMessage:0==this.props.leaderboardPercentage?React.createElement("p",null,"This leaderboard is identical to the private leaderboard in this competition."):100==this.props.leaderboardPercentage?React.createElement("p",null,"This leaderboard is calculated with all of the test data."):React.createElement("div",null,React.createElement("p",null,"This leaderboard is calculated with approximately ",a," of the test data."),React.createElement("p",null,"The final results will be based on the other ",t,", so the final standings may be different."))),React.createElement("a",{className:"competition-leaderboard__refresh",onClick:function(){return e.props.triggerPublicLeaderboardReload()}},React.createElement("span",{className:"competition-leaderboard__refresh-icon"},React.createElement("span",{className:"fa fa-refresh"})),React.createElement("span",null,"Refresh"))),this.renderLeaderboard(this.props.publicData,this.props.isLoadingPublicData,"Public"))))},t}(React.Component);t.CompetitionLeaderboard=g},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.render=function(){return React.createElement("span",{className:this.props.wrapperClassName},this.props.change<0?React.createElement("span",{className:"position-change__fallen"},React.createElement("span",{className:"fa fa-caret-down"})," ",Math.abs(this.props.change)):this.props.change>0?React.createElement("span",{className:"position-change__risen"},React.createElement("span",{className:"fa fa-caret-up"})," ",this.props.change):0==this.props.change?React.createElement("span",{className:"position-change__none"},"—"):React.createElement("span",{className:"position-change__new"},"new"))},t}(React.Component);t.PositionChange=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(3),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.topSpotMessages=["View's great from the top of the #kaggle leaderboard. #WishYouWereHere "+t.props.competitionUrl,"First. #kaggle - "+t.props.competitionUrl,"It's lonely here at the top. #kaggle - "+t.props.competitionUrl,'"Overfitting"? Nay, it\'s called #winning. #kaggle - '+t.props.competitionUrl],t.topTenMessages=["Hold my calls. Top 10 on #kaggle - "+t.props.competitionUrl,"Top 10 on #kaggle? Life can wait. "+t.props.competitionUrl,"All the teams above me are overfitting. #kaggle - "+t.props.competitionUrl,"Top 10 on #kaggle and I'm not even ensembling. "+t.props.competitionUrl,"Whether boosting or bagging, I'm top 10 and #bragging. #kaggle "+t.props.competitionUrl,"Top 10! Is this what they call #superintelligence? #kaggle "+t.props.competitionUrl,"Like the SVM, I intend to maximize my (winning) margins. #kaggle "+t.props.competitionUrl],t.firstSubmissionMessages=["I just made my first #kaggle submission to "+t.props.competitionUrl,"I am a giant nerd, but that's okay. #kaggle - "+t.props.competitionUrl,"Made my first #kaggle submission and all I got was this lousy tweet. "+t.props.competitionUrl,"You too should spend your free time on competitive predictive modeling. #kaggle - "+t.props.competitionUrl,"#MachineLearning: so easy I can do it. #kaggle - "+t.props.competitionUrl,"Why did nobody tell me #datascience was this easy? #kaggle - "+t.props.competitionUrl,"Doing my part to bring about the singularity. #MachineLearning #kaggle - "+t.props.competitionUrl,"Teaching robots to learn #MachineLearning #kaggle - "+t.props.competitionUrl,"Causing #superintelligence, one submission at a time #kaggle - "+t.props.competitionUrl,"No hyperplanes were harmed in the making of this submission. #kaggle - "+t.props.competitionUrl,"When not mining bitcoins, I prefer to waste computer cycles on #kaggle - "+t.props.competitionUrl,"#kaggle - because this RAM isn't going to use itself. "+t.props.competitionUrl,"#kaggle - spend even more time in front of a computer than you already do! "+t.props.competitionUrl,"Data scientist is the sexiest job of this century. *winks* #kaggle - "+t.props.competitionUrl],t.movedUpMessages=["Moved up "+t.props.positionChange+" "+s("spot",t.props.positionChange)+" "+t.props.competitionUrl,t.props.positionChange+" "+s("spot",t.props.positionChange)+" up, just a few more to go. #kaggle - "+t.props.competitionUrl,"Moved up "+t.props.positionChange+" "+s("spot",t.props.positionChange)+" on #kaggle. I'm not addicted. I can quit when I want. "+t.props.competitionUrl,"Jumped "+t.props.positionChange+" "+s("spot",t.props.positionChange)+" on #kaggle. I'll sleep when I'm dead. "+t.props.competitionUrl,"Moved up "+t.props.positionChange+" "+s("spot",t.props.positionChange)+". Soon the robots will have my job. #kaggle - "+t.props.competitionUrl,t.props.positionChange+" "+s("spot",t.props.positionChange)+" up. Is anybody else even trying? #kaggle - "+t.props.competitionUrl,t.props.positionChange+" "+s("place",t.props.positionChange)+" up. A small price to pay for my social life. #kaggle - "+t.props.competitionUrl,t.props.positionChange+" "+s("place",t.props.positionChange)+" up. Not unlike my electricity bill. #kaggle - "+t.props.competitionUrl,t.props.positionChange+" "+s("place",t.props.positionChange)+" up. Now accepting donations for more RAM. #kaggle - "+t.props.competitionUrl],t}return n(t,e),t.prototype.render=function(){var e,t=this.props,a=t.userRank,n=t.positionChange,s="https://twitter.com/intent/tweet?text=";if(!a)return null;e=1==a?this.topSpotMessages:a>=1&&10>=a?this.topTenMessages:n>=1?this.movedUpMessages:this.firstSubmissionMessages;var i=e[Math.floor(Math.random()*e.length)];return console.log(e,encodeURIComponent(i)),React.createElement("div",{className:"leaderboard-tweet__button-wrapper"},React.createElement("a",{className:"leaderboard-tweet__button",href:""+s+encodeURIComponent(i),target:"_blank"},React.createElement("span",{className:"leaderboard-tweet__button-icon"},React.createElement("span",{className:"fa fa-twitter"})),React.createElement("span",{className:"leaderboard-tweet__button-text"},"Tweet this!")))},t}(React.Component);t.LeaderboardTweet=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(292),i=a(160),r=function(e){function t(t){var a=e.call(this,t)||this;return a.validationRules=[{isValid:function(){return!(a.state.submissionDescription&&a.state.submissionDescription.trim().length>2e3)},id:"submission-description-length",message:function(){return"Your description must be fewer than 2,000 characters."}},{isValid:function(){return a.state.submissionToken&&a.state.submissionToken.trim().length>0},id:"submission-no-file-token",message:function(){return"You must upload a file for your submission."}}],a.onSubmissionUploadFinished=function(e,t,n){a.setState({submissionFileName:e,submissionToken:t,submissionTotalBytes:n},function(){a.state.autoSubmitPendingSubmission&&a.onSubmissionSubmit()})},a.state={isSubmittingSubmission:!1},a}return n(t,e),t.prototype.componentWillMount=function(){return this.props.submissionsAreDisabled?(i.PageMessages.clear(),void i.PageMessages.error("Submissions are currently disabled for this competition.")):void 0},t.prototype.getValidationPageMessages=function(e){var t=[];return this.validationRules.forEach(function(a){var n=t.filter(function(e){return e.id==a.id}).length>0;(a.isValid()&&n||!a.isValid()&&n&&!e)&&(t=t.filter(function(e){return e.id!=a.id})),a.isValid()||e||t.push({type:"error",id:a.id,message:a.message()})}),t},t.prototype.onSubmissionSubmit=function(){var e=this;if(this.props.submissionsAreDisabled)return i.PageMessages.clear(),void i.PageMessages.error("Submissions are currently disabled for this competition.");if(this.state.submissionPending)return this.setState({autoSubmitPendingSubmission:!0}),void i.PageMessages.add([{type:"info",message:"Your submission will be automatically submitted once it has finished uploading."}]);var t=this.getValidationPageMessages();return t.length>0?void i.PageMessages.add(t):void this.setState({isSubmittingSubmission:!0},function(){return $.ajax({url:e.props.submissionSubmitUrl,type:"POST",contentType:"application/json",data:JSON.stringify({blobFileTokens:[e.state.submissionToken],submissionDescription:e.state.submissionDescription}),success:function(t){e.setState({isSubmittingSubmission:!1,submissionDescription:"",submissionFileName:"",submissionToken:"",submissionTotalBytes:0},function(){t.pageMessages&&t.pageMessages.length>0?i.PageMessages.set(t.pageMessages):(i.PageMessages.clear(),i.PageMessages.success({htmlMessage:'Your submission was successful, head over to the <a href="'+e.props.competitionUrl+'/leaderboard">leaderboard</a> to check your scoring status.'})),e.props.onCompetitionSubmission()})},error:function(t){e.setState({isSubmittingSubmission:!1},function(){t.pageMessages&&t.pageMessages.length>0?i.PageMessages.set(t.pageMessages):(i.PageMessages.clear(),i.PageMessages.error("Your submission was unsuccessful."))})}})})},t.prototype.onSubmissionDescriptionChanged=function(e){this.setState({submissionDescription:e})},t.prototype.onSubmissionFilePendingUpdated=function(e,t){0==e&&0==t&&i.PageMessages.clear(),this.setState({submissionPending:e>0,autoSubmitPendingSubmission:this.state.autoSubmitPendingSubmission&&!(0==e&&0==t)})},t.prototype.render=function(){var e={onSubmissionSubmit:this.onSubmissionSubmit.bind(this),onSubmissionDescriptionChanged:this.onSubmissionDescriptionChanged.bind(this),onSubmissionUploadFinished:this.onSubmissionUploadFinished.bind(this),onSubmissionFilePendingUpdated:this.onSubmissionFilePendingUpdated.bind(this)};return React.createElement(s.CompetitionSubmission,$.extend({},this.props,e,this.state))},t}(React.Component);t.CompetitionSubmissionContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(6),i=a(46),r=a(5),o=a(77),l=a(130),c=a(7),p=a(72),u=a(293),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this,t=this.props.submissionsAreDisabled;return s.Current.userName?this.props.needsPhoneVerification?React.createElement(r.ContentBox,{title:"Make a Submission"},React.createElement("div",{className:"competition-submission__intro"},"This competition requires that you verify your account via SMS. ",React.createElement("a",{href:"/account/phone/number?returnUrl="+this.props.competitionUrl},"Click here")," to verify your account.")):React.createElement(r.ContentBox,{title:"Make a Submission"},React.createElement("div",{className:"competition-submission__intro"},this.props.team&&this.props.team.name?React.createElement("h1",{className:"competition-submission__lead-in"},"Make a submission for ",React.createElement("a",{onClick:function(){return e.props.onCompetitionTabChanged("team")}},this.props.team.name)):null,null!=this.props.remainingDailySubmissions&&this.props.maxDailySubmissionsResetDate?this.props.remainingDailySubmissions>0?React.createElement("p",{className:"competition-submission__info"},React.createElement("strong",null,"You have ",React.createElement(p.Pluralize,{count:this.props.remainingDailySubmissions,word:"submission",formatNumber:!0})," remaining today. "),"This resets ",React.createElement(c.TimeAgo,{time:this.props.maxDailySubmissionsResetDate,hideToGo:!0})," from now (00: 00 UTC)."):React.createElement("div",{className:"competition-submission__info"},React.createElement("p",null,React.createElement("strong",null,"You have no more submissions remaining for today. "),"This resets in:"),React.createElement("p",{className:"competition-submission__countdown"},React.createElement(u.Countdown,{time:this.props.maxDailySubmissionsResetDate}),".")):null),this.props.remainingDailySubmissions>0?React.createElement("div",null,React.createElement(o.FileUploader,{createBlobUrl:this.props.submissionUploadUrl,mode:o.FileUploaderMode.Single,onFileUploadFinished:this.props.onSubmissionUploadFinished,singleFileButtonLabel:"Upload Submission File",onFilesPendingUpdated:this.props.onSubmissionFilePendingUpdated}),React.createElement("div",{className:"competition-submission__details"},React.createElement("div",{className:"competition-submission__detail"},React.createElement("h3",{className:"competition-submission__detail-subheader"},"File Format"),React.createElement("p",{className:"competition-submission__detail-text"},"Your submission should be in CSV format. You can upload this in a zip/gz/rar/7z archive, if you prefer.")),React.createElement("div",{className:"competition-submission__detail"},React.createElement("h3",{className:"competition-submission__detail-subheader"},"Number of Predictions"),React.createElement("p",{className:"competition-submission__detail-text"},"We expect the solution file to have ",this.props.totalSolutionRows," prediction rows. This file should have a header row. Please see sample submission file on the ",React.createElement("a",{onClick:function(){return e.props.onCompetitionTabChanged("data")}},"data page"),"."))),React.createElement("div",{className:"competition-submission__description-editor"},React.createElement(l.MarkdownEditor,{alwaysShowToolbar:!0,hidePreview:!0,minRows:3,onChangeCallback:function(t){return e.props.onSubmissionDescriptionChanged(t)},placeholder:"Briefly describe your submission.",shouldSanitizeHtml:!0})),React.createElement("div",{className:"competition-submission__submit-wrapper"},React.createElement("div",{className:t?"competition-submission__submit-button--disabled":"competition-submission__submit-button"},React.createElement(i.ButtonAutoWidth,{onClick:t?null:function(){return e.props.onSubmissionSubmit()},text:"Make Submission"}),this.props.isSubmittingSubmission?React.createElement("div",{className:"competition-submission__submit-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null))):null):React.createElement(r.ContentBox,{title:"Make a Submission"},React.createElement("div",{className:"competition-submission__intro"},"You must set a user name before making submissions to a competition. ",React.createElement("a",{href:"/account/set-username?returnUrl="+this.props.competitionUrl},"Click here")," to set your user name."))},t}(React.Component);t.CompetitionSubmission=d},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(8),i=function(e){function t(t){var a=e.call(this,t)||this;return a.state={msRemaining:a.getMsRemaining()},a.timer=window.setInterval(function(){var e=a.getMsRemaining();0>=e&&(window.clearInterval(a.timer),a.props.onBlastoff&&a.props.onBlastoff()),a.setState({msRemaining:e})},1e3),a}return n(t,e),t.prototype.getMsRemaining=function(){return new Date(this.props.time).getTime()-(new Date).getTime()},t.prototype.render=function(){var e=s.duration(this.state.msRemaining);return React.createElement("span",null,""+(e.hours()?e.hours()+" hours, ":null)+(e.hours()||e.minutes()?e.minutes()+" minutes, and ":null)+" "+e.seconds()+" seconds")},t}(React.Component);t.Countdown=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(160),i=a(295),r=function(e){function t(t){var a=e.call(this,t)||this;return a.getSubmissions=function(){var e=jQuery.Deferred();return $.ajax({url:"/c/"+a.props.competitionId+"/submissions.json",method:"GET",success:function(e){a.setState({isGettingSubmissions:!1,submissions:e})},error:function(){return a.setState({isGettingSubmissions:!1})}}),e},a.onSetFinalSubmissions=function(e,t){var n=$.extend(!0,[],a.state.finalSubmissionIds),i=n.indexOf(t);i>=0?n.splice(i,1):n.push(t),a.setState({isSettingFinalSubmissions:!0,settingFinalSubmissionId:t},function(){return $.ajax({type:"POST",url:a.props.setFinalScoreSubmissionsUrl,contentType:"application/json",data:JSON.stringify(n),success:function(t){a.setState({isSettingFinalSubmissions:!1,finalSubmissionIds:n,submissions:t.data},function(){a.props.updateSelectedSubmission(e),s.PageMessages.set(t.pageMessages)})},error:function(e){a.setState({isSettingFinalSubmissions:!1},function(){s.PageMessages.set(JSON.parse(e.responseText).pageMessages)})}})})},a.onSaveDescription=function(e,t){console.log("onSaveDescription(submissionId: "+e+", newDescription: "+t+")");var n=$.extend(!0,[],a.state.submissions);n.filter(function(t){return t.id==e})[0].details=t,s.PageMessages.clear(),a.setState({submissions:n},function(){return $.ajax({type:"POST",url:a.props.updateSubmissionUrl,contentType:"application/json",data:JSON.stringify({submissionId:e,newDescription:t}),success:function(e){s.PageMessages.set([{type:"info",message:"Your submission desciption has been saved."}])},error:function(e){s.PageMessages.set([{type:"error",message:"Your submission desciption could not be saved."}])}})})},a.state={isGettingSubmissions:!0,isSettingFinalSubmissions:!1,finalSubmissionIds:a.props.submissions?a.props.submissions.filter(function(e){return 1==e.isSelected}).map(function(e){return e.id}):null,submissions:a.props.submissions||[]},a}return n(t,e),t.prototype.componentDidMount=function(){this.getSubmissions()},t.prototype.render=function(){var e={onSetFinalSubmissions:this.onSetFinalSubmissions,onSaveDescription:this.onSaveDescription};return React.createElement(i.CompetitionSubmissions,$.extend({},this.props,e,this.state))},t}(React.Component);t.CompetitionSubmissionsContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(5),i=a(72),r=a(7),o=a(153),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderSubmissionScore=function(e){return"complete"==e.status?e.publicScore:"pending"==e.status?React.createElement("span",{className:"competition-submissions__score-pending"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):"error"==e.status?React.createElement("span",{className:"competition-submissions__score-error"},"Error"):null},t.prototype.render=function(){var e=this,t=React.createElement("span",null,this.props.submissions.length," submissions for",React.createElement("a",{className:"competition-submissions__team-link",onClick:function(){return e.props.onCompetitionTabChanged("Team")}},this.props.team.name));return React.createElement(s.ContentBox,{title:t},React.createElement("div",{className:"competition-submissions__wrapper"},React.createElement("p",{className:"competition-submissions__intro"},"You can select up to ",React.createElement(i.Pluralize,{count:this.props.numScoredSubmissions,word:"submission"})," to be used to calculate your final leaderboard score. If ",React.createElement(i.Pluralize,{count:this.props.numScoredSubmissions,word:"submission"})," are not selected, they will be chosen based on your best submission scores on the public leaderboard."),React.createElement("p",{className:"competition-submissions__intro"},"Your final score will not be based on the same exact subset of data as the public leaderboard, but rather a different private data subset of your full submission —your public score is only a rough indication of what your final score is."),React.createElement("p",{className:"competition-submissions__intro"},"You should thus choose submissions that will most likely be best overall, and not necessarily on the public subset."),this.props.isGettingSubmissions?React.createElement("div",{className:"competition-submissions__loading-section"},React.createElement("span",{className:"competition-submissions__loading-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})),"Getting your submissions"):React.createElement("div",{className:"competition-submissions__list-wrapper"},React.createElement("div",{className:"competition-submissions__thead"},React.createElement("p",{className:"competition-submissions__th-info"},"Submission and Description"),React.createElement("p",{className:"competition-submissions__th-score"},"Private Score"),React.createElement("p",{className:"competition-submissions__th-score"},"Public Score"),React.createElement("p",{className:"competition-submissions__th-use"},"Use for Final Score")),React.createElement("div",{className:"competition-submissions__list"},this.props.submissions.map(function(t,a){new Date(t.date.toString());return React.createElement("div",{key:"submission-"+a,className:"competition-submissions__list-item"+(t.isSelected?"--selected":"")},React.createElement("div",{className:"competition-submissions__td-info"},t.name?React.createElement("div",null,React.createElement("a",{className:"competition-submissions__td-info-link",href:t.url},t.name),t.version?React.createElement("span",null,"(version ",t.version,"/",t.latestVersion,")"):null):null,React.createElement("p",{
className:"competition-submissions__td-info-time"},React.createElement(r.TimeAgo,{time:t.date})," by ",React.createElement("a",{href:t.submittedByUrl},t.submittedBy)),React.createElement(o.InlineTextEditor,{className:"competition-submissions__td-info-text",placeholder:"add submission details",onSaveCallback:function(a){return e.props.onSaveDescription(t.id,a)},value:t.details,isToggleable:!0})),React.createElement("div",{className:"competition-submissions__td-score"},t.privateScore),React.createElement("div",{className:"competition-submissions__td-score"},e.renderSubmissionScore(t)),React.createElement("div",{className:"competition-submissions__td-use"},t.isSelected?React.createElement("a",{className:"competition-submissions__checked",onClick:function(){return e.props.onSetFinalSubmissions(a,t.id)}},React.createElement("span",{className:"fa fa-check-square"})):["error","pending"].indexOf(t.status)>-1?React.createElement("a",{className:"competition-submissions__unchecked-disabled"},React.createElement("span",{className:"fa fa-square-o"})):React.createElement("a",{className:"competition-submissions__unchecked",onClick:function(){return e.props.onSetFinalSubmissions(a,t.id)}},React.createElement("span",{className:"fa fa-square-o"})),e.props.isSettingFinalSubmissions&&e.props.settingFinalSubmissionId&&e.props.settingFinalSubmissionId==t.id?React.createElement("div",{className:"competition-submissions__td-use--processing"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null))})))))},t}(React.Component);t.CompetitionSubmissions=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(160),i=a(297),r=a(2),o=function(e){function t(t){var a=e.call(this,t)||this;return a.state={isSavingTeamName:!1,isSendingMergeRequest:!1,isSendingInviteRequest:!1},a}return n(t,e),t.prototype.onSaveTeamName=function(e){var t=this;return e.trim().length>0?void this.setState({isSavingTeamName:!0},function(){return r.ajax({type:"POST",url:t.props.setTeamNameUrl,contentType:"application/json",data:JSON.stringify({name:e}),success:function(a){t.setState({isSavingTeamName:!1},function(){a.pageMessages&&a.pageMessages.length>0?s.PageMessages.set(a.pageMessages):(s.PageMessages.clear(),s.PageMessages.success("You have successfully updated your team name.")),t.props.updateTeamName(e)})},error:function(e){t.setState({isSavingTeamName:!1},function(){s.PageMessages.set(e.pageMessages)})}})}):(s.PageMessages.clear(),s.PageMessages.error("Your team's display name must not be empty."),r.when(null))},t.prototype.onSendMergeRequest=function(e){var t=this;return e.trim().length>0?void this.setState({isSendingMergeRequest:!0},function(){return r.ajax({type:"POST",url:t.props.inviteToTeamUrl,contentType:"application/json",data:JSON.stringify({teamName:e}),success:function(a){t.setState({isSendingMergeRequest:!1},function(){t.props.onCompetitionStateChanged("teamOutboundInvites",a.data),a.pageMessages&&a.pageMessages.length>0?s.PageMessages.set(a.pageMessages):(s.PageMessages.clear(),s.PageMessages.success("You have successfully sent a merge request to "+e+"."))})},error:function(e){t.setState({isSendingMergeRequest:!1},function(){var t=JSON.parse(e.responseText);t.pageMessages&&t.pageMessages.length>0?s.PageMessages.set(t.pageMessages):(s.PageMessages.clear(),s.PageMessages.error({htmlMessage:'There was a problem processing your request. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'}))})}})}):(s.PageMessages.clear(),s.PageMessages.error("The team name must not be empty."),r.when(null))},t.prototype.onSendInviteRequest=function(e){var t=this;return e.trim().length>0?void this.setState({isSendingInviteRequest:!0},function(){return r.ajax({type:"POST",url:t.props.inviteToTeamUrl,contentType:"application/json",data:JSON.stringify({email:e}),success:function(a){t.setState({isSendingInviteRequest:!1},function(){a.pageMessages&&a.pageMessages.length>0?s.PageMessages.set(a.pageMessages):(s.PageMessages.clear(),s.PageMessages.success("You have successfully sent an invite request to "+e+"."))})},error:function(e){t.setState({isSendingInviteRequest:!1},function(){var t=JSON.parse(e.responseText);t.pageMessages&&t.pageMessages.length>0?s.PageMessages.set(t.pageMessages):(s.PageMessages.clear(),s.PageMessages.error({htmlMessage:'There was a problem processing your request. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'}))})}})}):(s.PageMessages.clear(),s.PageMessages.error("The email must not be empty."),r.when(null))},t.prototype.onSetTeamLeader=function(e){var t=this;this.setState({isSettingTeamLeader:!0,newTeamLeaderId:e},function(){return r.ajax({type:"POST",url:t.props.setLeaderUrl,contentType:"application/json",data:JSON.stringify({userId:e}),success:function(e){t.setState({isSettingTeamLeader:!1},function(){t.props.onCompetitionStateChanged("team",e.data),e.pageMessages&&e.pageMessages.length>0?s.PageMessages.set(e.pageMessages):(s.PageMessages.clear(),s.PageMessages.success("You have successfully set a new team leader."))})},error:function(e){t.setState({isSettingTeamLeader:!1},function(){var t=JSON.parse(e.responseText);t.pageMessages&&t.pageMessages.length>0?s.PageMessages.set(t.pageMessages):(s.PageMessages.clear(),s.PageMessages.error({htmlMessage:'There was a problem processing your request. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'}))})}})})},t.prototype.onRejectInvite=function(e){var t=this;this.setState({isRejectingInvite:!0,rejectedInviteCode:e},function(){return r.ajax({type:"POST",url:t.props.rejectTeamInviteUrl,contentType:"application/json",data:JSON.stringify({code:e}),success:function(e){t.setState({isRejectingInvite:!1},function(){t.props.onCompetitionStateChanged("teamOutboundInvites",e.data),e.pageMessages&&e.pageMessages.length>0?s.PageMessages.set(e.pageMessages):(s.PageMessages.clear(),s.PageMessages.success("The request has successfully been rejected/revoked."))})},error:function(e){t.setState({isRejectingInvite:!1},function(){var t=JSON.parse(e.responseText);t.pageMessages&&t.pageMessages.length>0?s.PageMessages.set(t.pageMessages):(s.PageMessages.clear(),s.PageMessages.error({htmlMessage:'There was a problem processing your request. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'}))})}})})},t.prototype.onAcceptInvite=function(e){var t=this;this.setState({isAcceptingInvite:!0,acceptedInviteCode:e},function(){return r.ajax({type:"POST",url:t.props.acceptTeamInviteUrl,contentType:"application/json",data:JSON.stringify({code:e}),success:function(e){t.setState({isAcceptingInvite:!1},function(){t.props.onCompetitionStateChanged("team",e.data.team),t.props.onCompetitionStateChanged("teamInboundInvites",e.data.inboundInvites),e.pageMessages&&e.pageMessages.length>0?s.PageMessages.set(e.pageMessages):(s.PageMessages.clear(),s.PageMessages.success("The request has successfully been accepted."))})},error:function(e){t.setState({isAcceptingInvite:!1},function(){var t=JSON.parse(e.responseText);t.pageMessages&&t.pageMessages.length>0?s.PageMessages.set(t.pageMessages):(s.PageMessages.clear(),s.PageMessages.error({htmlMessage:'There was a problem processing your request. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'}))})}})})},t.prototype.onDisbandTeam=function(){var e=this;return r.ajax({type:"POST",url:this.props.disbandTeamUrl,contentType:"application/json",success:function(t){e.props.onCompetitionStateChanged("team",t.data),s.PageMessages.success("Your team has been disbanded.",{clear:!0})},error:function(e){var t=JSON.parse(e.responseText);t.pageMessages&&t.pageMessages.length>0?s.PageMessages.set(t.pageMessages):s.PageMessages.error({htmlMessage:'There was a problem processing your request. If you keep having problems, please <a href="mailto: support@kaggle.com">contact support</a> and we\'ll get you squared away.'},{clear:!0})}})},t.prototype.render=function(){var e={onSaveTeamName:this.onSaveTeamName.bind(this),onSendMergeRequest:this.onSendMergeRequest.bind(this),onSendInviteRequest:this.onSendInviteRequest.bind(this),onSetTeamLeader:this.onSetTeamLeader.bind(this),onRejectInvite:this.onRejectInvite.bind(this),onAcceptInvite:this.onAcceptInvite.bind(this),onDisbandTeam:this.onDisbandTeam.bind(this)};return React.createElement(i.CompetitionMyTeam,r.extend({},this.props,e,this.state))},t}(React.Component);t.CompetitionTeamContainer=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(34),i=a(46),r=a(5),o=a(6),l=a(298),c=a(72),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){var e=this,t=this.props.team.members.filter(function(e){return 1==e.isTeamLeader})[0].userId;return React.createElement("div",null,React.createElement(r.ContentBox,{title:"Manage Team"},React.createElement("div",{className:"competition-myteam__naming-section"},React.createElement("div",{className:"competition-myteam__naming"},React.createElement("label",{className:"competition-myteam__section-title",htmlFor:"competition-team-name"},"Team Name"),React.createElement(l.InputGroupInline,{defaultValue:this.props.team.name,isSubmitting:this.props.isSavingTeamName,inputClassName:"competition-myteam__naming-input",inputId:"competition-team-name",onSubmit:function(t){return e.props.onSaveTeamName(t)},placeholder:"Team Name",buttonChildren:"Save Team Name"}),React.createElement("p",{className:"competition-myteam__naming-help"},"This name will appear on your team's leaderboard position.")),this.props.team.canDisband&&React.createElement("a",{className:"competition-myteam__disband",onClick:this.props.onDisbandTeam},"Disband ",React.createElement("span",{className:"fa fa-angle-double-right"}))),React.createElement("div",{className:"competition-myteam__member-section"},React.createElement("h2",{className:"competition-myteam__section-title"},"Team Members ",this.props.maxTeamSize?"("+this.props.team.members.length+" of "+this.props.maxTeamSize+" maximum)":null),React.createElement("ul",{className:"competition-myteam__members"},this.props.team.members.map(function(a,n){return React.createElement("li",{className:"competition-myteam__member"+(a.userId==o.Current.userId?"--active":""),key:"member-"+n},React.createElement("img",{className:"competition-myteam__member-tier",src:"staff"==a.tier?"/static/images/tiers/staff@96.png":"/static/images/tiers/"+a.tier+"@48.png",title:a.tier}),React.createElement("img",{className:"competition-myteam__member-avatar",src:a.avatarUrl,title:a.displayName+" Avatar"}),React.createElement("div",{className:"competition-myteam__member-name"},React.createElement("a",{className:"competition-myteam__member-link",href:a.userUrl},a.displayName),a.userId==o.Current.userId?React.createElement("span",null,"(you)"):null),React.createElement("p",{className:"competition-myteam__member-role"},a.isTeamLeader?"Leader":"Member"),React.createElement("div",{className:"competition-myteam__member-action-wrapper"},a.isTeamLeader||o.Current.userId!=t?null:React.createElement("a",{className:"competition-myteam__member-action",onClick:function(){return e.props.onSetTeamLeader(a.userId)}},"Make Leader"),e.props.isSettingTeamLeader&&e.props.isSettingTeamLeader&&e.props.newTeamLeaderId==a.userId?React.createElement("div",{className:"competition-myteam__action-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null))})))),React.createElement(r.ContentBox,{title:"Invite Others"},React.createElement("div",{className:"competition-myteam__invite-creation"},React.createElement("div",{className:"competition-myteam__invite-wrapper"},React.createElement("label",{className:"competition-myteam__section-title",htmlFor:"competition-merge-request"},React.createElement("span",{className:"fa fa-code-fork competition-myteam__section-title-icon"}),"Merge with other Kaggle teams"),this.props.team.canCreateMerger?React.createElement(l.InputGroupInline,{clearAfterSubmit:!0,inputId:"competition-merge-request",isSubmitting:this.props.isSendingMergeRequest,onSubmit:function(t){return e.props.onSendMergeRequest(t)},placeholder:"Team Name",buttonChildren:"Request Merge"}):React.createElement("div",null,"You are unable to merge with other teams on this competition.")),React.createElement("div",{className:"competition-myteam__invite-wrapper"},React.createElement("label",{className:"competition-myteam__section-title",htmlFor:"competition-invite-request"},React.createElement("span",{className:"fa fa-plus-square competition-myteam__section-title-icon"}),"Invite someone to this competition"),this.props.team.canCreateInvitation?React.createElement(l.InputGroupInline,{clearAfterSubmit:!0,inputId:"competition-invite-request",isSubmitting:this.props.isSendingInviteRequest,onSubmit:function(t){return e.props.onSendInviteRequest(t)},placeholder:"Email Address",buttonChildren:"Invite"}):React.createElement("div",null,"You are unable to invite other members to this competition.")))),React.createElement(r.ContentBox,{title:"Pending Merge Requests"},this.props.teamOutboundInvites.length?React.createElement("div",{className:"competition-myteam__invite-container"},React.createElement("p",{className:"competition-myteam__invite-intro"},"You have proposed a merge with ",React.createElement(c.Pluralize,{count:this.props.teamOutboundInvites.length,word:"team"}),":"),React.createElement("div",{className:"competition-myteam__invites"},this.props.teamOutboundInvites.map(function(t,a){var n=t.members.filter(function(e){return 1==e.isTeamLeader})[0];return React.createElement("div",{className:"competition-myteam__invite",key:"outbound-invite-"+a},React.createElement("div",{className:"competition-myteam__invite-td-members"},t.members.map(function(e,t){return React.createElement("div",{className:"competition-myteam__invite-td-member",key:"outbound-invite-"+a+"-"+t},React.createElement(s.Avatar,{tier:e.tier,thumbnailUrl:e.avatarUrl,displayName:e.displayName,userUrl:e.userUrl}))})),React.createElement("div",{className:"competition-myteam__invite-td-info"},React.createElement("a",{href:"#"},t.name),n?React.createElement("span",null,"led by",React.createElement("a",{href:n.userUrl},n.displayName)):null),React.createElement("div",{className:"competition-myteam__invite-td-action"},React.createElement("div",null,React.createElement("div",{className:"competition-myteam__invite-action-wrapper"},e.props.isRejectingInvite&&e.props.isRejectingInvite&&e.props.rejectedInviteCode==t.invitationCode?React.createElement("div",{className:"competition-myteam__action-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null,React.createElement("a",{className:"competition-myteam__invite-td-reject",onClick:function(){return e.props.onRejectInvite(t.invitationCode)}},"Revoke Invite")))))}))):React.createElement("div",{className:"competition-myteam__invite-container"},React.createElement("p",{className:"competition-myteam__invite-intro"},"You currently have no pending merge requests."))),React.createElement(r.ContentBox,{title:"Teams Proposing a Merge"},this.props.teamInboundInvites.length?React.createElement("div",{className:"competition-myteam__invite-container"},React.createElement("p",{className:"competition-myteam__invite-intro"},"You have outstanding merge requests from ",React.createElement(c.Pluralize,{count:this.props.teamInboundInvites.length,word:"team"}),":"),React.createElement("div",{className:"competition-myteam__invites"},this.props.teamInboundInvites.map(function(t,a){var n=t.members.filter(function(e){return 1==e.isTeamLeader})[0];return React.createElement("div",{className:"competition-myteam__invite",key:"outbound-invite-"+a},React.createElement("div",{className:"competition-myteam__invite-td-members"},t.members.map(function(e,t){return React.createElement("div",{className:"competition-myteam__invite-td-member",key:"outbound-invite-"+a+"-"+t},React.createElement(s.Avatar,{tier:e.tier,thumbnailUrl:e.avatarUrl,displayName:e.displayName,userUrl:e.userUrl}))})),React.createElement("div",{className:"competition-myteam__invite-td-info"},React.createElement("a",{className:"competition-myteam__invite-team-link",href:"#"},t.name),n?React.createElement("span",null,"led by ",React.createElement("a",{href:n.userUrl},n.displayName)):null),React.createElement("div",{className:"competition-myteam__invite-td-action"},React.createElement("div",null,React.createElement("div",{className:"competition-myteam__invite-accept-wrapper"},e.props.isAcceptingInvite&&e.props.isAcceptingInvite&&e.props.acceptedInviteCode==t.invitationCode?React.createElement("div",{className:"competition-myteam__action-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null,React.createElement(i.ButtonAutoWidth,{onClick:function(){return e.props.onAcceptInvite(t.invitationCode)},text:"Join this Team"}))),React.createElement("div",null,React.createElement("div",{className:"competition-myteam__invite-action-wrapper"},e.props.isRejectingInvite&&e.props.isRejectingInvite&&e.props.rejectedInviteCode==t.invitationCode?React.createElement("div",{className:"competition-myteam__action-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null,React.createElement("a",{className:"competition-myteam__invite-td-reject",onClick:function(){return e.props.onRejectInvite(t.invitationCode)}},"Reject Invite")))))}))):React.createElement("div",{className:"competition-myteam__invite-container"},React.createElement("p",{className:"competition-myteam__invite-intro"},"There are currently no teams proposing a merge with yours."))))},t}(React.Component);t.CompetitionMyTeam=p},function(e,t){"use strict";var a=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.handleSubmit=function(e){e.preventDefault(),this.props.onSubmit(this._input.value),this.props.clearAfterSubmit&&(this._input.value="")},t.prototype.render=function(){var e=this;return React.createElement("form",{className:"input-group-inline",onSubmit:function(t){return e.handleSubmit(t)}},this.props.label?React.createElement("label",{className:"input-group-inline__label",htmlFor:this.props.inputId?this.props.inputId:null},this.props.label):null,React.createElement("input",{className:this.props.inputClassName?this.props.inputClassName:"input-group-inline__input",id:this.props.inputId?this.props.inputId:null,onChange:this.props.onInputChange?function(t){return e.props.onInputChange(t)}:function(){},defaultValue:this.props.defaultValue?this.props.defaultValue:null,placeholder:this.props.placeholder?this.props.placeholder:null,ref:function(t){return e._input=t}}),React.createElement("button",{className:this.props.buttonClassName?this.props.buttonClassName:"input-group-inline__button",disabled:this.props.buttonIsDisabled,type:"submit"},this.props.buttonChildren),this.props.isSubmitting?React.createElement("div",{className:"input-group-inline__submitting-icon"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})):null)},t}(React.Component);t.InputGroupInline=n},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(300),i=a(271),r=function(e){function t(t){var a=e.call(this,t)||this;return a.onCompetitionTitleChanged=function(e){a.setState({competitionNewTitle:e,competitionNewSlug:i.slugify(e)})},a.onCompetitionSlugChanged=function(e){a.setState({competitionNewSlug:e})},a.onCompetitionSubtitleChanged=function(e){a.setState({competitionNewSubtitle:e})},a}return n(t,e),t.prototype.render=function(){var e={onCompetitionTitleChanged:this.onCompetitionTitleChanged,onCompetitionSubtitleChanged:this.onCompetitionSubtitleChanged};return React.createElement(s.CompetitionCreator,$.extend({},this.props,e,this.state))},t}(React.Component);t.CompetitionCreatorContainer=r},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(46),i=a(5),r=a(153),o=a(155),l=a(158),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.renderImageUploaderModal=function(){var e=!1,t=function(){},a=function(){},n=React.createElement("h1",null,"I will be the image uploader!");return React.createElement(o.Modal,{buttonClassName:"competition-creator__modal-button",modalContent:n,modalIsShown:e,onShow:t,onClose:a})},t.prototype.render=function(){var e=this;return React.createElement("div",{className:"competition-creator"},React.createElement(l.PageHeader,{backgroundClass:"competition-creator__header"},React.createElement(l.PageHeaderTopRowSafe,null,React.createElement("div",{className:"competition-creator__header-top"},React.createElement("a",{className:"competition-creator__add-images-link",onClick:function(){return console.log("opening modal")}},React.createElement("span",{className:"fa fa-camera"})," Add Image"),React.createElement(r.InlineTextEditor,{className:"competition-creator__header-title-input",onChangeCallback:function(t){return e.props.onCompetitionTitleChanged(t)},placeholder:"Enter a descriptive title",value:this.props.competitionNewTitle}),React.createElement(r.InlineTextEditor,{className:"competition-creator__header-subtitle-input",onChangeCallback:function(t){return e.props.onCompetitionSubtitleChanged(t)},placeholder:"Enter a subtitle explaining what competitors do"}),this.renderImageUploaderModal()))),React.createElement(i.ContentBox,{title:"Competition Setup"},React.createElement("div",{className:"competition-creator__section"},React.createElement("div",{className:"competition-creator__field-group"},React.createElement("h2",{className:"competition-creator__field-label"},"Competition URL"),React.createElement("div",{className:"competition-creator__field-control"},React.createElement("span",{className:"competition-creator__field-inline-label"},"http://www.kaggle.com/c/"),React.createElement(r.InlineTextEditor,{className:"competition-creator__field-control-input",onChangeCallback:function(t){return e.props.onCompetitionSlugChanged(t)},placeholder:this.props.competitionNewSlug,value:this.props.competitionNewSlug}))),React.createElement("div",{className:"competition-creator__field-group"},React.createElement("h2",{className:"competition-creator__field-label"},"Competition Entry"),React.createElement("div",{className:"competition-creator__field-control"},React.createElement("p",{className:"competition-creator__field-note"},"In Public competitions, anyone can download data and submit entries. Limited competitions are restricted by email domain or a list of invitees."))),React.createElement("div",{className:"competition-creator__field-group"},React.createElement("h2",{className:"competition-creator__field-label"},"Allowed domains"),React.createElement("div",null,React.createElement("div",{className:"competition-creator__field-control"},React.createElement("span",{className:"competition-creator__field-inline-label"},"email@"),React.createElement(r.InlineTextEditor,{className:"competition-creator__field-control-input",onChangeCallback:function(e){return console.log(e)},placeholder:"university.edu"})),React.createElement("p",{className:"competition-creator__field-note"},"Separate with comma, or leave blank if this isn't required. If you'd like to use a specific invite list, you can do this later via the invites tab."))))),React.createElement(i.ContentBox,{title:"Organization/User"},React.createElement("div",{className:"competition-creator__section"},React.createElement("div",{className:"competition-creator__field-group"},React.createElement("h2",{className:"competition-creator__field-label"},"Related Oranization/User"),React.createElement("div",null,React.createElement("div",{className:"competition-creator__field-list"},React.createElement("p",{className:"competition-creator__field-note"},"Choose an organization or user account to post this competition under."),React.createElement("ul",{className:"competition-creator__user-list"},React.createElement("li",{className:"competition-creator__user-list-item"},React.createElement("img",{className:"competition-creator__user-image",src:""}),React.createElement("p",{className:"competition-creator__user-name"},"Test Organization")),React.createElement("li",{className:"competition-creator__user-list-item"},React.createElement("img",{className:"competition-creator__user-image",src:""}),React.createElement("p",{className:"competition-creator__user-name"},"Current Display Name")),React.createElement("li",{className:"competition-creator__add-new-org"},React.createElement("div",{className:"competition-creator__new-org-icon"},React.createElement("span",{className:"fa fa-plus"})),React.createElement("a",{className:"competition-creator__new-org-text"},"Add a new Organization...")))))))),React.createElement("div",{className:"competition-creator__save-button-wrapper"},React.createElement("div",{className:"competition-creator__save-button"},React.createElement(s.ButtonAutoWidth,{text:"Save Competition"}),React.createElement("div",{className:"competition-creator__save-spinner"},React.createElement("span",{className:"fa fa-spin fa-circle-o-notch"})))))},t}(React.Component);t.CompetitionCreator=c},function(e,t){"use strict";function a(e){return e?new Date(e.toString()).getTime():null}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(303),i=a(312).createFilter,r=a(40),o=function(e){function t(t){var a=e.call(this,t)||this;return a.keysToFilters=["docs.title","docs.description"],a.allComponents=[],Object.keys(r).map(function(e){a.allComponents.push(r[e])}),a.state={menuIsStuck:!1,searchTerm:""},a}return n(t,e),t.prototype.onScroll=function(e){this.setState({menuIsStuck:0>=e})},t.prototype.onUpdateSearchTerm=function(e){this.setState({searchTerm:e})},t.prototype.render=function(){var e=this.allComponents.filter(function(e){return e.docs}),t={components:e.filter(i(this.state.searchTerm,this.keysToFilters)),onScroll:this.onScroll.bind(this),onUpdateSearchTerm:this.onUpdateSearchTerm.bind(this)};return React.createElement(s.ReactComponents,Object.assign({},t,this.state))},t}(React.Component);t.ReactComponentsContainer=o},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(304),r=a(312)["default"],o=a(32),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onScroll=function(){t.props.onScroll(t.reactComponents.getBoundingClientRect().top)},t}return n(t,e),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!1),window.setTimeout(this.onScroll)},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.onScroll,!1)},t.prototype.renderComponentNav=function(e){return React.createElement("nav",{className:"react-components__nav"},e.map(function(e,t){var a=e.docs.title;return React.createElement(o.BlockLink,{className:"react-components__nav-item",href:"#"+a.replace(/\s+/g,"-"),key:t},a)}))},t.prototype.render=function(){var e=this,t=this.props,a=t.components,n=t.menuIsStuck;return React.createElement("div",{className:"react-components",ref:function(t){e.reactComponents=t}},n?React.createElement("div",{className:"react-components__menu"}):null,React.createElement("div",{className:n?"react-components__menu--stuck":"react-components__menu"},React.createElement("h1",{className:"react-components__page-title"},"React Components"),React.createElement(r,{className:"react-components__search",onChange:this.props.onUpdateSearchTerm}),this.renderComponentNav(a)),React.createElement("div",{className:"react-components__style-guide-list"},Object.keys(a).map(function(e,t){var n=a[e];return n.docs&&n.docs.examples?React.createElement("div",{className:"react-components__style-guide-item-wrapper",key:t},React.createElement(i.ReactDocItem,s({expanderInactiveText:"Expand Code Snippet",expanderActiveText:"Collapse Code Snippet",markupExpandedByDefault:!1,componentClass:"react-components__style-guide-item",descriptionClass:"react-components__style-guide-description",headingClass:"react-components__style-guide-title",exampleClass:"react-components__style-guide-example"},n.docs,{title:n.docs.title||n.name}))):null})))},t}(React.Component);t.ReactComponents=l},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;n>a;a++){t=arguments[a];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},i=a(305),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement(i,s({},this.props),this.props.examples)},t}(React.Component);t.ReactDocItem=r},,,,,,,,,,,function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(316),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement(s.AdminHome,{})},t}(React.Component);t.AdminHomeContainer=i},function(e,t,a){"use strict";var n=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},s=a(46),i=a(5),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return React.createElement("div",{className:"admin-home"},React.createElement(i.ContentBox,{titleBarRightSide:React.createElement("a",{className:"admin-home__text-link",href:"/admin"},"Old admin ",React.createElement("span",{className:"fa fa-angle-double-right"})),title:"Welcome to the New Admin Home!"},React.createElement("div",{className:"admin-home__content"},React.createElement(s.ButtonAutoWidth,{href:"/admin/react",text:"React Component Docs"}))))},t}(React.Component);t.AdminHome=r}]);